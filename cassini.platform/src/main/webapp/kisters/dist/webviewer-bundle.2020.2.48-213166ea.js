this.__ws_debug=function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=80)}([function(e,t,n){"use strict";function i(e){t.draggedPane=e}function a(e){var t=he[e],n=!1;if(0===t)switch(e){case 0:n=0===he[1];break;case 1:n=0===he[0];break;case 2:n=0===he[3];break;case 3:n=0===he[2]}V(n),he[e]++}function o(e){var t=he[e],n=!1;if(1===t)switch(e){case 0:n=0===he[1];break;case 1:n=0===he[0];break;case 2:n=0===he[3];break;case 3:n=0===he[2]}V(n),he[e]--}function s(e){t.progressContainer=new ue.ProgressContainer(e,vsClient)}function r(e){var t=ie.settings.lang;return _lang_data[e]&&_lang_data[e][t]?_lang_data[e][t]:_custom_lang_data[e]&&_custom_lang_data[e][t]?_custom_lang_data[e][t]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e}function l(e,t){var n;n=t?d(e.shift()):p(e.shift()),n&&e.length>0?vsClient.once("@NativeLoad",function(t){l(e,!1)}):e.length>0&&l(e,!1)}function c(e,t,n){void 0===n&&(n=!1);try{_NativeLoadingModal&&(Be=_NativeLoadingModal)}catch(e){Be=!1}var i=e.toLowerCase().split("."),a=localStorage.getItem("nativeLoadingSettings"),o={rememberMe:!1};return null!==a&&(o=JSON.parse(a)),!(-1!==["3dvs","vsxml","dxf","dwf","dwg","mil","txt","xml","cg4","catdrawing","cgm","drw","ger"," tiff","bmp","webp","906","907","gbr","cs-ger","ss-ger","phd","gif","plt","jpeg","jpg","jp2","xls","xlsx","ppt","pptx","doc","docx","dgn","odg","odp","ods","odt","png","dft","slddrw","tif"].indexOf(i[i.length-1])||!o||!0===o.rememberMe&&!n||!0!==Be||(Le?(Le.setFile(e),Le.setCallback(t)):Le=new re.NativeLoadingModal(vsClient,e,t,n),Le.show(),0))}function d(e){oe.appStates.fileName=e;var n=c(e,vsClient.OpenFile.bind(vsClient));return n||(X(vsClient),vsClient.OpenFile(e),t.canvasStack.setTabTitle(e.split("/")[e.split("/").length-1])),n}function p(e){var t=c(e,vsClient.ImportFile.bind(vsClient));return t||vsClient.ImportFile(e),t}function u(e){vsClient.SaveFile(e)}function h(e){try{if(-1!==_DisabledPanes.indexOf(e))return{paneId:e,isVisible:!1}}catch(e){}if(-1!==oe.appStates.popoutPanes.indexOf(e))return{paneId:e,isVisible:!1};for(var n,i=3,a=oe.appStates.panes.length,o=!0,s=0;s<a;s++)oe.appStates.panes[s].paneId===e&&(oe.appStates.panes[s].visible=!0,n=oe.appStates.panes[s],i=oe.appStates.panes[s].pos,o=!1);o&&(n={paneId:e,pos:3,minimized:!1,visible:!0},oe.appStates.panes.push(n)),localStorage.setItem("panePositions",JSON.stringify(oe.appStates.panes));var r=t.paneConfigs[e].pane;if(n.minimized)switch(i){case 1:r.setStack(t.leftUpperStack),t.leftMinimizedPaneStack.registerPane(r,e);break;case 2:r.setStack(t.leftLowerStack),t.leftMinimizedPaneStack.registerPane(r,e);break;case 3:r.setStack(t.rightUpperStack),t.rightMinimizedPaneStack.registerPane(r,e);case 4:r.setStack(t.rightLowerStack),t.rightMinimizedPaneStack.registerPane(r,e)}else switch(i){case 1:!t.leftUpperStack.isVisible&&t.leftLowerStack.isVisible?(t.leftUpperStack.addPane(r,e),t.leftUpperStack.resize(t.leftUpperStack.height,!1),t.leftLowerStack.resize(t.leftLowerStack.height,!1)):t.leftLowerStack.isVisible?t.leftUpperStack.addPane(r,e):(t.leftUpperStack.addPane(r,e),t.leftUpperStack.resize("100%",!1));break;case 2:!t.leftLowerStack.isVisible&&t.leftUpperStack.isVisible?(t.leftLowerStack.addPane(r,e),t.leftUpperStack.resize(t.leftUpperStack.height,!1),t.leftLowerStack.resize(t.leftLowerStack.height,!1)):t.leftUpperStack.isVisible?t.leftLowerStack.addPane(r,e):(t.leftLowerStack.addPane(r,e),t.leftLowerStack.resize("100%",!1));break;case 3:!t.rightUpperStack.isVisible&&t.rightLowerStack.isVisible?(t.rightUpperStack.addPane(r,e),t.rightUpperStack.resize(t.rightUpperStack.height,!1),t.rightLowerStack.resize(t.rightLowerStack.height,!1)):t.rightLowerStack.isVisible?t.rightUpperStack.addPane(r,e):(t.rightUpperStack.addPane(r,e),t.rightUpperStack.resize("100%",!1));break;case 4:!t.rightLowerStack.isVisible&&t.rightUpperStack.isVisible?(t.rightLowerStack.addPane(r,e),t.rightUpperStack.resize(t.rightUpperStack.height,!1),t.rightLowerStack.resize(t.rightLowerStack.height,!1)):t.rightUpperStack.isVisible?t.rightLowerStack.addPane(r,e):(t.rightLowerStack.addPane(r,e),t.rightLowerStack.resize("100%",!1))}}function m(e){vsClient.command.executeXML('<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>'),t.vsRibbon.classes.Interaction.forEach(function(e){e.applyHighlight(!1)});for(var n=oe.appStates.popoutPanes.length,i=0;i<n;i++)oe.appStates.popedOutWindows[i].close();if(e){oe.appStates.panes=[{paneId:"wv-modeltree",pos:1,minimized:!1,visible:!0},{paneId:"wv-views",pos:1,minimized:!1,visible:!0},{paneId:"wv-properties",pos:2,minimized:!1,visible:!0}];try{oe.appStates.panes=JSON.parse(JSON.stringify(_InitialPanes))}catch(e){}localStorage.removeItem("panePositions"),localStorage.setItem("panePositions",JSON.stringify(oe.appStates.panes)),localStorage.removeItem("WVLeftPaneStackHeight"),localStorage.removeItem("WVLeftPaneStackWidth"),localStorage.removeItem("WVRightPaneStackHeight"),localStorage.removeItem("WVRightPaneStackWidth"),localStorage.removeItem("WVleftMinimizedPaneWidth"),localStorage.removeItem("WVrightMinimizedPaneWidth"),t.leftWrapper.style.width="20%",t.rightWrapper.style.width="20%",Ee=20,be=20,we=50,Te=50,ve=0,ge=0,_e=0,Ie=0}oe.appStates.interactionMode=[],oe.appStates.lastInteractionModes=[],t.leftLowerStack.reset(e),t.leftUpperStack.reset(e),t.rightLowerStack.reset(e),t.rightUpperStack.reset(e);for(var a=oe.appStates.panes.length,i=0;i<a;i++){var o=oe.appStates.panes[i];-1!==oe.appStates.defaultPanes.indexOf(o.paneId)&&o.visible&&-1===oe.appStates.popoutPanes.indexOf(o.paneId)&&h(o.paneId),"wv-settings"===o.paneId&&o.visible&&-1===oe.appStates.popoutPanes.indexOf(o.paneId)&&h(o.paneId)}V(),$("#wv-modeltree-pane-tab").click()}function f(){t.settingsPane=new se.SettingsPane("wv-settings","ID_RIBBON_SETTINGS"),t.paneConfigs["wv-settings"]={pane:t.settingsPane},t.modeltreePane=new se.Modeltree("wv-modeltree","ID_RIBBON_MODEL_TREE"),t.paneConfigs["wv-modeltree"]={pane:t.modeltreePane},t.propertiesPane=new se.PropertyPane("wv-properties","ID_RIBBON_PROPERTIES"),t.paneConfigs["wv-properties"]={pane:t.propertiesPane},t.viewPane=new se.ViewPane("wv-views","ID_RIBBON_VIEWS"),t.paneConfigs["wv-views"]={pane:t.viewPane},t.selectionsPane=new se.SelectionsPane("wv-selections","ID_SELECTIONS_WND"),t.paneConfigs["wv-selections"]={pane:t.selectionsPane},t.measurementPane=new se.MeasurementPane("wv-measurement","ID_RIBBON_MEASUREMENT"),t.paneConfigs["wv-measurement"]={pane:t.measurementPane},t.transformPane=new se.TransformPane("wv-transform","ID_RIBBON_TRANSFORM"),t.paneConfigs["wv-transform"]={pane:t.transformPane},t.commandPane=new se.CommandPane("wv-command","Commands"),t.paneConfigs["wv-command"]={pane:t.commandPane},t.draftAnglePane=new se.DraftAnglePane("wv-draftangle","ID_RIBBON_DRAFT_ANGLE"),t.paneConfigs["wv-draftangle"]={pane:t.draftAnglePane},t.markupPane=new se.MarkupPane("wv-markup","ID_RIBBON_3D_MARKUP"),t.paneConfigs["wv-markup"]={pane:t.markupPane},t.markupPane_Reduced=new se.MarkupPane_Reduced("wv-markup-reduced","ID_RIBBON_3D_MARKUP"),t.paneConfigs["wv-markup-reduced"]={pane:t.markupPane_Reduced},t.sectionPane=new se.SectionPane("wv-section","ID_RIBBON_SECTION"),t.paneConfigs["wv-section"]={pane:t.sectionPane},t.quickComparePane=new se.QuickComparePane("wv-quickcompare","ID_RIBBON_COMPARE"),t.paneConfigs["wv-quickcompare"]={pane:t.quickComparePane},t.projectedAreaPane=new se.ProjectedAreaPane("wv-projectedarea","ID_RIBBON_PROJECTED_AREA"),t.paneConfigs["wv-projectedarea"]={pane:t.projectedAreaPane},t.exactComparePane=new se.ExactComparePane("wv-exactcompare","ID_RIBBON_BREP_PART"),t.paneConfigs["wv-exactcompare"]={pane:t.exactComparePane},t.mirrorPane=new se.MirrorPane("wv-mirror","ID_RIBBON_MIRROR"),t.paneConfigs["wv-mirror"]={pane:t.mirrorPane},t.filterPane=new se.FilterPane("wv-filter","ID_RIBBON_SEARCH"),t.paneConfigs["wv-filter"]={pane:t.filterPane},t.flyThroughPane=new se.FlyThroughPane("wv-flythrough","ID_RIBBON_FLYTHROUGH"),t.paneConfigs["wv-flythrough"]={pane:t.flyThroughPane},t.distortionPane=new se.DistortionPane("wv-distortion","ID_RIBBON_DISTORT"),t.paneConfigs["wv-distortion"]={pane:t.distortionPane},t.visibilityTestPane=new se.VisibilityTestPane("wv-visibilitytest","ID_VISIBILITY_TEST"),t.paneConfigs["wv-visibilitytest"]={pane:t.visibilityTestPane},t.wallthicknessPane=new se.WallthicknessPane("wv-wallthickness","ID_RIBBON_WALL_THICKNESS"),t.paneConfigs["wv-wallthickness"]={pane:t.wallthicknessPane},t.drillholePane=new se.DrillholePane("wv-drillhole","ID_DRILLHOLE_WND"),t.paneConfigs["wv-drillhole"]={pane:t.drillholePane},t.neutralAxisPane=new se.NeutralAxisPane("wv-neutralaxis","ID_RIBBON_NEUTRAL_AXIS"),t.paneConfigs["wv-neutralaxis"]={pane:t.neutralAxisPane},t.neighbourhoodSearchPane=new se.NeighbourhoodSearchPane("wv-neighbourhoodsearch","ID_NEIGHBOURHOOD_SEARCH_WND"),t.paneConfigs["wv-neighbourhoodsearch"]={pane:t.neighbourhoodSearchPane},t.bomPane=new se.BOMPane("wv-bom","ID_RIBBON_BOM"),t.paneConfigs["wv-bom"]={pane:t.bomPane},t.clashPane=new se.ClashPane("wv-clash","ID_RIBBON_CLASH_DETECTION"),t.paneConfigs["wv-clash"]={pane:t.clashPane},t.calloutPane=new se.CalloutPane("wv-callout","ID_CALLOUTS_WND"),t.paneConfigs["wv-callout"]={pane:t.calloutPane},t.textSearchPane=new se.TextSearchPane("wv-textsearch","ID_TEXT_SEARCH_WND"),t.paneConfigs["wv-textsearch"]={pane:t.textSearchPane},t.splitPane=new se.SplitPane("wv-split","ID_RIBBON_SPLIT"),t.paneConfigs["wv-split"]={pane:t.splitPane},t.explodePane=new se.ExplodePane("wv-explode","ID_RIBBON_EXPLODE"),t.paneConfigs["wv-explode"]={pane:t.explodePane},t.animationPane=new se.AnimationPane("wv-animation","ID_RIBBON_ANIMATION"),t.paneConfigs["wv-animation"]={pane:t.animationPane},t.geometryToolsPane=new se.GeometryToolsPane("wv-geometry-tools","ID_RIBBON_GEOMETRY_TOOLS"),t.paneConfigs["wv-geometry-tools"]={pane:t.geometryToolsPane},t.bandAnalysisPane=new se.BandAnalysisPane("wv-bandanalysis","ID_BAND_ANALYSIS_WND"),t.paneConfigs["wv-bandanalysis"]={pane:t.bandAnalysisPane}}function v(e,n,i){void 0===i&&(i=!0);var a=Math.max(n-Ne.offsetHeight,ie.settings.minHeight-Ne.offsetHeight);n===xe.clientHeight&&(a=n);var o=oe.appStates.fullScreenMode?xe.clientWidth:xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-4;xe.clientHeight;t.leftMinimizedPaneStack.isVisible&&(o-=20),t.rightMinimizedPaneStack.isVisible&&(o-=20),xe.style.height=a+"px",i&&vsClient.resize(o,a-24),t.leftWrapper.style.height="calc(100% - "+Ne.clientHeight+"px)",t.canvasWrapper.style.height="calc(100% - "+(Ne.clientHeight-1)+"px)",t.canvasWrapper.style.width=o+5+"px",t.rightWrapper.style.height="calc(100% - "+Ne.clientHeight+"px)",t.leftUpperStack.resize(void 0),t.leftLowerStack.resize(void 0),t.rightUpperStack.resize(void 0),t.rightLowerStack.resize(void 0)}function g(){var e=Math.min(window.innerWidth,document.documentElement.offsetWidth),n=Math.max(window.innerHeight,document.documentElement.offsetHeight);oe.appStates.ribbonWidth=e,oe.appStates.ribbonWidth=e,oe.appStates.ribbonWidth<600&&(oe.appStates.ribbonWidth=600),t.vsRibbon.render(),setTimeout(function(){v(e,n,!0)})}function C(e){var t=[],n=[],i=document.createElement("div");i.className="fullscreen-loading-wrapper",document.body.appendChild(i);var a=document.createElement("div");a.className="session-box",i.appendChild(a);var o=document.createElement("div");o.textContent="Restore sessions",a.appendChild(o);var s=document.createElement("div");s.className="session-select-all-row",s.textContent="Select all",a.appendChild(s);var r=document.createElement("i");r.className="fal fa-square session-select-all-icon",s.onclick=function(i){var a=$(r);t=a.hasClass("fa-square")?e.map(function(e){return e.Id}):[],a.toggleClass("fa-square"),a.toggleClass("fa-check-square"),n.forEach(function(e){var t=$(e);t.toggleClass("fa-square"),t.toggleClass("fa-check-square")})},s.appendChild(r),e.forEach(function(e,i){var o=document.createElement("div");o.className="session-row",e.Lifetime=parseInt(e.Lifetime)/6e4;var s=e.Lifetime>1?Math.round(e.Lifetime)+" minute(s)":"< 1 minute";o.textContent="Session "+(i+1)+", started "+s+" ago",o.id=e;var r=document.createElement("i");r.className="fal fa-square session-select-icon",o.onclick=function(n){$(r).toggleClass("fa-square"),$(r).toggleClass("fa-check-square"),-1===t.indexOf(e.Id)?t.push(e.Id):t.splice(t.indexOf(e.Id),1)},o.appendChild(r),n.push(r),a.appendChild(o)});var l=document.createElement("button");l.textContent="OK",l.className="session-continue-button",l.onclick=function(a){e.forEach(function(e){var n='<Request Type="CloseSessions">';-1===t.indexOf(e.Id)&&(n+="<Session>"+e.Id+"</Session>"),n+="</Request>",vsClient.command.executeXML(n)});var o=window.location.origin+window.location.pathname.replace("/index.html","/");t.forEach(function(e){window.open(o+"index.html?session="+e,"_blank")}),t=void 0,n=void 0,vsClient.connect(),oe.appStates.backendToken&&vsClient.SessionToken(oe.appStates.backendToken),$(i).remove()},a.appendChild(l)}function _(e){var t=document.createElement("div");t.className="toast",t.style.backgroundColor=e?"darkgreen":"darkred";var n=document.createElement("i");n.className=e?"far fa-check":"far fa-exclamation",t.appendChild(n),document.body.appendChild(t),setTimeout(function(){t.remove()},2e3)}function I(e){var t=["WARN_NO_STATE_CHANGE","ERR_SCENE_ID_NOT_FOUND","ERR_VIEW_ID_NOT_FOUND","ERR_ID_ALREADY_EXISTS"];try{_IgnoredErrors&&_IgnoredErrors.length>0&&(t=t.concat(_IgnoredErrors))}catch(e){}if(-1===t.indexOf(e.info)){var n=$(Oe);n.hide(),n.empty();var i=document.createElement("i");i.className="fa fa-times status-box-close-icon",i.onclick=function(e){n.hide()},Oe.appendChild(i);var a="status-message-wrapper",o=document.createElement("div");switch(e.type){case"Warning":a+=" status-type-info";break;case"Error":a+=" status-type-error";break;case"Progress":a+=" status-type-progress";break;case"SocketError":a+=" status-type-error";break;default:a+=" status-type-info"}o.className=a;var s=document.createElement("div");s.textContent=e.method,s.className="status-box-title",o.appendChild(s);var l=document.createElement("div");l.innerHTML=r(e.message).replace(/\\n/g,"\r"),l.className="status-box-code",o.appendChild(l),Oe.appendChild(o),n.show(),setTimeout(function(){"SocketError"!==e.type&&n.hide()},5e3)}}function S(e){return e.webkitFullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.fullscreenElement}function y(){var e=this;"18"!==localStorage.getItem("WVVersion")&&(localStorage.removeItem("panePositions"),localStorage.removeItem("WVColWidth"),localStorage.setItem("WVVersion","18"));try{oe.appStates.lockPanes=_PaneLock}catch(e){}$(document).on("mozfullscreenchange webkitfullscreenchange fullscreenchange",function(e){var n=$("#wv-ribbon-toggle-ribbon");(oe.appStates.fullScreenMode=!oe.appStates.fullScreenMode,S(document))?(t.canvasStack.maximize(),n.hasClass("fa-chevron-down")&&t.vsRibbon.toggleVisibility(!1,!0)):(t.canvasStack.minimize(),"true"===localStorage.getItem("WVRibbonVis")&&n.hasClass("fa-chevron-right")&&t.vsRibbon.toggleVisibility(!1,!0))}),Me=document.getElementById("wv-app"),Ne=document.getElementById("wv-ribbon"),this.uiBlocker=document.createElement("div"),this.uiBlocker.className="fullscreen-loading-wrapper",this.uiBlockerText=document.createElement("span"),this.uiBlockerText.className="fullscreen-loading-text",this.uiBlockerText.textContent="",this.uiBlocker.appendChild(this.uiBlockerText);var n=document.createElement("i");n.className="fullscreen-loading-icon fal fa-spinner-third fa-spin",this.uiBlocker.appendChild(n),this.blockUI(),vsClient.on("SendSessionReady",function(t){e.unblockUI(),$(Oe).hide()}),Oe=document.createElement("div"),Oe.className="status-box-wrapper",$(Oe).hide(),Me.appendChild(Oe),t.vsRibbon=new ae.VSRibbon(Ne),t.vsRibbon.initialize(),xe=document.getElementById("wv-dock"),xe.style.height=window.innerHeight-Ne.offsetHeight+"px",f(),window.onresize=g,"iPad"===navigator.platform&&navigator.userAgent.match("CriOS")&&(window.onorientationchange=function(){setTimeout(function(e){g(),V()},1e3)});try{for(var i=_InitialPanes.length,a=0;a<i;a++){var o=JSON.parse(JSON.stringify(_InitialPanes[a]));o.visible&&-1===oe.appStates.defaultPanes.indexOf(o.paneId)&&oe.appStates.defaultPanes.push(o.paneId)}oe.appStates.panes=JSON.parse(JSON.stringify(_InitialPanes))}catch(e){}var s=localStorage.getItem("panePositions");null===s||oe.appStates.lockPanes||(oe.appStates.panes=JSON.parse(s));var l=document.createElement("div");l.className="minimized-pane-panel",l.id="left-minimized-pane-panel",l.style.left="0",t.leftWrapper=document.createElement("div"),t.leftWrapper.className="pane-wrapper",t.leftWrapper.style.height="calc(100% - "+(Ne.clientHeight+8)+"px)",t.leftWrapper.id="left-pane-wrapper",t.leftUpperWrapper=document.createElement("div"),t.leftUpperWrapper.className="pane-upper-wrapper";var c=document.createElement("div");c.className="horizontal-pane-divider",t.leftLowerWrapper=document.createElement("div"),t.leftLowerWrapper.className="pane-lower-wrapper";var d=document.createElement("div");d.className="vertical-pane-divider",d.style.right="-5px",t.leftWrapper.appendChild(t.leftUpperWrapper),t.leftWrapper.appendChild(t.leftLowerWrapper),t.leftWrapper.appendChild(d),t.canvasWrapper=document.createElement("div"),t.canvasWrapper.className="canvas-wrapper",t.canvasWrapper.style.height="calc(100% - "+(Ne.clientHeight-1)+"px)",t.canvasStack=new ce.CanvasStack(t.canvasWrapper,vsClient),Pe=t.canvasStack.addScene("0");var p=document.createElement("div");p.className="vertical-pane-divider",p.style.left="-5px",p.style.borderRight="1px solid #c8c8c8",t.rightWrapper=document.createElement("div"),t.rightWrapper.className="pane-wrapper",t.rightWrapper.id="right-pane-wrapper",t.rightWrapper.style.right="0",t.rightWrapper.style.height="calc(100% - "+(Ne.clientHeight+8)+"px)",t.rightUpperWrapper=document.createElement("div"),t.rightUpperWrapper.className="pane-upper-wrapper";var u=document.createElement("div");u.className="horizontal-pane-divider",t.rightLowerWrapper=document.createElement("div"),t.rightLowerWrapper.className="pane-lower-wrapper",t.rightWrapper.appendChild(p),t.rightWrapper.appendChild(t.rightUpperWrapper),t.rightWrapper.appendChild(t.rightLowerWrapper);var m=document.createElement("div");m.className="minimized-pane-panel",m.id="right-minimized-pane-panel",m.style.right="0",xe.appendChild(l),xe.appendChild(t.leftWrapper),xe.appendChild(t.canvasWrapper),xe.appendChild(t.rightWrapper),xe.appendChild(m),t.leftMinimizedPaneStack=new de.MinimizedPaneStack("left"),t.rightMinimizedPaneStack=new de.MinimizedPaneStack("right"),t.leftUpperStack=new le.PaneStack(t.leftUpperWrapper,t.leftMinimizedPaneStack,0),t.leftLowerStack=new le.PaneStack(t.leftLowerWrapper,t.leftMinimizedPaneStack,1),t.rightUpperStack=new le.PaneStack(t.rightUpperWrapper,t.rightMinimizedPaneStack,2),t.rightLowerStack=new le.PaneStack(t.rightLowerWrapper,t.rightMinimizedPaneStack,3),t.leftUpperWrapper.appendChild(c),t.rightUpperWrapper.appendChild(u);var C=document.createElement("div");C.className="left-drop-target pane-drop",C.textContent="1",C.style.top="20%",xe.appendChild(C),$(C).hide();var _=document.createElement("div");_.className="left-drop-target pane-drop",_.textContent="2",_.style.bottom="20%",xe.appendChild(_),$(_).hide();var y=document.createElement("div");y.className="right-drop-target pane-drop",y.textContent="3",y.style.top="20%",xe.appendChild(y),$(y).hide();var E=document.createElement("div");E.className="right-drop-target pane-drop",E.textContent="4",E.style.bottom="20%",xe.appendChild(E),$(E).hide(),oe.appStates.lockPanes?(c.style.pointerEvents="none",d.style.pointerEvents="none",p.style.pointerEvents="none",u.style.pointerEvents="none"):(c.addEventListener("mousedown",w),d.addEventListener("mousedown",x),p.addEventListener("mousedown",D),u.addEventListener("mousedown",N),$(c).kendoTouch({dragstart:function(e){Se||(Ce=e.touch.y.location,ye=!0)},drag:function(e){if(ye){var n=e.touch.y.location-Ce,i=n/xe.clientHeight*100;t.leftUpperStack.resize(we+i+_e+"%",!1),t.leftLowerStack.resize(100-(we+i+_e)+"%",!1)}},dragend:function(e){if(ye){var t=(e.touch.y.location-Ce)/xe.clientHeight*100;localStorage.setItem("WVLeftPaneStackHeight",(we+t+_e).toString()),_e+=t,Ce=0,ye=!1}}}),$(d).kendoTouch({dragstart:function(e){Se||(me=e.touch.x.location,ye=!0)},drag:function(e){if(ye){var n=e.touch.x.location-me,i=n/xe.clientWidth*100;t.leftWrapper.style.width=Ee+i+ve+"%"}},dragend:function(e){if(ye){var n=(e.touch.x.location-me)/xe.clientWidth*100;localStorage.setItem("WVLeftPaneStackWidth",(Ee+n+ve).toString()),ve+=n,me=0;var i=0;t.leftMinimizedPaneStack.isVisible&&(i+=20),t.canvasWrapper.style.left="calc("+(Ee+ve)+"% + "+i+"px)",t.rightMinimizedPaneStack.isVisible&&(i+=20);var a=xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-i;v(a,xe.clientHeight),t.canvasWrapper.style.width=a+"px",ye=!1}}}),$(p).kendoTouch({dragstart:function(e){Se||(fe=e.touch.x.location,ye=!0)},drag:function(e){if(ye){var n=fe-e.touch.x.location,i=n/xe.clientWidth*100;t.rightWrapper.style.width=be+i+ge+"%"}},dragend:function(e){if(ye){var n=(fe-e.touch.x.location)/xe.clientWidth*100;localStorage.setItem("WVRightPaneStackWidth",(be+n+ge).toString()),ge+=n,fe=0;var i=0;t.leftMinimizedPaneStack.isVisible&&(i+=20),t.rightMinimizedPaneStack.isVisible&&(i+=20);v(xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-4-i,xe.clientHeight),ye=!1}}}),$(u).kendoTouch({dragstart:function(e){Se||(fe=e.touch.y.location,ye=!0)},drag:function(e){if(ye){var n=e.touch.y.location-fe,i=n/xe.clientHeight*100;t.rightUpperStack.resize(Te+i+Ie+"%",!1),t.rightLowerStack.resize(100-(Te+i+Ie)+"%",!1)}},dragend:function(e){if(ye){var t=(e.touch.y.location-fe)/xe.clientHeight*100;localStorage.setItem("WVRightPaneStackHeight",(Te+t+Ie).toString()),Ie+=t,fe=0,ye=!1}}}),C.ondrop=function(e){$(t.leftWrapper).show(),A(e,1)},C.ondragover=function(e){e.preventDefault(),$(C).addClass("allow-pane-drop")},C.ondragleave=function(e){e.preventDefault(),$(C).removeClass("allow-pane-drop")},_.ondrop=function(e){$(t.leftWrapper).show(),A(e,2)},_.ondragover=function(e){e.preventDefault(),$(_).addClass("allow-pane-drop")},_.ondragleave=function(e){e.preventDefault(),$(_).removeClass("allow-pane-drop")},y.ondrop=function(e){$(t.rightWrapper).show(),A(e,3)},y.ondragover=function(e){e.preventDefault(),$(y).addClass("allow-pane-drop")},y.ondragleave=function(e){e.preventDefault(),$(y).removeClass("allow-pane-drop")},E.ondrop=function(e){$(t.rightWrapper).show(),A(e,4)},E.ondragover=function(e){e.preventDefault(),$(E).addClass("allow-pane-drop")},E.ondragleave=function(e){e.preventDefault(),$(E).removeClass("allow-pane-drop")});for(var b=(xe.clientWidth,t.leftWrapper.clientWidth,t.rightWrapper.clientWidth,xe.clientHeight,oe.appStates.panes.length),a=0;a<b;a++){var o=oe.appStates.panes[a],T=pe.findPaneButton(o.paneId);-1!==oe.appStates.defaultPanes.indexOf(o.paneId)&&o.visible&&-1===oe.appStates.popoutPanes.indexOf(o.paneId)?(h(o.paneId),T&&T.applyHighlight(!0)):"wv-settings"===o.paneId&&o.visible&&-1===oe.appStates.popoutPanes.indexOf(o.paneId)?(h(o.paneId),T&&T.applyHighlight(!0)):oe.appStates.panes[a].visible=!1}if(localStorage.setItem("panePositions",JSON.stringify(oe.appStates.panes)),null!==localStorage.getItem("WVLeftPaneStackWidth")&&(Ee=parseFloat(localStorage.getItem("WVLeftPaneStackWidth")),t.leftWrapper.style.width=Ee+"%"),null!==localStorage.getItem("WVRightPaneStackWidth")&&(be=parseFloat(localStorage.getItem("WVRightPaneStackWidth")),t.rightWrapper.style.width=be+"%"),null!==localStorage.getItem("WVLeftPaneStackHeight")){var M=parseFloat(localStorage.getItem("WVLeftPaneStackHeight"));we=M,t.leftUpperStack.resize(M+"%"),t.leftLowerStack.resize(100-M+"%")}if(null!==localStorage.getItem("WVRightPaneStackHeight")){var M=parseFloat(localStorage.getItem("WVRightPaneStackHeight"));Te=M,t.rightUpperStack.resize(M+"%"),t.rightLowerStack.resize(100-M+"%")}return V(),$("#wv-modeltree-pane-tab").click(),$(Pe).kendoTouch({minHold:400,hold:function(e){-1===oe.appStates.interactionMode.indexOf("Flythrough")&&(vsClient.vsCanvas.rightClickTimeStamp=-1)}}),Pe.addEventListener("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.rightClickTimeStamp&&(e.timeStamp-vsClient.vsCanvas.rightClickTimeStamp<200||-1===vsClient.vsCanvas.rightClickTimeStamp)&&vsClient.vsCanvas.createContextMenu(e)}),vsClient.on("ShowMessageBox",function(e){try{if(_ShowErrorAlerts){I({code:parseInt(e.ErrorCode),info:e.ErrorInfo,method:e.Identifier,message:r("ID_"+e.ErrorInfo),type:e.Type[1]})}}catch(e){}}),Pe}function E(e){this.uiBlockerText.textContent=void 0!==e?e:"",Me.contains(this.uiBlocker)||Me.appendChild(this.uiBlocker)}function b(){Me&&Me.contains(this.uiBlocker)&&Me.removeChild(this.uiBlocker)}function w(e){ye||(e.preventDefault(),Ce=e.pageY,Se=!0,document.addEventListener("mousemove",T),document.addEventListener("mouseup",M))}function T(e){if(Se){var n=e.pageY-Ce,i=n/xe.clientHeight*100;t.leftUpperStack.resize(we+i+_e+"%",!1),t.leftLowerStack.resize(100-(we+i+_e)+"%",!1)}}function M(e){if(Se){var t=(e.pageY-Ce)/xe.clientHeight*100;localStorage.setItem("WVLeftPaneStackHeight",(we+t+_e).toString()),_e+=t,Ce=0,Se=!1,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M)}}function N(e){ye||(e.preventDefault(),fe=e.pageY,Se=!0,document.addEventListener("mousemove",O),document.addEventListener("mouseup",P))}function O(e){if(Se){var n=e.pageY-fe,i=n/xe.clientHeight*100;t.rightUpperStack.resize(Te+i+Ie+"%",!1),t.rightLowerStack.resize(100-(Te+i+Ie)+"%",!1)}}function P(e){if(Se){var t=(e.pageY-fe)/xe.clientHeight*100;localStorage.setItem("WVRightPaneStackHeight",(Te+t+Ie).toString()),Ie+=t,fe=0,Se=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",P)}}function x(e){ye||(e.preventDefault(),me=e.pageX,Se=!0,document.addEventListener("mousemove",B),document.addEventListener("mouseup",L))}function B(e){if(Se){var n=e.pageX-me,i=n/xe.clientWidth*100;t.leftWrapper.style.width=Ee+i+ve+"%"}}function L(e){if(Se){var n=(e.pageX-me)/xe.clientWidth*100;localStorage.setItem("WVLeftPaneStackWidth",(Ee+n+ve).toString()),ve+=n,me=0,document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",L);var i=0;t.leftMinimizedPaneStack.isVisible&&(i+=20),t.canvasWrapper.style.left="calc("+(Ee+ve)+"% + "+i+"px)",t.rightMinimizedPaneStack.isVisible&&(i+=20);var a=xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-i,o=xe.clientHeight;Se=!1,v(a,o),t.canvasWrapper.style.width=a+"px"}}function D(e){ye||(e.preventDefault(),fe=e.pageX,Se=!0,document.addEventListener("mousemove",k),document.addEventListener("mouseup",R))}function k(e){if(Se){var n=fe-e.pageX,i=n/xe.clientWidth*100;t.rightWrapper.style.width=be+i+ge+"%"}}function R(e){if(Se){var n=(fe-e.pageX)/xe.clientWidth*100;localStorage.setItem("WVRightPaneStackWidth",(be+n+ge).toString()),ge+=n,fe=0,document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",R);var i=0;t.leftMinimizedPaneStack.isVisible&&(i+=20),t.rightMinimizedPaneStack.isVisible&&(i+=20);var a=xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-i,o=xe.clientHeight;Se=!1,t.canvasWrapper.style.width=a+"px",v(a,o)}}function A(e,n){e.preventDefault();for(var i=oe.appStates.panes.length,a=0;a<i;a++)if(oe.appStates.panes[a].paneId===t.draggedPane){if(oe.appStates.panes[a].pos===n){W(t.draggedPane);continue}oe.appStates.panes[a].pos=n}}function W(e,n){void 0===n&&(n=!1);for(var i=oe.appStates.panes.length,a=0;a<i;a++)if(oe.appStates.panes[a].paneId===e){var o=oe.appStates.panes[a];if(o.visible)switch(o.pos){case 1:t.leftUpperStack.closePaneById(o.paneId,o.minimized,n);break;case 2:t.leftLowerStack.closePaneById(o.paneId,o.minimized,n);break;case 3:t.rightUpperStack.closePaneById(o.paneId,o.minimized,n);break;case 4:t.rightLowerStack.closePaneById(o.paneId,o.minimized,n)}}}function V(e){void 0===e&&(e=!1);var n=0;t.leftMinimizedPaneStack.isVisible&&(n+=20),t.canvasWrapper.style.left="calc("+(Ee+ve)+"% + "+n+"px)",!t.leftUpperStack.isVisible&&t.leftLowerStack.isVisible?t.leftLowerStack.resize("100%",!1):t.leftUpperStack.isVisible&&!t.leftLowerStack.isVisible&&t.leftUpperStack.resize("100%",!1),!t.rightUpperStack.isVisible&&t.rightLowerStack.isVisible?t.rightLowerStack.resize("100%",!1):t.rightUpperStack.isVisible&&!t.rightLowerStack.isVisible&&t.rightUpperStack.resize("100%",!1),t.leftUpperStack.isVisible||t.leftLowerStack.isVisible||($(t.leftWrapper).hide(),t.canvasWrapper.style.left="calc(0% + "+n+"px)"),t.rightUpperStack.isVisible||t.rightLowerStack.isVisible||$(t.rightWrapper).hide(),(t.leftUpperStack.isVisible||t.leftLowerStack.isVisible)&&$(t.leftWrapper).show(),(t.rightUpperStack.isVisible||t.rightLowerStack.isVisible)&&$(t.rightWrapper).show(),t.rightMinimizedPaneStack.isVisible&&(n+=20);var i=xe.clientWidth-t.leftWrapper.clientWidth-t.rightWrapper.clientWidth-n,a=xe.clientHeight;t.canvasWrapper.style.width=i+"px",v(i,a,e)}function X(e,t){void 0===t&&(t="AllInteractions_");var n=t.split("_")[0],i="Deactivate_"+n,a='<Call Method="ActivateInteraction"><Interaction>'+i+"</Interaction></Call>";e.command.executeXMLAsync(a)}function G(e,t){var n;switch(e){case"wv-measurement":n="Measurement";break;case"wv-section":n="Section";break;case"wv-transform":n="Transformation";break;case"wv-draftangle":n="DraftAngle";break;case"wv-markup":case"wv-markup-reduced":n="Markup";break;case"wv-flythrough":n="Flythrough";break;default:n=void 0}for(var i=n,a=0;a<t.length;a++){t[a].split("_")[0]===n&&(i=t[a])}return i}function F(e,n){var i=oe.appStates.sessionUID;oe.appStates.popoutPanes.push(e);for(var a,o,s=oe.appStates.panes,r=s.length,l=null!==localStorage.getItem("WVLeftPaneStackWidth")?parseFloat(localStorage.getItem("WVLeftPaneStackWidth")):Ee,c=null!==localStorage.getItem("WVRightPaneStackWidth")?parseFloat(localStorage.getItem("WVRightPaneStackWidth")):be,d=null!==localStorage.getItem("WVLeftPaneStackHeight")?parseFloat(localStorage.getItem("WVLeftPaneStackHeight")):we,p=null!==localStorage.getItem("WVRightPaneStackHeight")?parseFloat(localStorage.getItem("WVRightPaneStackHeight")):Te,u=0;u<r;u++)if(s[u].paneId===e){var m=s[u].pos;switch(m){case 1:a=l,o=d;break;case 2:a=l,o=100-d;break;case 3:a=c,o=p;break;case 4:a=c,o=100-p}}if(a=document.body.offsetWidth*(a/100),o=document.body.offsetHeight*(o/100),"wv-modeltree"===e){var f=window.open("popout-index.html?pane="+e+"&langId="+n+"&uid="+i,"","location=no, titlebar=no, menubar=no, status=no, left=30, height="+o+", width="+a);f.focus(),oe.appStates.popedOutWindows.push(f),vsClient.on("GetNodeTooltip",Y),f.onload=function(t){f.onbeforeunload=function(t){var n=oe.appStates.popoutPanes.indexOf(e);oe.appStates.popedOutWindows.splice(n,1),oe.appStates.popoutPanes.splice(n,1),h(e),localStorage.removeItem("WVSelectedNodes"+i),localStorage.removeItem("WVCommand"+i),vsClient.removeListener("GetNodeTooltip",Y),localStorage.removeItem("WVTreeTooltip"+i)}},localStorage.setItem("WVTreeViewUpdated"+i,JSON.stringify(this.modeltreePane.treeItemsInfo))}else if("wv-views"===e){var v=window.open("popout-index.html?pane="+e+"&langId="+n+"&uid="+i,"","location=no, titlebar=no, menubar=no, status=no, left=30, height="+o+", width="+a);v.focus(),oe.appStates.popedOutWindows.push(v),vsClient.on("ConfigurationViewChanged",J),vsClient.on("ConfigurationViewPlayStart",q),vsClient.on("ConfigurationViewPlayFinish",Z);var g='<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>';v.onload=function(t){v.onbeforeunload=function(t){var n=oe.appStates.popoutPanes.indexOf(e);oe.appStates.popedOutWindows.splice(n,1),oe.appStates.popoutPanes.splice(n,1),h(e),vsClient.removeListener("ConfigurationViewChanged",J),vsClient.removeListener("ConfigurationViewPlayStart",q),vsClient.removeListener("ConfigurationViewPlayFinish",Z),vsClient.command.executeXML(g),localStorage.removeItem("WVConfigurationViewInformation"+i),localStorage.removeItem("WVActivateView"+i),localStorage.removeItem("WVViewsData"+i),localStorage.removeItem("WVConfigurationViewChanged"+i),localStorage.removeItem("WVConfigurationPlayMode"+i)}},vsClient.command.executeXML(g)}else if("wv-selections"===e){var C=window.open("popout-index.html?pane="+e+"&langId="+n+"&uid="+i,"","location=no, titlebar=no, menubar=no, status=no, left=30, height="+o+", width="+a);C.focus(),oe.appStates.popedOutWindows.push(C),vsClient.on("SavedSelectionsChanged",K),vsClient.on("GetSavedSelections",K),vsClient.on("NewScene3D",Q),vsClient.on("OpenFile",Q),C.onload=function(t){vsClient.command.executeXML('<Call Method="GetSavedSelections"></Call>'),C.onbeforeunload=function(t){var n=oe.appStates.popoutPanes.indexOf(e);oe.appStates.popedOutWindows.splice(n,1),oe.appStates.popoutPanes.splice(n,1),h(e),vsClient.removeListener("SavedSelectionsChanged",K),vsClient.removeListener("GetSavedSelections",K),vsClient.removeListener("NewScene3D",Q),vsClient.removeListener("OpenFile",Q),localStorage.removeItem("WVSaveNodes"+oe.appStates.sessionUID),localStorage.removeItem("WVNewScene"+oe.appStates.sessionUID)}}}else{var _=ne(e),I='<Call Method="GetTemplate"><Type>'+_+"</Type></Call>";vsClient.command.executeXML(I),vsClient.once("GetTemplate."+_,function(s){vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>'),vsClient.once("GetSceneSettings",function(r){var l=s.Source.Template;localStorage.setItem("WV"+e+i,JSON.stringify(l)),l.Event&&("wv-filter"===e&&(l.Event="GetAllGeometryColors"),vsClient.on(l.Event,ee));var c=window.open("popout-index.html?pane="+e+"&langId="+n+"&uid="+i,"","location=no, titlebar=no, menubar=no, status=no, left=30, height="+o+", width="+a);c.focus(),oe.appStates.popedOutWindows.push(c),c.onload=function(n){if("wv-explode"===e){var a={MaxDepth:t.explodePane.maxExplodeSteps,ExplodedSteps:t.explodePane.explodeStep,ExplodeDistance:t.explodePane.explodeDistance};vsClient.addListener("GetMaxTreeDepth",H),localStorage.setItem("WVInitialExplode"+oe.appStates.sessionUID,JSON.stringify(a))}c.onbeforeunload=function(t){var n=oe.appStates.popoutPanes.indexOf(e);oe.appStates.popedOutWindows.splice(n,1),oe.appStates.popoutPanes.splice(n,1),h(e),vsClient.removeListener(l.Event,ee),vsClient.removeListener("GetMaxTreeDepth",H),localStorage.removeItem("WV"+e+i),localStorage.removeItem("WV"+t.Type+i),"wv-bom"===e?(vsClient.removeListener("GetBillOfMaterial",U),localStorage.removeItem("WVBOMReceived"+i),vsClient.removeListener("GenerateBOMCalloutIds",j),localStorage.removeItem("WVBOMIdsCreated"+i)):"wv-clash"===e&&(vsClient.removeListener("ClashResultUpdated",z),localStorage.removeItem("WVClashComputed"+i))}}})}),"wv-bom"===e?(vsClient.addListener("GetBillOfMaterial",U),vsClient.addListener("GenerateBOMCalloutIds",j)):"wv-clash"===e&&vsClient.addListener("ClashResultUpdated",z)}W(e,!0)}function H(e){localStorage.setItem("WVMaxExplodeDepth"+oe.appStates.sessionUID,JSON.stringify(e))}function U(e){localStorage.setItem("WVBOMReceived"+oe.appStates.sessionUID,JSON.stringify(e))}function z(e){localStorage.setItem("WVClashComputed"+oe.appStates.sessionUID,JSON.stringify(e))}function j(e){localStorage.setItem("WVBOMIdsCreated"+oe.appStates.sessionUID,JSON.stringify(e))}function Y(e){localStorage.setItem("WVTreeTooltip"+oe.appStates.sessionUID,JSON.stringify(e))}function K(e){localStorage.setItem("WVSaveNodes"+oe.appStates.sessionUID,JSON.stringify(e))}function J(e){localStorage.setItem("WVConfigurationViewChanged"+oe.appStates.sessionUID,JSON.stringify(e))}function q(e){localStorage.setItem("WVConfigurationPlayMode"+oe.appStates.sessionUID,JSON.stringify(e))}function Z(e){var t={Stop:!0};localStorage.setItem("WVConfigurationPlayMode"+oe.appStates.sessionUID,JSON.stringify(t))}function Q(e){localStorage.setItem("WVNewScene"+oe.appStates.sessionUID,JSON.stringify(e))}function ee(e){e.Method&&"GetAllGeometryColors"===e.Method&&(e.Type="GetAllGeometryColors"),localStorage.setItem("WV"+e.Type+oe.appStates.sessionUID,JSON.stringify(e))}function te(e){switch(e){case"ENU":return"en";case"DEU":return"de";case"ITA":return"it";case"ESP":return"es";case"FRA":return"fr";case"KOR":return"kor";case"CHS":return"zh";case"JPN":return"ja";default:return"en"}}function ne(e){switch(e){case"wv-settings":return"SettingsPane";case"wv-modeltree":return"Custom_ModelTree";case"wv-views":return"Custom_Views";case"wv-distortion":return"DistortionPane";case"wv-draftangle":return"DraftAnglePane";case"wv-exactcompare":return"ExactComparePane";case"wv-filter":return"FilterPane";case"wv-flythrough":return"FlyThroughPane";case"wv-markup":return"MarkupPane";case"wv-markup-reduced":return"MarkupPane_Reduced";case"wv-measurement":return"MeasurementPane";case"wv-mirror":return"MirrorPane";case"wv-projectedarea":return"ProjectedAreaPane";case"wv-properties":return"PropertiesPane";case"wv-quickcompare":return"QuickComparePane";case"wv-section":return"SectionPane";case"wv-textsearch":return"TextSearchPane";case"wv-transform":return"TransformPane";case"wv-visibilitytest":return"VisibilityTest";case"wv-wallthickness":return"WallThicknessPane";case"wv-drillhole":return"DrillholePane";case"wv-neutralaxis":return"NeutralAxisPane";case"wv-neighbourhoodsearch":return"NeighbourhoodSearchPane";case"wv-appsettings":return"Custom_AppSettings";case"wv-bom":return"BOMPane";case"wv-callout":return"CalloutPane";case"wv-split":return"SplitPane";case"wv-explode":return"ExplodePane";case"wv-animation":return"AnimationPane";case"wv-geometry-tools":return"GeometryToolsPane";case"wv-clash":return"ClashPane";case"wv-bandanalysis":return"BandAnalysisPane"}}Object.defineProperty(t,"__esModule",{value:!0});var ie=n(9),ae=n(100),oe=n(4),se=n(57),re=n(87),le=n(74),ce=n(72),de=n(73),pe=n(10),ue=n(96),he=[0,0,0,0],me=0,fe=0,ve=0,ge=0,Ce=0,_e=0,Ie=0,Se=!1,ye=!1,Ee=20,be=20,we=50,Te=50;t.setDraggedPane=i,t.paneStackIncrement=a,t.paneStackDecrement=o;t.initProgressContainer=s;var Me,Ne,Oe;t.paneConfigs={};var Pe,xe,Be,Le;t.translate=r,t.serializedLoad=l,t.openNativeLoadingModal=c,t.fileOpen=d,t.importFile=p,t.saveFile=u,t.prependPane=h,t.resetPanes=m,t.resizeHandler=g,t.showSessionRestoreDialog=C,t.toast=_,t.openStatusBox=I,t.init=y,t.blockUI=E,t.unblockUI=b,t.closePane=W,t.paneResize=V,t.deactivateInteraction=X,t.getInteractionForPane=G,t.popout=F,t.mapCountry=te,t.mapPaneIdToTemplate=ne},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=n(9),o=function(){function e(e,t){this.lang="ENU",this.hasPresets=!1,this.init=!1,this.noAdapter=!1,this.update=function(e){},this.addEventListener=function(){},this.langId=t,this.paneId=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.id=e,this.wrapperEl.classList.add("pane"),this.wrapperEl.classList.add(e),this.wrapperEl.style.height="100%";try{_PanePresets[e]&&(this.hasPresets=!0)}catch(e){}}return e.prototype.setStack=function(e){this.stack=e,this.wrapperEl.style.width="100%"},e.prototype.registerInStack=function(e,t){$(e).empty(),this.stack.checkForPresets(this.paneId,t),this.mount=e,this.mount.appendChild(this.wrapperEl);var n=this.searchForEvent(this.paneId);if(n&&(this.adapter||this.noAdapter)?this.update(n):(this.adapter||this.noAdapter)&&this.update(),i.appStates.clientInitialized&&(this.lang!==a.settings.lang||!this.init)&&(this.adapter||this.noAdapter)){this.changeLang(a.settings.lang);vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')}this.addMethods(),"wv-modeltree"===this.paneId&&this.addEventListener(),this.lang=a.settings.lang,this.init=!0},e.prototype.searchForEvent=function(e){var t;switch(e){case"wv-properties":return t=localStorage.getItem("WVNodePropertiesChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-measurement":return t=localStorage.getItem("WVMeasurementChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-transform":return t=localStorage.getItem("WVTransformChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-section":return t=localStorage.getItem("WVSectionChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-textsearch":return t=localStorage.getItem("WVTextSearchChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-draftangle":return t=localStorage.getItem("WVDraftAngleChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-neighbourhoodsearch":return t=localStorage.getItem("WVNeighbourhoodSearchChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-projectedarea":return t=localStorage.getItem("WVProjectedAreaChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;case"wv-wallthickness":return t=localStorage.getItem("WVWallthicknessValuesChanged"+i.appStates.sessionUID),null!==t?JSON.parse(t):void 0;default:return}},e}();t.PaneTemplate=o},function(e,t,n){"use strict";function i(e,t,n){for(var i=e,a=0;a<t.length-1;a++)i=i[t[a]];i[t[a]]=n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(98);t.Item=a.Item;var o=n(97);t.PaneAdapter=o.PaneAdapter;var s=n(11);t.Visual=s.Visual,t.Folder=s.Folder,t.Entry=s.Entry,t.TextBox=s.TextBox,t.Input=s.Input,t.Checkbox=s.Checkbox,t.Flag=s.Flag,t.Button=s.Button,t.PropertyAttributes=s.PropertyAttributes,t.Select=s.Select,t.ColorPicker=s.ColorPicker,t.Slider=s.Slider,t.KeyValue=s.KeyValue,t.modifySettings=i},function(e,t,n){"use strict";function i(e){function t(e,n){var i=void 0;i={__text__:"",__ordinal__:[]};for(var a=0;a<e.attributes.length;a++){var o=e.attributes[a].name;i[o]=e.attributes[a].value,i.__ordinal__.push(o)}if(1==e.childNodes.length&&3===e.childNodes[0].nodeType){var s=e.textContent.trim();e.attributes.length>0?i.__text__=s:i=s}else 0==e.childNodes.length&&0==e.attributes.length&&(i="");if(n)if(n[e.nodeName])if(Array.isArray(n[e.nodeName]))n[e.nodeName].push(i),n.__ordinal__.push(e.nodeName);else{var r=n[e.nodeName];n[e.nodeName]=[],n[e.nodeName].push(r),n[e.nodeName].push(i),n.__ordinal__.push(e.nodeName)}else"string"==typeof n?n=i:("Option"===e.nodeName?(n[e.nodeName]=[],n[e.nodeName].push(i)):n[e.nodeName]=i,n.__ordinal__.push(e.nodeName));for(var a=0;a<e.childNodes.length;a++){var l=e.childNodes,c=l.item(a);c instanceof Element&&t(c,i)}}var n=new DOMParser,i=n.parseFromString(e,"application/xml"),a={__text__:"",__ordinal__:[]};return t(i.documentElement,a),a}function a(e,t){for(var n,i=document.implementation.createDocument(null,"",null),a=i,o=0,s=e;o<s.length;o++){var r=s[o];n=i.createElement(r),a.appendChild(n),a=n}if(t.length>0)for(var l=0;l<t.length;l++){var c=t[l].split("="),d=c[0],p=c[1];i.firstElementChild.setAttribute(d,p)}return i}function o(e,t,n){void 0===n&&(n=[]);var i=a(e,n),o=e.join(" ");return i.querySelector(o).textContent=t,(new XMLSerializer).serializeToString(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseXML=i,t.serializeWithValue=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.VisShareSpec="",this.ribbonWidth=0,this.ribbonAvailable=0,this.ribbonVis=!0,this.fullScreenMode=!1,this.mainColor="rgb(214, 124, 28)",this.clientInitialized=!1,this.fileLoaded=!1,this.nodesSelected=!1,this.selectionMode="Select",this.interactionMode=[],this.lastInteractionModes=[],this.renderingModes=[],this.pageCount="",this.mouseActive=!1,this.mouseLeftButtonDown=!1,this.mouseLeftButtonMode="RectZoom",this.mouseRightButtonMode="Rotate",this.mouseMiddleButtonMode="Pan",this.drawRect=!0,this.touchActive=!1,this.touchGestureActive=!1,this.touchStatus="cancel",this.ongoingTouches=[],this.touchDist=-1,this.touchMid=[],this.lastGestureDistance=0,this.lastGestureDelta=0,this.lastGestureCenterX=0,this.lastGestureCenterY=0,this.lastMouseX=0,this.lastMouseY=0,this.activePath="",this.panes=[{paneId:"wv-modeltree",pos:1,minimized:!1,visible:!0},{paneId:"wv-views",pos:1,minimized:!1,visible:!0},{paneId:"wv-properties",pos:2,minimized:!1,visible:!0}],this.defaultPanes=[],this.containersChanged=!1,this.commandPaneOpened=!1,this.lockPanes=!1,this.popoutPanes=[],this.popedOutWindows=[],this.preventGlobalKeyEvents=!1,this.qsMode=!1,this.aboutLinks=["https://viewer.kisters.de/en/kisters-products/3dviewstation-webviewer.html","https://viewer.kisters.de/help/webviewer","http://viewer.kisters.de/en/news/news.html","https://viewer.kisters.de/en/blog.html","https://www.youtube.com/user/KistersViewer","https://twitter.com/KistersViewer","https://www.facebook.com/KistersViewer"],this.version="",this.paneHelpLinks={"wv-views":"3dvs_wv_tut_functions_views.php","wv-draftangle":"3dvs_wv_tut_functions_draft.php","wv-exactcompare":"3dvs_wv_tut_functions_comparison.php","wv-filter":"3dvs_wv_tut_functions_filter.php","wv-flythrough":"3dvs_wv_tut_functions_flythroughmode.php","wv-markup":"3dvs_wv_tut_functions_annotations.php","wv-markup-reduced":"3dvs_wv_tut_functions_annotations.php","wv-measurement":"3dvs_wv_tut_functions_measurement.php","wv-mirror":"3dvs_wv_tut_functions_transformations.php","wv-projectedarea":"3dvs_wv_tut_functions_projectedarea.php","wv-properties":"3dvs_wv_tut_functions_propertiesselectedobjects.php","wv-quickcompare":"3dvs_wv_tut_functions_comparison.php","wv-section":"3dvs_wv_tut_functions_section.php","wv-transform":"3dvs_wv_tut_functions_transformations.php","wv-wallthickness":"3dvs_wv_tut_functions_wallthicknessheatmap.php","wv-neutralaxis":"3dvs_wv_tut_functions_neutralaxis.php","wv-neighbourhoodsearch":"3dvs_wv_tut_functions_neighborhoodsearch.php","wv-bom":"3dvs_wv_tut_functions_techdocandbom_bom.php","wv-callout":"3dvs_wv_tut_functions_techdocandbom_callouts.php","wv-explode":"3dvs_wv_tut_functions_transformations.php","wv-clash":"3dvs_wv_tut_functions_clashdetection.php","wv-selections":"3dvs_wv_tut_functions_savingselections.php"}}return e.prototype.reset=function(){this.selectionMode="Select",this.interactionMode=[],this.renderingModes=[],this.pageCount="",this.lastInteractionModes=[],this.preventGlobalKeyEvents=!1,this.resetMouse(),this.resetTouch()},e.prototype.resetMouse=function(){this.mouseActive=!1,this.mouseLeftButtonDown=!1,this.mouseLeftButtonMode="RectZoom"},e.prototype.resetTouch=function(){this.touchActive=!1,this.touchGestureActive=!1,this.touchStatus="cancel",this.ongoingTouches=[],this.touchDist=-1,this.touchMid=[],this.lastGestureDistance=0,this.lastGestureDelta=0,this.lastGestureCenterX=0,this.lastGestureCenterY=0},e}();t.appStates=new i},function(e,t,n){"use strict";function i(e,t){var n=e.length;if(!(t<0||t>=n)){var i=e.charCodeAt(t);if(i>=55296&&i<=56319&&n>t+1){var a=e.charCodeAt(t+1);if(a>=56320&&a<=57343)return 1024*(i-55296)+a-56320+65536}return i}}function a(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,a=t;i<a.length;i++){var o=a[i];if(Object.prototype.toString.call(e)==="[object "+o+"]")return!0}return!1}t.getCodePoint=i,t.isInteger=a,t.isType=o},function(e,t,n){"use strict";var i=n(5),a=function(){function e(){this._parent=void 0,this._children=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype.children=function(){return this._children.slice()},e.prototype.insertChild=function(t,n){if(void 0===n&&(n=this._children.length),!(t instanceof e))throw new TypeError("node should be an instance of XmlNode");if(!i.isType(n,"Number")||!i.isInteger(n))throw new TypeError("index should be an integer");if(n<0||n>this._children.length)throw new RangeError("index should respect children array bounds");if(-1===this._children.indexOf(t))return i.isType(t.parent,"Undefined")||t.parent.removeChild(t),t._parent=this,this._children.splice(n,0,t),t},e.prototype.next=function(){if(!i.isType(this.parent,"Undefined")&&this.parent._children.indexOf(this)!==this.parent._children.length-1)return this.parent._children[this.parent._children.indexOf(this)+1]},e.prototype.prev=function(){if(!i.isType(this.parent,"Undefined")&&0!==this.parent._children.indexOf(this))return this.parent._children[this.parent._children.indexOf(this)-1]},e.prototype.remove=function(){if(!i.isType(this.parent,"Undefined")){var e=this.parent;return this.parent.removeChild(this),e}},e.prototype.removeChild=function(t){if(!(t instanceof e))throw new Error("node should be an instance of XmlNode");var n=this._children.indexOf(t);return-1!==n&&(t._parent=void 0,this._children.splice(n,1),!0)},e.prototype.removeChildAtIndex=function(e){if(!i.isType(e,"Number")||!i.isInteger(e))throw new TypeError("index should be a number");if(e<0||e>=this._children.length)throw new RangeError("index should respect children array bounds");var t=this._children[e];return t._parent=void 0,this._children.splice(e,1),t},e.prototype.toString=function(e){throw void 0===e&&(e={}),new Error("toString not implemented for XmlNode")},e.prototype.top=function(){return i.isType(this.parent,"Undefined")?this:this.parent.top()},e.prototype.up=function(){return this.parent},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function i(e){return new RegExp("^((\\u0009|\\u000A|\\u000D|[\\u0020-\\uD7FF])|([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]))*$").test(e)}function a(e){return 1===e.length?new RegExp("^\\u0009|\\u000A|\\u000D|[\\u0020-\\uD7FF]$").test(e):2===e.length&&new RegExp("^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$").test(e)}function o(e){if(0===e.length)return!1;var t=":|[A-Z]|_|[a-z]|[\\u00C0-\\u00D6]|[\\u00D8-\\u00F6]|[\\u00F8-\\u02FF]|[\\u0370-\\u037D]|[\\u037F-\\u1FFF]|[\\u200C-\\u200D]|[\\u2070-\\u218F]|[\\u2C00-\\u2FEF]|[\\u3001-\\uD7FF]|[\\uF900-\\uFDCF]|[\\uFDF0-\\uFFFD]",n=":|[A-Z]|_|[a-z]|[\\u00C0-\\u00D6]|[\\u00D8-\\u00F6]|[\\u00F8-\\u02FF]|[\\u0370-\\u037D]|[\\u037F-\\u1FFF]|[\\u200C-\\u200D]|[\\u2070-\\u218F]|[\\u2C00-\\u2FEF]|[\\u3001-\\uD7FF]|[\\uF900-\\uFDCF]|[\\uFDF0-\\uFFFD]|-|\\.|[0-9]|\\u00B7|[\\u0300-\\u036F]|[\\u203F-\\u2040]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF]";return new RegExp("^"+t+"$").test(e.charAt(0))?1===e.length||new RegExp("^("+n+")+$").test(e.substr(1)):!!(e.length>=2&&new RegExp("^[\\uD800-\\uDB7F][\\uDC00-\\uDFFF]$").test(e.substr(0,2)))&&(2===e.length||new RegExp("^("+n+")+$").test(e.substr(2)))}t.validateChar=i,t.validateSingleChar=a,t.validateName=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.attributesRow=[],this.attributes=[],this.orientation="top",this.triggerTime=1e3,this.isActive=!1,this.anchorEl=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="webviewer-tooltip-wrapper",this.titleEl=document.createElement("span"),this.titleEl.className="webviewer-tooltip-title",this.attributeWrapper=document.createElement("ul"),this.attributeWrapper.className="webviewer-tooltip-attributes-wrapper",$(this.attributeWrapper).hide(),this.wrapperEl.appendChild(this.titleEl),this.wrapperEl.appendChild(this.attributeWrapper),this.anchorEl.onmouseenter=function(e){t.isActive=!0,setTimeout(function(){t.isActive&&0===document.getElementsByClassName("webviewer-tooltip-wrapper").length?t.show():t.isActive&&($(".webviewer-tooltip-wrapper").each(function(){$(this).remove()}),t.show())},t.triggerTime)},this.anchorEl.onmouseleave=function(e){t.isActive=!1,t.hide()}}return e.prototype.addAttribute=function(e){if(""!==e&&void 0!==e){0===this.attributes.length&&$(this.attributeWrapper).show();var t=document.createElement("li");t.className="webviewer-tooltip-attribute",t.innerHTML=e.replace(/\\n/g,"\r"),this.attributes.push(e),this.attributesRow.push(t),this.attributeWrapper.appendChild(t)}},e.prototype.show=function(){var e=this.anchorEl.getBoundingClientRect().top;if((this.title&&""!==this.title&&null!==this.title||0!==this.attributesRow.length)&&0!==e){document.body.appendChild(this.wrapperEl),this.wrapperEl.offsetWidth+this.anchorEl.getBoundingClientRect().left>document.body.offsetWidth?this.wrapperEl.style.left=document.body.offsetWidth-this.wrapperEl.offsetWidth+"px":this.wrapperEl.style.left=this.anchorEl.getBoundingClientRect().left+"px";var t=this.wrapperEl.offsetHeight;"top"===this.orientation?this.wrapperEl.style.bottom=e-t<0?document.body.offsetHeight-e-this.anchorEl.offsetHeight-5+"px":document.body.offsetHeight-e+5+"px":e+t>document.body.offsetHeight?this.wrapperEl.style.bottom=document.body.offsetHeight-e+5+"px":this.wrapperEl.style.bottom=document.body.offsetHeight-e-t-this.anchorEl.offsetHeight-5+"px"}},e.prototype.hide=function(){$(this.wrapperEl).remove()},e.prototype.setTitle=function(e){this.title=e,this.titleEl.innerHTML=e?e.replace(/\\n/g,"\r"):""},e.prototype.setOrientation=function(e){this.orientation=e},e.prototype.setTriggerTime=function(e){this.triggerTime=e},e.prototype.removeAttributes=function(){this.attributes=[];for(var e=this.attributesRow.length,t=0;t<e;t++)$(this.attributesRow[t]).remove();this.attributesRow=[],$(this.attributeWrapper).hide()},e.prototype.setKey=function(e){this.key=e},e}();t.WVTooltip=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings={lang:"ENU",appId:"wv-app",ribbonId:"wv-ribbon",dockId:"wv-dock",minWidth:600,minHeight:480,ribbon:{expandablesContainerId:"wv-ribbon-expandables",dropdownsContainerId:"wv-ribbon-dropdowns",dropdownItemHeight:30,buttonWidth:70,tabPageHeight:90,buttonMouseHoverColor:"rgb(132,203,234)",buttonHighlightColor:"rgb(255, 198, 98)",buttonDefaultColor:""}}},function(e,t,n){"use strict";function i(e){var t=f[e];return t&&t instanceof I?t:void 0}function a(e){var t=m[e];return t&&t instanceof I?t:void 0}function o(e){var t=m[e];return t&&t instanceof M?t:null}function s(e){var t=m[e];return t&&t instanceof w?t:null}function r(e){var t=m[e];return t&&t instanceof P?t:null}function l(e){var t=m[e];return t&&t instanceof T?t:null}function c(e){for(var t=m[e],n=e,i=0;t instanceof _;)i++,n=e+"_"+i,t=m[n];return n}var d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var p=n(9),u=n(4),h=n(8);t.initHightlightedButtons=[];!function(e){e[e.Button=1]="Button",e[e.ButtonLet=2]="ButtonLet",e[e.Dropdown=3]="Dropdown",e[e.Input=4]="Input",e[e.SplittedDropdown=5]="SplittedDropdown"}(t.WidgetType||(t.WidgetType={}));var m={},f={},v="http://www.w3.org/2000/svg",g="http://www.w3.org/1999/xlink";t.findPaneButton=i,t.findButton=a,t.findGroup=o,t.findDropdownItem=s,t.findDynamicDropdownItem=r,t.findInput=l;var C=function(){function e(){}return e}();t.Widget=C;var _=function(e){function t(t){var n=e.call(this)||this;n.visible=!0,n.langId=t,n.id=c(t),m[n.id]=n;try{n.id in _functions&&!1===_functions[n.id]&&(n.visible=!1)}catch(e){n.visible=!0}return n}return d(t,e),Object.defineProperty(t.prototype,"text",{get:function(){var e=this.langId;return _lang_data[e]&&_lang_data[e][p.settings.lang]?_lang_data[e][p.settings.lang]:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e][p.settings.lang]?_custom_lang_data[e][p.settings.lang]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e},enumerable:!0,configurable:!0}),t}(C);t.VisibleWidget=_;var I=function(e){function t(t){var n=e.call(this,t)||this;return n.isHighlight=!1,n}return d(t,e),t.prototype.setIconId=function(e){this.iconId=e},t.prototype.getIconId=function(){return this.iconId},t.prototype.applyHighlight=function(e){this.isHighlight=e,this.isHighlight?this.el.classList.add("ribbon-button-highlighted"):this.el.classList.remove("ribbon-button-highlighted")},t.prototype.flashHighlight=function(){var e=this;$(this.el).addClass("ribbon-button-highlight-flash"),setTimeout(function(){$(e.el).removeClass("ribbon-button-highlight-flash")},150)},t.prototype.applyIcon=function(){if(void 0!==this.icon){var e;this.icon.hasChildNodes()||(e=document.createElementNS(v,"use"),this.icon.appendChild(e)),e=this.icon.firstChild,e.setAttributeNS(g,"href","#"+this.iconId)}},t}(_);t.BaseButton=I;var S=function(e){function t(t,n){var i=e.call(this,t)||this;return i.isSmall=!1,i.paneId=n,i.el=document.createElement("div"),i.el.id=i.id,i.el.classList.add("ribbon-button"),i.icon=document.createElementNS(v,"svg"),i.icon.setAttribute("class","ribbon-button-icon"),i.icon.setAttribute("width","95%"),i.icon.setAttribute("height","60%"),i.label=document.createElement("div"),i.label.classList.add("ribbon-button-text"),i.label.style.height="40%",i.label.style.textAlign="center",i.label.style.lineHeight="90%",i.el.appendChild(i.icon),i.el.appendChild(i.label),i}return d(t,e),t.prototype.render=function(e){!1!==this.visible&&(this.applyIcon(),this.label.textContent=this.text,this.tooltip?this.tooltip.setTitle(this.text):(this.tooltip=new h.WVTooltip(this.el),this.tooltip.setOrientation("bottom"),this.tooltip.setTitle(this.text)),this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)),this.paneId&&(f[this.paneId]=this))},t}(I);t.Button=S;var y=function(e){function t(t,n,i){var a=e.call(this,t)||this;return a.paneId=i,a.el=document.createElement("div"),a.el.id=a.id,a.el.classList.add("ribbon-buttonlet"),a.icon=document.createElementNS(v,"svg"),a.icon.setAttribute("class","ribbon-buttonlet-icon"),a.icon.setAttribute("width","20px"),a.icon.setAttribute("height","100%"),a.label=document.createElement("span"),a.label.classList.add("ribbon-buttonlet-text"),a.el.appendChild(a.icon),a.el.appendChild(a.label),n&&(a.el.style.pointerEvents="none"),a}return d(t,e),t.prototype.render=function(e){!1!==this.visible&&(this.applyIcon(),this.label.textContent=this.text,this.tooltip?this.tooltip.setTitle(this.text):(this.tooltip=new h.WVTooltip(this.el),this.tooltip.setOrientation("bottom"),this.tooltip.setTitle(this.text)),this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)),this.paneId&&(f[this.paneId]=this))},t}(I);t.Buttonlet=y;var E=function(e){function t(){var t=e.call(this)||this;return t.widgets=[],t.el=document.createElement("div"),t.el.classList.add("ribbon-column"),t}return d(t,e),Object.defineProperty(t.prototype,"capacity",{get:function(){return this.widgets.length},enumerable:!0,configurable:!0}),t.prototype.addButtonLet=function(e){this.widgets.push(e)},t.prototype.estimate=function(){return this.el.offsetWidth},t.prototype.render=function(e){for(var t=0,n=this.widgets;t<n.length;t++){n[t].render(this.el)}this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el))},t}(C);t.Column=E;var b=function(e){function t(t,n){var i=e.call(this,t)||this;i.items=[],i.activeItem=void 0,i.paneId=n,i.el=document.createElement("div"),i.el.id=i.id,i.el.classList.add("ribbon-dropdown-button"),i.el.style.width=p.settings.ribbon.buttonWidth+"px";return i.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.icon.setAttribute("class","ribbon-dropdown-button-icon"),i.icon.setAttribute("width","100%"),i.icon.setAttribute("height","60%"),i.label=document.createElement("div"),i.label.classList.add("ribbon-dropdown-button-text"),i.labelText=document.createElement("span"),i.labelText.classList.add("ribbon-dropdown-text"),i.labelExpand=document.createElement("div"),i.labelExpand.className="fa fa-sort-down ribbon-dropdown-button-expand-icon",i.label.appendChild(i.labelText),i.label.appendChild(i.labelExpand),i.el.appendChild(i.icon),i.el.appendChild(i.label),i.dropdownList=document.createElement("div"),i.dropdownList.className="ribbon-dropdown-list",i.dropdownList.style.display="none",i.dropdownList.addEventListener("mouseleave",function(e){i.dropdownList.style.display="none"}),document.getElementById(p.settings.ribbon.dropdownsContainerId).appendChild(i.dropdownList),i.label.addEventListener("click",function(){if("none"===i.dropdownList.style.display){i.dropdownList.style.display="";var e=i.label.getBoundingClientRect(),t=e.bottom,n=e.left;i.dropdownList.style.top=t+"px",i.dropdownList.style.left=n+"px"}else i.dropdownList.style.display="none"}),i.label.addEventListener("mouseleave",function(e){var t=i.label.getBoundingClientRect();e.pageY<t.bottom-1&&(i.dropdownList.style.display="none")}),i}return d(t,e),t.prototype.addItems=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],a=new w(i.langId,this);a.setIconId(i.iconId),i.interaction&&(a.event=i.interaction),this.items.push(a)}this.activeItem=this.items[0]},t.prototype.addClick=function(e,t){var n=this;this.icon.addEventListener("click",function(i){t(e,n.activeItem,n),n.setIconId(n.activeItem.getIconId()),n.applyIcon()}),this.dropdownList.addEventListener("click",function(i){var a,o=i.target;a=o.classList.contains("ribbon-dropdown-item")?o:o.parentElement,n.activeItem=s(a.id),t(e,n.activeItem,n),n.labelText.textContent=n.activeItem.text,n.el.title=n.activeItem.text,n.setIconId(n.activeItem.getIconId()),n.applyIcon()})},t.prototype.applyHighlight=function(e){this.activeItem.isHighlight=e,this.isHighlight=e,this.isHighlight?($(this.icon).addClass("ribbon-button-highlighted"),$(this.label).addClass("ribbon-button-highlighted")):($(this.icon).removeClass("ribbon-button-highlighted"),$(this.label).removeClass("ribbon-button-highlighted"),this.activeItem.setHighlight(!1))},t.prototype.flashHighlight=function(){var e=this;$(this.icon).addClass("ribbon-button-highlighted"),$(this.label).addClass("ribbon-button-highlighted"),setTimeout(function(){$(e.icon).removeClass("ribbon-button-highlighted"),$(e.label).removeClass("ribbon-button-highlighted")},150)},t.prototype.render=function(e){if(!1!==this.visible){this.applyIcon(),this.labelText.textContent=this.activeItem.text,this.tooltip?this.tooltip.setTitle(this.activeItem.text):(this.tooltip=new h.WVTooltip(this.el),this.tooltip.setOrientation("bottom"),this.tooltip.setTitle(this.activeItem.text));for(var t=0,n=this.items;t<n.length;t++){n[t].render(this.dropdownList)}this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)),this.paneId&&(f[this.paneId]=this)}},t}(I);t.DropdownButton=b;var w=function(e){function t(t,n){var i=e.call(this,t)||this;i.dropdownButton=n,i.el=document.createElement("div"),i.el.id=i.id,i.el.classList.add("ribbon-dropdown-item"),i.el.style.height=p.settings.ribbon.dropdownItemHeight+"px",i.el.style.display="flex";return i.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.icon.setAttribute("class","ribbon-dropdown-item-icon"),i.icon.setAttribute("width","16px"),i.icon.setAttribute("height","100%"),i.label=document.createElement("span"),i.label.classList.add("ribbon-dropdown-item-text"),i.el.appendChild(i.icon),i.el.appendChild(i.label),i}return d(t,e),t.prototype.applyHighlight=function(e){var t=this;this.dropdownButton.items.forEach(function(e){e!==t&&(e.isHighlight=!1,e.el.style.backgroundColor="")}),this.dropdownButton.applyHighlight(e),this.setHighlight(e)},t.prototype.setHighlight=function(e){this.isHighlight=e,this.isHighlight?this.el.classList.add("ribbon-button-highlighted"):this.el.classList.remove("ribbon-button-highlighted")},t.prototype.activate=function(){this.dropdownButton.activeItem=this,this.dropdownButton.setIconId(this.iconId),this.setHighlight(!0),this.dropdownButton.applyHighlight(!0),this.dropdownButton.render(this.dropdownButton.renderTarget)},t.prototype.render=function(e){!1!==this.visible&&(this.applyIcon(),this.label.textContent=this.text,this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)))},t}(I);t.DropdownItem=w;var T=function(e){function t(t){var n=e.call(this,t)||this;return n.el=document.createElement("input"),n.el.type="text",n.el.id=n.id,n.el.classList.add("ribbon-input"),n}return d(t,e),t.prototype.addInputCallback=function(e,t){var n=this;this.el.addEventListener("keydown",function(i){t(e,n.id,i)})},t.prototype.render=function(e){!1!==this.visible&&this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el))},t}(_);t.Input=T;var M=function(e){function n(t){var n=e.call(this,t)||this;n.configuration=[],n.isCompact=!1,n.el=document.createElement("div"),n.el.id=n.id,n.el.classList.add("ribbon-group"),n.groupContent=document.createElement("div"),n.groupContent.classList.add("ribbon-group-content"),n.groupName=document.createElement("div"),n.groupName.classList.add("ribbon-group-name"),n.el.appendChild(n.groupContent),n.el.appendChild(n.groupName),n.compactGroup=document.createElement("div"),n.compactGroup.classList.add("ribbon-compact-group"),n.compactGroup.style.width=p.settings.ribbon.buttonWidth+"px",n.compactGroup.style.height="100%",n.compactGroup.style.display="inline-block",n.compactGroup.id=n.id+"_Compact",n.compactIcon=document.createElementNS(v,"svg"),n.compactIcon.setAttribute("class","ribbon-compact-icon");var i=document.createElementNS(v,"use");return n.compactIcon.appendChild(i),n.compactGroupName=document.createElement("div"),n.compactGroupName.classList.add("ribbon-compact-name"),n.compactExpander=document.createElement("div"),n.compactExpander.classList.add("ribbon-compact-expander"),n.compactExpander.classList.add("fa"),n.compactExpander.classList.add("fa-sort-down"),n.compactGroup.appendChild(n.compactIcon),n.compactGroup.appendChild(n.compactGroupName),n.compactGroup.appendChild(n.compactExpander),n.expandable=document.createElement("div"),n.expandable.classList.add("ribbon-expandable"),n.expandable.style.display="none",n.expandable.tabIndex=100,n.compactGroup.addEventListener("click",function(){if("none"===n.expandable.style.display){n.expandable.style.display="flex",n.expandable.focus();var e=n.compactGroup.getBoundingClientRect(),t=e.bottom,i=e.left;n.expandable.style.top=t+"px",i+n.expandable.offsetWidth>document.body.offsetWidth?n.expandable.style.left=i+(document.body.offsetWidth-(i+n.expandable.offsetWidth))+"px":n.expandable.style.left=i+"px",n.expandable.style.height=p.settings.ribbon.tabPageHeight+"px"}else n.expandable.style.display}),n.expandable.addEventListener("blur",function(e){setTimeout(function(){"none"!==n.expandable.style.display&&(n.expandable.style.display="none")},200)}),document.getElementById(p.settings.ribbon.expandablesContainerId).appendChild(n.expandable),n}return d(n,e),n.prototype.addButton=function(e){var n=new S(e.langId,e.paneId);return n.setIconId(e.iconId),e.highlight&&(n.isHighlight=!0,t.initHightlightedButtons.push(n)),this.configuration.push(n),n},n.prototype.addButtonlet=function(e){var n=new y(e.langId,e.disabled,e.paneId);n.setIconId(e.iconId),(e.highlight||n.isHighlight)&&(n.isHighlight=!0,t.initHightlightedButtons.push(n));var i=this.configuration[this.configuration.length-1];if(void 0===i||!(i instanceof E)||i.capacity>=3){var a=new E;a.addButtonLet(n),this.configuration.push(a)}else i.widgets.push(n);return n},n.prototype.addDropdown=function(e){var t=new b(e.langId,e.paneId);return t.setIconId(e.iconId),t.addItems(e.dropdownItems),this.configuration.push(t),t},n.prototype.addSplittedDropdown=function(e){var t=new O(e.langId,e.paneId);return t.setIconId(e.iconId),t.addItems(e.dynamicDropdownItems),this.configuration.push(t),t},n.prototype.addInput=function(e){var t=new T(e.langId);return this.configuration.push(t),t},n.prototype.findFirstSVGId=function(){for(var e=0,t=this.configuration;e<t.length;e++){var n=t[e];if(n instanceof S||n instanceof b)return n.getIconId();if(n instanceof E){for(var i=n,a=0,o=i.widgets;a<o.length;a++){var s=o[a];if(s instanceof I){return s.getIconId()}}return""}}},n.prototype.applyCompactIcon=function(){var e=this.compactIcon.firstChild,t=this.findFirstSVGId();e.setAttributeNS(g,"href","#"+t)},Object.defineProperty(n.prototype,"compact",{get:function(){return this.isCompact},set:function(e){this.isCompact=e},enumerable:!0,configurable:!0}),n.prototype.estimate=function(){if(this.compact)return p.settings.ribbon.buttonWidth+1;for(var e=16,t=0,n=this.configuration;t<n.length;t++){var i=n[t];if(i instanceof E){e+=i.estimate()}else e+=p.settings.ribbon.buttonWidth}return e},n.prototype.render=function(e){var t=!1;this.renderTarget!==e&&(this.renderTarget=e,t=!0);var n=0;if(this.isCompact&&this.configuration.length>1){try{this.renderTarget.removeChild(this.el)}catch(e){}this.applyCompactIcon(),this.compactGroupName.textContent=this.text;for(var i=0,a=this.configuration;i<a.length;i++){var o=a[i];o.render(this.expandable)}return void this.renderTarget.appendChild(this.compactGroup)}try{this.renderTarget.removeChild(this.compactGroup)}catch(e){}this.groupName.textContent=this.text,this.renderTarget.appendChild(this.el);for(var s=0,r=this.configuration;s<r.length;s++){var o=r[s];o.render(this.groupContent),(o instanceof _||o instanceof E)&&(n+=o.el.clientWidth)}this.groupName.style.width=n+"px",t&&this.renderTarget.appendChild(this.el)},n.prototype.getWidgets=function(){for(var e=[],t=0,n=this.configuration;t<n.length;t++){var i=n[t];if(i instanceof S){var a=i;e.push(a)}else if(i instanceof E)for(var o=i,s=0,r=o.widgets;s<r.length;s++){var l=r[s];if(l instanceof y){var c=l;e.push(c)}}else if(i instanceof b){var d=i;e.push(d)}}return e},n.prototype.addClick=function(e,t){for(var n=this,i=function(i){if(i.currentTarget){var a=i.currentTarget.id;t(e,a,n)}},a=this.getWidgets(),o=0,s=a;o<s.length;o++){s[o].el.addEventListener("click",i)}},n.prototype.getButtonById=function(e){return a(e)},n}(_);t.Group=M;var N=function(e){function t(t){var n=e.call(this,t)||this;return n.groups=[],n.el=document.createElement("li"),n.el.id=n.id,n.el.classList.add("ribbon-tab"),n.tabName=document.createElement("span"),n.tabName.classList.add("ribbon-tab-name"),n.el.appendChild(n.tabName),n.page=document.createElement("div"),n.page.classList.add("ribbon-tab-page"),n}return d(t,e),t.prototype.addGroup=function(e){this.groups.push(e)},t.prototype.tryShrink=function(){for(var e=this.groups.length-1;e>-1;e--)if(!this.groups[e].compact){this.groups[e].compact=!0;break}this.renderGroups();var t;(t=this.estimate())>u.appStates.ribbonWidth&&e>0&&this.tryShrink()},t.prototype.show=function(){var e=!1;this.groups.forEach(function(t){t.compact&&(e=!0),t.compact=!1}),e&&this.render(this.renderTarget),$(this.el).addClass("ribbon-header-active-tab"),this.page.style.display="";var t;t=this.estimate(),t>u.appStates.ribbonWidth?this.tryShrink():this.render(this.renderTarget)},t.prototype.hide=function(){$(this.el).removeClass("ribbon-header-active-tab"),this.page.style.display="none"},t.prototype.addToHeader=function(e){e.appendChild(this.el),this.tabName.textContent=this.text,this.hide()},t.prototype.estimate=function(){for(var e=22,t=0,n=this.groups;t<n.length;t++){e+=n[t].estimate()}return e},t.prototype.renderGroups=function(){for(var e=0,t=this.groups;e<t.length;e++){t[e].render(this.page)}},t.prototype.render=function(e){var t=!1;this.renderTarget!==e&&(t=!0,this.renderTarget=e),this.renderGroups(),t&&this.renderTarget.appendChild(this.page)},t}(_);t.Tab=N;var O=function(e){function t(t,n){var i=e.call(this,t)||this;i.items=[],i.activeItem=void 0,i.paneId=n,i.el=document.createElement("div"),i.el.id=i.id,i.el.classList.add("ribbon-dropdown-button"),i.el.style.width=p.settings.ribbon.buttonWidth+"px";return i.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.icon.setAttribute("class","ribbon-dropdown-button-icon"),i.icon.setAttribute("width","100%"),i.icon.setAttribute("height","60%"),i.label=document.createElement("div"),i.label.className="ribbon-dropdown-button-text",i.labelText=document.createElement("span"),i.labelText.className="ribbon-dropdown-text",i.labelExpand=document.createElement("div"),i.labelExpand.className="fa fa-sort-down ribbon-dropdown-button-expand-icon",i.label.appendChild(i.labelText),i.label.appendChild(i.labelExpand),i.el.appendChild(i.icon),i.el.appendChild(i.label),i.dropdownList=document.createElement("div"),i.dropdownList.style.fontSize="12px",i.dropdownList.className="ribbon-dropdown-list splitted-dropdown-list",i.dropdownList.style.display="none",i.dropdownList.addEventListener("mouseleave",function(e){i.dropdownList.style.display="none"}),document.getElementById(p.settings.ribbon.dropdownsContainerId).appendChild(i.dropdownList),i.label.addEventListener("click",function(){if("none"===i.dropdownList.style.display){i.dropdownList.style.display="";var e=i.label.getBoundingClientRect(),t=e.bottom,n=e.left;i.dropdownList.style.top=t+"px",i.dropdownList.style.left=n+"px"}else i.dropdownList.style.display="none"}),i.icon.addEventListener("mouseenter",function(e){i.isHighlight||(i.icon.style.backgroundColor=p.settings.ribbon.buttonMouseHoverColor)}),i.icon.addEventListener("mouseleave",function(e){i.isHighlight||(i.icon.style.backgroundColor=p.settings.ribbon.buttonDefaultColor)}),i.label.addEventListener("mouseenter",function(e){i.isHighlight||(i.label.style.backgroundColor=p.settings.ribbon.buttonMouseHoverColor)}),i.label.addEventListener("mouseleave",function(e){i.isHighlight||(i.label.style.backgroundColor=p.settings.ribbon.buttonDefaultColor);var t=i.label.getBoundingClientRect();e.pageY<t.bottom-1&&(i.dropdownList.style.display="none")}),vsClient.on("@OpenedFile",function(e){i.addItem(e)}),i}return d(t,e),t.prototype.addItem=function(e){var t=new P(e,this);this.items.filter(function(t){return t.langId==e}).length>0||(this.items.push(t),this.render(this.renderTarget))},t.prototype.addItems=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],a=new P(i.langId,this);a.setIconId(i.iconId),this.items.push(a)}},t.prototype.addClick=function(e,t){var n=this;this.icon.addEventListener("click",function(i){t(e,void 0,n)}),this.dropdownList.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a,o=i.target;a=o.classList.contains("ribbon-dropdown-item")?o:o.parentElement,n.activeItem=r(a.id),t(e,n.activeItem,n)})},t.prototype.render=function(e){if(!1!==this.visible){this.applyIcon(),this.labelText.textContent=this.text,this.tooltip?this.tooltip.setTitle(this.text):(this.tooltip=new h.WVTooltip(this.el),this.tooltip.setOrientation("bottom"),this.tooltip.setTitle(this.text));for(var t=0,n=this.items;t<n.length;t++){n[t].render(this.dropdownList)}this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)),this.paneId&&(f[this.paneId]=this)}},t}(I);t.SplittedDropdownButton=O;var P=function(e){function t(t,n){var i=e.call(this,t)||this;i.dropdownButton=n,i.el=document.createElement("div"),i.el.id=i.id,i.el.classList.add("ribbon-dropdown-item"),i.el.style.height=p.settings.ribbon.dropdownItemHeight+"px",i.el.style.display="flex";return i.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.icon.setAttribute("class","ribbon-dropdown-item-icon"),i.icon.setAttribute("width","16px"),i.icon.setAttribute("height","100%"),i.label=document.createElement("span"),i.label.classList.add("ribbon-dropdown-item-text"),i.el.appendChild(i.icon),i.el.appendChild(i.label),i}return d(t,e),t.prototype.render=function(e){!1!==this.visible&&(this.applyIcon(),this.label.textContent=this.text,this.renderTarget!==e&&(this.renderTarget=e,e.appendChild(this.el)))},t}(I);t.DynamicDropdownItem=P},function(e,t,n){"use strict";function i(e){var t,n,i,a,o,s;s="#"==e[0]?e.substr(1):e.substr(2),t=parseInt(s,16),n=t>>16&255,i=t>>8&255,a=255&t;return o=(t>>24&255)/255,{a:o,r:n,g:i,b:a}}function a(e,t){var n;n="pane-item-indent-level"+t,e.classList.add(n)}function o(e){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),l=n(36),c=n(8),d=n(0),p=n(4),u=n(16),h=function(){function e(e){this.text="",this.item=e,this.el=document.createElement("td"),this.el.classList.add("pane-item-visual")}return e.prototype.highlightSearchString=function(e){},e.prototype.getText=function(){return this.text},e}();t.Visual=h;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.entries=new Array,n.keyEl=document.createElement("td"),n.keyEl.classList.add("key-value-key"),n.el.classList.add("key-value-value"),n}return s(t,e),t.prototype.constructHTML=function(e){this.row=e},t.prototype.setText=function(e){},t.prototype.setTooltip=function(e){},t.prototype.setUIValue=function(e){},t.prototype.addEntry=function(e){this.entries.push(e),this.entries.length<2?(a(e.el,this.item.indent),this.row.appendChild(e.el),e.tooltip.setTitle(e.key),e.el.style.textOverflow="initial",$(e.item.el).remove()):(this.row.appendChild(e.el),e.el.style.textOverflow="initial",$(e.item.el).remove())},t}(h);t.KeyValue=m;var f=function(e){function t(n){var i=e.call(this,n)||this;i.collapse=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),e&&(i.expander.classList.remove(t.minus),i.expander.classList.add(t.plus)),i.item.children.forEach(function(e){e.hide()}),n&&i.item.context.emit("user-input",i,i.item.id?i.item.id+"_HIDE":"toggle-folder-visibility")},i.expand=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),e&&(i.expander.classList.remove(t.plus),i.expander.classList.add(t.minus)),i.item.children.forEach(function(e){e.show(n)}),n&&i.item.context.emit("user-input",i,i.item.id?i.item.id+"_SHOW":"toggle-folder-visibility")},i.el.colSpan=2,i.expander=document.createElement("i"),i.expander.classList.add("far"),i.expander.classList.add(t.minus),i.expander.addEventListener("click",function(e){i.expander.classList.contains(t.minus)?i.collapse(!0,!0):i.expander.classList.contains(t.plus)&&i.expand(!0,!0)}),i.tooltip=new c.WVTooltip(i.el);var a=document.createElement("span");return a.textContent=" ",a.classList.add("pane-item-spacing"),i.boldText=document.createElement("b"),i.boldText.textContent=i.getText(),i.key=i.getText(),i.el.appendChild(i.expander),i.el.appendChild(a),i.el.appendChild(i.boldText),i.el.classList.add("pane-item-group"),n.id&&(i.item.el.id=n.id),i}return s(t,e),t.prototype.highlightSearchString=function(e){if(!e)return void(this.boldText.innerHTML=this.key);var t=e.length,n=this.key.toLowerCase().indexOf(e),i=this.key.length,a="";if(-1!==n){for(var o=0;o<i;o++)a+=o>=n&&o<n+t?'<span class="pane-search-text-highlight">'+this.key[o]+"</span>":this.key[o];this.boldText.innerHTML=a}else this.boldText.innerHTML=this.key},t.prototype.constructHTML=function(e){a(this.el,this.item.indent),e.appendChild(this.el)},t.prototype.setText=function(e){this.boldText.textContent=e,this.key=e},t.prototype.setTooltip=function(e){this.tooltip.setTitle(e)},t.prototype.setUIValue=function(e){},t.minus="fa-minus-square",t.plus="fa-plus-square",t}(h);t.Folder=f;var v=function(e){function t(t,n){void 0===n&&(n=!1);var i=e.call(this,t)||this;return i.key=i.getText(),i.nameEl=document.createElement("td"),i.nameEl.classList.add("pane-item-entry-name"),n||(i.nameEl.textContent=i.getText()),i.item.prefix&&(i.prefixEl=document.createElement("span"),i.prefixEl.classList.add("pane-prefix-item"),i.prefixEl.textContent=i.item.prefix,i.el.appendChild(i.prefixEl)),i.tooltip=new c.WVTooltip(i.nameEl),i.el.style.position="relative",i}return s(t,e),t.prototype.highlightSearchString=function(e){if(!e)return void(this.nameEl.innerHTML=this.key);var t=e.length,n=this.key.toLowerCase().indexOf(e),i=this.key.length,a="";if(-1!==n){for(var o=0;o<i;o++)a+=o>=n&&o<n+t?'<span class="pane-search-text-highlight">'+this.key[o]+"</span>":this.key[o];this.nameEl.innerHTML=a}else this.nameEl.innerHTML=this.key},t.prototype.constructHTML=function(e){a(this.nameEl,this.item.indent),e.appendChild(this.nameEl),e.appendChild(this.el)},t.prototype.setText=function(e){this.key=e,this.item.visual instanceof y||(this.nameEl.textContent=e)},t.prototype.setTooltip=function(e){this.tooltip.setTitle(e)},t.prototype.setUIValue=function(e){this.el.textContent=e,this.item.value=e},t}(h);t.Entry=v;var g=function(e){function t(t){var n=e.call(this,t)||this;return n.textElement=document.createElement("span"),n.textElement.classList.add("pane-item-entry-text"),t.id&&(n.textElement.id=t.id),n.el.appendChild(n.textElement),n}return s(t,e),t.prototype.setUIValue=function(e){if(this.textElement.textContent=e,this.item.value=e,"string"==typeof e)this.item.suffix&&(e=""===this.item.suffix?parseFloat(e)+this.item.suffix:parseFloat(e)+" "+this.item.suffix),this.textElement.textContent=e;else{var t="";e.Unit&&(t=""===e.Unit?""+e.__text__+e.Unit:e.__text__+" "+e.Unit),this.textElement.textContent=t}},t}(v);t.TextBox=g;var C=function(e){function t(t){var n=e.call(this,t)||this;return n.inputEl=document.createElement("div"),n.inputEl.classList.add("pane-item-entry-input"),n.inputEl.contentEditable="true",t.id&&(n.inputEl.id=t.id),n.el.appendChild(n.inputEl),n.inputEl.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()}),n.inputEl.addEventListener("focus",function(e){p.appStates.preventGlobalKeyEvents=!0,(n.item.triggeredByEvent||n.item.triggeredBySetting)&&(n.changeSubmitted=!1,n.item.suffix||n.unit||"Float"===n.item.inputType||"Integer"===n.item.inputType?setTimeout(function(){n.inputEl.textContent=parseFloat(n.inputEl.textContent).toString(),o(n.inputEl)},100):o(n.inputEl))}),n.inputEl.addEventListener("blur",function(e){if(p.appStates.preventGlobalKeyEvents=!1,(n.item.triggeredByEvent||n.item.triggeredBySetting)&&!n.changeSubmitted){var t=n.inputEl.textContent;n.item.suffix&&(t="%"===n.item.suffix?(parseFloat(n.inputEl.textContent)/100).toString():parseFloat(n.inputEl.textContent).toString()),n.item.context.emit("user-input",n,t)}}),"Text"!==n.item.inputType&&n.inputEl.addEventListener("keydown",function(e){if(13===e.keyCode){if(e.preventDefault(),!n.item.triggeredByEvent&&!n.item.triggeredBySetting)return;var t=n.inputEl.textContent;n.item.suffix&&(t="%"===n.item.suffix?(parseFloat(n.inputEl.textContent)/100).toString():parseFloat(n.inputEl.textContent).toString()),n.item.context.emit("user-input",n,t),n.changeSubmitted=!0,n.inputEl.blur()}}),n}return s(t,e),t.prototype.setUIValue=function(e){if(this.item.value=e,"string"==typeof e)this.item.suffix&&(e=""===this.item.suffix?parseFloat(e)+this.item.suffix:("%"===this.item.suffix?100*parseFloat(e):parseFloat(e))+" "+this.item.suffix),this.inputEl.textContent=e;else{var t="";this.unit=e.Unit,e.Unit&&(t=""===e.Unit?""+e.__text__+e.Unit:e.__text__+" "+e.Unit),this.inputEl.textContent=t}},t}(v);t.Input=C;var _=function(e){function t(t){var n=e.call(this,t)||this;return n.viewUnselectedItems=[],n.viewSelectedItems=[],n.unselectedItems=[],n.selectedItems=[],n.leftSelection=[],n.rightSelection=[],t.id&&(n.inputEl.id=t.id),n.boxWrapperEl=document.createElement("span"),n.boxWrapperEl.className="pane-item-entry-box-wrapper",n.inputEl=document.createElement("div"),n.inputEl.className="pane-item-entry-input",n.inputEl.contentEditable="true",n.inputEl.style.width="calc(100% - 20px)",n.inputEl.style.whiteSpace="nowrap",n.inputEl.style.overflow="hidden",n.buttonEl=document.createElement("i"),n.buttonEl.className="fas fa-ellipsis-h",n.buttonEl.style.marginLeft="5px",n.buttonEl.style.bottom="2px",n.buttonEl.style.position="relative",n.buttonEl.style.cursor="pointer",n.boxWrapperEl.appendChild(n.inputEl),n.boxWrapperEl.appendChild(n.buttonEl),n.el.appendChild(n.boxWrapperEl),n.el.appendChild(n.boxWrapperEl),n.buttonEl.onclick=function(e){n.item.context.emit("user-input",n,"multi-box-open");var t=document.createElement("div");t.className="pane-multi-box-modal-wrapper";var i=document.createElement("div");i.className="pane-multi-box-modal-col",t.appendChild(i);var a=document.createElement("div");a.className="pane-multi-box-modal-icon-col",t.appendChild(a);var o=document.createElement("div");o.className="pane-multi-box-modal-col",t.appendChild(o);var s=document.createElement("div");s.className="pane-multi-box-modal-icon-col",t.appendChild(s);var r=document.createElement("i");r.className="pane-multi-box-modal-close-icon fas fa-times",r.onclick=function(e){t.remove()},s.appendChild(r);var l=document.createElement("input");l.className="pane-multi-box-modal-input";var c=document.createElement("i");c.className="pane-multi-box-modal-input-icon fas fa-search",c.style.left="calc(40% - 12px)",c.onclick=function(e){l.value&&""!==l.value&&(n.resetSelection(!1),l.value="",n.unselectedFilterString=void 0,$(c).removeClass("fa-times").addClass("fa-search"),c.style.cursor="",n.filter(!1))},l.oninput=function(e){n.resetSelection(!1),l.value&&""!==l.value&&null!==l.value?($(c).removeClass("fa-search").addClass("fa-times"),c.style.cursor="pointer"):($(c).removeClass("fa-times").addClass("fa-search"),c.style.cursor=""),n.unselectedFilterString=l.value,n.filter(!1)},i.appendChild(c),i.appendChild(l);var d=document.createElement("input");d.className="pane-multi-box-modal-input";var p=document.createElement("i");p.className="pane-multi-box-modal-input-icon fas fa-search",p.style.right="calc(10% + 20px)",p.onclick=function(e){d.value&&""!==d.value&&(n.resetSelection(!0),d.value="",n.selectedFilterString=void 0,$(p).removeClass("fa-times").addClass("fa-search"),p.style.cursor="",n.filter(!0))},d.oninput=function(e){n.resetSelection(!0),d.value&&""!==d.value&&null!==d.value?($(p).removeClass("fa-search").addClass("fa-times"),p.style.cursor="pointer"):($(p).removeClass("fa-times").addClass("fa-search"),p.style.cursor=""),n.selectedFilterString=d.value,n.filter(!0)},o.appendChild(p),o.appendChild(d),n.unselectedBoxEl=document.createElement("div"),n.unselectedBoxEl.className="pane-multi-box-box-wrapper",i.appendChild(n.unselectedBoxEl),n.selectedBoxEl=document.createElement("div"),n.selectedBoxEl.className="pane-multi-box-box-wrapper",o.appendChild(n.selectedBoxEl);var u=document.createElement("i");u.className="pane-multi-box-modal-icon fas fa-chevron-double-right",u.onclick=function(e){n.leftSelection=n.unselectedItems,n.applySelection(!0,!1)},a.appendChild(u);var h=document.createElement("i");h.className="pane-multi-box-modal-icon fas fa-chevron-right",h.onclick=function(e){n.applySelection(!0,!1)},a.appendChild(h);var m=document.createElement("i");m.className="pane-multi-box-modal-icon fas fa-chevron-left",m.onclick=function(e){n.applySelection(!1,!0)},a.appendChild(m);var f=document.createElement("i");f.className="pane-multi-box-modal-icon fas fa-chevron-double-left",f.onclick=function(e){n.rightSelection=n.selectedItems,n.applySelection(!1,!0)},a.appendChild(f);var v=document.createElement("i");v.className="pane-multi-box-modal-icon fas fa-chevron-double-up",v.onclick=function(e){for(var t=0;t<n.rightSelection.length;t++){var i=n.rightSelection[t],a=n.viewSelectedItems.indexOf(i),o=n.selectedItems.indexOf(i);n.viewSelectedItems.splice(a,1),n.viewSelectedItems.unshift(i),n.selectedItems.splice(o,1),n.selectedItems.unshift(i)}n.applySelection(!1,!1)};var g=document.createElement("i");g.className="pane-multi-box-modal-icon fas fa-chevron-up",g.onclick=function(e){for(var t=0;t<n.viewSelectedItems.length;t++){var i=n.viewSelectedItems[t],a=-1!==n.rightSelection.indexOf(i),o=n.selectedItems.indexOf(i);if(a&&0!==t){n.viewSelectedItems[t]=n.viewSelectedItems[t-1],n.viewSelectedItems[t-1]=i;var s=n.selectedItems.indexOf(n.viewSelectedItems[t]);n.selectedItems[o]=n.selectedItems[s],n.selectedItems[s]=i}}n.applySelection(!1,!1)};var C=document.createElement("i");C.className="pane-multi-box-modal-icon fas fa-chevron-double-down",C.onclick=function(e){for(var t=0;t<n.rightSelection.length;t++){var i=n.rightSelection[t],a=n.viewSelectedItems.indexOf(i),o=n.selectedItems.indexOf(i);n.viewSelectedItems.splice(a,1),n.viewSelectedItems.push(i),n.selectedItems.splice(o,1),n.selectedItems.push(i)}n.applySelection(!1,!1)};var _=document.createElement("i");_.className="pane-multi-box-modal-icon fas fa-chevron-down",_.onclick=function(e){for(var t=n.viewSelectedItems.length-1;t>=0;t--){var i=n.viewSelectedItems[t],a=-1!==n.rightSelection.indexOf(i),o=n.selectedItems.indexOf(i);if(a&&t<n.viewSelectedItems.length-1){n.viewSelectedItems[t]=n.viewSelectedItems[t+1],n.viewSelectedItems[t+1]=i;var s=n.selectedItems.indexOf(n.viewSelectedItems[t]);n.selectedItems[o]=n.selectedItems[s],n.selectedItems[s]=i}}n.applySelection(!1,!1)},s.appendChild(v),s.appendChild(g),s.appendChild(_),s.appendChild(C);var I=document.createElement("button");I.textContent="OK",I.className="pane-multi-box-modal-submit-button",I.onclick=function(e){t.remove();var i=n.selectedItems.join(";");n.item.context.emit("user-input",n,i)},s.appendChild(I),document.body.appendChild(t)},n.inputEl.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()}),n.inputEl.addEventListener("focus",function(e){p.appStates.preventGlobalKeyEvents=!0,(n.item.triggeredByEvent||n.item.triggeredBySetting)&&(n.changeSubmitted=!1,o(n.inputEl))}),n.inputEl.addEventListener("blur",function(e){if(p.appStates.preventGlobalKeyEvents=!1,(n.item.triggeredByEvent||n.item.triggeredBySetting)&&!n.changeSubmitted){var t=n.inputEl.textContent;n.item.context.emit("user-input",n,t)}}),n.inputEl.addEventListener("keydown",function(e){if(13===e.keyCode){if(e.preventDefault(),!n.item.triggeredByEvent&&!n.item.triggeredBySetting)return;var t=n.inputEl.textContent;n.item.suffix&&(t=parseFloat(n.inputEl.textContent).toString()),n.item.context.emit("user-input",n,t),n.changeSubmitted=!0,n.inputEl.blur()}}),n}return s(t,e),t.prototype.filter=function(e){var t=this,n=e?this.selectedFilterString:this.unselectedFilterString,i=e?this.selectedItems:this.unselectedItems;e?this.viewSelectedItems=[]:this.viewUnselectedItems=[],n&&""!==n&&null!==n?i.forEach(function(i){-1!==i.toLowerCase().indexOf(n.toLowerCase())&&(e?t.viewSelectedItems.push(i):t.viewUnselectedItems.push(i))}):e?this.viewSelectedItems=i.slice():this.viewUnselectedItems=i.slice(),this.createViewList(e)},t.prototype.computeLists=function(e,t){var n=this;this.selectedItems=[],this.unselectedItems=[],this.viewUnselectedItems=[],this.viewSelectedItems=[],this.selectedFilterString="",this.unselectedFilterString="";var i=this.item.value.split(";");1===i.length&&""===i[0]||(this.selectedItems=i);var a;if(e&&e.Properties&&(a=Array.isArray(e.Properties)?e.Properties:[e.Properties],a.forEach(function(e,t){a[t]="@"+e})),t&&t.Attribute){var o=Array.isArray(t.Attribute)?t.Attribute:[t.Attribute];o=o.concat(a),o.forEach(function(e){-1===i.indexOf(e)&&n.unselectedItems.push(e)})}this.viewSelectedItems=this.selectedItems.slice(),this.viewUnselectedItems=this.unselectedItems.slice(),this.applySelection(!1,!1)},t.prototype.resetSelection=function(e){e?(this.rightSelection=[],this.selectedItems.forEach(function(e){var t=document.getElementById(e);t&&(t.style.backgroundColor="white")})):(this.leftSelection=[],this.unselectedItems.forEach(function(e){var t=document.getElementById(e);t&&(t.style.backgroundColor="white")}))},t.prototype.createViewList=function(e){var t=this;e?($(this.selectedBoxEl).empty(),this.viewSelectedItems.forEach(function(e){var n=document.createElement("div");n.className="pane-multi-box-box-row";var i=e.startsWith("@"),a=i?e.replace("@",""):e;n.textContent=a,n.id=e,i&&(n.style.fontStyle="italic");var o=t.rightSelection.indexOf(e);-1!==o&&(n.style.backgroundColor="rgb(160, 160, 160)"),n.onclick=function(i){o=t.rightSelection.indexOf(e),-1!==o?(t.rightSelection.splice(o,1),n.style.backgroundColor="white"):(t.rightSelection.push(e),n.style.backgroundColor="rgb(160, 160, 160)")},t.selectedBoxEl.appendChild(n)})):($(this.unselectedBoxEl).empty(),this.viewUnselectedItems.forEach(function(e){var n=document.createElement("div");n.className="pane-multi-box-box-row";var i=e.startsWith("@"),a=i?e.replace("@",""):e;n.textContent=a,n.id=e,i&&(n.style.fontStyle="italic");var o=t.leftSelection.indexOf(e);-1!==o&&(n.style.backgroundColor="rgb(160, 160, 160)"),n.onclick=function(i){o=t.leftSelection.indexOf(e),-1!==o?(t.leftSelection.splice(o,1),n.style.backgroundColor="white"):(t.leftSelection.push(e),n.style.backgroundColor="rgb(160, 160, 160)")},t.unselectedBoxEl.appendChild(n)}))},t.prototype.applySelection=function(e,t){var n=this;e?(this.selectedItems=this.selectedItems.concat(this.leftSelection),this.unselectedItems=this.unselectedItems.filter(function(e){return-1===n.leftSelection.indexOf(e)}),this.leftSelection=[]):t&&(this.unselectedItems=this.unselectedItems.concat(this.rightSelection),this.selectedItems=this.selectedItems.filter(function(e){return-1===n.rightSelection.indexOf(e)}),this.rightSelection=[]),this.filter(!0),this.filter(!1)},t.prototype.setUIValue=function(e){if(this.item.value=e,"string"==typeof e)this.inputEl.textContent=e;else{this.inputEl.textContent=""}},t}(v);t.MultiBox=_;var I=function(e){function t(t,n){var i=e.call(this,t)||this;return i.val=!1,i.isFlagOption=!1,n&&(i.isFlagOption=n),i.wrapperEl=document.createElement("div"),i.wrapperEl.className="pane-switch-wrapper",i.wrapperEl.style.marginLeft="5px",i.el.appendChild(i.wrapperEl),i.hiddenCheckbox=document.createElement("input"),i.hiddenCheckbox.type="checkbox",i.hiddenCheckbox.style.display="none",i.hiddenCheckbox.value=i.val.toString(),i.item.id&&(i.hiddenCheckbox.id=t.id),i.wrapperEl.appendChild(i.hiddenCheckbox),i.boxEl=document.createElement("div"),i.boxEl.className="switch-wrapper switch-off",i.wrapperEl.appendChild(i.boxEl),i.handleEl=document.createElement("div"),i.handleEl.className="switch-handle",i.boxEl.appendChild(i.handleEl),i.boxEl.onclick=function(e){var n=i.val?"false":"true";if(i.setUIValue(n),i.isFlagOption)i.item.context.emit("flag-option-changed",i,i.val);else{if(!i.item.triggeredByEvent&&!i.item.triggeredBySetting&&!t.id)return;i.item.context.emit("user-input",i,i.val)}},i}return s(t,e),t.prototype.setUIValue=function(e){this.val="true"===e,this.item.value=this.val,this.hiddenCheckbox.value=e,this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},t.prototype.setKey=function(e){this.key=e.toString()},t}(v);t.Checkbox=I;var S=function(e){function t(t){var n=e.call(this,t)||this;return n.state=!1,n.item.context.on("flag-option-changed",function(e,t){var i=n.activatedOptionsValue.indexOf(e.item.text);t?-1===i&&n.activatedOptionsValue.push(e.item.text):-1!=i&&n.activatedOptionsValue.splice(i,1),n.item.context.emit("user-input",n,n.activatedOptionsValue.join(" "))}),n}return s(t,e),t.prototype.addOptions=function(e){var t=this;this.options=e,e.forEach(function(e){var n=new r.Item(t.item.context,e.displayName);t.item.children.push(n),n.parent=t.item,n.value=e.value,n.visual=new I(n,!0)})},t.prototype.setUIValue=function(e){this.activatedOptionsValue=e.split(" ");for(var t=0,n=this.item.children;t<n.length;t++){var i=n[t];i.visual.setUIValue(-1!==this.activatedOptionsValue.indexOf(i.text)?"true":"false")}},t}(f);t.Flag=S;var y=function(e){function t(t){var n=e.call(this,t,!0)||this;return n.buttonEl=document.createElement("button"),n.buttonEl.classList.add("pane-item-entry-button"),n.buttonEl.textContent=t.text,n.buttonEl.id=t.id,n.el.appendChild(n.buttonEl),n}return s(t,e),t.prototype.setUIValue=function(e){},t}(v);t.Button=y;var E=function(e){function t(t){var n=e.call(this,t)||this;return n.listEl=document.createElement("div"),n.el.appendChild(n.listEl),n}return s(t,e),t.prototype.fill=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],a=i[0],o=i[1],s=document.createElement("div");s.textContent=a+": "+o,this.listEl.appendChild(s)}},t.prototype.clear=function(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild)},t}(v);t.PropertyAttributes=E;var b=function(e){function t(t){var n=e.call(this,t)||this;return n.selectEl=document.createElement("select"),n.selectEl.classList.add("pane-item-entry-select"),t.id&&(n.selectEl.id=t.id),n.el.appendChild(n.selectEl),n.item.triggeredByEvent||n.item.triggeredBySetting||t.id?(n.selectEl.onchange=function(){n.item.context.emit("user-input",n,n.selectEl.value)},n):n}return s(t,e),t.prototype.setUIValue=function(e){this.item.value=e,this.selectEl.value=e},t.prototype.addOptions=function(e,t){for(var n=0;n<e.length;n++){var i=document.createElement("option");i.textContent=e[n],i.value=t[n],this.selectEl.appendChild(i)}},t}(v);t.Select=b;var w=function(e){function t(t){var n=e.call(this,t)||this;return n.isDefaultSet=!1,n.colorpicker=document.createElement("span"),n.colorpicker.classList.add("pane-item-entry-colorpicker"),n.el.appendChild(n.colorpicker),n.colorpicker.addEventListener("click",function(e){n.openPalette()},!1),n}return s(t,e),t.prototype.openPalette=function(){var e=this,t=this.colorpicker.dataset.lastPickedColor;this.palette=new l.CustomPalette(t,this.showAlpha),this.palette.on("customColorChosen",function(t){return e.updateElementState(t)})},t.prototype.updateElementState=function(e){this.colorpicker.dataset.lastPickedColor=e,this.colorpicker.style.backgroundColor=e;var t=u(e).toHexString();if(-1!==e.indexOf("rgba")){var n=Math.round(255*u(e)._a).toString(16);t=t.replace("#","#"+n)}this.item.value=t,(this.item.triggeredByEvent||this.item.triggeredBySetting)&&this.item.context.emit("user-input",this,t)},t.prototype.html=function(){return this.el},t.prototype.setUIValue=function(e){var t=i(e);this.item.value=e,this.alpha=t.a;var n;n=this.showAlpha?"rgba("+t.r+", "+t.g+", "+t.b+", "+this.alpha+")":"rgb("+t.r+", "+t.g+", "+t.b+")",this.isDefaultSet||(this.colorpicker.dataset.defaultColor=n,this.isDefaultSet=!0),this.colorpicker.dataset.lastPickedColor=n,this.colorpicker.style.backgroundColor=n},t}(v);t.ColorPicker=w;var T=function(e){function t(t){var n=e.call(this,t)||this;n.hasTouchHandler=!1,n.handleMouseMove=function(e){var t;t=e.touches?Math.min(Math.max(0,e.touches[0].pageX-this.sliderOffset),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth);var n,i=100/(this.sliderWidth/t),a=this.sliderWidth;n=t<=5?"0px":100/(a/t)+"%",this.handleEl.style.left=n,this.fedBar.style.width=n,this.setUIValue(i/100)},n.handleMouseUp=function(e){var t;t=e.touches?Math.min(Math.max(0,e.changedTouches[0].pageX-this.sliderOffset-5),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset-5),this.sliderWidth);var n=100/(this.sliderWidth/t);this.setUIValue(n/100),this.item.context.emit("user-input",this,n/100),this.item.value=n/100,document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp)},n.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),this.sliderOffset=$(e.target).parent().offset().left,this.sliderWidth=$(e.target).parent().width(),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("touchend",this.handleMouseUp)},n.wrapperEl=document.createElement("div"),n.wrapperEl.className="pane-item-entry-wrapper",n.sliderOffset=0,n.sliderWidth=0,n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseMove=n.handleMouseMove.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.el.appendChild(n.wrapperEl),n.inputEl=document.createElement("input"),n.inputEl.className="slider-value-input",n.inputEl.min="0",n.inputEl.max="100",n.inputEl.style.width="25px",n.inputEl.onblur=function(e){n.item.context.emit("user-input",n,parseFloat(n.inputEl.value)/100),n.setUIValue(parseFloat(n.inputEl.value)/100),n.item.value=parseFloat(n.inputEl.value)/100},n.inputEl.onchange=function(e){n.handleInputChanged(e)},n.wrapperEl.appendChild(n.inputEl);var i=document.createElement("div");i.className="slider-wrapper",i.style.width="calc(100% - 50px)",n.wrapperEl.appendChild(i);var a=document.createElement("div");a.style.position="relative",a.className="slider-bar",i.appendChild(a),n.fedBar=document.createElement("span"),n.fedBar.className="slider-bar-filled",a.appendChild(n.fedBar),n.handleEl=document.createElement("div"),n.handleEl.style.marginLeft="0",$(n.handleEl).addClass("slider-handle draggable"),a.appendChild(n.handleEl),n.handleEl.addEventListener("touchstart",n.handleMouseDown),n.handleEl.onmousedown=function(e){n.handleMouseDown(e)},a.onmousedown=function(e){n.handleClick(e)};var o=document.createElement("span");return o.className="slider-bar-empty",o.style.width="100%",a.appendChild(o),n}return s(t,e),t.prototype.setUIValue=function(e){var t=!1;if(""!==this.inputEl.value&&this.inputEl.value&&void 0!==this.inputEl.value||(t=!0),this.inputEl.value=Math.round(100*e)+"",t||parseFloat(this.handleEl.style.left.replace("%",""))!==e){var n=$(this.inputEl).next().children().first().width(),i=n*e,a=n,o=void 0;o=i<=5?"0px":100/(a/i)+"%",this.handleEl.style.left=o,this.fedBar.style.width=o}},t.prototype.setKey=function(e){this.key=e.toString()},t.prototype.handleInputChanged=function(e){var t,n=e.target.value,i=$(e.target).next().children().first().width(),a=i/100*n,o=i;t=a<=5?"0px":100/(o/a)+"%",this.handleEl.style.left=t,this.fedBar.style.width=t,this.item.context.emit("user-input",this,n/100),this.item.value=n/100},t.prototype.handleClick=function(e){this.sliderWidth=$(e.target).width(),this.sliderOffset=$(e.target).offset().left;var t,n=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),i=100/(this.sliderWidth/n),a=this.sliderWidth;t=n<=5?"0px":100/(a/n)+"%",this.handleEl.style.left=t,this.fedBar.style.width=t,this.setUIValue(i/100),this.item.context.emit("user-input",this,i/100),this.item.value=i/100},t}(v);t.Slider=T;var M=function(){function e(e,t,n,i){var a=this;this.parent=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="pane-inline-switch-wrapper",this.titleEl=document.createElement("div"),this.parent.appendChild(this.wrapperEl),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val,this.hiddenCheckbox.style.display="none",this.wrapperEl.appendChild(this.hiddenCheckbox),this.titleEl.className="pane-inline-switch-title",this.setKey(t),this.wrapperEl.appendChild(this.titleEl),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper switch-on",this.wrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),this.wrapperEl.onclick=function(e){var t="true"===a.val?"false":"true";a.setValue(t),i(t)},this.setValue(n)}return e.prototype.setValue=function(e){this.val=e,this.hiddenCheckbox.value=this.val,"true"===this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e.prototype.setKey=function(e){this.titleEl.textContent=e},e}();t.SingleSwitch=M;var N=function(){function e(e,t,n,i,o,s){void 0===s&&(s=!1);var r=this;this.val="false",this.langId=n,this.tooltipId=i,this.callback=o,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var l=document.createElement("td");l.className="pane-item-visual",l.style.position="relative",this.wrapperEl.appendChild(l),this.switchWrapperEl=document.createElement("div"),this.switchWrapperEl.className="pane-inline-switch-wrapper",this.switchWrapperEl.style.marginLeft="5px",l.appendChild(this.switchWrapperEl),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val,this.hiddenCheckbox.style.display="none",this.switchWrapperEl.appendChild(this.hiddenCheckbox),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper switch-on",this.switchWrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),this.switchWrapperEl.onclick=function(e){r.setVal("true"===r.val?"false":"true"),o("true"===r.val)},this.setVal("false"),s||vsClient.on("@changeLang",function(e){r.translate()})}return e.prototype.setVal=function(e){this.val=e,this.hiddenCheckbox.value=this.val,"true"===this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e}();t.PlainSwitch=N;var O=function(){function e(e,t,n,i,o){void 0===o&&(o=!1);var s=this;this.children=[],this.childGroups=[],this.minus="fa-minus-square",this.plus="fa-plus-square",this.collapse=function(e){void 0===e&&(e=!1),e&&(s.expander.classList.remove(s.minus),s.expander.classList.add(s.plus)),s.children.forEach(function(e){$(e).hide()}),s.childGroups.length>0&&s.childGroups.forEach(function(e){$(e.wrapperEl).hide(),e.collapse(!1)})},this.expand=function(e){void 0===e&&(e=!1),e&&(s.expander.classList.remove(s.plus),s.expander.classList.add(s.minus)),s.children.forEach(function(e){$(e).show()}),s.childGroups.length>0&&s.childGroups.forEach(function(e){$(e.wrapperEl).show(),$(e.expander).hasClass(s.minus)&&e.expand(!1)})},this.langId=n,this.tooltipLangId=i,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl);var r=document.createElement("td");r.colSpan=2,r.className="pane-item-visual pane-item-group",a(r,e),this.tooltip=new c.WVTooltip(r),this.wrapperEl.appendChild(r),this.expander=document.createElement("i"),this.expander.classList.add("far"),this.expander.classList.add(this.minus),this.expander.addEventListener("click",function(e){s.expander.classList.contains(s.minus)?s.collapse(!0):s.expander.classList.contains(s.plus)&&s.expand(!0)});var l=document.createElement("span");l.textContent=" ",l.classList.add("pane-item-spacing"),this.boldText=document.createElement("b"),this.boldText.textContent=d.translate(n),r.appendChild(this.expander),r.appendChild(l),r.appendChild(this.boldText),o||vsClient.on("@changeLang",function(e){s.translate()})}return e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.boldText.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):d.translate(this.tooltipLangId))},e}();t.PlainGroup=O;var P=function(){function e(e,t,n,i,o,s,r){void 0===r&&(r=!1);var l=this;this.langId=n,this.tooltipId=i,this.buttonLangId=o,this.callback=s,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var p=document.createElement("td");p.className="pane-item-visual",p.style.position="relative",this.wrapperEl.appendChild(p),this.buttonEl=document.createElement("button"),this.buttonEl.classList.add("pane-item-entry-button"),this.buttonEl.textContent=d.translate(o),this.buttonEl.onclick=function(e){l.callback()},p.appendChild(this.buttonEl),r||vsClient.on("@changeLang",function(e){l.translate()})}return e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId),this.buttonEl.textContent=e?e(this.langId):d.translate(this.buttonLangId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e}();t.PlainButton=P;var x=function(){function e(e,t,n,i,o,s){void 0===s&&(s=!1);var r=this;this.langId=n,this.tooltipId=i,this.callback=o,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var l=document.createElement("td");l.className="pane-item-visual",l.style.position="relative",this.wrapperEl.appendChild(l),this.selectEl=document.createElement("select"),this.selectEl.classList.add("pane-item-entry-select"),l.appendChild(this.selectEl),this.selectEl.onchange=function(){r.callback(r.selectEl.value)},s||vsClient.on("@changeLang",function(e){r.translate()})}return e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e.prototype.clearOptions=function(){$(this.selectEl).empty()},e.prototype.addOptions=function(e){for(var t=0;t<e.length;t++){var n=document.createElement("option");n.textContent=e[t].name,n.value=e[t].val,this.selectEl.appendChild(n),e[t].isDefault&&(n.selected=!0)}},e}();t.PlainSelect=x;var B=function(){function e(e,t,n){var i=this;this.callback=n,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.selectWrapperEl=document.createElement("td"),this.selectWrapperEl.colSpan=2,a(this.selectWrapperEl,e),this.selectWrapperEl.className="pane-item-visual",this.selectWrapperEl.style.position="relative",this.wrapperEl.appendChild(this.selectWrapperEl),this.selectEl=document.createElement("select"),this.selectEl.classList.add("pane-item-entry-select-single-line"),this.selectWrapperEl.appendChild(this.selectEl),this.selectEl.onchange=function(){var e=i.selectEl.options[i.selectEl.selectedIndex].text;i.setActivePreset(e),i.callback(i.selectEl.value)}}return e.prototype.setActivePreset=function(e){for(var t=0;t<this.options.length;t++)this.options[t].name===e?(this.options[t].isActive=!0,this.activePreset=this.options[t],this.selectEl.options[t].selected=!0):this.options[t].isActive=!1},e.prototype.getActivePreset=function(){if(this.activePreset)return this.activePreset;for(var e=this.selectEl.options[this.selectEl.selectedIndex].text,t=0;t<this.options.length;t++)if(this.options[t].name===e)return this.options[t]},e.prototype.removeOption=function(e){this.options.splice(this.options.indexOf(e),1),this.setOptions(this.options)},e.prototype.removeOptionByName=function(e){var t=this.options.map(function(e){return e.name}).indexOf(e);-1!==t&&(this.options.splice(t,1),this.setOptions(this.options))},e.prototype.setOptions=function(e){$(this.selectEl).empty(),this.options=e;for(var t=0;t<e.length;t++){var n=document.createElement("option");n.textContent=e[t].name,n.value=e[t].val,this.selectEl.appendChild(n),e[t].isCustom&&(n.className="pane-preset-option-custom"),e[t].isDefault&&($(this.selectEl).children().removeClass("pane-preset-option-default"),$(n).addClass("pane-preset-option-default")),(e[t].isDefault&&!this.activePreset||e[t].isActive)&&(n.selected=!0)}},e.prototype.setDefault=function(e){for(var t=0;t<this.options.length;t++)this.options[t].name===e.name?this.options[t].isDefault=!0:this.options[t].isDefault=!1;this.setOptions(this.options)},e.prototype.restoreDefault=function(){for(var e=0;e<this.options.length;e++)if(this.options[e].isDefault)return this.setActivePreset(this.options[e].name),this.options[e]},e.prototype.addOption=function(e){var t=document.createElement("option");t.textContent=e.name,t.value=e.val,e.isCustom&&(t.className="pane-preset-option-custom"),this.selectEl.appendChild(t),this.options.push(e),t.selected=!0},e}();t.PlainSelectSingleLine=B;var L=function(){function e(e,t,n,i,s,r,l,u){void 0===u&&(u=!1);var h=this;this.langId=n,this.tooltipId=i,this.callback=r,l&&(this.suffix=l),this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var m=document.createElement("td");m.className="pane-item-visual",m.style.position="relative",this.wrapperEl.appendChild(m),this.inputEl=document.createElement("div"),this.inputEl.classList.add("pane-item-entry-input"),this.inputEl.contentEditable=s,m.appendChild(this.inputEl),s&&(this.inputEl.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()}),this.inputEl.addEventListener("focus",function(e){p.appStates.preventGlobalKeyEvents=!0,h.suffix?setTimeout(function(){h.inputEl.textContent=parseFloat(h.inputEl.textContent).toString(),o(h.inputEl)},100):o(h.inputEl)}),this.inputEl.addEventListener("blur",function(e){p.appStates.preventGlobalKeyEvents=!0;var t=h.inputEl.textContent;h.suffix&&(t=parseFloat(h.inputEl.textContent).toString()),h.callback(t)}),this.inputEl.addEventListener("keydown",function(e){if(13===e.keyCode){e.preventDefault();var t=h.inputEl.textContent;h.suffix&&(t=parseFloat(h.inputEl.textContent).toString()),h.callback(t)}})),u||vsClient.on("@changeLang",function(e){h.translate()})}return e.prototype.setVal=function(e){this.suffix&&(e=""===this.suffix?parseFloat(e)+this.suffix:parseFloat(e)+" "+this.suffix),this.inputEl.textContent=e},e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e}();t.PlainInput=L;var D=function(){function e(e,t,n,i,o,s){void 0===s&&(s=!1);var r=this;this.handleMouseMove=function(e){var t;t=e.touches?Math.min(Math.max(0,e.touches[0].pageX-this.sliderOffset),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth);var n,i=100/(this.sliderWidth/t),a=this.sliderWidth;n=t<=5?"0px":100/(a/t)+"%",this.handleEl.style.left=n,this.fedBar.style.width=n,this.setVal(i/100),this.callback(i/100)},this.handleMouseUp=function(e){var t;t=e.touches?Math.min(Math.max(0,e.changedTouches[0].pageX-this.sliderOffset-5),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset-5),this.sliderWidth);var n=100/(this.sliderWidth/t);this.setVal(n/100),this.callback(n/100),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp)},this.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),this.sliderOffset=$(e.target).parent().offset().left,this.sliderWidth=$(e.target).parent().width(),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("touchend",this.handleMouseUp)},this.langId=n,this.tooltipId=i,this.callback=o,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var l=document.createElement("td");l.className="pane-item-visual",l.style.position="relative",this.wrapperEl.appendChild(l),this.sliderOffset=0,this.sliderWidth=0,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.inputEl=document.createElement("input"),this.inputEl.className="slider-value-input",this.inputEl.min="0",this.inputEl.max="100",this.inputEl.style.width="25px",this.inputEl.onblur=function(e){r.callback(parseFloat(r.inputEl.value)/100),r.setVal(parseFloat(r.inputEl.value)/100)},this.inputEl.onchange=function(e){r.handleInputChanged(e)},l.appendChild(this.inputEl);var p=document.createElement("div");p.className="slider-wrapper",p.style.width="calc(100% - 50px)",l.appendChild(p);var u=document.createElement("div");u.style.position="relative",u.className="slider-bar",p.appendChild(u),this.fedBar=document.createElement("span"),this.fedBar.className="slider-bar-filled",u.appendChild(this.fedBar),this.handleEl=document.createElement("div"),this.handleEl.style.marginLeft="0",$(this.handleEl).addClass("slider-handle draggable"),u.appendChild(this.handleEl),this.handleEl.addEventListener("touchstart",this.handleMouseDown),this.handleEl.onmousedown=function(e){r.handleMouseDown(e)},u.onmousedown=function(e){r.handleClick(e)};var h=document.createElement("span");h.className="slider-bar-empty",h.style.width="100%",u.appendChild(h),s||vsClient.on("@changeLang",function(e){r.translate()})}return e.prototype.show=function(){$(this.wrapperEl).show()},e.prototype.hide=function(){$(this.wrapperEl).hide()},e.prototype.setVal=function(e){var t=!1;if(""!==this.inputEl.value&&this.inputEl.value&&void 0!==this.inputEl.value||(t=!0),this.inputEl.value=Math.round(100*e)+"",t||parseFloat(this.handleEl.style.left.replace("%",""))!==e){var n=$(this.inputEl).next().children().first().width(),i=n*e,a=n,o=void 0;o=i<=5?"0px":100/(a/i)+"%",this.handleEl.style.left=o,this.fedBar.style.width=o}},e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e.prototype.handleInputChanged=function(e){var t,n=e.target.value,i=$(e.target).next().children().first().width(),a=i/100*n,o=i;t=a<=5?"0px":100/(o/a)+"%",this.handleEl.style.left=t,this.fedBar.style.width=t,this.callback(n/100)},e.prototype.handleClick=function(e){this.sliderWidth=$(e.target).width(),this.sliderOffset=$(e.target).offset().left;var t,n=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),i=100/(this.sliderWidth/n),a=this.sliderWidth;t=n<=5?"0px":100/(a/n)+"%",this.handleEl.style.left=t,this.fedBar.style.width=t,this.setVal(i/100),this.callback(i/100)},e}();t.PlainSlider=D;var k=function(){function e(e,t,n,i,o,s){void 0===s&&(s=!1);var r=this;this.step=0,this.maxSteps=1,this.handleMouseMove=function(e){var t=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),n=100/(this.sliderWidth/t),i=100/this.maxSteps,a=Math.round(n/i);a!==this.step&&(this.setVal(a),this.callback(a))},this.handleMouseUp=function(e){document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp)},this.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation(),this.sliderOffset=$(e.target).parent().offset().left,this.sliderWidth=$(e.target).parent().width(),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("touchend",this.handleMouseUp)},this.langId=n,this.tooltipId=i,this.callback=o,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var l=document.createElement("td");l.className="pane-item-visual",l.style.position="relative",this.wrapperEl.appendChild(l),this.sliderOffset=0,this.sliderWidth=0,this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.inputEl=document.createElement("input"),this.inputEl.className="slider-value-input",this.inputEl.min="0",this.inputEl.max="100",this.inputEl.style.width="20px",this.inputEl.onblur=function(e){r.callback(parseInt(r.inputEl.value)),r.setVal(parseInt(r.inputEl.value))},this.inputEl.onchange=function(e){r.handleInputChanged(e)},l.appendChild(this.inputEl),this.maxStepEl=document.createElement("span"),this.maxStepEl.textContent="/1",this.maxStepEl.className="plain-stepped-slider-max-val",l.appendChild(this.maxStepEl);var p=document.createElement("div");p.className="slider-wrapper",p.style.width="calc(100% - 50px)",l.appendChild(p);var u=document.createElement("div");u.style.position="relative",u.className="slider-bar",p.appendChild(u),this.fedBar=document.createElement("span"),this.fedBar.className="slider-bar-filled",u.appendChild(this.fedBar),this.handleEl=document.createElement("div"),this.handleEl.style.marginLeft="0",$(this.handleEl).addClass("slider-handle draggable"),u.appendChild(this.handleEl),this.handleEl.addEventListener("touchstart",this.handleMouseDown),this.handleEl.onmousedown=function(e){r.handleMouseDown(e)},u.onmousedown=function(e){r.handleClick(e)};var h=document.createElement("span");h.className="slider-bar-empty",h.style.width="100%",u.appendChild(h),s||vsClient.on("@changeLang",function(e){r.translate()}),this.setVal(0)}return e.prototype.show=function(){$(this.wrapperEl).show()},e.prototype.hide=function(){$(this.wrapperEl).hide()},e.prototype.setMaxSteps=function(e){this.maxSteps=parseInt(e),this.maxStepEl.textContent="/"+e},e.prototype.setVal=function(e){e<0?e=0:e>this.maxSteps?e=this.maxSteps:NaN===e&&(e=0),this.step=e,this.inputEl.value=e.toString();var t=100/this.maxSteps,n=e*t+"%";this.handleEl.style.left=n,this.fedBar.style.width=n},e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e.prototype.handleInputChanged=function(e){var t=parseInt(e.target.value);this.setVal(t),this.callback(t)},e.prototype.handleClick=function(e){this.sliderWidth=$(e.target).width(),this.sliderOffset=$(e.target).offset().left;var t=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),n=100/(this.sliderWidth/t),i=100/this.maxSteps,a=Math.round(n/i);this.setVal(a),this.callback(a)},e}();t.PlainSteppedSlider=k;var R=function(){function e(e,t,n,i,o,s){void 0===s&&(s=!1);var r=this;this.isDefaultSet=!1,this.langId=n,this.tooltipId=i,this.callback=o,this.wrapperEl=document.createElement("tr"),this.wrapperEl.className="pane-item",t.appendChild(this.wrapperEl),this.nameEl=document.createElement("td"),this.nameEl.className="pane-item-entry-name",this.nameEl.textContent=d.translate(n),a(this.nameEl,e),this.tooltip=new c.WVTooltip(this.nameEl),this.wrapperEl.appendChild(this.nameEl);var l=document.createElement("td");l.className="pane-item-visual",l.style.position="relative",this.wrapperEl.appendChild(l),this.colorpicker=document.createElement("span"),this.colorpicker.classList.add("pane-item-entry-colorpicker"),l.appendChild(this.colorpicker),this.colorpicker.addEventListener("click",function(e){r.openPalette()},!1),s||vsClient.on("@changeLang",function(e){r.translate()})}return e.prototype.translate=function(e){this.setText(e),this.setTooltip(e)},e.prototype.setText=function(e){this.nameEl.textContent=e?e(this.langId):d.translate(this.langId)},e.prototype.setTooltip=function(e){this.tooltip.setTitle(e?e(this.langId):this.tooltipId)},e.prototype.openPalette=function(){var e=this,t=this.colorpicker.dataset.lastPickedColor;this.palette=new l.CustomPalette(t,this.showAlpha),this.palette.on("customColorChosen",function(t){return e.updateElementState(t)})},e.prototype.updateElementState=function(e){this.colorpicker.dataset.lastPickedColor=e,this.colorpicker.style.backgroundColor=e;var t=u(e).toHexString();this.callback(t)},e.prototype.setVal=function(e){var t=i(e);this.alpha=t.a;var n;n=this.showAlpha?"rgba("+t.r+", "+t.g+", "+t.b+", "+this.alpha+")":"rgb("+t.r+", "+t.g+", "+t.b+")",this.isDefaultSet||(this.colorpicker.dataset.defaultColor=n,this.isDefaultSet=!0),this.colorpicker.dataset.lastPickedColor=n,this.colorpicker.style.backgroundColor=n},e}();t.PlainColorPicker=R;var A=function(){function e(e,t){var n=this;this.anchorEl=e,this.callback=t,this.inputEl=document.createElement("input"),this.inputEl.className="pane-item-entry-input pane-inline-modal-input",this.inputEl.addEventListener("change",function(e){var t=n.inputEl.value;n.callback(t),n.hide()})}return e.prototype.show=function(){this.anchorEl.appendChild(this.inputEl),this.inputEl.placeholder="Name...",this.inputEl.focus()},e.prototype.hide=function(){$(this.inputEl).remove()},e}();t.SimplePaneInlineModal=A},function(e,t,n){"use strict";function i(e){if(!o.isType(e.doubleQuotes,"Boolean","Undefined"))throw new TypeError("options.doubleQuotes should be a boolean or undefined");if(o.isType(e.doubleQuotes,"Boolean")||(e.doubleQuotes=s.doubleQuotes),!o.isType(e.indent,"String","Undefined"))throw new TypeError("options.indent should be a string or undefined");if(o.isType(e.indent,"String")||(e.indent=s.indent),!o.isType(e.newline,"String","Undefined"))throw new TypeError("options.newline should be a string or undefined");if(o.isType(e.newline,"String")||(e.newline=s.newline),!o.isType(e.pretty,"Boolean","Undefined"))throw new TypeError("options.pretty should be a boolean or undefined");return o.isType(e.pretty,"Boolean")||(e.pretty=s.pretty),e}function a(e){if(!o.isType(e.encoding,"String","Undefined"))throw new TypeError("options.encoding should be a string or undefined");if(!o.isType(e.standalone,"String","Undefined"))throw new TypeError("options.standalone should be a string or undefined");if(!o.isType(e.version,"String","Undefined"))throw new TypeError("options.version should be a string or undefined");return o.isType(e.version,"String")||(e.version=r.version),e}var o=n(5),s={doubleQuotes:!1,indent:"    ",newline:"\n",pretty:!0};Object.freeze(s),t.validateStringOptions=i;var r={encoding:void 0,standalone:void 0,version:"1.0"};Object.freeze(r),t.validateDeclarationOptions=a},function(e,t,n){"use strict";function i(e,t){-1===h.appStates.interactionMode.indexOf(t)&&"off"!==t?f.prependPane(e):p(e)}function a(e,t){var n='<Call Method="ActivateInteraction"><Interaction>'+t+"</Interaction></Call>";e.command.executeXMLAsync(n)}function o(e,t){void 0===t&&(t="Deactivate_AllInteractions");var n=t.split("_")[0],i="Deactivate_"+n,a='<Call Method="ActivateInteraction"><Interaction>'+i+"</Interaction></Call>";e.command.executeXMLAsync(a)}function s(e,t){-1===h.appStates.interactionMode.indexOf(t)?a(e,t):o(e,t)}function r(e){e.classes.Interaction.forEach(function(e){e.applyHighlight(!1)})}function l(e){f.canvasStack.isMaximized?d(document):c(document.body)}function c(e){e.requestFullscreen?document.body.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function d(e){document.exitFullscreen?document.exitFullscreen():e.webkitExitFullscreen?document.webkitExitFullscreen():e.mozFullScreen&&e.mozCancelFullScreen()}function p(e){f.closePane(e)}function u(e,t){e.command.executeXMLAsync('<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>'),e.once("ActivateInteraction",function(e){r(t)});var n=localStorage.getItem("VSWVSettings");null===n&&(n=localStorage.getItem("VSWVDefaultSettings"));var i=f.settingsPane.defaultSettings,a=i.Settings.Scene.Mouse.LeftButtonFunction,o=i.Settings.Scene.Mouse.RightButtonFunction,s=i.Settings.Scene.Mouse.MiddleButtonFunction,l='<Call Method="SetSceneSettings">';l+="<Settings><Scene><Mouse><LeftButtonFunction> "+a+" </LeftButtonFunction>",l+="<RightButtonFunction>"+o+"</RighButtonFunction>",l+="<MiddleButtonFunction>"+s+"</MiddleButtonFunction></Mouse></Scene></Settings></Call>",vsClient.command.executeXML(l);var c="";h.appStates.selectionMode="Select",c='<Call Method="SetSelectionMode"><SelectionMode>'+h.appStates.selectionMode+"</SelectionMode></Call>",vsClient.command.executeXML(c),vsClient.once("SetSelectionMode",function(e){f.vsRibbon.classes.LMBSelection.forEach(function(e){"ID_RIBBON_SELECT"!==e.id?e.applyHighlight(!1):e.applyHighlight(!0)})}),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>');var d=-1!==h.appStates.popoutPanes.indexOf("wv-quickcompare");f.closePane("wv-quickcompare",d);var p='<Call Method="ActivateRotation"><Activate>false</Activate></Call>';e.command.executeXML(p),m.findButton("ID_RIBBON_SPIN").applyHighlight(!1),p='<Call Method="StopPlayConfigurationViews"></Call>',e.command.executeXML(p)}Object.defineProperty(t,"__esModule",{value:!0});var h=n(4),m=n(10),f=n(0),v=n(37),g=n(81),C=n(92);t.handlePrependingPane=i,t.handleActivateInteraction=s,t.toggleFullscreen=l;var _={langId:"",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_DEACTIVATE_ALL",iconId:"deactivate_all",ribbonClass:["DeactivateAll"]}],groupClick:function(e,t){var n=m.findButton(t),i=e.client,a=e.ribbon;n.flashHighlight(),u(i,a)}};t.deactivateAll=u,t.startTab={langId:"ID_RIBBON_START",groups:[{langId:"ID_RIBBON_FILE",widgets:[{type:m.WidgetType.SplittedDropdown,langId:"ID_RIBBON_OPEN",iconId:"2_oeffnen",dynamicDropdownItems:function(){var e=localStorage.getItem(window.location.origin+window.location.pathname+"VSWVRecentFiles");if(null===e)return[{langId:"Recent files",iconId:""}];e=e.slice(0,-1);for(var t=e.split(","),n=[{langId:"Recent files",iconId:""}],i=0;i<t.length;i++)n.push({langId:t[i],iconId:"2_oeffnen"});return n}(),splittedDropdownClick:function(e,t,n){var i=e.client;e.ribbon;if(void 0===t){new g.FileBrowserModal(i,"open",f.fileOpen)}else null!==t&&f.fileOpen(t.langId)}},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_IMPORT",iconId:"3_importieren"},{type:m.WidgetType.Button,langId:"ID_RIBBON_PRINT",iconId:"6_drucken"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;switch(i.langId){case"ID_RIBBON_IMPORT":new g.FileBrowserModal(a,"import",f.importFile);break;case"ID_RIBBON_SAVE":new g.FileBrowserModal(a,"save",a.SaveFile.bind(a));break;case"ID_RIBBON_PRINT":new C.PrintModal(a)}}},{langId:"ID_RIBBON_VISSHARE_FILE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_VISSHARE_SAVE",iconId:"4_speichern"},{type:m.WidgetType.Button,langId:"ID_RIBBON_VISSHARE_SAVE_AS",iconId:"4_speichern"}],groupClick:function(e,t,n){var i=e.client,a=(e.ribbon,m.findButton(t)),o={Method:"ID_RIBBON_VISSHARE_SAVE"===a.langId?"ShareSave":"ShareSaveAs",Token:i.sessionInfo.token};i.command.executeXML(JSON.stringify(o)),f.blockUI(),i.once("SaveAs",function(e){f.unblockUI()})}},{langId:"ID_RIBBON_UNDO",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_LAST_ACTIONS",iconId:"1_letzte_aktionen"}],groupClick:function(e,t){var n=e.client,i=(e.ribbon,m.findButton(t));n.command.executeXML('<Call Method="Undo"></Call>'),i.flashHighlight()}},{langId:"ID_RIBBON_CONTROLS",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_ZOOM_RECTANGLE",iconId:"1_zoom_rahmen",ribbonClass:["LMBFunction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_ROTATE",iconId:"2_drehen",ribbonClass:["LMBFunction"],highlight:!0},{type:m.WidgetType.Button,langId:"ID_RIBBON_PAN",iconId:"3_pan",ribbonClass:["LMBFunction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_SELECTION_FRAME",iconId:"4_auswahl_rahmen",ribbonClass:["LMBFunction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_TURNTABLE",iconId:"3_drehen",ribbonClass:["LMBFunction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ZOOM",iconId:"5_zoom",ribbonClass:["LMBFunction"]},{type:m.WidgetType.ButtonLet,langId:"ID_MOUSE_USE_FREE_ROTATE",iconId:"bim_mode"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;if("ID_MOUSE_USE_FREE_ROTATE"===i.langId){var o='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><UseFreeRotate>';return o+=!i.isHighlight,o+="</UseFreeRotate></Mouse></Scene></Settings></Call>",a.command.executeXML(o),void i.applyHighlight(!i.isHighlight)}if(h.appStates.fileLoaded){var s="",r='<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>';switch(i.langId){case"ID_RIBBON_ZOOM_RECTANGLE":s="RectZoom",vsClient.command.executeXML(r);break;case"ID_RIBBON_ROTATE":s="Rotate";break;case"ID_RIBBON_PAN":s="Pan";break;case"ID_RIBBON_SELECTION_FRAME":s="RectSelect",vsClient.command.executeXML(r);break;case"ID_RIBBON_ZOOM":s="Zoom";break;case"ID_RIBBON_TURNTABLE":s="Turntable";break;default:return}var l='<Call Method="SetSceneSettings">\n\t\t\t\t\t\t\t<Settings>\n\t\t\t\t\t\t\t\t<Scene>\n\t\t\t\t\t\t\t\t<Mouse>\n\t\t\t\t\t\t\t\t<LeftButtonFunction>\n\t\t\t\t\t\t\t\t\t'+s+"\n\t\t\t\t\t\t\t\t</LeftButtonFunction>\n\t\t\t\t\t\t\t\t</Mouse>\n\t\t\t\t\t\t\t\t</Scene>\n\t\t\t\t\t\t\t</Settings>\n\t\t\t\t\t\t</Call>";a.command.executeXML(l)}}},{langId:"ID_RIBBON_SELECTION_MODE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_SELECT",iconId:"1_selektieren",ribbonClass:["LMBSelection"],highlight:!0},{type:m.WidgetType.Button,langId:"ID_RIBBON_NEIGHBOURHOOD_SEARCH",iconId:"2_nachbarschaft",ribbonClass:["LMBSelection"],paneId:"wv-neighbourhoodsearch"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_HIDE",iconId:"3_verbergen",ribbonClass:["LMBSelection"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_DELETE",iconId:"4_loeschen",ribbonClass:["LMBSelection"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_GHOST",iconId:"5_ghost",ribbonClass:["LMBSelection"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_COLOR",iconId:"10_auswahl_durch_farbe",ribbonClass:["LMBSelection"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_INSTANCE",iconId:"selection_mode_instance",ribbonClass:["LMBSelection"]},{type:m.WidgetType.ButtonLet,langId:"ID_ATTRIBUTES",iconId:"selection_mode_attributes",ribbonClass:["LMBSelection"]}],groupClick:function(e,t,n){var a=m.findButton(t),o=e.client;if("Attributes"===h.appStates.selectionMode&&a.langId){var s='<Call Method="SetSceneSettings"><Settings><Scene><General><SelectionModeModifier>';s+=h.appStates.lastSelectionModeModifier,s+="</SelecitionModeModifier></General></Scene></Settings></Call>",o.command.executeXML(s)}if("ID_RIBBON_NEIGHBOURHOOD_SEARCH"===a.langId){if("Neighbourhood"!==h.appStates.selectionMode){n.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),a.applyHighlight(!0),i("wv-neighbourhoodsearch","on"),h.appStates.selectionMode="Neighbourhood";var r='<Call Method="SetSelectionMode"><SelectionMode>'+h.appStates.selectionMode+"</SelectionMode></Call>";o.command.executeXML(r)}}else if("ID_ATTRIBUTES"===a.langId){if(!a.isHighlight){h.appStates.lastSelectionModeModifier=f.settingsPane.sceneSettings.Settings.Scene.General.SelectionModeModifier;var s='<Call Method="SetSceneSettings"><Settings><Scene><General><SelectionModeModifier>';return s+="SelectProductOccurence",s+="</SelecitionModeModifier></General></Scene></Settings></Call>",o.command.executeXML(s),h.appStates.selectionMode="Attributes",n.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),void a.applyHighlight(!0)}var s='<Call Method="SetSceneSettings"><Settings><Scene><General><SelectionModeModifier>';s+=h.appStates.lastSelectionModeModifier,s+="</SelecitionModeModifier></General></Scene></Settings></Call>",o.command.executeXML(s),a.applyHighlight(!1)}else{switch(a.langId){case"ID_RIBBON_SELECT":h.appStates.selectionMode="Select";break;case"ID_RIBBON_HIDE":h.appStates.selectionMode="Hide";break;case"ID_RIBBON_DELETE":h.appStates.selectionMode="Delete";break;case"ID_RIBBON_GHOST":h.appStates.selectionMode="Ghost";break;case"ID_RIBBON_COLOR":h.appStates.selectionMode="Color";break;case"ID_RIBBON_INSTANCE":h.appStates.selectionMode="Instance";break;default:return}var r='<Call Method="SetSelectionMode"><SelectionMode>'+h.appStates.selectionMode+"</SelectionMode></Call>";o.command.executeXML(r),o.once("SetSelectionMode",function(e){"SUCCESS"===e.Error&&(i("wv-neighbourhoodsearch","off"),n.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),a.applyHighlight(!0))})}}},{langId:"ID_RIBBON_SELECTION",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_SELECT_ALL",iconId:"1_alles_selektieren"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_INVERT_SELECTION",iconId:"2_auswahl_umkehren"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ISOLATE",iconId:"3_isolieren"},{type:m.WidgetType.ButtonLet,langId:"ID_SHOW_SELECTION",iconId:"4_anzeigen"},{type:m.WidgetType.ButtonLet,langId:"ID_HIDE_SELECTION",iconId:"5_verbergen"},{type:m.WidgetType.ButtonLet,langId:"ID_DELETE_SELECTION",iconId:"6_loeschen"},{type:m.WidgetType.ButtonLet,langId:"ID_GHOST_SELECTION",iconId:"7_ghost"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_UNGHOST",iconId:"8_ghost_ausschalten"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_DESELECT",iconId:"9_auswahl_aufheben"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_COLOR",iconId:"10_auswahl_durch_farbe",highlight:!1},{type:m.WidgetType.ButtonLet,langId:"",iconId:"",disabled:!0}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;switch(i.langId){case"ID_RIBBON_SELECT_ALL":a.command.executeXML('<Call Method="SelectAllGeometries"></Call>');break;case"ID_RIBBON_INVERT_SELECTION":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Invert</SelectionModifier></Call>');break;case"ID_RIBBON_ISOLATE":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Isolate</SelectionModifier></Call>');break;case"ID_SHOW_SELECTION":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Show</SelectionModifier></Call>');break;case"ID_HIDE_SELECTION":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Hide</SelectionModifier></Call>');break;case"ID_DELETE_SELECTION":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Delete</SelectionModifier></Call>');break;case"ID_GHOST_SELECTION":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Ghost</SelectionModifier></Call>');break;case"ID_RIBBON_UNGHOST":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>UnGhost</SelectionModifier></Call>');break;case"ID_RIBBON_DESELECT":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>');break;case"ID_RIBBON_COLOR":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>SearchByColor</SelectionModifier></Call>');break;default:console.log("invalid id")}i.flashHighlight()}},{langId:"ID_RIBBON_SHOW/HIDE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_SHOW_ALL",iconId:"1_alles_anzeigen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_UNGHOST_ALL",iconId:"2_ghost_ausschalten"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_HIDE_ALL_MARKUPS",iconId:"3_markups_verbergen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_HIDE_ALL_PMIS",iconId:"4_pmis_verbergen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_INVERT_VISIBILITY",iconId:"5_sichtbarkeit_umkehren"},{type:m.WidgetType.ButtonLet,langId:"",iconId:"",disabled:!0},{type:m.WidgetType.ButtonLet,langId:"",iconId:"",disabled:!0}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;switch(i.langId){case"ID_RIBBON_SHOW_ALL":a.command.executeXMLAsync('<Call Method="ShowAll"></Call>');break;case"ID_RIBBON_UNGHOST_ALL":a.command.executeXMLAsync('<Call Method="UnGhostAll"></Call>');break;case"ID_RIBBON_HIDE_ALL_MARKUPS":a.command.executeXMLAsync('<Call Method="HideAllMarkups"></Call>');break;case"ID_RIBBON_HIDE_ALL_PMIS":a.command.executeXMLAsync('<Call Method="HideAllPMIs"></Call>');break;case"ID_RIBBON_INVERT_VISIBILITY":a.command.executeXMLAsync('<Call Method="InvertVisibility"></Call>');break;default:console.log("invalid id")}i.flashHighlight()}},_]},t.documentTab={langId:"ID_RIBBON_DOCUMENT",groups:[{langId:"ID_RIBBON_CONTROLS",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_PAN",iconId:"3_pan",ribbonClass:["LMBFunction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_ZOOM_RECTANGLE",iconId:"1_zoom_rahmen",ribbonClass:["LMBFunction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=e.ribbon,s="";switch(i.langId){case"ID_RIBBON_ZOOM_RECTANGLE":s="RectZoom",vsClient.command.executeXML('<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>');break;case"ID_RIBBON_PAN":s="Pan";break;default:return}var r='<Call Method="SetSceneSettings">\n                            <Settings>\n                                <Scene>\n                                <Mouse>\n                                <LeftButtonFunction>\n                                    '+s+"\n                                </LeftButtonFunction>\n                                </Mouse>\n                                </Scene>\n                            </Settings>\n                        </Call>";a.command.executeXMLAsync(r),a.once("SetSceneSettings",function(e){if("SUCCESS"===e.Error){o.classes.LMBFunction.forEach(function(e){e.applyHighlight(!1)});var t=i.langId;o.classes.LMBFunction.forEach(function(e){e.langId===t&&e.applyHighlight(!0)}),h.appStates.mouseLeftButtonMode=s}})}},{langId:"ID_RIBBON_PAGE",widgets:[{langId:"ID_RIBBON_PREVIOUS",iconId:"1_vorherige"},{type:m.WidgetType.Input,langId:"ID_RIBBON_PAGE",ribbonClass:["PageInput"],inputCallback:function(e,t,n){var i=e.client,a=(e.ribbon,m.findInput(t)),o=a.el,s=n.which||n.keyCode;if(27===s&&o.blur(),13===s&&/^[0-9]{1,5}$/.test(o.value)){var r=o.value;i.command.executeXMLAsync('<Call Method="GotoPage">\n                                                                                            <Page>'+r+"</Page>\n                                                                                    </Call>"),i.once("GotoPage",function(e){"SUCCESS"===e.Error&&(i.command.executeXMLAsync('<Call Method="GetPageCount"></Call>'),i.once("GetPageCount",function(e){o.value=r+" / "+e.Pages}))})}}},{langId:"ID_RIBBON_NEXT",iconId:"2_naechtse"}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client,s=e.ribbon;switch(a.langId){case"ID_RIBBON_PREVIOUS":i='<Call Method="PreviousPage"></Call>',o.command.executeXMLAsync(i),o.once("PreviousPage",function(e){var t=s.classes.PageInput[0],n=t.el,i=n.value.lastIndexOf("/"),a=n.value.substr(i+1).trim();n.value=e.Page+" / "+a});break;case"ID_RIBBON_NEXT":i='<Call Method="NextPage"></Call>',o.command.executeXMLAsync(i),o.once("NextPage",function(e){var t=s.classes.PageInput[0],n=t.el,i=n.value.lastIndexOf("/"),a=n.value.substr(i+1).trim();n.value=e.Page+" / "+a})}a.flashHighlight()}},{langId:"ID_RIBBON_ROTATE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_90",iconId:"1_90_Grad"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_180",iconId:"2_180_Grad"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_270",iconId:"3_270_Grad"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,'<Call Method="RotatePage"></Call>');switch(a.command.executeXMLAsync(o),i.langId){case"ID_RIBBON_90":break;case"ID_RIBBON_180":a.command.executeXMLAsync(o);break;case"ID_RIBBON_270":a.command.executeXMLAsync(o),a.command.executeXMLAsync(o)}i.flashHighlight()}},{langId:"ID_RIBBON_ZOOM",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIT_ALL",iconId:"1_anpassen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIT_WIDTH",iconId:"2_an_fensterbreite_anpassen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIT_HEIGHT",iconId:"3_an_fensterhoehe_anpassen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ZOOM_IN",iconId:"4_vergroessern"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ZOOM_OUT",iconId:"5_verkleinern"},{type:m.WidgetType.ButtonLet,langId:"",iconId:"",disabled:!0}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;e.ribbon;switch(a.langId){case"ID_RIBBON_FIT_ALL":i='<Call Method="FitAll"></Call>';break;case"ID_RIBBON_FIT_WIDTH":i='<Call Method="FitWidth"></Call>';break;case"ID_RIBBON_FIT_HEIGHT":i='<Call Method="FitHeight"></Call>';break;case"ID_RIBBON_ZOOM_IN":i='<Call Method="ZoomIn"></Call>';break;case"ID_RIBBON_ZOOM_OUT":i='<Call Method="ZoomOut"></Call>'}o.command.executeXMLAsync(i),a.flashHighlight()}},{langId:"ID_RIBBON_TEXT_SEARCH",widgets:[{type:m.WidgetType.Button,langId:"ID_TEXT_SEARCH",iconId:"1_text_search",paneId:"wv-textsearch"}],groupClick:function(e,t,n){var a=m.findButton(t);e.client;a.isHighlight?(a.applyHighlight(!1),i("wv-textsearch","off")):(a.applyHighlight(!0),i("wv-textsearch","on"))}},{langId:"ID_RIBBON_GRAPHIC_EFFECTS",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_ILLUSTRATION",iconId:"3_illustration"},{type:m.WidgetType.Button,langId:"ID_RIBBON_INVERT",iconId:"1_invertieren"}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;e.ribbon;switch(a.langId){case"ID_RIBBON_ILLUSTRATION":i="Illustration";break;case"ID_RIBBON_INVERT":i="Inverse"}for(var s=[],r=0,l=h.appStates.renderingModes;r<l.length;r++){var c=l[r];c!=i&&s.push(c)}h.appStates.renderingModes.every(function(e){return e!==i})&&s.push(i),1===s.length&&"Perspective"===s[0]&&s.push("Solid");for(var d='<Call Method="SetSceneSettings"><Settings><Scene><Visualization><RenderMode>',p=0;p<s.length;p++)d=d+s[p]+" ";d+="</RenderMode></Visualization></Scene></Settings></Call>",o.command.executeXMLAsync(d)}},{langId:"ID_RIBBON_COMPARE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_COMPARE",iconId:"2_exakt",ribbonClass:["Interaction"],paneId:"wv-quickcompare"}],groupClick:function(e,t,n){var a=e.client,o=(e.ribbon,m.findButton(t));if(o.isHighlight){var s='<Call Method="ActivateGraphicalCompare"><Activate>false</Activate></Call>';a.command.executeXMLAsync(s),a.once("ActivateGraphicalCompare",function(e){"SUCCESS"===e.Error&&p("wv-quickcompare")})}else{var s='<Call Method="ActivateGraphicalCompare"><Activate>true</Activate></Call>';a.command.executeXMLAsync(s),a.once("ActivateGraphicalCompare",function(e){"SUCCESS"===e.Error&&o.applyHighlight(!0)}),i("wv-quickcompare","QuickCompare")}}},{langId:"ID_RIBBON_3D_MARKUP",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_TEXT",iconId:"1_text",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_CIRCLE",iconId:"2_kreis",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIXED_TEXT",iconId:"fixed_markup",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_RECTANGLE",iconId:"3_rechteck",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FREEHAND",iconId:"4_freihand",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_TEXT":o="Markup_Text";break;case"ID_RIBBON_CIRCLE":o="Markup_Circle";break;case"ID_RIBBON_RECTANGLE":o="Markup_Rectangle";break;case"ID_RIBBON_FREEHAND":o="Markup_Freehand";break;case"ID_RIBBON_FIXED_TEXT":o="Markup_Text_Fixed";break;default:console.error("invalid interaction type")}i.event=o,s(a,o)}},_]},t.viewTab={langId:"ID_RIBBON_VIEW",groups:[{langId:"ID_RIBBON_ALIGNMENT",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_ISOMETRIC",iconId:"1_isometrisch"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_TOP",iconId:"2_oben"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_LEFT",iconId:"3_links"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FRONT",iconId:"4_vorne"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BOTTOM",iconId:"5_unten"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_RIGHT",iconId:"6_rechts"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BACK",iconId:"7_hinten"}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;e.ribbon;switch(a.langId){case"ID_RIBBON_ISOMETRIC":i="Isometric";break;case"ID_RIBBON_TOP":i="Top";break;case"ID_RIBBON_LEFT":i="Left";break;case"ID_RIBBON_FRONT":i="Front";break;case"ID_RIBBON_BOTTOM":i="Bottom";break;case"ID_RIBBON_RIGHT":i="Right";break;case"ID_RIBBON_BACK":i="Back";break;default:return}var s='<Call Method="AlignView"><Alignment>'+i+"</Alignment></Call>";o.command.executeXMLAsync(s)}},{langId:"ID_RIBBON_ROTATE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_90",iconId:"1_90_Grad"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_180",iconId:"2_180_Grad"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_270",iconId:"3_270_Grad"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,'<Call Method="RotatePage"></Call>');switch(a.command.executeXML(o),i.langId){case"ID_RIBBON_90":break;case"ID_RIBBON_180":a.command.executeXML(o);break;case"ID_RIBBON_270":a.command.executeXML(o),a.command.executeXML(o)}i.flashHighlight()}},{langId:"ID_RIBBON_ZOOM",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIT_ALL",iconId:"1_anpassen"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ZOOM_IN",iconId:"2_vergroessern"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ZOOM_OUT",iconId:"3_verkleinern"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FOCUS",iconId:"4_focus"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FOCUS_TRANSITION",iconId:"focus_and_transition"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_SET_ORIGIN",iconId:"set_origin"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;switch(i.langId){case"ID_RIBBON_FIT_ALL":a.command.executeXML('<Call Method="FitAll"></Call>');break;case"ID_RIBBON_ZOOM_IN":a.command.executeXML('<Call Method="ZoomIn"></Call>');break;case"ID_RIBBON_ZOOM_OUT":a.command.executeXML('<Call Method="ZoomOut"></Call>');break;case"ID_RIBBON_FOCUS":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Focus</SelectionModifier></Call>');break;case"ID_RIBBON_FOCUS_TRANSITION":a.command.executeXML('<Call Method="Focus">\n                        <Ghost>true</Ghost>\n                        <FadeTime>\n                          <ZoomOut>500</ZoomOut>\n                          <Translation>500</Translation>\n                          <Rotation>1000</Rotation>\n                          <ZoomIn>1000</ZoomIn>\n                        </FadeTime></Call>');break;case"ID_RIBBON_SET_ORIGIN":a.command.executeXML('<Call Method="SetOrigin"></Call>')}i.flashHighlight()}},{langId:"ID_RIBBON_RENDERING_MODE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_SOLID",iconId:"1_koerper"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_WIRES",iconId:"2_drahtmodell"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ILLUSTRATION",iconId:"3_illustration"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_PERSPECTIVE",iconId:"4_perspektive"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_SOLID":o="Solid";break;case"ID_RIBBON_WIRES":o="Wires";break;case"ID_RIBBON_ILLUSTRATION":o="Illustration";break;case"ID_RIBBON_PERSPECTIVE":o="Perspective"}for(var s=[],r=0,l=h.appStates.renderingModes;r<l.length;r++){var c=l[r];c!=o&&s.push(c)}h.appStates.renderingModes.every(function(e){return e!==o})&&s.push(o),1===s.length&&"Perspective"===s[0]&&s.push("Solid");for(var d='<Call Method="SetSceneSettings"><Settings><Scene><Visualization><RenderMode>',p=0;p<s.length;p++)d=d+s[p]+" ";d+="</RenderMode></Visualization></Scene></Settings></Call>",a.command.executeXMLAsync(d)}},{langId:"ID_RIBBON_GRAPHIC_EFFECTS",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_SILHOUETTE",iconId:"1_kontur"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_OPAQUE",iconId:"5_undurchsichtig"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_SHADOW",iconId:"3_schatten"},{type:m.WidgetType.Button,langId:"ID_RIBBON_MATERIAL",iconId:"4_material"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.id){case"ID_RIBBON_SILHOUETTE":o="Silhouette";break;case"ID_RIBBON_OPAQUE":o="Opaque";break;case"ID_RIBBON_SHADOW":o="Shadow";break;case"ID_RIBBON_MATERIAL":o="Material"}for(var s=[],r=0,l=h.appStates.renderingModes;r<l.length;r++){var c=l[r];c!=o&&s.push(c)}h.appStates.renderingModes.every(function(e){return e!==o})&&s.push(o);for(var d='<Call Method="SetRenderMode">',p=0;p<s.length;p++)d=d+"<RenderMode>"+s[p]+"</RenderMode>";d+="</Call>",a.command.executeXMLAsync(d),a.once("SetRenderMode",function(e){a.command.executeXMLAsync('<Call Method="GetSceneSettings"></Call>')})}},{langId:"ID_RIBBON_FLYTHROUGH",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_FLYTHROUGH",iconId:"1_fly_through",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;i.event="Flythrough",s(a,"Flythrough")}},{langId:"ID_RIBBON_ROTATE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_SPIN",iconId:"1_drehen"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;if(i.isHighlight){i.applyHighlight(!1);var o='<Call Method="ActivateRotation"><Activate>false</Activate></Call>';a.command.executeXMLAsync(o)}else{i.applyHighlight(!0);var o='<Call Method="ActivateRotation"><Activate>true</Activate></Call>';a.command.executeXMLAsync(o)}}},{langId:"ID_RIBBON_SCENES",widgets:[{langId:"ID_RIBBON_SHOW_GRID",iconId:"1_raster_darstellen"},{type:m.WidgetType.Button,langId:"ID_RIBBON_FULL_SCREEN",iconId:"1_vollbild"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=e.ribbon;switch(i.id){case"ID_RIBBON_FULL_SCREEN":l(o);break;case"ID_RIBBON_SHOW_GRID":var s=!i.isHighlight,r="<Settings>\n\t\t\t\t\t\t\t\t\t<Scene>\n\t\t\t\t\t\t\t\t\t\t<Visualization>\n\t\t\t\t\t\t\t\t\t\t\t<ShowGrid>"+s+"</ShowGrid>\n\t\t\t\t\t\t\t\t\t\t</Visualization>\n\t\t\t\t\t\t\t\t\t</Scene>\n\t\t\t\t\t\t\t\t</Settings>",c='<Call Method="SetSceneSettings">'+r+"</Call>";a.command.executeXML(c),a.once("SetSceneSettings",function(e){"SUCCESS"===e.Error&&i.applyHighlight(s)})}i.flashHighlight()}},{langId:"ID_ANIMATION",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_ANIMATE",iconId:"animation_start"},{type:m.WidgetType.Button,langId:"ID_CREATE_ANIMATION",iconId:"animation_settings",paneId:"wv-animation"}],groupClick:function(e,t,n){var a=m.findButton(t),o=e.client,s=(e.ribbon,a.isHighlight);switch(a.langId){case"ID_RIBBON_ANIMATE":var r='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>'+!s;r+="</Animation></General></Scene></Settings></Call>",o.command.executeXML(r);break;case"ID_CREATE_ANIMATION":s?(i("wv-animation","off"),a.applyHighlight(!1)):(i("wv-animation","on"),a.applyHighlight(!0))}}},{langId:"ID_RIBBON_SHOW_PANES",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_MODEL_TREE",iconId:"menu_modeltree",paneId:"wv-modeltree"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_VIEWS",iconId:"menu_views",paneId:"wv-views"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_PROPERTIES",iconId:"menu_properties",paneId:"wv-properties"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_SETTINGS",iconId:"menu_settings",paneId:"wv-settings"},{type:m.WidgetType.ButtonLet,langId:"ID_SELECTIONS_WND",iconId:"1_selektieren",paneId:"wv-selections"},{type:m.WidgetType.Button,langId:"ID_RIBBON_RESET_UI",iconId:"1_oberflaeche_zuruecksetzen"}],groupClick:function(e,t,n){var i=(e.client,m.findButton(t));if("ID_RIBBON_RESET_UI"===i.id)f.resetPanes(!0);else if(i.isHighlight){p(i.paneId);for(var a=h.appStates.panes.length,o=0;o<a;o++)h.appStates.panes[o].paneId===i.paneId&&(h.appStates.panes[o].visible=!1);localStorage.setItem("panePositions",JSON.stringify(h.appStates.panes))}else f.prependPane(i.paneId)}},_]},t.measurementTab={langId:"ID_RIBBON_MEASUREMENT",groups:[{langId:"ID_RIBBON_DIMENSION_MODE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_MEASUREMENT",iconId:"1_measurement"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_DIMENSION",iconId:"2_dimensioning",highlight:!0}],groupClick:function(e,t,n){var i,a,o=m.findButton(t),s=e.client;e.ribbon;switch(o.langId){case"ID_RIBBON_MEASUREMENT":i=' <Settings>\n\t\t\t\t\t\t\t\t\t  <Scene><Tools>\n\t\t\t\t\t\t\t\t\t  <Dimensioning>\n\t\t\t\t\t\t\t\t\t  <Dimensioning Type="bool">false</Dimensioning>\n\t\t\t\t\t\t\t\t\t  </Dimensioning>\n\t\t\t\t\t\t\t\t\t  </Tools></Scene>\n\t\t\t\t\t\t\t\t\t  </Settings>',a='<Call Method="SetSceneSettings"> '+i+" </Call>",s.command.executeXMLAsync(a);break;case"ID_RIBBON_DIMENSION":i=' <Settings>\n\t\t\t\t\t\t\t\t\t  <Scene><Tools>\n\t\t\t\t\t\t\t\t\t  <Dimensioning>\n\t\t\t\t\t\t\t\t\t  <Dimensioning Type="bool">true</Dimensioning>\n\t\t\t\t\t\t\t\t\t  </Dimensioning>\n\t\t\t\t\t\t\t\t\t  </Tools></Scene>\n\t\t\t\t\t\t\t\t\t  </Settings>',a='<Call Method="SetSceneSettings"> '+i+" </Call>",s.command.executeXMLAsync(a)}s.once("SetSceneSettings",function(){n.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),o.applyHighlight(!0)})}},{langId:"ID_RIBBON_COORDINATE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_POINT",iconId:"1_punkt",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"Measurement_PointCoordinate");i.event=o,s(a,o)}},{langId:"ID_RIBBON_EDGE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_LENGTH",iconId:"1_laenge",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_ACCUMULATED_LENGTH",iconId:"2_kumulierte_laenge",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;switch(a.langId){case"ID_RIBBON_LENGTH":i="Measurement_EdgeLength";break;case"ID_RIBBON_ACCUMULATED_LENGTH":i="Measurement_EdgeLengthAccumulated";break;default:return}a.event=i,s(o,i)}},{langId:"ID_RIBBON_CIRCLE_MODE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ARC",iconId:"1_kreisbogen",highlight:!0},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_3_POINTS",iconId:"2_3_punkte"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,'<Call Method="SetSceneSettings"><Settings><Scene><Tools><CircleSelection><SelectCircleWith3Points>');o+="ID_RIBBON_3_POINTS"===i.langId,o+="</SelectCircleWith3Points></CircleSelection></Tools></Scene></Settings></Call>",a.command.executeXMLAsync(o),a.once("SetSceneSettings",function(){n.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),i.applyHighlight(!0)})}},{langId:"ID_RIBBON_CIRCLE",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_RADIUS",iconId:"1_1_radius",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_RADIUS",iconId:"1_1_radius",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DIAMETER",iconId:"1_2_durchmesser",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_PERIMETER",iconId:"1_3_umfang",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_CENTER",iconId:"1_4_mittelpunkt",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_AREA",iconId:"1_5_flaeche",ribbonClass:["Interaction"]}],dropdownClick:function(e,t,n){var i=e.client,a="";switch(t.langId){case"ID_RIBBON_RADIUS":a="Measurement_CircleRadius";break;case"ID_RIBBON_DIAMETER":a="Measurement_CircleDiameter";break;case"ID_RIBBON_PERIMETER":a="Measurement_CirclePerimeter";break;case"ID_RIBBON_CENTER":a="Measurement_CircleCenter";break;case"ID_RIBBON_AREA":a="Measurement_CircleArea"}t.event=a,s(i,a)}}]},{langId:"ID_RIBBON_DISTANCE",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_POINTS",iconId:"1_1_punkt_zu_punkt",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_POINTS",iconId:"1_1_punkt_zu_punkt",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_EDGE",iconId:"1_2_punkt_zu_kante",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_CIRCLE_AXIS",iconId:"1_3_punkt_zu_kreisachse",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_SOLID",iconId:"1_4_punkt_zu_koerper",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_EDGES",iconId:"1_5_kante_zu_kante",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_FACE",iconId:"1_6_kante_zu_oberflaeche",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_SOLID",iconId:"1_7_kante_zu_koerper",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_AXES",iconId:"1_8_kreisachse_zu_kreisachse",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_CENTERS",iconId:"1_8_kreisachse_zu_kreisachse",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_CIRCLE_AXIS_AND_EDGE",iconId:"1_9_kreismittelpunkt_zu_kante",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_FACES",iconId:"1_10_oberflaeche_zu_oberflaeche",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_CENTER",iconId:"1_11_oberflaeche_zu_mittelpunkt",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_SOLID",iconId:"1_12_oberflaeche_zu_koerper",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_SOLIDS",iconId:"1_13_koerper_zu_koerper",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_DISTANCE_BETWEEN_PIPE_CENTER_AND_FACE",iconId:"1_14_cylinder_center_to_face",ribbonClass:["Interaction"]}],dropdownClick:function(e,t,n){var i=e.client,a=(e.ribbon,"");switch(t.langId){case"ID_RIBBON_DISTANCE_BETWEEN_TWO_POINTS":a="Measurement_DistancePointToPoint";break;case"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_EDGE":a="Measurement_DistancePointToEdge";break;case"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_CIRCLE_AXIS":a="Measurement_DistancePointToAxis";break;case"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_SOLID":a="Measurement_DistancePointToSolid";break;case"ID_RIBBON_DISTANCE_BETWEEN_TWO_EDGES":a="Measurement_DistanceEdgeToEdge";break;case"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_FACE":a="Measurement_DistanceEdgeToFace";break;case"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_SOLID":a="Measurement_DistanceEdgeToSolid";break;case"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_AXES":a="Measurement_DistanceAxisToAxis";break;case"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_CENTERS":a="Measurement_DistanceCenterToCenter";break;case"ID_RIBBON_DISTANCE_BETWEEN_CIRCLE_AXIS_AND_EDGE":a="Measurement_DistanceAxisToEdge";break;case"ID_RIBBON_DISTANCE_BETWEEN_TWO_FACES":a="Measurement_DistanceFaceToFace";break;case"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_CENTER":a="Measurement_DistanceFaceToCenter";break;case"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_SOLID":a="Measurement_DistanceFaceToSolid";break;case"ID_RIBBON_DISTANCE_BETWEEN_TWO_SOLIDS":a="Measurement_DistanceSolidToSolid";break;case"ID_RIBBON_DISTANCE_BETWEEN_PIPE_CENTER_AND_FACE":a="Measurement_DistanceCylinderCenterToFace"}t.event=a,s(i,a)}}]},{langId:"ID_RIBBON_ANGLE",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_AXES",iconId:"1_1_kreisachse_zu_kreisachse",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_AXES",iconId:"1_1_kreisachse_zu_kreisachse",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_BETWEEN_AXIS_AND_EDGE",iconId:"1_2_kreisachse_zu_kante",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_LINES",iconId:"1_3_linie_zu_linie",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_PROJECTED_LINES",iconId:"1_3_linie_zu_linie",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_PLANES",iconId:"1_4_ebene_zu_ebene",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_BETWEEN_PLANE_AND_DIRECTION",iconId:"1_5_ebene_zu_richtung",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_ANGLE_DEFINED_BY_THREE_POINTS",iconId:"1_6_winkel_aus_drei_punkten",ribbonClass:["Interaction"]}],dropdownClick:function(e,t,n){var i=e.client,a=(e.ribbon,"");switch(t.langId){case"ID_RIBBON_ANGLE_BETWEEN_TWO_AXES":a="Measurement_AngleBetweenTwoAxes";break;case"ID_RIBBON_ANGLE_BETWEEN_AXIS_AND_EDGE":a="Measurement_AngleBetweenAxisEdge";break;case"ID_RIBBON_ANGLE_BETWEEN_TWO_LINES":a="Measurement_AngleBetweenTwoLines";break;case"ID_RIBBON_ANGLE_BETWEEN_TWO_PLANES":a="Measurement_AngleBetweenTwoPlanes";break;case"ID_RIBBON_ANGLE_BETWEEN_PLANE_AND_DIRECTION":a="Measurement_AngleBetweenPlaneDirection";break;case"ID_RIBBON_ANGLE_DEFINED_BY_THREE_POINTS":a="Measurement_AngleFromThreePoints";break;case"ID_RIBBON_ANGLE_BETWEEN_TWO_PROJECTED_LINES":a="Measurement_AngleBetweenTwoProjectedLines";break;default:return}t.event=a,s(i,a)}}]},{langId:"ID_RIBBON_AREA",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_FACE",iconId:"measure_face",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;e.ribbon;switch(a.langId){case"ID_RIBBON_FACE":i="Measurement_FaceArea"}a.event=i,s(o,i)}},{langId:"ID_RIBBON_WALL_THICKNESS",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_WALLTHICKNESS_COMPUTATION_MODE_RAY",iconId:"ray_based",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_WALLTHICKNESS_COMPUTATION_MODE_RAY",iconId:"ray_based"},{langId:"ID_WALLTHICKNESS_COMPUTATION_MODE_ROLLING_BALL",iconId:"rolling_ball"}],dropdownClick:function(e,t,n){var i=e.client,a=(e.ribbon,"");switch(t.langId){case"ID_WALLTHICKNESS_COMPUTATION_MODE_RAY":a="Measurement_WallThickness_RayBased";break;case"ID_WALLTHICKNESS_COMPUTATION_MODE_ROLLING_BALL":a="Measurement_WallThickness_RollingBall"}t.event=a,s(i,a)}}]},{langId:"ID_RIBBON_BOUNDING_BOX",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_WORLD",iconId:"1_1_welt",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_WORLD",iconId:"1_1_welt"},{langId:"ID_RIBBON_INDIVIDUAL",iconId:"1_2_bauteil"}],dropdownClick:function(e,t,n){var i=e.client,a=(e.ribbon,"");switch(t.langId){case"ID_RIBBON_WORLD":a="Measurement_BoundingBoxWorld",i.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeWorldBoundingBox</SelectionModifier></Call>');break;case"ID_RIBBON_INDIVIDUAL":a="Measurement_BoundingBoxPart",i.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputePartBoundingBox</SelectionModifier></Call>');break;default:return}t.event=a,s(i,a)}},{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_COMPUTE_MINIMUM",iconId:"bbox_min",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_PRECISE",iconId:"bbox_min"},{langId:"ID_RIBBON_QUICK",iconId:"bbox_min_quick"}],dropdownClick:function(e,t){var n=e.client;switch(t.langId){case"ID_RIBBON_PRECISE":n.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeMinimalBoundingBoxPrecise</SelectionModifier></Call>');break;case"ID_RIBBON_QUICK":n.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeMinimalBoundingBoxFast</SelectionModifier></Call>');break;default:return}}}],groupClick:function(e,t,n){}},{langId:"ID_RIBBON_DRILLHOLE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_DRILLHOLE",iconId:"2_bohrung",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=e.client,a=(e.ribbon,m.findButton(t)),o="Measurement_CircleForDrillhole";a.event=o,s(i,o)}},_]},t.analyseTab={langId:"ID_RIBBON_ANALYZE",groups:[{langId:"ID_RIBBON_SECTION",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_CUTTING_PLANE_FROM_POINT_NORMAL",iconId:"1_1_schnittebene_aus_punkt",ribbonClass:["Interaction"],dropdownItems:[{langId:"ID_RIBBON_CUTTING_PLANE_FROM_POINT_NORMAL",iconId:"1_1_schnittebene_aus_punkt"},{langId:"ID_RIBBON_CUTTING_PLANE",iconId:"1_2_schnittebene"},{langId:"ID_RIBBON_CUTTING_PLANE_FROM_3_POINTS",iconId:"section_three_points"},{langId:"ID_RIBBON_CUTTING_PLANE_FROM_3_CIRCLE_CENTERS",iconId:"section_three_circle_centers"}],dropdownClick:function(e,t,n){var i=e.client,a=(e.ribbon,"");switch(t.langId){case"ID_RIBBON_CUTTING_PLANE_FROM_POINT_NORMAL":a="Section_FromPointNormal";break;case"ID_RIBBON_CUTTING_PLANE":a="Section";break;case"ID_RIBBON_CUTTING_PLANE_FROM_3_POINTS":a="Section_From3Points";break;case"ID_RIBBON_CUTTING_PLANE_FROM_3_CIRCLE_CENTERS":a="Section_From3CircleCenters";break;default:return}t.event=a,s(i,a)}}]},{langId:"ID_RIBBON_COMPARE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_COMPARE_MODEL",iconId:"1_schnell",ribbonClass:["Interaction"],paneId:"wv-quickcompare"},{type:m.WidgetType.Button,langId:"ID_RIBBON_BREP_PART",iconId:"2_exakt",paneId:"wv-exactcompare"}],groupClick:function(e,t,n){var a=e.client,o=m.findButton(t);switch(o.langId){case"ID_RIBBON_COMPARE_MODEL":if(o.isHighlight){var s='<Call Method="ActivateGraphicalCompare"><Activate>false</Activate></Call>';a.command.executeXMLAsync(s),a.once("ActivateGraphicalCompare",function(e){p("wv-quickcompare")})}else{var s='<Call Method="ActivateGraphicalCompare"><Activate>true</Activate></Call>';a.command.executeXMLAsync(s),a.once("ActivateGraphicalCompare",function(e){o.applyHighlight(!0)}),i("wv-quickcompare","QuickCompare")}break;case"ID_RIBBON_BREP_PART":o.isHighlight?p("wv-exactcompare"):i("wv-exactcompare","ExactCompare")}}},{langId:"ID_RIBBON_PROJECTED_AREA",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_PROJECTED_AREA",iconId:"1_projizierte_flaeche",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var a=m.findButton(t);a.isHighlight?(a.applyHighlight(!1),i("wv-projectedarea","off")):(a.applyHighlight(!0),i("wv-projectedarea","on"))}},{langId:"ID_RIBBON_CLASH",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_CLASH_DETECTION",iconId:"clash",paneId:"wv-clash"},{type:m.WidgetType.Button,langId:"ID_RIBBON_BAND_ANALYSIS",iconId:"clearance",paneId:"wv-bandanalysis"}],groupClick:function(e,t){var n=m.findButton(t);n.isHighlight?(n.applyHighlight(!1),i(n.paneId,"off")):(n.applyHighlight(!0),i(n.paneId,"on"))}},{langId:"ID_RIBBON_COMPUTE",widgets:[{type:m.WidgetType.Button,langId:"ID_PHYSICAL_PROPERTIES",iconId:"physical-properties"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;i.flashHighlight();a.command.executeXMLAsync('<Call Method="ModifySelection"><SelectionModifier>ComputePhysicalProperties</SelectionModifier></Call>')}},{langId:"ID_RIBBON_FEATURE_RECOGNITION",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_NEUTRAL_AXIS",iconId:"3_neutrale_faser",paneId:"wv-neutralaxis"},{type:m.WidgetType.Button,langId:"ID_RIBBON_DRILLHOLE",iconId:"2_bohrung",paneId:"wv-drillhole"}],groupClick:function(e,t,n){var a=m.findButton(t);e.client,e.ribbon;"ID_RIBBON_NEUTRAL_AXIS"===a.langId?a.isHighlight?(a.applyHighlight(!1),i("wv-neutralaxis","off")):(a.applyHighlight(!0),i("wv-neutralaxis","on")):"ID_RIBBON_DRILLHOLE"===a.langId&&(a.isHighlight?(a.applyHighlight(!1),i("wv-drillhole","off")):(a.applyHighlight(!0),i("wv-drillhole","on")))}},{langId:"ID_RIBBON_ADVANCED",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_DRAFT_ANGLE",iconId:"1_entformungsschraegen_analyse",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_WALL_THICKNESS",iconId:"1_wandstaerke",paneId:"wv-wallthickness"},{type:m.WidgetType.Button,langId:"ID_RIBBON_SPLIT",iconId:"split",paneId:"wv-split"}],groupClick:function(e,t,n){var r=m.findButton(t),l=e.client;switch(r.langId){case"ID_RIBBON_DRAFT_ANGLE":r.event="DraftAngle",s(l,"DraftAngle");break;case"ID_RIBBON_WALL_THICKNESS":r.isHighlight?(r.applyHighlight(!1),i("wv-wallthickness","off")):(r.applyHighlight(!0),i("wv-wallthickness","on"));break;case"ID_RIBBON_SPLIT":if(r.event="Split_SelectDirection",r.isHighlight)r.applyHighlight(!1),o(l,"Split_SelectDirection"),i("wv-split","off");else{r.applyHighlight(!0),a(l,"Split_SelectDirection");l.command.executeXML('<Call Method="SetSceneSettings"><Settings><Scene><Mouse><LeftButtonFunction>Rotate</LeftButtonFunction></Mouse></Scene></Settings></Call>'),i("wv-split","on")}}}},_]},t.transformTab={langId:"ID_RIBBON_TRANSFORMATION",groups:[{langId:"ID_RIBBON_TRANSFORMATION",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_FREE_DRAG",iconId:"1_freies_verschieben",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_MOVE",iconId:"2_verschieben",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_ROTATE",iconId:"3_drehen",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_SCALE",iconId:"scale",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_MIRROR",iconId:"4_spiegeln",paneId:"wv-mirror"},{type:m.WidgetType.Button,langId:"ID_RIBBON_EXPLODE",iconId:"5_explodieren"},{type:m.WidgetType.Button,langId:"ID_RIBBON_RESET_TRANSFORMATION",iconId:"6_position_zuruecksetzen"}],groupClick:function(e,t,n){var a=m.findButton(t),o=e.client,r=(e.ribbon,"");switch(a.langId){case"ID_RIBBON_FREE_DRAG":r="Transformation_FreeDrag";break;case"ID_RIBBON_MOVE":r="Transformation_Move";break;case"ID_RIBBON_ROTATE":r="Transformation_Rotate";break;case"ID_RIBBON_SCALE":r="Transformation_Scale";break;case"ID_RIBBON_RESET_TRANSFORMATION":;o.command.executeXMLAsync('<Call Method="ModifySelection"><SelectionModifier>ResetTransformation</SelectionModifier></Call>'),a.flashHighlight();break;case"ID_RIBBON_MIRROR":a.isHighlight?(a.applyHighlight(!1),i("wv-mirror","off")):(a.applyHighlight(!0),i("wv-mirror","on"));break;case"ID_RIBBON_EXPLODE":a.isHighlight?(a.applyHighlight(!1),i("wv-explode","off")):(a.applyHighlight(!0),i("wv-explode","on"));break;default:console.error("invalid interaction type")}""!==r&&(a.event=r,s(o,r))}},{langId:"ID_RIBBON_BOUNDARY_CONDITION",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_ACTIVATE",iconId:"activate_axis",ribbonClass:["Interaction"]},{langId:"ID_RIBBON_BOUNDARY_CONDITION_AXIS",type:m.WidgetType.Dropdown,iconId:"condition_axis_by_circle",ribbonClass:["interaction"],dropdownItems:[{langId:"ID_RIBBON_BOUNDARY_CONDITION_BY_CIRCLE",iconId:"condition_axis_by_circle"},{langId:"ID_RIBBON_BOUNDARY_CONDITION_BY_LINE",iconId:"condition_axis_by_line"}],dropdownClick:function(e,t,n){var i=e.client,a="";switch(t.langId){case"ID_RIBBON_BOUNDARY_CONDITION_BY_CIRCLE":a="BoundaryCondition_AxisByCircle";break;case"ID_RIBBON_BOUNDARY_CONDITION_BY_LINE":a="BoundaryCondition_AxisByLine"}t.event=a,s(i,a)}}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(m.findButton("ID_RIBBON_ACTIVATE").event="BoundaryCondition_Axis",i.langId){case"ID_RIBBON_ACTIVATE":o="BoundaryCondition_Axis",i.event=o,s(a,o)}}},{langId:"ID_RIBBON_ALIGNING_MOVE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_POINT_TO_POINT",iconId:"align_move_point_point",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_PLANE_TO_PLANE",iconId:"align_move_plane_plane",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER",iconId:"align_move_center_center",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_POINT_TO_POINT":o="Transformation_Align_Move_PointToPoint";break;case"ID_RIBBON_PLANE_TO_PLANE":o="Transformation_Align_Move_PlaneToPlane";break;case"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER":o="Transformation_Align_Move_CircleCenterToCircleCenter"}i.event=o,s(a,o)}},{langId:"ID_RIBBON_ALIGNING_ROTATE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_NORMAL_TO_NORMAL",iconId:"1_normal_zu_normal",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_POINT_TO_POINT",iconId:"2_punkt_zu_punkt",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER",iconId:"3_kreisachse_zu_kreisachse",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_NORMAL_TO_NORMAL":o="Transformation_Align_Rotate_NormalToNormal";break;case"ID_RIBBON_POINT_TO_POINT":o="Transformation_Align_Rotate_PointToPoint";break;case"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER":o="Transformation_Align_Rotate_CircleCenterToCircleCenter"}i.event=o,s(a,o)}},{langId:"ID_RIBBON_ALIGNING_MOVE_ROTATE",widgets:[{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_COORDINATE_SYSTEM_TO_COORDINATE_SYSTEM",iconId:"1_koordinatensystem_zu_koordinatensystem",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CIRCLE_AXIS_TO_CIRCLE_AXIS",iconId:"2_kreisachse_zu_kreisachse",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_PLANE_TO_PLANE",iconId:"3_oberflaeche_zu_oberflaeche",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_COORDINATE_SYSTEM_TO_COORDINATE_SYSTEM":o="Transformation_Align_CoordinateSystemToCoordinateSystem";break;case"ID_RIBBON_CIRCLE_AXIS_TO_CIRCLE_AXIS":o="Transformation_Align_CircleAxisToCircleAxis";break;case"ID_RIBBON_PLANE_TO_PLANE":o="Transformation_Align_PlaneToPlane"}i.event=o,s(a,o)}},{langId:"ID_RIBBON_MODEL_ALIGNING",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_LINE",iconId:"1_linie"},{type:m.WidgetType.Button,langId:"ID_RIBBON_PLANE",iconId:"2_ebene"}]},_]},t.toolTab={langId:"ID_RIBBON_TOOLS",groups:[{langId:"ID_RIBBON_SCREENSHOT",widgets:[{langId:"ID_RIBBON_CLIPBOARD",iconId:"5_zwischenablage"}],groupClick:function(e,t,n){var i=(m.findButton(t),e.client),a=(e.ribbon,'<Call Method="GetImage">');a+="<ExportFormat2D>PNG</ExportFormat2D>",a+="</Call>",i.command.executeXMLAsync(a),i.once("GetImage",function(e){if("SUCCESS"===e.Error){var t=e.Image;new v.ClipboardModal(t,vsClient.vsCanvas.width,vsClient.vsCanvas.height)}})}},{langId:"ID_RIBBON_VECTOR_EXPORT",widgets:[{langId:"ID_RIBBON_SVG",iconId:"1_svg"},{langId:"ID_RIBBON_DXF",iconId:"2_dxf"}]},{langId:"ID_RIBBON_SEARCH",widgets:[{langId:"ID_RIBBON_SEARCH",iconId:"1_filter",paneId:"wv-filter"}],groupClick:function(e,t,n){var a=m.findButton(t);a.isHighlight?(a.applyHighlight(!1),i("wv-filter","off")):(a.applyHighlight(!0),i("wv-filter","on"))}},{langId:"ID_RIBBON_GEOMETRY_TOOLS",widgets:[{langId:"ID_RIBBON_GEOMETRY_TOOLS",iconId:"number_of_triangles"}],groupClick:function(e,t,n){var a=m.findButton(t);e.client;a.isHighlight?(i("wv-geometry-tools","off"),a.applyHighlight(!1)):(a.applyHighlight(!0),i("wv-geometry-tools","on"))}},{langId:"ID_RIBBON_IP_PROTECTION",widgets:[{langId:"ID_RIBBON_DISTORT",iconId:"distortion",paneId:"wv-distortion"},{langId:"ID_VISIBILITY_TEST",iconId:"visibility_test",paneId:"wv-visibilitytest"}],groupClick:function(e,t,n){var a=m.findButton(t);if(a.isHighlight){switch(a.langId){case"ID_RIBBON_DISTORT":i("wv-distortion","off");break;case"ID_VISIBILITY_TEST":i("wv-visibilitytest","off")}a.applyHighlight(!1)}else switch(a.applyHighlight(!0),a.langId){case"ID_RIBBON_DISTORT":i("wv-distortion","on");break;case"ID_VISIBILITY_TEST":i("wv-visibilitytest","on")}}},{langId:"Extras",widgets:[{langId:"Command",iconId:"terminal",paneId:"wv-command"}],groupClick:function(e,t,n){var a=m.findButton(t);a.isHighlight?(i("wv-command","off"),a.applyHighlight(!1)):(i("wv-command","on"),a.applyHighlight(!0))}},_]},t.modelTab={langId:"ID_RIBBON_MODEL",groups:[{langId:"ID_RIBBON_NODE",widgets:[{langId:"ID_RIBBON_CREATE",iconId:"1_erstellen"},{langId:"ID_RIBBON_COPY",iconId:"2_kopieren"},{langId:"ID_RIBBON_PASTE",iconId:"3_einfuegen"},{langId:"ID_RIBBON_RELOAD",iconId:"4_nachladen"}]},{langId:"ID_RIBBON_RETESSELATE",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_RETESSELATE",iconId:"1_retessellieren",dropdownItems:[{langId:"ID_RIBBON_EXTRALOW",iconId:"extra_low_tesselation"},{langId:"ID_RIBBON_LOW",iconId:"low_tesselation"},{langId:"ID_RIBBON_MEDIUM",iconId:"medium_tesselation"},{langId:"ID_RIBBON_HIGH",iconId:"high_tesselation"},{langId:"ID_RIBBON_EXTRAHIGH",iconId:"extra_high_tesselation"},{langId:"ID_RIBBON_USER_DEFINED",iconId:"custom_tesselation"}],dropdownClick:function(e,t,n){var i=e.client,a="";switch(t.langId){case"ID_RIBBON_EXTRALOW":a="ExtraLow";break;case"ID_RIBBON_LOW":a="Low";break;case"ID_RIBBON_MEDIUM":a="Medium";break;case"ID_RIBBON_HIGH":a="High";break;case"ID_RIBBON_EXTRAHIGH":a="ExtraHigh";break;case"ID_RIBBON_USER_DEFINED":a="Userdefined ";break;default:console.error("invalid interaction type")}var o='<Call Method="Retesselate"><Level>'+a+"</Level></Call>";i.command.executeXML(o),n.flashHighlight()}}]},{langId:"ID_RIBBON_COORDINATE_SYSTEM",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_BY_CIRCLE_CENTER",iconId:"1_kreismittelpunkt",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_CYLINDER_AXIS",iconId:"1_kreisachse",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_3_PLANES",iconId:"2_3_ebenen_im_rechten_winkel",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_3_POINTS",iconId:"3_3_punkte_im_rechten_winkel",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_EDGES",iconId:"4_senkrechte_linien",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_NORMAL",iconId:"5_normale",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_EDGE_AND_POINT",iconId:"6_linie_und_punkt",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_BOUNDING_BOX",iconId:"7_begrenzungsrahmen",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_CURRENT_GLOBAL",iconId:"coordinate_system_world"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_BY_SELECTED_PART",iconId:"coordinate_system_part"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_ACTIVATE_COORDINATESYSTEM",iconId:"8_aktivieren"},{type:m.WidgetType.ButtonLet,langId:"ID_RESET_COORDINATESYSTEM",iconId:"9_zuruecksetzen"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=e.ribbon,l="";switch(i.langId){case"ID_RIBBON_BY_CIRCLE_CENTER":l="EntityCreation_CoordinateSystemByCircleCenter";break;case"ID_RIBBON_BY_3_PLANES":l="EntityCreation_CoordinateSystemBy3Planes";break;case"ID_RIBBON_BY_3_POINTS":l="EntityCreation_CoordinateSystemBy3Points";break;case"ID_RIBBON_BY_EDGES":l="EntityCreation_CoordinateSystemByLines";break;case"ID_RIBBON_BY_NORMAL":l="EntityCreation_CoordinateSystemByNormal";break;case"ID_RIBBON_BY_EDGE_AND_POINT":l="EntityCreation_CoordinateSystemByLineAndPoint";break;case"ID_RIBBON_BY_BOUNDING_BOX":l="EntityCreation_CoordinateSystemByBoundingBox";break;case"ID_RIBBON_BY_CYLINDER_AXIS":l="EntityCreation_CoordinateSystemByCylinderAxis";break;case"ID_RIBBON_BY_CURRENT_GLOBAL":l="EntityCreation_CoordinateSystemGlobal",r(o),i.flashHighlight();break;case"ID_RIBBON_BY_SELECTED_PART":l="EntityCreation_CoordinateSystemPart",r(o),i.flashHighlight();break;case"ID_RIBBON_ACTIVATE_COORDINATESYSTEM":a.command.executeXMLAsync('<Call Method="ActivateSelectedCoordinateSystem"></Call>'),r(o),i.flashHighlight();break;case"ID_RESET_COORDINATESYSTEM":a.command.executeXMLAsync('<Call Method="ResetCoordinateSystem"></Call>'),r(o),i.flashHighlight();break;default:console.error("invalid interaction type")}l&&(a.once("ActivateInteraction",function(e){if("SUCCESS"===e.Error){r(o);var t=i.id;o.classes.Interaction.forEach(function(e){e.id===t&&e.applyHighlight(!0)})}}),i.event=l,s(a,l))}},{langId:"ID_RIBBON_CREATE_POINT",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_CIRCLE_CENTER",iconId:"1_kreismittelpunkt",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_POINT",iconId:"2_punkt",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=e.ribbon,l="";switch(i.langId){case"ID_RIBBON_CIRCLE_CENTER":l="EntityCreation_PointByCircleCenter";break;case"ID_RIBBON_POINT":l="EntityCreation_PointByPickPosition";break;default:console.error("invalid interaction type")}a.once("ActivateInteraction",function(e){if("SUCCESS"===e.Error){r(o);var t=i.id;o.classes.Interaction.forEach(function(e){e.id===t&&e.applyHighlight(!0)})}}),i.event=l,s(a,l)}},{langId:"ID_RIBBON_CREATE_WIRE",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_CIRCLE_AXIS",iconId:"1_kreisachse",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_POINT_TO_POINT",iconId:"2_punkt_zu_punkt",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=e.ribbon,l="";switch(i.langId){case"ID_RIBBON_CIRCLE_AXIS":l="EntityCreation_WireByCircleCenter";break;case"ID_RIBBON_POINT_TO_POINT":l="EntityCreation_WirePointToPoint";break;default:console.error("invalid interaction type")}a.once("ActivateInteraction",function(e){if("SUCCESS"===e.Error){r(o);var t=i.langId;o.classes.Interaction.forEach(function(e){e.langId===t&&e.applyHighlight(!0)})}}),i.event=l,s(a,l)}},{langId:"ID_RIBBON_MODIFY_SOLIDS",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_EXTRACT_FACES",iconId:"1_flaeche_extrahieren"},{type:m.WidgetType.Button,langId:"ID_RIBBON_MERGE_OBJECTS",iconId:"merge_objects"},{type:m.WidgetType.Button,langId:"ID_RIBBON_MERGE_OBJECTS_HIERARCHICAL",iconId:"merge_objects_rec"},{type:m.WidgetType.Button,langId:"ID_RIBBON_CONVEX_HULL",iconId:"2_huellgeometrie"}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;switch(i.langId){case"ID_RIBBON_EXTRACT_FACES":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ExtractFaces</SelectionModifier></Call>');break;case"ID_RIBBON_MERGE_OBJECTS":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>MergeObjects</SelectionModifier></Call>');break;case"ID_RIBBON_MERGE_OBJECTS_HIERARCHICAL":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>MergeObjectsHierarchically</SelectionModifier></Call>');break;case"ID_RIBBON_CONVEX_HULL":a.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeHullGeometry</SelectionModifier></Call>');break;default:return}i.flashHighlight()}},_]},t.techDocTab={langId:"ID_RIBBON_TECH_DOC",groups:[{langId:"ID_RIBBON_3D_MARKUP",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_TEXT",iconId:"1_text",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_CIRCLE",iconId:"2_kreis",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FIXED_TEXT",iconId:"fixed_markup",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_RECTANGLE",iconId:"3_rechteck",ribbonClass:["Interaction"]},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_FREEHAND",iconId:"4_freihand",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client,o=(e.ribbon,"");switch(i.langId){case"ID_RIBBON_TEXT":o="Markup_Text";break;case"ID_RIBBON_CIRCLE":o="Markup_Circle";break;case"ID_RIBBON_RECTANGLE":o="Markup_Rectangle";break;case"ID_RIBBON_FREEHAND":o="Markup_Freehand";break;case"ID_RIBBON_FIXED_TEXT":o="Markup_Text_Fixed";break;default:console.error("invalid interaction type")}i.event=o,s(a,o)}},{langId:"ID_RIBBON_CALLOUTS_GENERAL_PANEL",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_BOM",iconId:"1_BOM",paneId:"wv-bom"}],groupClick:function(e,t,n){var a=m.findButton(t);a.isHighlight?(a.applyHighlight(!1),i(a.paneId,"off")):(a.applyHighlight(!0),i(a.paneId,"on"),f.bomPane.addMethods())}},{langId:"ID_RIBBON_CALLOUTS_ALIGNMENT_PANEL",widgets:[{type:m.WidgetType.Dropdown,langId:"ID_RIBBON_CALLOUTS_ALIGN_TOP",iconId:"callout_mode_square",dropdownItems:[{langId:"ID_RIBBON_CALLOUTS_ALIGN_RECTANGLE",iconId:"callout_mode_square"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_CIRCLE",iconId:"callout_mode_circle"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_TOP_AND_BOTTOM",iconId:"callout_mode_top_bottom"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_LEFT_AND_RIGHT",iconId:"callout_mode_left_right"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_BOTTOM",iconId:"callout_mode_align_bottom"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_TOP",iconId:"callout_mode_align_top"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_LEFT",iconId:"callout_mode_align_left"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_RIGHT",iconId:"callout_mode_align_right"},{langId:"ID_RIBBON_CALLOUTS_ALIGN_NEAR_TO_SOLID",iconId:"callout_mode_near_to_solid"},{langId:"ID_MARKUP_ALIGNMENT_NONE",iconId:"callout_mode_none"}],dropdownClick:function(e,t,n){var i=e.client,a="";switch(t.langId){case"ID_RIBBON_CALLOUTS_ALIGN_BOTTOM":a="Bottom";break;case"ID_RIBBON_CALLOUTS_ALIGN_TOP":a="Top";break;case"ID_RIBBON_CALLOUTS_ALIGN_LEFT":a="Left";break;case"ID_RIBBON_CALLOUTS_ALIGN_RIGHT":a="Right";break;case"ID_RIBBON_CALLOUTS_ALIGN_TOP_AND_BOTTOM":a="TopBottom";break;case"ID_RIBBON_CALLOUTS_ALIGN_LEFT_AND_RIGHT":a="LeftRight";break;case"ID_RIBBON_CALLOUTS_ALIGN_RECTANGLE":a="Rectangle";break;case"ID_RIBBON_CALLOUTS_ALIGN_CIRCLE":a="Circle";break;case"ID_RIBBON_CALLOUTS_ALIGN_NEAR_TO_SOLID":a="NearToSolid";break;case"ID_MARKUP_ALIGNMENT_NONE":a="None";break;default:console.error("invalid interaction type")}var o='<Call Method="SetCalloutAlignment"><Alignment>'+a+"</Alignment></Call>";i.command.executeXML(o),n.flashHighlight()}},{type:m.WidgetType.Button,langId:"ID_RIBBON_CALLOUTS_AUTO_ALIGNMENT",iconId:"callout_auto_alignment"}],groupClick:function(e,t){var n,i=m.findButton(t),a=e.client;e.ribbon;"ID_RIBBON_CALLOUTS_AUTO_ALIGNMENT"===i.langId&&(i.isHighlight?(n='<Call Method="DisableAutoCalloutAlignment"></Call>',a.command.executeXML(n)):(n='<Call Method="EnableAutoCalloutAlignment"></Call>',a.command.executeXML(n),n='<Call Method="AlignCallouts"></Call>',a.command.executeXML(n)))}},{langId:"ID_RIBBON_CALLOUTS_PANEL",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_CREATE",iconId:"create_callouts",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_CALLOUTS_FOR_SELECTION",iconId:"callout_group"},{type:m.WidgetType.Button,langId:"ID_RIBBON_SETTINGS",iconId:"callout",paneId:"wv-callout"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CALLOUTS_SHOW_ALL",iconId:"callout_show_all"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_LOCK_CALLOUTS",iconId:"callout_lock"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_UNLOCK_CALLOUTS",iconId:"callout_unlock"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CALLOUTS_SELECT_ASSOCIATED_NODES",iconId:"select_associated_solid"},{type:m.WidgetType.ButtonLet,langId:"ID_RIBBON_CALLOUTS_MULTIPLE_CONNECTIONS",iconId:"callout_multiple_anchor"}],groupClick:function(e,t,n){var a,o=e.client,r=(e.ribbon,m.findButton(t));switch(r.langId){case"ID_RIBBON_SETTINGS":r.isHighlight?(r.applyHighlight(!1),i(r.paneId,"off")):(r.applyHighlight(!0),i(r.paneId,"on"),"wv-bom"===r.paneId&&f.bomPane.addMethods());break;case"ID_RIBBON_CALLOUTS_SHOW_ALL":a='<Call Method="ShowAllCallouts"></Call>';break;case"ID_RIBBON_LOCK_CALLOUTS":a='<Call Method="LockCallouts"></Call>';break;case"ID_RIBBON_UNLOCK_CALLOUTS":a='<Call Method="UnlockCallouts"></Call>';break;case"ID_RIBBON_CALLOUTS_FOR_SELECTION":a='<Call Method="CreateCalloutGroup"></Call>';break;case"ID_RIBBON_CALLOUTS_SELECT_ASSOCIATED_NODES":a='<Call Method="SetSceneSettings"><Settings><Scene><Tools><Callout><SelectAssociatedNodes>',a+=!r.isHighlight,a+="</SelectAssociatedNodes></Callout></Tools></Scene></Settings></Call>";break;case"ID_RIBBON_CALLOUTS_MULTIPLE_CONNECTIONS":a='<Call Method="SetSceneSettings"><Settings><Scene><Tools><Callout><MultiAnchorGroups>',a+=!r.isHighlight,a+="</MultiAnchorGroups></Callout></Tools></Scene></Settings></Call>";break;case"ID_RIBBON_CREATE":r.event="Callout_Creation",s(o,"Callout_Creation")}o.command.executeXML(a),r.flashHighlight()}},{langId:"ID_RIBBON_CALLOUTS_CONNECTIONS_PANEL",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_EDIT",iconId:"move_anchor",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_DELETE",iconId:"delete_anchor",ribbonClass:["Interaction"]},{type:m.WidgetType.Button,langId:"ID_RIBBON_INVERT_VISIBILITY",iconId:"5_sichtbarkeit_umkehren",ribbonClass:["Interaction"]}],groupClick:function(e,t,n){var i=m.findButton(t),a=e.client;e.ribbon;switch(i.langId){case"ID_RIBBON_EDIT":i.event="Callout_Modification",s(a,"Callout_Modification");break;case"ID_RIBBON_DELETE":i.event="Callout_Deletion",s(a,"Callout_Deletion");break;case"ID_RIBBON_INVERT_VISIBILITY":i.event="Callout_Visibility",s(a,"Callout_Visibility")}a.command.executeXML(void 0),i.flashHighlight()}},{langId:"ID_RIBBON_VISIBLE_CALLOUTS_PANEL",widgets:[{type:m.WidgetType.Button,langId:"ID_RIBBON_CALLOUTS_SELECT_VISIBLE",iconId:"callout_select_visible"},{type:m.WidgetType.Button,langId:"ID_RIBBON_CALLOUTS_HIDE_VISIBLE",iconId:"callout_hide"},{type:m.WidgetType.Button,langId:"ID_RIBBON_CALLOUTS_DELETE_VISIBLE",iconId:"callout_delete"}],groupClick:function(e,t,n){var i,a=m.findButton(t),o=e.client;e.ribbon;switch(a.langId){case"ID_RIBBON_CALLOUTS_DELETE_VISIBLE":i='<Call Method="DeleteVisibleCallouts"></Call>';break;case"ID_RIBBON_CALLOUTS_HIDE_VISIBLE":i='<Call Method="HideVisibleCallouts"></Call>';break;case"ID_RIBBON_CALLOUTS_SELECT_VISIBLE":i='<Call Method="SelectVisibleCallouts"></Call>'}o.command.executeXML(i),a.flashHighlight()}},_]}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.content=t}return i(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){if(!a.isType(e,"String"))throw new TypeError("content should be a string");if(!o.validateChar(e))throw new Error("content should not contain characters not allowed in XML");if(!/^([^-]|-[^-])*$/.test(e))throw new Error("content should not contain the string '--' or end with '-'");this._content=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlComment nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlComment nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlComment nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlComment nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"\x3c!--"+this.content+"--\x3e"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t,n){e.call(this),this.target=t,this.content=n}return i(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){if(!a.isType(e,"String"))throw new TypeError("target should be a string");if(!o.validateChar(e))throw new Error("target should not contain characters not allowed in XML");if("xml"===e)throw new Error("target should not be the string 'xml'");this._target=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){if(!a.isType(e,"String","Undefined"))throw new TypeError("data should be a string or undefined");if(a.isType(e,"String")){if(!o.validateChar(e))throw new Error("data should not contain characters not allowed in XML");if(/\?>/.test(e))throw new Error("data should not contain the string '?>'")}this._content=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),void 0===this.content?"<?"+this.target+"?>":"<?"+this.target+" "+this.content+"?>"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){var i;!function(a){function o(e,t){if(e=e||"",t=t||{},e instanceof o)return e;if(!(this instanceof o))return new o(e,t);var n=s(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=U(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=U(this._r)),this._g<1&&(this._g=U(this._g)),this._b<1&&(this._b=U(this._b)),this._ok=n.ok,this._tc_id=H++}function s(e){var t={r:0,g:0,b:0},n=1,i=null,a=null,o=null,s=!1,l=!1;return"string"==typeof e&&(e=V(e)),"object"==typeof e&&(W(e.r)&&W(e.g)&&W(e.b)?(t=r(e.r,e.g,e.b),s=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):W(e.h)&&W(e.s)&&W(e.v)?(i=k(e.s),a=k(e.v),t=p(e.h,i,a),s=!0,l="hsv"):W(e.h)&&W(e.s)&&W(e.l)&&(i=k(e.s),o=k(e.l),t=c(e.h,i,o),s=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=N(n),{ok:s,format:e.format||l,r:$(255,z(t.r,0)),g:$(255,z(t.g,0)),b:$(255,z(t.b,0)),a:n}}function r(e,t,n){return{r:255*O(e,255),g:255*O(t,255),b:255*O(n,255)}}function l(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var i,a,o=z(e,t,n),s=$(e,t,n),r=(o+s)/2;if(o==s)i=a=0;else{var l=o-s;switch(a=r>.5?l/(2-o-s):l/(o+s),o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,l:r}}function c(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var a,o,s;if(e=O(e,360),t=O(t,100),n=O(n,100),0===t)a=o=s=n;else{var r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;a=i(l,r,e+1/3),o=i(l,r,e),s=i(l,r,e-1/3)}return{r:255*a,g:255*o,b:255*s}}function d(e,t,n){e=O(e,255),t=O(t,255),n=O(n,255);var i,a,o=z(e,t,n),s=$(e,t,n),r=o,l=o-s;if(a=0===o?0:l/o,o==s)i=0;else{switch(o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,v:r}}function p(e,t,n){e=6*O(e,360),t=O(t,100),n=O(n,100);var i=a.floor(e),o=e-i,s=n*(1-t),r=n*(1-o*t),l=n*(1-(1-o)*t),c=i%6;return{r:255*[n,r,s,s,l,n][c],g:255*[l,n,n,r,s,s][c],b:255*[s,s,l,n,n,r][c]}}function u(e,t,n,i){var a=[D(U(e).toString(16)),D(U(t).toString(16)),D(U(n).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function h(e,t,n,i,a){var o=[D(U(e).toString(16)),D(U(t).toString(16)),D(U(n).toString(16)),D(R(i))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function m(e,t,n,i){return[D(R(i)),D(U(e).toString(16)),D(U(t).toString(16)),D(U(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=o(e).toHsl();return n.s-=t/100,n.s=P(n.s),o(n)}function v(e,t){t=0===t?0:t||10;var n=o(e).toHsl();return n.s+=t/100,n.s=P(n.s),o(n)}function g(e){return o(e).desaturate(100)}function C(e,t){t=0===t?0:t||10;var n=o(e).toHsl();return n.l+=t/100,n.l=P(n.l),o(n)}function _(e,t){t=0===t?0:t||10;var n=o(e).toRgb();return n.r=z(0,$(255,n.r-U(-t/100*255))),n.g=z(0,$(255,n.g-U(-t/100*255))),n.b=z(0,$(255,n.b-U(-t/100*255))),o(n)}function I(e,t){t=0===t?0:t||10;var n=o(e).toHsl();return n.l-=t/100,n.l=P(n.l),o(n)}function S(e,t){var n=o(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,o(n)}function y(e){var t=o(e).toHsl();return t.h=(t.h+180)%360,o(t)}function E(e){var t=o(e).toHsl(),n=t.h;return[o(e),o({h:(n+120)%360,s:t.s,l:t.l}),o({h:(n+240)%360,s:t.s,l:t.l})]}function b(e){var t=o(e).toHsl(),n=t.h;return[o(e),o({h:(n+90)%360,s:t.s,l:t.l}),o({h:(n+180)%360,s:t.s,l:t.l}),o({h:(n+270)%360,s:t.s,l:t.l})]}function w(e){var t=o(e).toHsl(),n=t.h;return[o(e),o({h:(n+72)%360,s:t.s,l:t.l}),o({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var i=o(e).toHsl(),a=360/n,s=[o(e)];for(i.h=(i.h-(a*t>>1)+720)%360;--t;)i.h=(i.h+a)%360,s.push(o(i));return s}function M(e,t){t=t||6;for(var n=o(e).toHsv(),i=n.h,a=n.s,s=n.v,r=[],l=1/t;t--;)r.push(o({h:i,s:a,v:s})),s=(s+l)%1;return r}function N(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function O(e,t){B(e)&&(e="100%");var n=L(e);return e=$(t,z(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),a.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function P(e){return $(1,z(0,e))}function x(e){return parseInt(e,16)}function B(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function L(e){return"string"==typeof e&&-1!=e.indexOf("%")}function D(e){return 1==e.length?"0"+e:""+e}function k(e){return e<=1&&(e=100*e+"%"),e}function R(e){return a.round(255*parseFloat(e)).toString(16)}function A(e){return x(e)/255}function W(e){return!!J.CSS_UNIT.exec(e)}function V(e){e=e.replace(G,"").replace(F,"").toLowerCase();var t=!1;if(Y[e])e=Y[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=J.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=J.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=J.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=J.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=J.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=J.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=J.hex8.exec(e))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),a:A(n[4]),format:t?"name":"hex8"}:(n=J.hex6.exec(e))?{r:x(n[1]),g:x(n[2]),b:x(n[3]),format:t?"name":"hex"}:(n=J.hex4.exec(e))?{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),a:A(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=J.hex3.exec(e))&&{r:x(n[1]+""+n[1]),g:x(n[2]+""+n[2]),b:x(n[3]+""+n[3]),format:t?"name":"hex"}}function X(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var G=/^\s+/,F=/\s+$/,H=0,U=a.round,$=a.min,z=a.max,j=a.random;o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,i,o,s,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,i=e<=.03928?e/12.92:a.pow((e+.055)/1.055,2.4),o=t<=.03928?t/12.92:a.pow((t+.055)/1.055,2.4),s=n<=.03928?n/12.92:a.pow((n+.055)/1.055,2.4),.2126*i+.7152*o+.0722*s},setAlpha:function(e){return this._a=N(e),this._roundA=U(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),i=U(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),i=U(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return h(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:U(this._r),g:U(this._g),b:U(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+U(this._r)+", "+U(this._g)+", "+U(this._b)+")":"rgba("+U(this._r)+", "+U(this._g)+", "+U(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:U(100*O(this._r,255))+"%",g:U(100*O(this._g,255))+"%",b:U(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+U(100*O(this._r,255))+"%, "+U(100*O(this._g,255))+"%, "+U(100*O(this._b,255))+"%)":"rgba("+U(100*O(this._r,255))+"%, "+U(100*O(this._g,255))+"%, "+U(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(K[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=o(e);n="#"+m(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(I,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},o.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:k(e[i]));e=n}return o(e,t)},o.equals=function(e,t){return!(!e||!t)&&o(e).toRgbString()==o(t).toRgbString()},o.random=function(){return o.fromRatio({r:j(),g:j(),b:j()})},o.mix=function(e,t,n){n=0===n?0:n||50;var i=o(e).toRgb(),a=o(t).toRgb(),s=n/100;return o({r:(a.r-i.r)*s+i.r,g:(a.g-i.g)*s+i.g,b:(a.b-i.b)*s+i.b,a:(a.a-i.a)*s+i.a})},o.readability=function(e,t){var n=o(e),i=o(t);return(a.max(n.getLuminance(),i.getLuminance())+.05)/(a.min(n.getLuminance(),i.getLuminance())+.05)},o.isReadable=function(e,t,n){var i,a,s=o.readability(e,t);switch(a=!1,i=X(n),i.level+i.size){case"AAsmall":case"AAAlarge":a=s>=4.5;break;case"AAlarge":a=s>=3;break;case"AAAsmall":a=s>=7}return a},o.mostReadable=function(e,t,n){var i,a,s,r,l=null,c=0;n=n||{},a=n.includeFallbackColors,s=n.level,r=n.size;for(var d=0;d<t.length;d++)(i=o.readability(e,t[d]))>c&&(c=i,l=o(t[d]));return o.isReadable(e,l,{level:s,size:r})||!a?l:(n.includeFallbackColors=!1,o.mostReadable(e,["#fff","#000"],n))};var Y=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=o.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Y),J=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=o:void 0!==(i=function(){return o}.call(t,n,t,e))&&(e.exports=i)}(Math)},function(e,t,n){"use strict";function i(e,t,n){var i=function(e){return n.cdataInvalidChars&&(-1!==e.indexOf("<")||-1!==e.indexOf("&"))||-1!==n.cdataKeys.indexOf(t.name)||-1!==n.cdataKeys.indexOf("*")};if(t instanceof h.XmlElement&&i(e))for(var a=e.split("]]>"),o=0;o<a.length;o++)i(a[o])?t.cdata(a[o]):t.text(a[o]),o<a.length-1&&t.text("]]>");else t.text(e)}function a(e,t,n,a){var o=n.attribute(e,"");if(!(u.isType(t,"String")||u.isType(t,"Number")||u.isType(t,"Boolean")||u.isType(t,"Undefined")||u.isType(t,"Null")))throw new Error("attribute value for name '"+e+"' should be a primitive (string, number, boolean, null, or undefined)");i(u.stringify(t),o,a)}function o(e,t,n,i){if(e===i.aliasString){if(!u.isType(t,"String"))throw new Error("aliasString value for "+t+" should be a string");return void(n.name=t)}if(0!==e.indexOf(i.attributeString)){if(0===e.indexOf(i.valueString)){if(u.isType(t,"String")||u.isType(t,"Number")||u.isType(t,"Boolean")||u.isType(t,"Null")||u.isType(t,"Undefined"))return void l(e,t,n,i);throw new Error("value "+t+" should be a primitive (string, number, boolean, null, or undefined)")}var o=n;u.isType(t,"Array")||u.isType(t,"Set")||(o=n.element(e)),l(e,t,o,i)}else{if(!u.isType(t,"Object"))throw new Error("attributes object for "+e+" should be an object");for(var s=0,r=Object.keys(t);s<r.length;s++){var c=r[s];a(c,t[c],n,i)}}}function s(e,t,n){if(u.isType(e,"Map"))e.forEach(function(e,i){o(u.stringify(i),e,t,n)});else for(var i=0,a=Object.keys(e);i<a.length;i++){var s=a[i];o(s,e[s],t,n)}}function r(e,t,n,i){var a;i.wrapHandlers.hasOwnProperty("*")&&(a=i.wrapHandlers["*"]),i.wrapHandlers.hasOwnProperty(e)&&(a=i.wrapHandlers[e]);var o=e,s=n;if(!u.isType(a,"Undefined")){var r=a(o,t);if(u.isType(r,"String"))o=r,s=n.element(e);else if(!u.isType(r,"Null"))throw new Error("wrapHandlers function for "+o+" should return a string or null")}t.forEach(function(e){var t=s;u.isType(e,"Array")||u.isType(e,"Set")||(t=s.element(o)),l(o,e,t,i)})}function l(e,t,n,a){var o,l=Object.prototype.toString.call(t);return a.typeHandlers.hasOwnProperty("*")&&(o=a.typeHandlers["*"]),a.typeHandlers.hasOwnProperty(l)&&(o=a.typeHandlers[l]),u.isType(o,"Undefined")||(t=o(t)),u.isType(t,"Object")||u.isType(t,"Map")?void s(t,n,a):u.isType(t,"Array")||u.isType(t,"Set")?void r(e,t,n,a):void i(u.stringify(t),n,a)}function c(e,t,n){var i=new h.XmlDocument(e);return n.declaration.include&&i.decl(n.declaration),n.dtd.include&&i.dtd(n.dtd.name,n.dtd.sysId,n.dtd.pubId),l(e,t,i.root(),n),i}function d(e,t,n){return void 0===n&&(n={}),n=p.validateOptions(n),c(e,t,n).toString(n.format)}var p=n(38),u=n(23),h=n(39);t.parse=d},function(e,t,n){"use strict";function i(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function a(e,t){var n,a,r,l,c,d,p=!1;t||(t={}),n=t.debug||!1;try{r=o(),l=document.createRange(),c=document.getSelection(),d=document.createElement("span"),d.textContent=e,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",document.body.appendChild(d),l.selectNode(d),c.addRange(l);if(!document.execCommand("copy"))throw new Error("copy command was unsuccessful");p=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),p=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),a=i("message"in t?t.message:s),window.prompt(a,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(l):c.removeAllRanges()),d&&document.body.removeChild(d),r()}return p}var o=n(41),s="Copy to clipboard: #{key}, Enter";e.exports=a},function(e,t,n){"use strict";function i(e){console&&console.warn&&console.warn(e)}function a(){a.init.call(this)}function o(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function s(e,t,n,a){var s,r,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(r=e._events,void 0===r?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),l=r[t]),void 0===l)l=r[t]=n,++e._eventsCount;else if("function"==typeof l?l=r[t]=a?[n,l]:[l,n]:a?l.unshift(n):l.push(n),(s=o(e))>0&&l.length>s&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,i(c)}return e}function r(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,v(this.listener,this.target,e))}function l(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=r.bind(i);return a.listener=n,i.wrapFn=a,a}function c(e,t,n){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?h(a):p(a,a.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function u(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var m,f="object"==typeof Reflect?Reflect:null,v=f&&"function"==typeof f.apply?f.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=f&&"function"==typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!==e};e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var C=10;Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");C=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return o(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var r=a[e];if(void 0===r)return!1;if("function"==typeof r)v(r,this,t);else for(var l=r.length,c=p(r,l),n=0;n<l;++n)v(c[n],this,t);return!0},a.prototype.addListener=function(e,t){return s(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return s(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,a,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():u(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(a=o[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return c(this,e,!0)},a.prototype.rawListeners=function(e){return c(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t,n){void 0===n&&(n=!1),e.call(this),this.char=t,this.hex=n}return i(t,e),Object.defineProperty(t.prototype,"char",{get:function(){return this._char},set:function(e){if(!a.isType(e,"String"))throw new TypeError("char should be a string");if(!o.validateSingleChar(e))throw new Error("char should contain a single character, and this character should be allowed in XML");this._char=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){return this._hex},set:function(e){if(!a.isType(e,"Boolean"))throw new TypeError("hex should be a boolean");this._hex=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={});var t;return t=1===this.char.length?this.char.charCodeAt(0):a.getCodePoint(this.char,0),this.hex?"&#x"+t.toString(16)+";":"&#"+t+";"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.entity=t}return i(t,e),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(e){if(!a.isType(e,"String"))throw new TypeError("entity should be a string");if(!o.validateName(e))throw new Error("entity should not contain characters not allowed in XML names");this._entity=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"&"+this.entity+";"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(24),o=n(5),s=n(7),r=n(6),l=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!o.isType(e,"String"))throw new TypeError("text should be a string");if(!s.validateChar(e))throw new Error("text should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlText nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlText nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlText nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlText nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={});var t=this.text;return t=a.escapeAmpersands(t),t=a.escapeLeftAngleBrackets(t)},t}(r.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},function(e,t,n){"use strict";function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,a=t;i<a.length;i++){var o=a[i];if(Object.prototype.toString.call(e)==="[object "+o+"]")return!0}return!1}function a(e){return i(e,"Undefined")||i(e,"Null")||i(e.toString,"Function")||(e=e.toString()),String(e)}t.isType=i,t.stringify=a},function(e,t,n){"use strict";function i(e){return e.replace(/&/g,"&amp;")}function a(e){return e.replace(/</g,"&lt;")}function o(e){return e.replace(/'/g,"&apos;")}function s(e){return e.replace(/"/g,"&quot;")}t.escapeAmpersands=i,t.escapeLeftAngleBrackets=a,t.escapeSingleQuotes=o,t.escapeDoubleQuotes=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(24),o=n(12),s=n(5),r=n(7),l=n(20),c=n(21),d=n(6),p=n(22),u=function(e){function t(t,n){if(e.call(this),this.name=t,s.isType(n,"Array"))for(var i=0,a=n;i<a.length;i++){var o=a[i];this.insertChild(o)}else this.insertChild(n)}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!s.isType(e,"String"))throw new TypeError("name should be a string");if(!r.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),t.prototype.charRef=function(e,t,n){var i=new l.default(e,t);return this.insertChild(i,n),i},t.prototype.entityRef=function(e,t){var n=new c.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(t,n){if(!(t instanceof l.default||t instanceof c.default||t instanceof p.default))throw new TypeError("node should be an instance of XmlCharRef, XmlEntityRef, or XmlText");return e.prototype.insertChild.call(this,t,n)},t.prototype.removeChild=function(t){if(1===this._children.length)throw new Error("XmlAttribute nodes must have at least one child");return e.prototype.removeChild.call(this,t)},t.prototype.removeChildAtIndex=function(t){if(1===this._children.length)throw new Error("XmlAttribute nodes must have at least one child");return e.prototype.removeChildAtIndex.call(this,t)},t.prototype.text=function(e,t){var n=new p.default(e);return this.insertChild(n,t),n},t.prototype.toString=function(e){void 0===e&&(e={}),o.validateStringOptions(e);for(var t=e.doubleQuotes?'"':"'",n=this.name+"="+t,i=0,s=this._children;i<s.length;i++){var r=s[i];e.doubleQuotes?n+=a.escapeDoubleQuotes(r.toString(e)):n+=a.escapeSingleQuotes(r.toString(e))}return n+=t},t}(d.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.data=t}return i(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){if(!a.isType(e,"String"))throw new TypeError("character data should be a string");if(!o.validateChar(e))throw new Error("character data should not contain characters not allowed in XML");if(/]]>/.test(e))throw new Error("data should not contain the string ']]>'");this._data=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlCdata nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlCdata nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlCdata nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlCdata nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<![CDATA["+this.data+"]]>"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(12),o=n(5),s=n(6),r=function(e){function t(t){void 0===t&&(t={}),e.call(this),a.validateDeclarationOptions(t),this.encoding=t.encoding,this.standalone=t.standalone,this.version=t.version}return i(t,e),Object.defineProperty(t.prototype,"encoding",{get:function(){return this._encoding},set:function(e){if(o.isType(e,"String")){if(!/^[A-Za-z][A-Za-z0-9._-]*$/.test(e))throw new Error("encoding should be a valid XML encoding")}else if(!o.isType(e,"Undefined"))throw new TypeError("name should be a string or undefined");this._encoding=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"standalone",{get:function(){return this._standalone},set:function(e){if(o.isType(e,"String")){if(!/^(yes|no)$/.test(e))throw new Error("standalone should be either the string 'yes' or the string 'no'")}else if(!o.isType(e,"Undefined"))throw new TypeError("standalone should be a string or undefined");this._standalone=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},set:function(e){if(!o.isType(e,"String"))throw new TypeError("version should be a string");if(!/^1\.[0-9]+$/.test(e))throw new Error("version should be a valid XML version");this._version=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDecl nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDecl nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDecl nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDecl nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={}),a.validateStringOptions(e);var t=e.doubleQuotes?'"':"'",n="<?xml version="+t+this.version+t;return o.isType(this.encoding,"String")&&(n+=" encoding="+t+this.encoding+t),o.isType(this.standalone,"String")&&(n+=" standalone="+t+this.standalone+t),n+="?>"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function i(e,t,n,i){if(n+=e+" ",i.doubleQuotes){if(-1!==t.indexOf('"'))throw new Error("options.doubleQuotes inconsistent with sysId or pubId");n+='"'+t+'"'}else{if(-1!==t.indexOf("'"))throw new Error("options.doubleQuotes inconsistent with sysId or pubId");n+="'"+t+"'"}return n}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(12),s=n(5),r=n(7),l=n(14),c=n(29),d=n(30),p=n(31),u=n(32),h=n(33),m=n(6),f=n(15),v=function(e){function t(t,n,i){e.call(this),this.name=t,this.sysId=n,this.pubId=i}return a(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!s.isType(e,"String"))throw new TypeError("name should be a string");if(!r.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pubId",{get:function(){return this._pubId},set:function(e){if(s.isType(e,"String")){if(!/^(\u0020|\u000D|\u000A|[a-zA-Z0-9]|[-'()+,./:=?;!*#@$_%])*$/.test(e))throw new Error("pubId should not contain characters not allowed in public identifiers");if(s.isType(this.sysId,"Undefined"))throw new Error("pubId should not be defined if sysId is undefined")}else if(!s.isType(e,"Undefined"))throw new TypeError("pubId should be a string or undefined");this._pubId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sysId",{get:function(){return this._sysId},set:function(e){if(s.isType(e,"String")){if(!r.validateChar(e))throw new Error("sysId should not contain characters not allowed in XML");if(-1!==e.indexOf("'")&&-1!==e.indexOf('"'))throw new Error("sysId should not contain both single quotes and double quotes")}else{if(!s.isType(e,"Undefined"))throw new TypeError("sysId should be a string or undefined");if(!s.isType(this.pubId,"Undefined"))throw new Error("sysId should not be undefined if pubId is defined")}this._sysId=e},enumerable:!0,configurable:!0}),t.prototype.attlist=function(e,t){var n=new c.default(e);return this.insertChild(n,t),n},t.prototype.comment=function(e,t){var n=new l.default(e);return this.insertChild(n,t),n},t.prototype.element=function(e,t){var n=new d.default(e);return this.insertChild(n,t),n},t.prototype.entity=function(e,t){var n=new p.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(t,n){if(!(t instanceof l.default||t instanceof c.default||t instanceof d.default||t instanceof p.default||t instanceof u.default||t instanceof h.default||t instanceof f.default))throw new TypeError("node should be an instance of XmlComment, XmlDtdAttlist, XmlDtdElement, XmlDtdEntity, XmlDtdNotation, XmlDtdParamEntityRef, or XmlProcInst");return e.prototype.insertChild.call(this,t,n)},t.prototype.notation=function(e,t){var n=new u.default(e);return this.insertChild(n,t),n},t.prototype.paramEntityRef=function(e,t){var n=new h.default(e);return this.insertChild(n,t),n},t.prototype.procInst=function(e,t,n){var i=new f.default(e,t);return this.insertChild(i,n),i},t.prototype.toString=function(e){void 0===e&&(e={}),o.validateStringOptions(e);var t="<!DOCTYPE "+this.name;if(s.isType(this.pubId,"Undefined")?s.isType(this.sysId,"Undefined")||(t+=" ",t=i("SYSTEM",this.sysId,t,e)):(t+=" ",t=i("PUBLIC",this.pubId,t,e),t=i("",this.sysId,t,e)),0!==this._children.length){t+=" [";for(var n=0,a=this._children;n<a.length;n++){var r=a[n];e.pretty&&(t+=e.newline+e.indent),t+=r.toString(e)}e.pretty&&(t+=e.newline),t+="]>"}else t+=">";return t},t}(m.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=v},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!a.isType(e,"String"))throw new TypeError("text should be a string");if(!o.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ATTLIST "+this.text+">"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!a.isType(e,"String"))throw new TypeError("text should be a string");if(!o.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ELEMENT "+this.text+">"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!a.isType(e,"String"))throw new TypeError("text should be a string");if(!o.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ENTITY "+this.text+">"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!a.isType(e,"String"))throw new TypeError("text should be a string");if(!o.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!NOTATION "+this.text+">"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),o=n(7),s=n(6),r=function(e){function t(t){e.call(this),this.entity=t}return i(t,e),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(e){if(!a.isType(e,"String"))throw new TypeError("entity should be a string");if(!o.validateName(e))throw new Error("entity should not contain characters not allowed in XML names");this._entity=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"%"+this.entity+";"},t}(s.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function i(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(!(i instanceof p.default||i instanceof h.default||i instanceof v.default))return!1}return!0}function a(e,t){return(e instanceof p.default||e instanceof h.default||e instanceof v.default)&&(t instanceof p.default||t instanceof h.default||t instanceof v.default)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},s=n(12),r=n(5),l=n(7),c=n(25),d=n(26),p=n(20),u=n(14),h=n(21),m=n(6),f=n(15),v=n(22),g=function(e){function t(t){e.call(this),this.name=t}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!r.isType(e,"String"))throw new TypeError("name should be a string");if(!l.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),t.prototype.attribute=function(e,t,n){if(r.isType(t,"String"))t=new v.default(t);else if(r.isType(t,"Array"))for(var i=t,a=0;a<i.length;a++)if(r.isType(i[a],"String")){var o=i[a];i[a]=new v.default(o)}var s=new c.default(e,t);return this.insertChild(s,n),s},t.prototype.attributes=function(){return this._children.filter(function(e){return e instanceof c.default})},t.prototype.cdata=function(e,t){var n=new d.default(e);return this.insertChild(n,t),n},t.prototype.charRef=function(e,t,n){var i=new p.default(e,t);return this.insertChild(i,n),i},t.prototype.comment=function(e,t){var n=new u.default(e);return this.insertChild(n,t),n},t.prototype.element=function(e,n){var i=new t(e);return this.insertChild(i,n),i},t.prototype.entityRef=function(e,t){var n=new h.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(n,i){if(!(n instanceof c.default||n instanceof d.default||n instanceof p.default||n instanceof u.default||n instanceof t||n instanceof h.default||n instanceof f.default||n instanceof v.default))throw new TypeError("node should be an instance of XmlAttribute, XmlCdata, XmlCharRef, XmlComment, XmlElement, XmlEntityRef, XmlProcInst, or XmlText");if(n instanceof c.default)for(var a=this._children.filter(function(e){return e instanceof c.default}),o=0,s=a;o<s.length;o++){var r=s[o];if(r.name===n.name)throw new Error("element already contains an XmlAttribute object with name "+n.name)}return e.prototype.insertChild.call(this,n,i)},t.prototype.procInst=function(e,t,n){var i=new f.default(e,t);return this.insertChild(i,n),i},t.prototype.text=function(e,t){var n=new v.default(e);return this.insertChild(n,t),n},t.prototype.toString=function(e){void 0===e&&(e={}),s.validateStringOptions(e);for(var t=this.attributes(),n=this._children.filter(function(e){return-1===t.indexOf(e)}),o="<"+this._name,r=0,l=t;r<l.length;r++){o+=" "+l[r].toString(e)}if(n.length>0){o+=">";for(var c=function(t){return e.indent+t},d=0;d<n.length;d++){var p=n[d],u=p.toString(e),h=d>0?n[d-1]:void 0;e.pretty&&(i(n)||d>0&&a(p,h)||(o+=e.newline,u=u.split(e.newline).map(c).join(e.newline))),o+=u}e.pretty&&(i(n)||(o+=e.newline)),o+="</"+this._name+">"}else o+="/>";return o},t}(m.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(8),o=function(){function e(e,t,n,o,s){var r=this;this.val=!1,this.parent=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className=o+"-browser-switch-wrapper",this.parent.appendChild(this.wrapperEl),this.callBack=n,s&&(this.val=s),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val+"",this.hiddenCheckbox.style.display="none",this.wrapperEl.appendChild(this.hiddenCheckbox),this.titleEl=document.createElement("div"),this.titleEl.className=o+"-browser-switch-title",this.titleEl.id=t,this.titleEl.textContent=i.translate(t),this.wrapperEl.appendChild(this.titleEl),new a.WVTooltip(this.titleEl).setTitle(i.translate(t+"_INFO")),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper switch";var l=this.val?"switch-on":"switch-off";$(this.boxEl).addClass(l),this.wrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),$(this.boxEl).click(function(e){r.val=!r.val;var t=r.val?"true":"false";$(r.hiddenCheckbox).val(t),$(r.hiddenCheckbox).trigger("change"),r.val?$(r.boxEl).removeClass("switch-off").addClass("switch-on"):$(r.boxEl).removeClass("switch-on").addClass("switch-off"),r.callBack&&r.callBack(r.val)}),this.setVal(this.val)}return e.prototype.getTitleEl=function(){return this.titleEl},e.prototype.getClickEl=function(){return this.hiddenCheckbox},e.prototype.getVal=function(){return this.val},e.prototype.setVal=function(e){var t=e?"true":"false";this.val=e,$(this.hiddenCheckbox).val(t),$(this.hiddenCheckbox).trigger("change"),this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e}();t.FileBrowserSwitch=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a,o,s=n(19),r=n(8),l=n(9),c=n(16),d="http://www.w3.org/2000/svg",p="http://www.w3.org/1999/xlink",u=[["rgba(0,0,0,1)","rgba(128,0,0,1)","rgba(0,128,0,1)","rgba(128,128,0,1)","rgba(0,0,128,1)"],["rgba(128,0,128,1)","rgba(0,128,128,1)","rgba(192,192,192,1)","rgba(192,220,192,1)","rgba(166,202,240,1)"],["rgba(255,251,240,1)","rgba(160,160,164,1)","rgba(128,128,128,1)","rgba(255,0,0,1)","rgba(0,255,0,1)"],["rgba(255,255,0,1)","rgba(0,0,255,1)","rgba(255,0,255,1)","rgba(0,255,255,1)","rgba(255,255,255,1)"]],h=[["rgb(0,0,0)","rgb(128,0,0)","rgb(0,128,0)","rgb(128,128,0)","rgb(0,0,128)"],["rgb(128,0,128)","rgb(0,128,128)","rgb(192,192,192)","rgb(192,220,192)","rgb(166,202,240)"],["rgb(255,251,240)","rgb(160,160,164)","rgb(128,128,128)","rgb(255,0,0)","rgb(0,255,0)"],["rgb(255,255,0)","rgb(0,0,255)","rgb(255,0,255)","rgb(0,255,255)","rgb(255,255,255)"]];try{a=_ColorPalette}catch(e){a=h}try{o=_ColorPaletteWithAlpha}catch(e){o=u}var m=function(e){function t(t,n){function i(e){var t;return t=c(e._originalInput?e._originalInput:e),"#"+Math.round(255*t.toRgb().a).toString(16).toUpperCase()+t.toHex().toUpperCase()}function s(e){var t;return t=c(e._originalInput?e._originalInput:e),"#"+t.toHex().toUpperCase()}function l(e){var t;return t=e._originalInput?c(e._originalInput).toRgb():c(e).toRgb(),"rgb("+t.r+", "+t.g+", "+t.b+")"}function u(e){var t,n;return e._originalInput?t=c(e._originalInput).toRgb():(n=e.slice(1,3),t=c("#"+e.slice(3)+n).toRgb()),"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")"}var h=e.call(this)||this;h.nodes=[],h.close=function(e){e.target===h.mount&&h.mount.contains(e.target)||(h.mount.style.display="none",$(h.pixelBox).remove(),document.body.removeChild(h.mount),document.removeEventListener("click",h.close))},h.pickPixel=function(e){var t=this.canvas.getContext("2d"),n=e.pageX-this.canvas.getBoundingClientRect().left,i=e.pageY-this.canvas.getBoundingClientRect().top;this.pixelBox.style.top=e.pageY+22+"px",this.pixelBox.style.left=e.pageX+22+"px";var a=t.getImageData(n,i,1,1),o=a.data;this.colorPrevField.style.backgroundColor="rgb("+o[0]+", "+o[1]+", "+o[2]+")",this.colorPrevText.textContent="rgb("+o[0]+", "+o[1]+", "+o[2]+")"},h.selectPixelColor=function(e){e.preventDefault(),e.stopPropagation(),$(this.pixelBox).hide(),this.canvas.removeEventListener("mousemove",this.pickPixel),this.canvas.removeEventListener("mousedown",this.selectPixelColor);var t=this.colorPrevText.textContent.replace("rgb","rgba").replace(")"," ,1)");this.emit("customColorChosen",t),$(this.spectrumEl).spectrum("destroy")},h.mount=document.createElement("div"),h.mount.style.position="absolute",h.activeColor=t,h.showAlpha=n,h.pixelBox=document.createElement("div"),h.pixelBox.className="color-pipette-preview-wrapper",h.colorPrevField=document.createElement("span"),h.colorPrevField.className="color-pipette-preview-field",h.colorPrevText=document.createElement("span"),h.colorPrevText.className="color-pipette-preview-text",h.pixelBox.appendChild(h.colorPrevField),h.pixelBox.appendChild(h.colorPrevText),document.body.appendChild(h.pixelBox),$(h.pixelBox).hide(),document.body.appendChild(h.mount),setTimeout(function(){document.addEventListener("click",h.close)}),h.spectrumEl=document.createElement("div"),h.spectrumEl.id="spectrum-picker-el",h.mount.appendChild(h.spectrumEl);var m=$(h.spectrumEl);m.attr("alpha",h.showAlpha),$(h.spectrumEl).spectrum({flat:!0,color:h.activeColor,showAlpha:h.showAlpha,showInput:!0,showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:40,preferredFormat:"rgb",localStorageKey:"customColorStorage",palette:h.showAlpha?o:a,show:function(e){$(".sp-alpha-enabled").length>0&&$(".color-palette-pipette-picker-wrapper").css("top","274px"),"false"===$(this).attr("alpha")?($(".sp-input").val(l(e)),$("#sp-hex-input").val(s(e)),$(".sp-input").on("keyup",function(e){13===e.keyCode&&($(this).val(l(this.value)),$("#sp-hex-input").val(s(this.value)))}),$(".sp-input").blur(function(e){$(this).val(l(this.value)),$("#sp-hex-input").val(s(this.value))})):($("#sp-hex-input").val("#"+i(e)),$(".sp-input").on("keyup",function(e){13===e.keyCode&&$("#sp-hex-input").val(i(this.value))}),$(".sp-input").blur(function(e){$("#sp-hex-input").val(i(this.value))}))},move:function(e){"false"===$(this).attr("alpha")?($(".sp-input").val(l(e)),$("#sp-hex-input").val(s(e))):$("#sp-hex-input").val(i(e))},change:function(e){var t;t=h.showAlpha?l(e):u(e),h.chosenColor=t}});var f=Math.min(window.innerWidth,document.documentElement.offsetWidth),v=Math.max(window.innerHeight,document.documentElement.offsetHeight);h.mount.style.top=.5*(v-300)+"px",h.mount.style.left=.5*(f-280)+"px",h.mount.className="wv-color-picker-popup";var g=$(h.mount);h.hexInputEl=document.createElement("input"),h.hexInputEl.id="sp-hex-input",h.hexInputEl.className="sp-input",h.hexInputEl.style.marginTop="5px",$(h.hexInputEl).attr("alpha",h.showAlpha),h.showAlpha?$(h.hexInputEl).val(i(h.activeColor)):$(h.hexInputEl).val(s(h.activeColor));var C=document.createElement("div");C.className="color-palette-pipette-picker-wrapper",h.showAlpha&&(C.style.top="274px");var _=document.createElement("span");_.className="color-palette-pipette-picker-icon";var I=new r.WVTooltip(_);I.setTitle(h.translateTooltip("ID_COLOR_PICKER_PALETTE_CHOOSE_FROM_PART")),I.setOrientation("bottom");var S=document.createElementNS(d,"svg");S.style.width="25px",S.style.height="25px";var y=document.createElementNS(d,"use");y.setAttributeNS(p,"href","#10_auswahl_durch_farbe"),S.appendChild(y),_.appendChild(S);var E=document.createElement("span");E.className="color-palette-pipette-picker-icon",E.style.marginLeft="5px";var b=new r.WVTooltip(E);b.setTitle(h.translateTooltip("ID_COLOR_PICKER_PALETTE_CHOOSE_FROM_PIXEL")),b.setOrientation("bottom");var w=document.createElementNS(d,"svg");w.style.width="25px",w.style.height="25px",w.style.position="relative",w.style.top="2px";var T=document.createElementNS(d,"use");return T.setAttributeNS(p,"href","#palette_pipette"),w.appendChild(T),E.appendChild(w),C.appendChild(_),C.appendChild(E),h.pickPixel=h.pickPixel.bind(h),h.selectPixelColor=h.selectPixelColor.bind(h),w.onclick=function(e){e.preventDefault(),e.stopPropagation(),h.canvas=vsClient.vsCanvas.canvas2D,$(h.pixelBox).show(),$(h.mount).hide(),h.canvas.addEventListener("mousemove",h.pickPixel),h.canvas.addEventListener("mousedown",h.selectPixelColor)},S.onclick=function(e){e.preventDefault(),e.stopPropagation(),$(h.mount).hide();vsClient.command.executeXML('<Call Method="GetSelectedNodes"></Call>'),vsClient.once("GetSelectedNodes",function(e){Array.isArray(e.NodeId)?h.nodes=e.NodeId:h.nodes=[e.NodeId],vsClient.once("NodePropertiesChanged",function(e){if(e.General){for(var t=u(e.General.Color),n='<Call Method="SetSelectedNodes">',i=h.nodes.length,a=0;a<i;a++)n+="<NodeId>"+h.nodes[a]+"</NodeId>";n+="</Call>",vsClient.command.executeXML(n),vsClient.once("SetSelectedNodes",function(){h.emit("customColorChosen",t),$(h.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})}else vsClient.once("NodePropertiesChanged",function(e){if(e.General){var t=u(e.General.Color),n='<Call Method="SetSelectedNodes">'+h.nodes.toString()+"</Call>";vsClient.command.executeXML(n),vsClient.once("SetSelectedNodes",function(){h.emit("customColorChosen",t),$(h.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})}else $(h.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})})})},$(".sp-input-container").append(h.hexInputEl),$(".sp-picker-container").append(C),$(h.hexInputEl).blur(function(e){"false"===$(this).attr("alpha")?($(".sp-input").val(l(this.value)),$(this).val(s(this.value))):($(".sp-input").val(u(this.value)),$(this).val(i(this.value)))}),$(h.hexInputEl).on("keyup",function(e){13===e.keyCode&&($("#spectrum-picker-el").spectrum("set",this.value),"false"===$(this).attr("alpha")?($(".sp-input").val(l(this.value)),$(this).val(s(this.value))):($(".sp-input").val(u(this.value)),$(this).val(i(this.value))))}),g.find(".sp-cancel").on("click",function(e){$(h.pixelBox).remove(),m.spectrum("destroy")}),g.find(".sp-choose").on("click",function(e){$(h.pixelBox).remove();var t=c(m.spectrum("get")),n=t.getAlpha();t.setAlpha(1===n?1:n);var i=h.showAlpha?u(t._originalInput):l(t._originalInput);h.emit("customColorChosen",i),m.spectrum("destroy")}),h}return i(t,e),t.prototype.translateTooltip=function(e){var t=l.settings.lang;return _lang_data[e]&&_lang_data[e][t]?_lang_data[e][t]:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e][t]?_custom_lang_data[e][t]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e},t}(s.EventEmitter);t.CustomPalette=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(4),o=function(){function e(e,t,n,a){var o=this;this.src=e,this.width=t,this.height=n,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscClick=this.detectEscClick.bind(this),this.encoding=a||"png";var s="data:image/"+a+";base64,";this.windowWrapper=document.createElement("div"),this.windowWrapper.className="image-overlay";var r=document.createElement("i");r.className="fa fa-times image-overlay-icon",r.onclick=function(e){o.removeWindow()},this.windowWrapper.appendChild(r);var l=document.createElement("i");l.className="image-overlay-icon fas fa-download",this.windowWrapper.appendChild(l),l.onclick=function(e){o.downloadImage()},document.addEventListener("click",this.detectOutsideClick),document.addEventListener("keydown",this.detectEscClick),this.titleEl=document.createElement("div"),this.titleEl.className="image-overlay-header",this.titleEl.textContent=i.translate("ID_WV_COPY_TO_CLIPBOARD_INFO"),this.windowWrapper.appendChild(this.titleEl);var c=document.createElement("div");c.className="image-overlay-image-wrapper",c.style.maxHeight=this.height-this.titleEl.clientHeight-30+"px",this.windowWrapper.appendChild(c),this.imageEl=document.createElement("img"),this.imageEl.id="clipboardImage",this.imageEl.src=s+this.src,this.imageEl.className="image-overlay-image",this.imageEl.style.maxHeight=this.height-this.titleEl.clientHeight-35+"px",c.appendChild(this.imageEl),document.body.appendChild(this.windowWrapper);var d=document.body.offsetHeight-this.height-23;d=d>0?d/2:0;var p=document.body.offsetWidth-this.width-23;p=p>0?p/2:0,this.windowWrapper.style.top=d+"px",this.windowWrapper.style.left=p+"px",this.windowWrapper.style.maxHeight=this.height+"px",this.windowWrapper.style.maxWidth=this.width+"px"}return e.prototype.detectOutsideClick=function(e){e.target===this.windowWrapper||this.windowWrapper.contains(e.target)||this.removeWindow()},e.prototype.detectEscClick=function(e){27===e.keyCode&&this.removeWindow()},e.prototype.removeWindow=function(){document.removeEventListener("click",this.detectOutsideClick),document.removeEventListener("click",this.detectEscClick),$(this.windowWrapper).remove()},e.prototype.downloadImage=function(){for(var e=atob(this.src),t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);var i=new Uint8Array(t),o=new Blob([i],{type:"image/"+this.encoding}),s=a.appStates.fileName+("svg+xml"===this.encoding?".svg":".png");if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,s);else{var r=document.createElement("a");r.href=URL.createObjectURL(o),r.download=s,document.body.appendChild(r),r.click(),r.remove()}},e}();t.ClipboardModal=o},function(e,t,n){"use strict";function i(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(!c.isType(i,"String"))throw new TypeError(i+" should be a string")}return e}function a(e){if(!c.isType(e.include,"Boolean","Undefined"))throw new TypeError("declaration.include should be a string or undefined");return c.isType(e.include,"Boolean")||(e.include=d.declaration.include),e}function o(e){if(!c.isType(e.include,"Boolean","Undefined"))throw new TypeError("dtdOptions.include should be a string or undefined");return c.isType(e.include,"Boolean")||(e.include=d.dtd.include),e}function s(e){for(var t in e)if(e.hasOwnProperty(t)&&!c.isType(e[t],"Function"))throw new TypeError("options.typeHandlers['"+t+"'] should be a Function");return e}function r(e){for(var t in e)if(e.hasOwnProperty(t)&&!c.isType(e[t],"Function"))throw new TypeError("options.wrapHandlers['"+t+"'] should be a Function");return e}function l(e){if(!c.isType(e.aliasString,"String","Undefined"))throw new TypeError("options.aliasString should be a string or undefined");if(c.isType(e.aliasString,"String")||(e.aliasString=d.aliasString),!c.isType(e.attributeString,"String","Undefined"))throw new TypeError("options.attributeString should be a string or undefined");if(c.isType(e.attributeString,"String")||(e.attributeString=d.attributeString),!c.isType(e.cdataInvalidChars,"Boolean","Undefined"))throw new TypeError("options.cdataInvalidChars should be a boolean or undefined");if(c.isType(e.cdataInvalidChars,"Boolean")||(e.cdataInvalidChars=d.cdataInvalidChars),!c.isType(e.cdataKeys,"Array","Undefined"))throw new TypeError("options.cdataKeys should be an Array or undefined");if(c.isType(e.cdataKeys,"Array")||(e.cdataKeys=d.cdataKeys),e.cdataKeys=i(e.cdataKeys),!c.isType(e.declaration,"Object","Undefined"))throw new TypeError("options.declaration should be an Object or undefined");if(c.isType(e.declaration,"Object")||(e.declaration=d.declaration),e.declaration=a(e.declaration),!c.isType(e.dtd,"Object","Undefined"))throw new TypeError("options.dtd should be an Object or undefined");if(c.isType(e.dtd,"Object")||(e.dtd=d.dtd),e.dtd=o(e.dtd),!c.isType(e.format,"Object","Undefined"))throw new TypeError("options.format should be an Object or undefined");if(c.isType(e.format,"Object")||(e.format=d.format),!c.isType(e.typeHandlers,"Object","Undefined"))throw new TypeError("options.typeHandlers should be an Object or undefined");if(c.isType(e.typeHandlers,"Object")||(e.typeHandlers=d.typeHandlers),e.typeHandlers=s(e.typeHandlers),!c.isType(e.valueString,"String","Undefined"))throw new TypeError("options.valueString should be a string or undefined");if(c.isType(e.valueString,"String")||(e.valueString=d.valueString),!c.isType(e.wrapHandlers,"Object","Undefined"))throw new TypeError("options.wrapHandlers should be an Object or undefined");return c.isType(e.wrapHandlers,"Object")||(e.wrapHandlers=d.wrapHandlers),e.wrapHandlers=r(e.wrapHandlers),e}var c=n(23),d={aliasString:"=",attributeString:"@",cdataInvalidChars:!1,cdataKeys:[],declaration:{include:!0},dtd:{include:!1},format:{},typeHandlers:{},valueString:"#",wrapHandlers:{}};Object.freeze(d),t.validateOptions=l},function(e,t,n){"use strict";function i(e){return new c.default(e)}var a=n(25);t.XmlAttribute=a.default;var o=n(26);t.XmlCdata=o.default;var s=n(20);t.XmlCharRef=s.default;var r=n(14);t.XmlComment=r.default;var l=n(27);t.XmlDecl=l.default;var c=n(40);t.XmlDocument=c.default;var d=n(28);t.XmlDtd=d.default;var p=n(29);t.XmlDtdAttlist=p.default;var u=n(30);t.XmlDtdElement=u.default;var h=n(31);t.XmlDtdEntity=h.default;var m=n(32);t.XmlDtdNotation=m.default;var f=n(33);t.XmlDtdParamEntityRef=f.default;var v=n(34);t.XmlElement=v.default;var g=n(21);t.XmlEntityRef=g.default;var C=n(6);t.XmlNode=C.default;var _=n(15);t.XmlProcInst=_.default;var I=n(22);t.XmlText=I.default,t.document=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(12),o=n(5),s=n(14),r=n(27),l=n(28),c=n(34),d=n(6),p=n(15),u=function(e){function t(t){e.call(this),e.prototype.insertChild.call(this,new c.default(t))}return i(t,e),t.prototype.comment=function(e,t){var n=new s.default(e);return this.insertChild(n,t),n},t.prototype.decl=function(e){var t=new r.default(e);return this.insertChild(t,0),t},t.prototype.dtd=function(e,t,n,i){var a=new l.default(e,t,n);return o.isType(i,"Undefined")&&(i=this._children[0]instanceof r.default?1:0),this.insertChild(a,i),a},t.prototype.insertChild=function(t,n){if(!(t instanceof s.default||t instanceof r.default||t instanceof l.default||t instanceof p.default))throw new TypeError("node should be an instance of XmlComment, XmlDecl, XmlDtd, or XmlProcInst");if(t instanceof s.default||t instanceof p.default){if(this._children[0]instanceof r.default&&0===n)throw new Error("XmlComment or XmlProcInst node should be inserted after the XmlDecl node")}else if(t instanceof r.default){if(this._children[0]instanceof r.default)throw new Error("XmlDocument node should only contain one XmlDecl node");if(0!==n)throw new Error("XmlDecl node should be inserted at the beginning of an XmlDocument node")}else if(t instanceof l.default){if(this._children[0]instanceof r.default&&0===n)throw new Error("XmlDtd node should be inserted after the XmlDecl node");for(var i=0;i<n&&i<this._children.length;i++)if(this._children[i]instanceof c.default)throw new Error("XmlDtd node should be inserted before the XmlElement node");for(var a=0,o=this._children;a<o.length;a++){var d=o[a];if(d instanceof l.default)throw new Error("XmlDocument node should only contain one XmlDtd node")}}return e.prototype.insertChild.call(this,t,n)},t.prototype.procInst=function(e,t,n){var i=new p.default(e,t);return this.insertChild(i,n),i},t.prototype.removeChild=function(t){if(t instanceof c.default)throw new Error("XmlElement nodes cannot be removed from XmlDocument nodes");return e.prototype.removeChild.call(this,t)},t.prototype.removeChildAtIndex=function(t){if(this._children[t]instanceof c.default)throw new Error("XmlElement nodes cannot be removed from XmlDocument nodes");return e.prototype.removeChildAtIndex.call(this,t)},t.prototype.root=function(){for(var e=0,t=this._children;e<t.length;e++){var n=t[e];if(n instanceof c.default)return n}throw new Error("XmlDocument does not contain a root node")},t.prototype.toString=function(e){void 0===e&&(e={}),a.validateStringOptions(e);for(var t="",n=0,i=this._children;n<i.length;n++){t+=i[n].toString(e),e.pretty&&(t+=e.newline)}var o=t.length-e.newline.length;return t.substr(o)===e.newline&&(t=t.substr(0,o)),t},t}(d.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=u},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),s=n(0),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:s.settingsPane.sceneSettings?s.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-animation #OnAssignAnimationNodeClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="ActivateInteraction"><Interaction>Animation_AssignCoordinateToNode</Interaction></Call>')}),$("#wv-animation #OnAnimationStartClicked").off("click").click(function(e){var t='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>true';t+="</Animation></General></Scene></Settings></Call>",vsClient.command.executeXML(t)}),$("#wv-animation #OnAnimationStopClicked").off("click").click(function(e){var t='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>false';t+="</Animation></General></Scene></Settings></Call>",vsClient.command.executeXML(t)})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>AnimationPane</Type></Call>'),vsClient.once("GetTemplate.AnimationPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(n,i){if("toggle-folder-visibility"===i)return void t.adapter.updateValues(t.values);var r=n.item.path;if("Event"===r[0]){i=i.toString(),a.modifySettings(t.values,r,i);var l=o.serializeWithValue(r,i,["Type="+e.Event]);vsClient.command.executeXML(l)}else{a.modifySettings(s.settingsPane.sceneSettings,r,i);var l=o.serializeWithValue(r,i),c='<Call Method="SetSceneSettings"> '+l+" </Call>";vsClient.command.executeXML(c),t.hasPresets&&t.stack.changeToCustomPreset()}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.AnimationPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-bandanalysis #OnMinimalDistanceComputeClicked").click(function(e){vsClient.command.executeXML('<Call Method="BandAnalysisComputeMinimalDistance"></Call>')}),$("#wv-bandanalysis #OnBandAnalysisComputeClicked").click(function(e){vsClient.command.executeXML('<Call Method="BandAnalysisCompute"></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>BandAnalysisPane</Type></Call>'),vsClient.once("GetTemplate.BandAnalysisPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.BandAnalysisPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=n(8),c=n(18),d=n(4),p=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.headerKeys=[],i.headerNames=[],i.selection=[],i.calloutInputs=[],i.rows=[],i.defaultCols=["Number","Name","Quantity","CalloutId"],i.sum=0,i.scrollPosTable=0,i.startIndex=1,i.update=function(e){i.tableWrapperEl.scrollTop=i.scrollPosTable,i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.scrollOnKey=i.scrollOnKey.bind(i);var a=document.createElement("div");a.className="pane-buttons-tab",i.copyTooltip=new l.WVTooltip(a),i.copyTooltip.setTitle(_lang_data.ID_COPY_TO_CLIPBOARD[i.lang]),i.wrapperEl.appendChild(a);var s=document.createElement("i");s.className="far fa-copy tree-header-action-icon",a.onclick=function(e){var t=!1;i.rows.map(function(e){e.CalloutId&&""!==e.CalloutId&&null!==e.CalloutId&&(t=!0)});var n=i.headerNames.filter(function(e){return"ID"!==e||t}),a=n.join(";");a=a.replace("ID","CalloutId"),a+="\n";for(var o=0;o<i.rows.length;o++)for(var s=0;s<i.headerKeys.length;s++)if("CalloutId"!==i.headerKeys[s]||t){var r=i.rows[o][i.headerKeys[s]];if(void 0===r)for(var l=0;l<i.rows[o].Attribute.length;l++)i.rows[o].Attribute[l].Name===i.headerKeys[s]&&(r=i.rows[o].Attribute[l].__text__);a+=r,a+=s===i.headerKeys.length-1?"\n":";"}a+=(t?";;":";")+i.sum.toString(),c(a)},a.appendChild(s),i.tableWrapperEl=document.createElement("div"),i.tableWrapperEl.className="bom-pane-table-wrapper",i.wrapperEl.appendChild(i.tableWrapperEl),i.tableWrapperEl.onscroll=function(e){i.scrollPosTable=i.tableWrapperEl.scrollTop},i.tableEl=document.createElement("table"),i.tableEl.className="bom-pane-table pane-content",i.tableEl.width="100%",i.tableWrapperEl.appendChild(i.tableEl);var r=document.createElement("thead");i.tableEl.appendChild(r),i.tableHeaderRowEl=document.createElement("tr"),i.tableHeaderRowEl.className="pane-item",r.appendChild(i.tableHeaderRowEl),i.tableBodyEl=document.createElement("tbody"),i.tableEl.appendChild(i.tableBodyEl),i.buildDefaultHeader();var d=document.createElement("tr");i.tableBodyEl.appendChild(d),i.buildSumRow();var p=document.createElement("button");return p.className="pane-item-entry-button bom-pane-compute-button",p.onclick=function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>BillOfMaterial</Mode></Call>'),vsClient.once("Compute",function(e){e.BillOfMaterial&&(i.buildHeader(e.BillOfMaterial.Template.Column),i.buildBody(Array.isArray(e.BillOfMaterial.Data.Item)?e.BillOfMaterial.Data.Item:[e.BillOfMaterial.Data.Item]))})},p.textContent="Update",i.wrapperEl.appendChild(p),i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),vsClient.on("GetBillOfMaterial",function(e){e.BillOfMaterial&&(i.buildHeader(e.BillOfMaterial.Template.Column),i.buildBody(Array.isArray(e.BillOfMaterial.Data.Item)?e.BillOfMaterial.Data.Item:[e.BillOfMaterial.Data.Item]))}),vsClient.on("@OpenedFile",function(e){$(i.tableBodyEl).empty(),i.buildDefaultHeader(),i.buildSumRow()}),i.wrapperEl.addEventListener("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.createContextMenu(e)}),i.wrapperEl.addEventListener("mouseenter",function(e){i.toggleScrollEvents(!0)}),i.wrapperEl.addEventListener("mouseleave",function(e){i.toggleScrollEvents(!1)}),i}return i(t,e),t.prototype.toggleScrollEvents=function(e){e?$(document).off("keydown",this.scrollOnKey).on("keydown",this.scrollOnKey):$(document).off("keydown",this.scrollOnKey)},t.prototype.scrollOnKey=function(e){if(-1===d.appStates.interactionMode.indexOf("Flythrough")){if(40!==e.keyCode&&38!==e.keyCode||Date.now()-this.firstScrollHit<200)return;if(e.preventDefault(),this.firstScrollHit=Date.now(),0===this.selection.length)40===e.keyCode?this.selectBOMRow(this.rows[0].Id):38===e.keyCode&&this.selectBOMRow(this.rows[this.rows.length-1].Id);else if(40===e.keyCode){var t=this.selection[this.selection.length-1],n=this.rows.map(function(e){return e.Id}).indexOf(t);if(n===this.rows.length-1)return;var i=this.rows[n+1];this.selectBOMRow(i.Id)}else if(38===e.keyCode){var a=this.selection[0],n=this.rows.map(function(e){return e.Id}).indexOf(a);if(0===n)return;var o=this.rows[n-1];this.selectBOMRow(o.Id)}}},t.prototype.buildHeader=function(e){var t=this;$(this.tableHeaderRowEl).empty(),this.headerKeys=[],this.headerNames=[];for(var n=this,i=0;i<e.length;i++)!function(i){var a=document.createElement("th");a.style.resize="horizontal",a.style.cursor="pointer",a.textContent=e[i].DisplayName,a.className="pane-item-entry-name",n.headerKeys.push(e[i].Id),n.headerNames.push(e[i].DisplayName);var o=document.createElement("span");a.appendChild(o);var s=document.createElement("i");s.className="fas fa-sort bom-pane-sort-icon",o.appendChild(s),a.onclick=function(n){-1!==s.className.indexOf("fa-sort-up")?(s.className="fas fa-sort-down bom-pane-sort-icon",t.sort(!1,e[i].Id)):(s.className="fas fa-sort-up bom-pane-sort-icon",t.sort(!0,e[i].Id))},n.tableHeaderRowEl.appendChild(a)}(i)},t.prototype.buildBody=function(e){if(e){this.calloutInputs=[],this.rows=[],this.sum=0,$(this.tableBodyEl).empty();var t=document.createElement("tr");this.tableBodyEl.appendChild(t);for(var n=0;n<e.length;n++)this.buildRow(e[n]);this.buildSumRow()}},t.prototype.buildRow=function(e){var t=this;this.rows.push(e);var n=document.createElement("tr");n.className="pane-item",n.id="BOM_ROW_ID"+e.Id,n.onclick=function(n){t.selectBOMRow(e.Id,n.ctrlKey)},n.oncontextmenu=function(n){d.appStates.nodesSelected||t.selectBOMRow(e.Id)},this.tableBodyEl.appendChild(n);for(var i=this,a=0;a<this.headerKeys.length;a++)!function(t){var a=document.createElement("td");a.className="pane-item-entry-name","CalloutId"===i.headerKeys[t]&&(i.calloutInputs.push(a),a.contentEditable="true",a.onblur=function(t){if(a.textContent&&""!==a.textContent){var n='<Call Method="UpdateBillOfMaterialRowCalloutId">';n+="<RowId>"+e.Id+"</RowId>",n+="<CalloutId>"+a.textContent+"</CalloutId></Call>",e.CalloutId=a.textContent,vsClient.command.executeXML(n)}else{var n='<Call Method="ClearBillOfMaterialCalloutId">';n+="<RowId>"+e.Id+"</RowId></Call>",e.CalloutId=a.textContent,vsClient.command.executeXML(n)}},a.onkeydown=function(e){13===e.keyCode&&a.blur()}),a.textContent=-1===i.defaultCols.indexOf(i.headerKeys[t])?i.searchAttribute(e,i.headerKeys[t]):e[i.headerKeys[t]],"Quantity"===i.headerKeys[t]&&(i.sum+=parseInt(e[i.headerKeys[t]])),n.appendChild(a)}(a)},t.prototype.selectBOMRow=function(e,t){void 0===t&&(t=!1);var n='<Call Method="SelectBillOfMaterialRows">';n+="<RowId>"+e+"</RowId>",n+="<AddToSelection>"+t+"</AddToSelection>",n+="</Call>",vsClient.command.executeXML(n)},t.prototype.sort=function(e,t){var n=this.rows.sort(function(n,i){var a,o,s=n[t],r=i[t];if(void 0===n[t]){s="";for(var l=0;l<n.Attribute.length;l++)n.Attribute[l].Name===t&&(s=n.Attribute[l].__text__?n.Attribute[l].__text__:"")}if(void 0===i[t]){r="";for(var l=0;l<i.Attribute.length;l++)i.Attribute[l].Name===t&&(r=i.Attribute[l].__text__?i.Attribute[l].__text__:"")}return o=isNaN(parseFloat(s))?s.toUpperCase():parseFloat(r),a=isNaN(parseFloat(s))?r.toUpperCase():parseFloat(s),a>o?e?1:-1:e?-1:1});this.buildBody(n)},t.prototype.searchAttribute=function(e,t){if(e.Attribute){for(var n=Array.isArray(e.Attribute)?e.Attribute:[e.Attribute],i=0;i<n.length;i++)if(n[i].Name===t)return n[i].__text__;return""}},t.prototype.buildSumRow=function(){var e=document.createElement("tr");this.tableBodyEl.appendChild(e);var t=document.createElement("td");t.className="pane-item",e.appendChild(t);var n=document.createElement("td");n.className="pane-item",e.appendChild(n);var i=document.createElement("td");i.className="bom-pane-sum-cell pane-item",i.textContent=this.sum.toString(),e.appendChild(i);var a=document.createElement("td");a.className="pane-item",e.appendChild(a)},t.prototype.buildDefaultHeader=function(){$(this.tableHeaderRowEl).empty();var e=document.createElement("th");e.textContent=o.translate("ID_BOM_COLUMN_CALLOUT_ID"),e.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(e);var t=document.createElement("th");t.textContent=o.translate("ID_BOM_PARTNAME"),t.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(t);var n=document.createElement("th");n.textContent=o.translate("ID_BOM_QUANTITY"),n.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(n)},t.prototype.changeLang=function(e){var t=this;this.copyTooltip.setTitle(_lang_data.ID_COPY_TO_CLIPBOARD[this.lang]);vsClient.command.executeXML('<Call Method="GetTemplate"><Type>BOMPane</Type></Call>'),vsClient.once("GetTemplate.BOMPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){var e=this;$("#wv-bom #OnBOMTechDocGenerateIds").off("click").click(function(t){var n='<Call Method="GenerateBOMCalloutIds">';n+="<StartId>"+e.startIndex+"</StartId></Call>",vsClient.command.executeXML(n),vsClient.once("GenerateBOMCalloutIds",function(t){e.startIndex=parseFloat(t.StartId),e.startIndexEl.textContent=t.StartId;vsClient.command.executeXML('<Call Method="GetBillOfMaterial"></Call>')})}),$("#wv-bom #OnBOMTechDocResetIds").off("click").click(function(e){var t='<Call Method="ClearBillOfMaterialCalloutIds"></Call>';vsClient.command.executeXML(t),t='<Call Method="GetBillOfMaterial"></Call>',vsClient.command.executeXML(t)}),$("#wv-bom #OnBOMTechDocGenerateCallouts").off("click").click(function(t){try{if(_PanePresets["wv-callout"]){var n=void 0,i=o.calloutPane.hasPresets&&o.calloutPane.activePreset;n=o.calloutPane.activePreset;for(var a=_PanePresets["wv-callout"],s=0;s<a.length;s++)(a[s].isDefault&&!i||o.calloutPane.activePreset===a[s].name)&&(n=a[s].settings);var r=localStorage.getItem("WVPreset_wv-callout");if(null!==r)for(var l=JSON.parse(r),s=0;s<l.length;s++)(l[s].isDefault&&!i||o.calloutPane.activePreset===l[s].name)&&(n=l[s].val);if(n){o.deactivateInteraction(vsClient,"Markup");var c=new RegExp("<Alignment>.*</Alignment>"),d=n.replace(c,"");e.stack.selectPreset(d,!1)}}}catch(e){}vsClient.command.executeXML('<Call Method="GenerateBOMCallouts"></Call>')}),this.startIndexEl=document.getElementById("BOMTechDocStartId"),this.startIndexEl&&(""===this.startIndexEl.textContent&&(this.startIndexEl.textContent="1",this.startIndex=1),this.startIndexEl.onblur=function(t){isNaN(parseInt(e.startIndexEl.textContent))?e.startIndexEl.textContent=e.startIndex.toString():(e.startIndex=parseInt(e.startIndexEl.textContent),e.startIndexEl.textContent=e.startIndex.toString())})},t.prototype.selectCallouts=function(){var e=this;this.selection=[];vsClient.command.executeXML('<Call Method="GetSelectedBillOfMaterialRows"></Call>'),vsClient.once("GetSelectedBillOfMaterialRows",function(t){for(var n=0;n<e.rows.length;n++)$("#BOM_ROW_ID"+e.rows[n].Id).removeClass("bom-pane-row-selected");if(t.RowId)for(var i=Array.isArray(t.RowId)?t.RowId:[t.RowId],n=0;n<i.length;n++)$("#BOM_ROW_ID"+i[n]).addClass("bom-pane-row-selected"),e.selection.push(i[n])})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);if("multi-box-open"===n){var i=e;return vsClient.command.executeXML('<Call Method="GetBillOfMaterialNodePropertyNames"></Call>'),void vsClient.once("GetBillOfMaterialNodePropertyNames",function(e){vsClient.command.executeXML('<Call Method="GetBillOfMaterialAttributeNames"></Call>'),vsClient.once("GetBillOfMaterialAttributeNames",function(t){i.computeLists(e,t)})})}var r=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,r,n);var l=s.serializeWithValue(r,n),c='<Call Method="SetSceneSettings"> '+l+" </Call>";vsClient.command.executeXML(c),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.BOMPane=p},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>CalloutPane</Type></Call>'),vsClient.once("GetTemplate.CalloutPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&(t.stack.changeToCustomPreset(),o.deactivateInteraction(vsClient,"Markup"))}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.CalloutPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=n(8),c=n(18),d=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.headerKeys=[],i.headerNames=[],i.rows=[],i.defaultCols=["Id","Name","OtherName","Type","MaxDepth"],i.scrollPosTable=0,i.update=function(e){i.tableWrapperEl.scrollTop=i.scrollPosTable,i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.scrollOnKey=i.scrollOnKey.bind(i);var a=document.createElement("div");a.className="pane-buttons-tab",i.copyTooltip=new l.WVTooltip(a),i.copyTooltip.setTitle(_lang_data.ID_COPY_TO_CLIPBOARD[i.lang]),i.wrapperEl.appendChild(a);var s=document.createElement("i");s.className="far fa-copy tree-header-action-icon",a.onclick=function(e){var t=i.headerNames,n=t.join(";");n+="\n";for(var a=0;a<i.rows.length;a++)for(var o=0;o<i.headerKeys.length;o++){var s=i.rows[a][i.headerKeys[o]];n+=s,n+=o===i.headerKeys.length-1?"\n":";"}c(n)},a.appendChild(s),i.tableWrapperEl=document.createElement("div"),i.tableWrapperEl.className="bom-pane-table-wrapper",i.tableWrapperEl.onscroll=function(e){i.scrollPosTable=i.tableWrapperEl.scrollTop},i.wrapperEl.appendChild(i.tableWrapperEl),i.tableEl=document.createElement("table"),i.tableEl.className="bom-pane-table pane-content",i.tableEl.width="100%",i.tableWrapperEl.appendChild(i.tableEl);var r=document.createElement("thead");i.tableEl.appendChild(r),i.tableHeaderRowEl=document.createElement("tr"),i.tableHeaderRowEl.className="pane-item",r.appendChild(i.tableHeaderRowEl),i.tableBodyEl=document.createElement("tbody"),i.tableEl.appendChild(i.tableBodyEl),i.buildDefaultHeader();var d=document.createElement("tr");i.tableBodyEl.appendChild(d);var p=document.createElement("button");return p.className="pane-item-entry-button bom-pane-compute-button",p.onclick=function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>ClashAsync</Mode></Call>')},p.textContent="Compute",i.wrapperEl.appendChild(p),i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),vsClient.on("ClashResultUpdated",function(e){if(i.selectedIndex=void 0,e.ClashDetection){i.buildHeader(e.ClashDetection.Template.Column);var t=e.ClashDetection.Data.Item;Array.isArray(t)||(t=[t]),i.buildBody(t)}}),vsClient.on("@OpenedFile",function(e){$(i.tableBodyEl).empty(),i.buildDefaultHeader()}),i.wrapperEl.addEventListener("mouseenter",function(e){i.toggleScrollEvents(!0)}),i.wrapperEl.addEventListener("mouseleave",function(e){i.toggleScrollEvents(!1)}),i}return i(t,e),t.prototype.toggleScrollEvents=function(e){e?$(document).off("keydown",this.scrollOnKey).on("keydown",this.scrollOnKey):$(document).off("keydown",this.scrollOnKey)},t.prototype.scrollOnKey=function(e){if(!(40!==e.keyCode&&38!==e.keyCode||Date.now()-this.firstScrollHit<200))if(e.preventDefault(),this.firstScrollHit=Date.now(),this.selectedIndex){var t=this.rows.map(function(e){return e.Id}).indexOf(this.selectedIndex);if(40===e.keyCode){if(t===this.rows.length-1)return;var n=this.rows[t+1];this.selectClashRow(n.Id)}else if(38===e.keyCode){if(0===t)return;var i=this.rows[t-1];this.selectClashRow(i.Id)}}else 40===e.keyCode?this.selectClashRow(this.rows[0].Id):38===e.keyCode&&this.selectClashRow(this.rows[this.rows.length-1].Id)},t.prototype.buildHeader=function(e){var t=this;$(this.tableHeaderRowEl).empty(),this.headerKeys=[],this.headerNames=[];for(var n=this,i=0;i<e.length;i++)!function(i){var a=document.createElement("th");a.style.resize="horizontal",a.style.cursor="pointer",a.textContent=e[i].DisplayName,a.className="pane-item-entry-name",n.headerKeys.push(e[i].Id),n.headerNames.push(e[i].DisplayName);var o=document.createElement("span");a.appendChild(o);var s=document.createElement("i");s.className="fas fa-sort bom-pane-sort-icon",o.appendChild(s),a.onclick=function(n){"Id"===e[i].Id&&"fas fa-sort bom-pane-sort-icon"===s.className?(s.className="fas fa-sort-up bom-pane-sort-icon",t.sort(!0,e[i].Id)):-1!==s.className.indexOf("fa-sort-down")?(s.className="fas fa-sort-up bom-pane-sort-icon",t.sort(!0,e[i].Id)):(s.className="fas fa-sort-down bom-pane-sort-icon",t.sort(!1,e[i].Id))},n.tableHeaderRowEl.appendChild(a)}(i)},t.prototype.buildBody=function(e){if(e){this.rows=[],$(this.tableBodyEl).empty();var t=document.createElement("tr");this.tableBodyEl.appendChild(t);for(var n=0;n<e.length;n++)this.buildRow(e[n])}},t.prototype.buildRow=function(e){var t=this;this.rows.push(e);var n=document.createElement("tr");n.className="pane-item",n.id="CLASH_ROW_ID"+e.Id,e.el=n,n.onclick=function(n){t.selectClashRow(e.Id)},this.tableBodyEl.appendChild(n);for(var i=0;i<this.headerKeys.length;i++){var a=document.createElement("td");a.className="pane-item-entry-name",a.textContent=e[this.headerKeys[i]],n.appendChild(a)}},t.prototype.selectClashRow=function(e){var t='<Call Method="SelectClashIndex">';t+="<Index>"+e+"</Index>",t+="</Call>",this.selectedIndex=e,this.rows.forEach(function(t){t.el.style.backgroundColor=t.Id===e?"rgb(160, 160, 160)":"white"}),vsClient.command.executeXML(t)},t.prototype.sort=function(e,t){var n=this.rows.sort(function(n,i){var a,o,s="-"===n[t]?0:n[t],r="-"===i[t]?0:i[t];return o=isNaN(parseFloat(s))?s.toUpperCase():parseFloat(r),a=isNaN(parseFloat(s))?r.toUpperCase():parseFloat(s),a>o?e?1:-1:e?-1:1});this.buildBody(n)},t.prototype.buildDefaultHeader=function(){$(this.tableHeaderRowEl).empty();var e=document.createElement("th");e.textContent=o.translate("ID_BOM_COLUMN_CALLOUT_ID"),e.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(e);var t=document.createElement("th");t.textContent=o.translate("ID_BOM_PARTNAME"),t.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(t);var n=document.createElement("th");n.textContent=o.translate("ID_BOM_QUANTITY"),n.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(n)},t.prototype.changeLang=function(e){var t=this;this.copyTooltip.setTitle(_lang_data.ID_COPY_TO_CLIPBOARD[this.lang]);vsClient.command.executeXML('<Call Method="GetTemplate"><Type>ClashPane</Type></Call>'),vsClient.once("GetTemplate.ClashPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.selectedIndex&&(r='<Call Method="SelectClashIndex">',r+="<Index>"+t.selectedIndex+"</Index>",r+="</Call>",vsClient.command.executeXML(r))}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.ClashPane=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){var i=this;this.command=t,this.handleClick=this.handleClick.bind(this),this.selectCallback=n,this.commandEl=document.createElement("div"),this.commandEl.textContent=t.msg,this.commandEl.className="command-log-item",this.commandEl.onclick=function(e){i.handleClick(e)},e.appendChild(this.commandEl),"inbound"===t.type&&$(this.commandEl).addClass("command-log-item-inbound")}return e.prototype.handleClick=function(e){this.selectCallback(this.command,e.ctrlKey,e.shiftKey,this.commandEl)},e}();t.LogItem=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),o=n(47),s=n(1),r=n(11),l=n(4),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.collectionInEdit=[],i.log=[],i.editIndex=0,i.selection=[],i.dividerDelta=0,i.callDividerDelta=0,i.listTempHeight=0,i.detailsTempHeight=0,i.commandTempHeight=0,i.update=function(e){if(vsClient.emit("@logMousemove","false"!==localStorage.getItem("WVLogMouseMove")),e&&0!==e){var t=e/i.boxWrapper.clientHeight*100,n=t>0?Math.min(95-i.commandTempHeight,i.listTempHeight+t):Math.max(5,i.listTempHeight+t),a=t>0?Math.max(5,i.detailsTempHeight-t):Math.min(95-i.commandTempHeight,i.detailsTempHeight-t);i.listWrapper.style.height=n+"%",i.detailsWrapper.style.height=a+"%"}},i.noAdapter=!0,i.state={mousemove:"false"!==localStorage.getItem("WVLogMouseMove"),inbound:!1,outbound:!0,copySelection:"copy selection",copyAll:"copy all",stopInitialLogging:"true"===localStorage.getItem("WVStopInitialLogging")},vsClient.emit("@logMousemove","false"!==localStorage.getItem("WVLogMouseMove")),i.el=document.createElement("div"),i.el.classList.add("pane-content"),i.el.style.overflow="hidden",i.el.style.height="100%",i.wrapperEl.appendChild(i.el),i.headerButtons=document.createElement("div"),i.headerButtons.className="command-log-buttons-wrapper",i.el.appendChild(i.headerButtons);new r.SingleSwitch(i.headerButtons,"Response",i.state.inbound.toString(),i.handleInboundCheck.bind(i)),new r.SingleSwitch(i.headerButtons,"Request",i.state.outbound.toString(),i.handleOutboundCheck.bind(i)),new r.SingleSwitch(i.headerButtons,"Log mouse",i.state.mousemove.toString(),i.handleLogMousemove.bind(i)),new r.SingleSwitch(i.headerButtons,"Init log",i.state.stopInitialLogging.toString(),i.stopInitialLogging.bind(i));i.boxWrapper=document.createElement("div"),i.boxWrapper.className="command-pane-outter-wrapper",i.el.appendChild(i.boxWrapper),i.listWrapper=document.createElement("div"),i.listWrapper.style.position="relative",i.listWrapper.style.height="35%",i.listWrapper.className="command-log-list",i.boxWrapper.appendChild(i.listWrapper),i.divider=document.createElement("div"),i.divider.className="horizontal-pane-divider",i.boxWrapper.appendChild(i.divider),i.handleDividerDown=i.handleDividerDown.bind(i),i.handleDividerMove=i.handleDividerMove.bind(i),i.handleDividerUp=i.handleDividerUp.bind(i),i.divider.addEventListener("mousedown",i.handleDividerDown),$(i.divider).kendoTouch({dragstart:function(e){i.dividerDelta=e.touch.y.location},drag:function(e){var t=e.touch.y.location-i.dividerDelta;i.update(t)},dragend:function(e){i.dividerDelta=0}}),i.detailsWrapper=document.createElement("div"),i.detailsWrapper.style.position="relative",i.detailsWrapper.style.height="35%",i.boxWrapper.appendChild(i.detailsWrapper),i.detailsTabBar=document.createElement("div"),i.detailsTabBar.className="command-pane-details-tab-bar",i.detailsWrapper.appendChild(i.detailsTabBar);var a=document.createElement("span");a.textContent="Details",i.detailsTabBar.appendChild(a),i.detailsList=document.createElement("div"),i.detailsList.id="command-pane-selection-view",i.detailsList.className="command-log-list",i.detailsList.style.height="calc(100% - 35px)",i.detailsList.addEventListener("keydown",function(e){e.stopPropagation()}),i.detailsList.addEventListener("focusin",function(e){l.appStates.preventGlobalKeyEvents=!0}),i.detailsList.addEventListener("focusout",function(e){l.appStates.preventGlobalKeyEvents=!1}),i.detailsWrapper.appendChild(i.detailsList);var o=document.createElement("div");o.className="command-log-buttons-wrapper";var s=document.createElement("button");s.textContent="Send",s.className="command-log-footer-button",s.onclick=function(e){i.handleSendRequests()},o.appendChild(s);var c=document.createElement("button");c.textContent="Clear",c.className="command-log-footer-button",c.onclick=function(e){i.log=[],i.collectionInEdit=[],$(i.detailsList).empty(),$(i.listWrapper).empty(),i.editIndex=0,i.selection=[]},o.appendChild(c);var d=document.createElement("button");d.textContent="Copy",d.className="command-log-footer-button",d.onclick=function(e){i.copyToClipboard()},o.appendChild(d);var p=document.createElement("button");p.textContent="Copy all",p.className="command-log-footer-button",p.onclick=function(e){i.copyAll()},o.appendChild(p),i.detailsWrapper.appendChild(o),i.callDivider=document.createElement("div"),i.callDivider.className="horizontal-pane-divider",i.callDivider.style.position="relative",i.callDivider.style.top="5px",i.boxWrapper.appendChild(i.callDivider),i.handleCallDividerDown=i.handleCallDividerDown.bind(i),i.handleCallDividerMove=i.handleCallDividerMove.bind(i),i.handleCallDividerUp=i.handleCallDividerUp.bind(i),i.callDivider.addEventListener("mousedown",i.handleCallDividerDown),$(i.callDivider).kendoTouch({dragstart:function(e){i.callDividerDelta=e.touch.y.location},drag:function(e){var t=e.touch.y.location-i.callDividerDelta;i.update(t)},dragend:function(e){i.callDividerDelta=0}}),i.commandWrapper=document.createElement("div"),i.commandWrapper.style.position="relative",i.commandWrapper.style.height="30%",i.boxWrapper.appendChild(i.commandWrapper);var u=document.createElement("div");u.className="command-pane-details-tab-bar",u.style.marginTop="5px",i.commandWrapper.appendChild(u);var h=document.createElement("span");h.textContent="Custom Command",u.appendChild(h),i.commandInput=document.createElement("textarea"),i.commandInput.className="command-line-input",i.commandInput.addEventListener("keydown",function(e){e.stopPropagation()}),i.commandInput.addEventListener("focus",function(e){l.appStates.preventGlobalKeyEvents=!0}),i.commandInput.addEventListener("blur",function(e){l.appStates.preventGlobalKeyEvents=!1}),i.commandWrapper.appendChild(i.commandInput);var m=document.createElement("div");m.className="command-log-buttons-wrapper";var f=document.createElement("button");f.textContent="Send",f.className="command-log-footer-button",f.onclick=function(e){i.handleCommandSendRequest()},m.appendChild(f);var v=document.createElement("button");return v.textContent="Clear",v.className="command-log-footer-button",v.onclick=function(e){i.commandInput.value=""},m.appendChild(v),i.el.appendChild(m),i}return i(t,e),t.prototype.changeLang=function(){},t.prototype.addMethods=function(){},t.prototype.handleDividerDown=function(e){e.preventDefault(),this.dividerDelta=e.pageY,this.listTempHeight=parseFloat(this.listWrapper.style.height.replace("%","")),this.detailsTempHeight=parseFloat(this.detailsWrapper.style.height.replace("%","")),this.commandTempHeight=parseFloat(this.commandWrapper.style.height.replace("%","")),document.addEventListener("mousemove",this.handleDividerMove),document.addEventListener("mouseup",this.handleDividerUp)},t.prototype.handleDividerMove=function(e){var t=e.pageY-this.dividerDelta;this.update(t)},t.prototype.handleDividerUp=function(e){this.dividerDelta=0,document.removeEventListener("mousemove",this.handleDividerMove),document.removeEventListener("mouseup",this.handleDividerUp)},t.prototype.handleCallDividerDown=function(e){e.preventDefault(),this.callDividerDelta=e.pageY,this.listTempHeight=parseFloat(this.listWrapper.style.height.replace("%","")),this.detailsTempHeight=parseFloat(this.detailsWrapper.style.height.replace("%","")),this.commandTempHeight=parseFloat(this.commandWrapper.style.height.replace("%","")),document.addEventListener("mousemove",this.handleCallDividerMove),document.addEventListener("mouseup",this.handleCallDividerUp)},t.prototype.handleCallDividerMove=function(e){var t=e.pageY-this.callDividerDelta;this.updateCallInput(t)},t.prototype.handleCallDividerUp=function(e){this.callDividerDelta=0,document.removeEventListener("mousemove",this.handleCallDividerMove),document.removeEventListener("mouseup",this.handleCallDividerUp)},t.prototype.updateCallInput=function(e){if(0!==e){var t=e/this.boxWrapper.clientHeight*100,n=Math.max(5,this.listTempHeight+t/2),i=Math.max(5,this.detailsTempHeight+t/2);n=5!==i?n:Math.max(5,this.listTempHeight+t/2-Math.abs(5+t/2)),i=5!==n?i:Math.max(5,this.detailsTempHeight+t/2-Math.abs(5+t/2));var a=Math.max(100-n-i,5);if(5===n&&5===i||n+i+a>100)return;this.commandWrapper.style.height=a+"%",this.listWrapper.style.height=n+"%",this.detailsWrapper.style.height=i+"%"}},t.prototype.handleSelectItem=function(e,t,n,i){var a=this;t||n||(this.collectionInEdit=[],$(this.detailsList).empty(),this.editIndex=0,this.selection=[]);var o=document.createElement("pre");o.contentEditable="outbound"===e.type?"true":"false",o.textContent=e.msg,o.style.borderBottom="1px solid black",o.style.paddingBottom="15px";var s=this.editIndex;this.selection.push(e),o.onblur=function(e){a.handleEditChange(s,e)},this.detailsList.appendChild(o),this.editIndex++,$(".command-log-item").each(function(){$(this).removeClass("command-log-item-active")}),$(i).addClass("command-log-item-active")},t.prototype.handleLogMousemove=function(e){var t="true"===e;localStorage.setItem("WVLogMouseMove",t.toString()),this.state.mousemove=t,vsClient.emit("@logMousemove",t),this.listWrapper.scrollTop=this.listWrapper.scrollHeight},t.prototype.handleInboundCheck=function(e){this.state.inbound="true"===e,this.updateLog(),this.listWrapper.scrollTop=this.listWrapper.scrollHeight},t.prototype.handleOutboundCheck=function(e){this.state.outbound="true"===e,this.updateLog(),this.listWrapper.scrollTop=this.listWrapper.scrollHeight},t.prototype.stopInitialLogging=function(e){var t="true"===$(e.target).parent().children().first().val();localStorage.setItem("WVStopInitialLogging",t.toString()),this.state.stopInitialLogging=t},t.prototype.copyToClipboard=function(){var e=this,t=this.selection.map(function(e){return e.msg});a(t.join("\n")),this.state.copySelection="copied!!!",setTimeout(function(t){return e.state.copySelection="copy selection"},1200)},t.prototype.copyAll=function(){var e=this,t=this.log.filter(function(t){return"inbound"==t.type&&e.state.inbound||"outbound"==t.type&&e.state.outbound}).map(function(e){return e.msg});a(t.join("\n")),this.state.copyAll="copied!!!",setTimeout(function(t){return e.state.copyAll="copy all"},1200)},t.prototype.handleCommandSendRequest=function(){vsClient.command.executeXML(this.commandInput.value)},t.prototype.handleSendRequests=function(){var e=JSON.parse(JSON.stringify(this.selection));this.collectionInEdit.forEach(function(t){var n=t[0],i=t[1];e[n].msg=i});e.filter(function(e){return"outbound"===e.type}).forEach(function(e){vsClient.command.executeXML(e.msg)})},t.prototype.handleEditChange=function(e,t){var n=this;this.collectionInEdit.some(function(t){var n=t[0];t[1];return n==e})?this.collectionInEdit.forEach(function(i,a){var o=i[0];i[1];e==o&&(n.collectionInEdit[a][1]=t.target.textContent)}):this.collectionInEdit.push([e,t.target.textContent])},t.prototype.addCommand=function(e){if(-1===e.msg.indexOf('Method="MouseMove"')||this.state.mousemove){var t=e.msg.indexOf(">"),n=e.msg.lastIndexOf("<");if(e.msg=e.msg.substring(t+1,n),this.log.push(e),"outbound"===e.type&&this.state.outbound||"inbound"===e.type&&this.state.inbound){new o.LogItem(this.listWrapper,e,this.handleSelectItem.bind(this))}this.listWrapper.scrollTop=this.listWrapper.scrollHeight}},t.prototype.updateLog=function(){$(this.listWrapper).empty();for(var e=this.log.length,t=0;t<e;t++){var n=this.log[t];if(("inbound"==n.type&&this.state.inbound||"outbound"==n.type&&this.state.outbound)&&(this.state.mousemove||-1===n.msg.indexOf("MouseMove"))){new o.LogItem(this.listWrapper,n,this.handleSelectItem.bind(this))}}},t}(s.PaneTemplate);t.CommandPane=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>DistortionPane</Type></Call>'),vsClient.once("GetTemplate.DistortionPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){$("#wv-distortion #OnDistortionApplyClicked").click(function(e){vsClient.command.executeXMLAsync('<Call Method="Compute"><Mode>Distortion</Mode></Call>')})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.DistortionPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-draftangle #OnDraftAngleAlignmentXClicked").click(function(e){var t='<Call Method="SetDraftVector">';t+="<Direction>X</Direction>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-draftangle #OnDraftAngleAlignmentYClicked").click(function(e){var t='<Call Method="SetDraftVector">';t+="<Direction>Y</Direction>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-draftangle #OnDraftAngleAlignmentZClicked").click(function(e){var t='<Call Method="SetDraftVector">';t+="<Direction>Z</Direction>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-draftangle #OnDraftAngleAlignmentReverseClicked").click(function(e){vsClient.command.executeXML('<Call Method="RevertDraftVector" />')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>DraftAnglePane</Type></Call>'),vsClient.once("GetTemplate.DraftAnglePane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;(-1!==i.indexOf("Angle1")&&n<0||-1!==i.indexOf("Angle2")&&n>0||-1!==i.indexOf("Tolerance")&&n<0)&&(n*=-1),a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.DraftAnglePane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-drillhole #OnDrillHoleComputeClicked").click(function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>Drillhole</Mode></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>DrillholePane</Type></Call>'),vsClient.once("GetTemplate.DrillholePane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.DrillholePane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-exactcompare #OnExactCompareComputeClicked").click(function(e){vsClient.command.executeXMLAsync('<Call Method="ComputeBrepCompare"></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>ExactComparePane</Type></Call>'),vsClient.once("GetTemplate.ExactComparePane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.ExactComparePane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=n(11),c=n(4),d=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.explodeDistance=0,i.explodeStep=0,i.maxExplodeSteps=0,i.explodeType="AxisAligned",i.nodeLevel=0,i.isHierarchically=!1,i.update=function(e){i.values={Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content");var a=document.createElement("table");a.className="pane-content",i.wrapperEl.appendChild(a),i.tableBodyEl=document.createElement("tbody"),a.appendChild(i.tableBodyEl);var s=document.createElement("tr");return i.tableBodyEl.appendChild(s),i.wrapperEl.appendChild(a),i.explodeGroupEl=new l.PlainGroup(1,i.tableBodyEl,"ID_TRANSFORM_PANE_EXPLODE","ID_TRANSFORM_PANE_EXPLODE_INFO"),i.explodeSliderEl=new l.PlainSlider(2,i.tableBodyEl,"ID_TRANSFORM_PANE_EXPLODE_LEVEL","ID_TRANSFORM_PANE_EXPLODE_LEVEL_INFO",i.explode.bind(i)),i.explodeSteppedSliderEl=new l.PlainSteppedSlider(2,i.tableBodyEl,"ID_TRANSFORM_PANE_EXPLODE_LEVEL","ID_TRANSFORM_PANE_EXPLODE_LEVEL_INFO",i.explodeStepped.bind(i)),i.explodeSliderEl.setVal(0),i.explodeSteppedSliderEl.hide(),i.isHierarchicallyEl=new l.PlainSwitch(2,i.tableBodyEl,"ID_TRANSFORM_PANE_EXPLODE_HIERARCHY","ID_TRANSFORM_PANE_EXPLODE_HIERARCHY_INFO",i.setHierarchically.bind(i)),i.explodeTypeEl=new l.PlainSelect(2,i.tableBodyEl,"ID_EXPLOSION_TYPE","ID_EXPLOSION_TYPE_INFO",i.setExplodeType.bind(i)),i.setTypeOptions(),i.explodeLevelEl=new l.PlainInput(2,i.tableBodyEl,"ID_EXPLOSION_NODE_LEVEL","ID_EXPLOSION_NODE_LEVEL_INFO","false",i.setLevel.bind(i)),i.nextLevelButtonEl=new l.PlainButton(2,i.tableBodyEl,"ID_EXPLOSION_NEXT_LEVEL","ID_EXPLOSION_NEXT_LEVEL_INFO","ID_EXPLOSION_NEXT_LEVEL",i.nextLevel.bind(i)),i.prevLevelButtonEl=new l.PlainButton(2,i.tableBodyEl,"ID_EXPLOSION_PREVIOUS_LEVEL","ID_EXPLOSION_PREVIOUS_LEVEL_INFO","ID_EXPLOSION_PREVIOUS_LEVEL",i.prevLevel.bind(i)),i.resetExplosionButtonEl=new l.PlainButton(2,i.tableBodyEl,"ID_EXPLOSION_RESET","ID_EXPLOSION_RESET_INFO","ID_EXPLOSION_RESET",i.resetExplosion.bind(i)),i.explodeGroupEl.children.push(i.isHierarchicallyEl.wrapperEl,i.explodeTypeEl.wrapperEl,i.explodeLevelEl.wrapperEl,i.explodeLevelEl.wrapperEl,i.nextLevelButtonEl.wrapperEl,i.prevLevelButtonEl.wrapperEl,i.resetExplosionButtonEl.wrapperEl,i.explodeSliderEl.wrapperEl),i.wrapperEl.appendChild(i.el),vsClient.on("GetSelectionNodeLevel",function(e){i.nodeLevel=e.Level,i.explodeLevelEl.setVal(i.nodeLevel)}),vsClient.on("SelectionChanged",function(e){if(i.stack&&i.stack.isVisible){var t='<Call Method="GetSelectionExplosionValue"></Call>';t+='<Call Method="GetSelectionNodeLevel"></Call>',vsClient.command.executeXML(t)}}),vsClient.on("GetSelectionExplosionValue",function(e){i.explodeSliderEl.setVal(e.Result/100)}),i}return i(t,e),t.prototype.setExplodeType=function(e){this.explodeType=e,this.isHierarchically?this.explodeStepped(this.explodeStep):this.explode(this.explodeDistance)},t.prototype.setHierarchically=function(e){this.isHierarchically=e,this.explodeGroupEl.children.pop(),e?(this.explodeSliderEl.hide(),this.explodeSteppedSliderEl.show(),this.explodeGroupEl.children.push(this.explodeSteppedSliderEl.wrapperEl)):(this.explodeSliderEl.show(),this.explodeSteppedSliderEl.hide(),this.explodeGroupEl.children.push(this.explodeSliderEl.wrapperEl)),this.explodeSliderEl.setVal(0),this.explodeSteppedSliderEl.setVal(0)},t.prototype.setLevel=function(){},t.prototype.nextLevel=function(){vsClient.command.executeXML('<Call Method="SelectNextExplosionLevel"></Call>');vsClient.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.prevLevel=function(){vsClient.command.executeXML('<Call Method="SelectPreviousExplosionLevel"></Call>');vsClient.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.resetExplosion=function(){vsClient.command.executeXML('<Call Method="ResetExplosion"></Call>');vsClient.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.setTypeOptions=function(){this.explodeTypeEl.clearOptions();var e={isDefault:!0,name:o.translate("ID_EXPLOSION_TYPE_AXES_ALIGNED"),val:"AxisAligned"},t={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_SPHERICAL"),val:"Spherical"},n={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_X_AXIS"),val:"AxisX"},i={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_Y_AXIS"),val:"AxisY"},a={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_Z_AXIS"),val:"AxisZ"},s={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_RADIAL_XY"),val:"RadialXY"},r={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_RADIAL_YZ"),val:"RadialYZ"},l={isDefault:!1,name:o.translate("ID_EXPLOSION_TYPE_RADIAL_ZX"),val:"RadialZX"};this.explodeTypeEl.addOptions([e,t,n,i,a,s,r,l])},t.prototype.explode=function(e){var t='<Call Method="ExplodeByDistance"><Position>'+Math.round(100*e)+"</Position>";t+="<ExplosionType>"+this.explodeType+"</ExplosionType></Call>",vsClient.command.executeXML(t),this.explodeDistance=e,this.explodeStep=0,this.explodeSteppedSliderEl.setVal(0)},t.prototype.explodeStepped=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetMaxTreeDepth"></Call>'),vsClient.once("GetMaxTreeDepth",function(n){if(n&&n.MaxDepth){t.explodeSteppedSliderEl.setMaxSteps(n.MaxDepth),t.maxExplodeSteps=parseInt(n.MaxDepth);var i='<Call Method="ExplodeHierarchically"><Level>'+e+"</Level>";i+="<ExplosionType>"+t.explodeType+"</ExplosionType></Call>",vsClient.command.executeXML(i),t.explodeSliderEl.setVal(1),t.explodeDistance=1,t.explodeStep=e}})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>ExplodePane</Type></Call>'),vsClient.once("GetTemplate.ExplodePane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods(),t.setTypeOptions()})},t.prototype.addMethods=function(){var e=this;if(c.appStates.fileLoaded){vsClient.command.executeXML('<Call Method="GetMaxTreeDepth"></Call>'),vsClient.once("GetMaxTreeDepth",function(t){t&&t.MaxDepth&&(e.explodeSteppedSliderEl.setMaxSteps(t.MaxDepth),e.maxExplodeSteps=parseInt(t.MaxDepth))})}},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.ExplodePane=d},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(1),r=n(16),l=n(3),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.filterList=[],i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values),$("#UID_SEARCH_BY_STRING_TEXT").text()&&""!==$("#UID_SEARCH_BY_STRING_TEXT").text()||$("#UID_SEARCH_BY_STRING_TEXT").text('Name="**" + Content="" + Type="ProductOccurrence" + Color="RGB" + CustomId="" + "<AttributeName>"=""')},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i.resultTable=document.createElement("table"),i.resultTable.className="pane-content",i.wrapperEl.appendChild(i.resultTable);var a=document.createElement("thead");i.resultTable.appendChild(a);var s=document.createElement("tr");s.className="pane-item",a.appendChild(s);var l=document.createElement("th");l.className="filter-pane-table-header",s.appendChild(l),i.colorHeaderTextEl=document.createElement("span"),i.colorHeaderTextEl.textContent=o.translate("ID_COLOR"),l.appendChild(i.colorHeaderTextEl);var c=document.createElement("i");c.className="far fa-sort filter-pane-sort-icon",l.appendChild(c);var d=!1;l.onclick=function(e){d?(d=!1,c.className="fa fa-sort-up filter-pane-sort-icon"):(d=!0,c.className="fa fa-sort-down filter-pane-sort-icon"),i.filterList.sort(function(e,t){var n=r(e.Color).toHsv().h,a=r(t.Color).toHsv().h;return i.sort(n,a,!d)}),i.buildColorTable()};var p=document.createElement("th");p.className="filter-pane-table-header",s.appendChild(p),i.countHeaderTextEl=document.createElement("span"),i.countHeaderTextEl.textContent=o.translate("ID_BOM_QUANTITY"),p.appendChild(i.countHeaderTextEl);var u=document.createElement("i");u.className="far fa-sort filter-pane-sort-icon",p.appendChild(u);var h=!0;return p.onclick=function(e){h?(h=!1,u.className="fa fa-sort-up filter-pane-sort-icon"):(h=!0,u.className="fa fa-sort-down filter-pane-sort-icon"),i.filterList.sort(function(e,t){var n=e.Quantity,a=t.Quantity;return i.sort(n,a,!h)}),i.buildColorTable()},i.tableBody=document.createElement("tbody"),i.resultTable.appendChild(i.tableBody),$(i.resultTable).hide(),vsClient.on("@OpenedFile",function(){i.removeOldResults()}),vsClient.on("ComputeColorList",function(){var e='<Call Method="GetAllGeometryColors">';e+="<IncludeHiddenGeometries>"+i.values.Settings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",e+="</Call>",vsClient.command.executeXML(e),vsClient.once("GetAllGeometryColors",function(e){i.filterList=e.Result,i.buildColorTable()})}),i.el.addEventListener("contextmenu",function(e){i.handleContextMenu(e)}),i.resultTable.addEventListener("contextmenu",function(e){i.handleContextMenu(e)}),i}return i(t,e),t.prototype.handleContextMenu=function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.createContextMenu(e)},t.prototype.sort=function(e,t,n){return n?e>=t?1:-1:t>=e?1:-1},t.prototype.buildColorTable=function(){var e=this;$(this.resultTable).show(),this.removeOldResults(),this.resultHeader=document.createElement("tr"),this.resultHeader.className="pane-item";var t=document.createElement("td");t.className="pane-item-visual pane-item-group pane-item-indent-level1",t.colSpan=2;var n=document.createElement("span");n.textContent="",t.appendChild(n),this.resultHeader.appendChild(t),this.tableBody.appendChild(this.resultHeader);for(var i=this.filterList,a=0;a<i.length;a++){var o=document.createElement("tr");o.className="pane-item color-search-result-row",o.id="ColorSearchResult_"+i[a].Color.replace("#","");var s=document.createElement("td");s.className="pane-item-entry-name pane-item-indent-level2";var r=document.createElement("div");r.className="pane-item-entry-wrapper";var l=document.createElement("span");l.className="pane-item-entry-colorpicker",l.style.listStyle="none";var c="#"+i[a].Color.slice(3);l.textContent=c,l.style.backgroundColor=c,l.style.textAlign="center";for(var d=c.substr(1),p=parseInt(d,16),u=(p>>16&255)/255,h=(p>>8&255)/255,m=(255&p)/255,f=[u,h,m],v=0;v<f.length;v++);f[v]<=.03928?f[v]=f[v]/12.92:f[v]=Math.pow((f[v]+.055)/1.055,2.4);var g=.2126*f[0]+.7152*f[1]+.0722*f[2],C=g>.179?"black":"white";l.style.color=C,$(l).mousedown(function(t){var n='<Call Method="SearchNodes">';n+="<Color>"+t.target.textContent+"</Color>",n+="<SelectionMode>Select</SelectionMode>",n+="<IncludeHiddenGeometries>"+e.values.Settings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",n+="</Call>",vsClient.command.executeXML(n)}),r.appendChild(l),s.appendChild(r),o.appendChild(s);var _=document.createElement("td");_.className="pane-item-visual";var I=document.createElement("div");I.className="pane-item-entry-wrapper";var S=document.createElement("input");S.className="pane-item-entry-input",S.disabled=!0,S.value=i[a].Quantity,I.appendChild(S),_.appendChild(I),o.appendChild(_),this.tableBody.appendChild(o)}},t.prototype.removeOldResults=function(){this.resultHeader&&($(this.resultHeader).remove(),$(".color-search-result-row").each(function(){$(this).remove()}))},t.prototype.searchNodesByAttribute=function(e,t){var n='"'+e+'"="'+t+'"';this.searchNodes(n)},t.prototype.searchNodesByName=function(e){var t='Name="'+e+'"';this.searchNodes(t)},t.prototype.searchNodes=function(e){var t='<Call Method="SearchNodes">';t+="<SearchString>"+e+"</SearchString>",t+="<SelectionMode>Select</SelectionMode>",t+="<IncludeHiddenGeometries>"+this.values.Settings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",t+="</Call>",vsClient.command.executeXML(t)},t.prototype.addMethods=function(){var e=this;$("#wv-filter #OnFilterSearchByNameClicked").click(function(t){var n=$("#UID_SEARCH_BY_NAME_TEXT").text();n&&""!==n&&null!==n&&e.searchNodesByName(n)}),$("#wv-filter #OnFilterSearchByAttributeClicked").click(function(t){var n=$("#UID_SEARCH_BY_ATTRIBUTE_NAME").text(),i=$("#UID_SEARCH_BY_ATTRIBUTE_VALUE").text();e.searchNodesByAttribute(n,i)}),$("#wv-filter #OnFilterSearchByStringClicked").click(function(t){var n=$("#UID_SEARCH_BY_STRING_TEXT").text();n&&""!==n&&null!==n&&e.searchNodes(n)}),$("#wv-filter #OnFilterColorListClicked").click(function(e){vsClient.emit("ComputeColorList")})},t.prototype.changeLang=function(e){var t=this;this.countHeaderTextEl.textContent=o.translate("ID_BOM_QUANTITY"),this.colorHeaderTextEl.textContent=o.translate("ID_COLOR");vsClient.command.executeXML('<Call Method="GetTemplate"><Type>FilterPane</Type></Call>'),vsClient.once("GetTemplate.FilterPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()}),$("#UID_SEARCH_BY_STRING_TEXT").text('Name="**" + Content="" + Type="ProductOccurrence" + Color="RGB" + CustomId="" + "<AttributeName>"=""')},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);t.hasPresets&&t.stack.changeToCustomPreset();var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var s=l.serializeWithValue(i,n),r='<Call Method="SetSceneSettings"> '+s+" </Call>";vsClient.command.executeXML(r)}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}$("#UID_SEARCH_BY_STRING_TEXT").text('Name="**" + Content="" + Type="ProductOccurrence" + Color="RGB" + CustomId="" + "<AttributeName>"=""')},t}(s.PaneTemplate);t.FilterPane=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(13),s=n(0),r=n(3),l=n(1),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:s.settingsPane.sceneSettings?s.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-flythrough #OnFlyThroughSetNewCameraPositionClicked").click(function(e){o.handleActivateInteraction(vsClient,"Flythrough_SelectStartPositionAndDirection")})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>FlyThroughPane</Type></Call>'),vsClient.once("GetTemplate.FlyThroughPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(s.settingsPane.sceneSettings,i,n);var o=r.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+o+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(l.PaneTemplate);t.FlyThroughPane=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>GeometryToolsPane</Type></Call>'),vsClient.once("GetTemplate.GeometryToolsPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){$("#wv-geometry-tools #OnOptimizeInstancesClicked").click(function(e){vsClient.command.executeXML('<Call Method="OptimizeIdenticalInstances"></Call>')}),$("#wv-geometry-tools #OnFacesGenerationClicked").click(function(e){vsClient.command.executeXML('<Call Method="GenerateFaces"></Call>')}),$("#wv-geometry-tools #OnFacesRemoveClicked").click(function(e){vsClient.command.executeXML('<Call Method="RemoveFaces"></Call>')}),$("#wv-geometry-tools #OnNormalsGenerateClicked").click(function(e){vsClient.command.executeXML('<Call Method="GenerateNormals"></Call>')}),$("#wv-geometry-tools #OnNormalsRemoveClicked").click(function(e){vsClient.command.executeXML('<Call Method="RemoveNormals"></Call>')}),$("#wv-geometry-tools #OnWiresGenerateClicked").click(function(e){vsClient.command.executeXML('<Call Method="GenerateWires"></Call>')}),$("#wv-geometry-tools #OnWiresRemoveClicked").click(function(e){vsClient.command.executeXML('<Call Method="RemoveWires"></Call>')}),$("#wv-geometry-tools #OnLODReductionClicked").click(function(e){vsClient.command.executeXML('<Call Method="GenerateLODGeometry"></Call>')}),$("#wv-geometry-tools #OnGeomDuplicatesClicked").click(function(e){vsClient.command.executeXML('<Call Method="DetectGeometryCopies"></Call>')}),$("#wv-geometry-tools #OnRecenterToBBCenterClicked").click(function(e){vsClient.command.executeXML('<Call Method="RecenterGeometriesToBoundingboxCenter"></Call>')}),$("#wv-geometry-tools #OnRecenterToBBMinClicked").click(function(e){vsClient.command.executeXML('<Call Method="RecenterGeometriesToBoundingboxMinimum"></Call>')}),$("#wv-geometry-tools #OnDetectTinyGeomsClicked").click(function(e){vsClient.command.executeXML('<Call Method="DetectTinyGeometries"></Call>')})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.GeometryToolsPane=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(62);t.Modeltree=i.Modeltree;var a=n(66);t.PropertyPane=a.PropertyPane;var o=n(77);t.ViewPane=o.ViewPane;var s=n(70);t.SettingsPane=s.SettingsPane;var r=n(60);t.MeasurementPane=r.MeasurementPane;var l=n(76);t.TransformPane=l.TransformPane;var c=n(50);t.DraftAnglePane=c.DraftAnglePane;var d=n(59);t.MarkupPane=d.MarkupPane;var p=n(58);t.MarkupPane_Reduced=p.MarkupPane_Reduced;var u=n(68);t.SectionPane=u.SectionPane;var h=n(67);t.QuickComparePane=h.QuickComparePane;var m=n(65);t.ProjectedAreaPane=m.ProjectedAreaPane;var f=n(52);t.ExactComparePane=f.ExactComparePane;var v=n(61);t.MirrorPane=v.MirrorPane;var g=n(54);t.FilterPane=g.FilterPane;var C=n(55);t.FlyThroughPane=C.FlyThroughPane;var _=n(49);t.DistortionPane=_.DistortionPane;var I=n(78);t.VisibilityTestPane=I.VisibilityTestPane;var S=n(79);t.WallthicknessPane=S.WallthicknessPane;var y=n(51);t.DrillholePane=y.DrillholePane;var E=n(75);t.TextSearchPane=E.TextSearchPane;var b=n(64);t.NeutralAxisPane=b.NeutralAxisPane;var w=n(63);t.NeighbourhoodSearchPane=w.NeighbourhoodSearchPane;var T=n(69);t.SelectionsPane=T.SelectionsPane;var M=n(48);t.CommandPane=M.CommandPane;var N=n(44);t.BOMPane=N.BOMPane;var O=n(45);t.CalloutPane=O.CalloutPane;var P=n(71);t.SplitPane=P.SplitPane;var x=n(53);t.ExplodePane=x.ExplodePane;var B=n(42);t.AnimationPane=B.AnimationPane;var L=n(56);t.GeometryToolsPane=L.GeometryToolsPane;var D=n(46);t.ClashPane=D.ClashPane;var k=n(43);t.BandAnalysisPane=k.BandAnalysisPane},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>MarkupPane_Reduced</Type></Call>'),vsClient.once("GetTemplate.MarkupPane_Reduced",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n)})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.MarkupPane_Reduced=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>MarkupPane</Type></Call>'),vsClient.once("GetTemplate.MarkupPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n)})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.MarkupPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),s=n(0),r=n(3),l=n(1),c=n(4),d=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){if(i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:s.settingsPane.sceneSettings?s.settingsPane.sceneSettings.Settings:void 0},e&&"MeasurementChanged"!==e.Type){var t="true"===e.Scene.Tools.Dimensioning.Dimensioning,n="true"===e.Scene.Tools.CircleSelection.SelectCircleWith3Points,a=o.findButton("ID_RIBBON_MEASUREMENT_1");a&&a.applyHighlight(!t);var r=o.findButton("ID_RIBBON_DIMENSION");r&&r.applyHighlight(t);var l=o.findButton("ID_RIBBON_ARC");l&&l.applyHighlight(!n);var c=o.findButton("ID_RIBBON_3_POINTS");c&&c.applyHighlight(n)}i.adapter.updateValues(i.values),i.computeGroupVisibility()},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-measurement #OnAccumulatedLengthComplete").off("click").click(function(e){vsClient.command.executeXML('<Call Method="FinishCurrentAction"></Call>')}),$("#wv-measurement #OnAccumulatedLengthFromSelection").off("click").click(function(e){vsClient.command.executeXML('<Call Method="MeasureSelectedWireLength"></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>MeasurementPane</Type></Call>'),vsClient.once("GetTemplate.MeasurementPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(n,i){if("toggle-folder-visibility"===i||n.item.id&&i.startsWith("UID_"))return t.adapter.updateValues(t.values),void t.computeGroupVisibility(!0);var l=n.item.path;if(t.hasPresets&&t.stack.changeToCustomPreset(),"Event"===l[0]){i=parseFloat(i).toString(),a.modifySettings(t.values,l,i);var c=r.serializeWithValue(l,i,["Type="+e.Event]);vsClient.command.executeXML(c)}else{a.modifySettings(s.settingsPane.sceneSettings,l,i);var c=r.serializeWithValue(l,i),d='<Call Method="SetSceneSettings"> '+c+" </Call>";switch(vsClient.command.executeXML(d),t.hasPresets&&t.stack.changeToCustomPreset(),l[l.length-1]){case"Dimensioning":var p=o.findButton("ID_RIBBON_MEASUREMENT_1");p&&p.applyHighlight(!i);var u=o.findButton("ID_RIBBON_DIMENSION");u&&u.applyHighlight(i)}}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t.prototype.computeGroupVisibility=function(e){void 0===e&&(e=!1);var t,n,i,a,o;for(var s in this.adapter.items)switch(this.adapter.items[s].id){case"UID_MEASUREMENT_PANE_DISTANCE":i=this.adapter.items[s];break;case"UID_MEASUREMENT_PANE_POINT":n=this.adapter.items[s];break;case"UID_MEASUREMENT_PANE_WALLTHICKNESS":t=this.adapter.items[s];break;case"UID_MEASUREMENT_PANE_PLANE_TO_AXIS":a=this.adapter.items[s];break;case"UID_MEASUREMENT_PANE_PLANE_PROJECTED_LINE":o=this.adapter.items[s]}if(-1!==c.appStates.interactionMode.indexOf("Measurement_WallThickness_RayBased")||-1!==c.appStates.interactionMode.indexOf("Measurement_WallThickness_RollingBall"))e||t.expandAll(),i.collapseAll(!0),n.collapseAll(!0),a.collapseAll(!0),o.collapseAll(!0);else if(-1!==c.appStates.interactionMode.indexOf("Measurement_PointCoordinate"))t.collapseAll(!0),i.collapseAll(!0),e||n.expandAll(),a.collapseAll(!0),o.collapseAll(!0);else if(-1!==c.appStates.interactionMode.indexOf("Measurement_AngleBetweenPlaneDirection"))t.collapseAll(!0),i.collapseAll(!0),n.collapseAll(!0),e||a.expandAll(),o.collapseAll(!0);else if(-1!==c.appStates.interactionMode.indexOf("Measurement_AngleBetweenTwoProjectedLines"))t.collapseAll(!0),i.collapseAll(!0),n.collapseAll(!0),a.collapseAll(!0),e||o.expandAll();else{for(var r=!1,l=0;l<c.appStates.interactionMode.length;l++)if(-1!==c.appStates.interactionMode[l].indexOf("Measurement")&&-1!==c.appStates.interactionMode[l].indexOf("Distance")){r=!0;break}t.collapseAll(!0),n.collapseAll(!0),a.collapseAll(!0),o.collapseAll(!0),r?e||i.expandAll():i.collapseAll(!0)}},t}(l.PaneTemplate);t.MeasurementPane=d},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(1),r=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-mirror #OnMirrorClick").click(function(e){var t=$("#UID_MIRROR_CREATE_COPY").val(),n=$("#UID_MIRROR_AT_PLANE").val(),i=$("#UID_MIRROR_AT").val(),a='<Call Method="MirrorSelectedNodes">';a+="<Copy>"+t+"</Copy>",a+="<Axis>"+n+"</Axis>",a+="<Location>"+i+"</Location>",a+="</Call>",vsClient.command.executeXML(a)})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>MirrorPane</Type></Call>'),vsClient.once("GetTemplate.MirrorPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),e.Event){var t=e.Event;vsClient.removeListener(t,this.update),vsClient.on(t,this.update)}},t}(s.PaneTemplate);t.MirrorPane=r},function(e,t,n){"use strict";function i(e){var t;switch(e){case o.NodeType.MasterRootNode:t="ICON_SCENE";break;case o.NodeType.Root:t="ICON_ROOT";break;case o.NodeType.ProductOccurrence:t="ICON_PO";break;case o.NodeType.DoNotUse1:case o.NodeType.DoNotUse2:case o.NodeType.Ri_BrepModel:case o.NodeType.Ri_PolyBrepModel:case o.NodeType.Ri_Set:t="ICON_GEOMETRY";break;case o.NodeType.Ri_PolyWire:t="ICON_WIRE";break;case o.NodeType.Ri_TessMarkup:t="ICON_MARKUP";break;case o.NodeType.DoNotUse3:t="";break;case o.NodeType.Part:t="ICON_PART";break;case o.NodeType.AxisRoot:case o.NodeType.Axis:t="ICON_WIRE";break;case o.NodeType.PMIView:t="ICON_VIEW";break;case o.NodeType.Annotation:case o.NodeType.AnnotationItem:t="ICON_MARKUP";break;case o.NodeType.PmiMarkup_Unknown:case o.NodeType.PmiMarkup_Text:case o.NodeType.PmiMarkup_Dimension:case o.NodeType.PmiMarkup_Arrow:case o.NodeType.PmiMarkup_Balloon:case o.NodeType.PmiMarkup_CircleCenter:case o.NodeType.PmiMarkup_Coordinate:case o.NodeType.PmiMarkup_Datum:case o.NodeType.PmiMarkup_Fastener:case o.NodeType.PmiMarkup_Gdt:case o.NodeType.PmiMarkup_Locator:case o.NodeType.PmiMarkup_MeasurementPoint:case o.NodeType.PmiMarkup_Roughness:case o.NodeType.PmiMarkup_Welding:case o.NodeType.PmiMarkup_Table:case o.NodeType.PmiMarkup_Other:t="ICON_MARKUP";break;case o.NodeType.DataAnalysisResult:t="ICON_HEATMAP";break;case o.NodeType.AnnotationReference:case o.NodeType.AnnotationSet:t="ICON_MARKUP";break;case o.NodeType.Curve:t="ICON_WIRE";break;case o.NodeType.Plane:t="ICON_PLANE";break;case o.NodeType.Solid:t="ICON_GEOMETRY";break;case o.NodeType.Wire:t="ICON_WIRE";break;case o.NodeType.Dimensioning:t="ICON_PMI_DISTANCE";break;case o.NodeType.MarkupSet:t="ICON_FOLDER";break;case o.NodeType.Markup_Circle:t="ICON_MARKUP_CIRCLE";break;case o.NodeType.Markup_Rectangle:t="ICON_RECTANGLE";break;case o.NodeType.Markup_Freehand:t="ICON_LINE_FREEHAND";break;case o.NodeType.Markup_Text:t="ICON_NOTE";break;case o.NodeType.OffsetLine:t="ICON_OFFSETLINE";break;case o.NodeType.Drawing_Block:case o.NodeType.Drawing_BlockBackground:case o.NodeType.Drawing_BlockBasic:case o.NodeType.Drawing_BlockOperator:t="ICON_FOLDER";break;case o.NodeType.Drawing_Sheet:t="ICON_SHEET";break;case o.NodeType.Drawing_View:t="ICON_VIEW";break;case o.NodeType.Drawing_Model:t="ICON_SHEET";break;case o.NodeType.CutGeometry_Set:t="ICON_FOLDER";break;case o.NodeType.CutGeometry_Wire:t="ICON_WIRE";break;case o.NodeType.CutGeometry_Surface:t="ICON_PLANE";break;case o.NodeType.Document2D:t="ICON_SHEET";break;default:t="ICON_GEOMETRY"}return t}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(91),s=n(1),r=n(0),l=n(4),c=n(8),d="http://www.w3.org/2000/svg",p=function(){function e(e,t,n,i,a,o,s,r){this.ExpanderState=e,this.Level=t,this.NodeId=n,this.NodeName=i,this.NodeType=a,this.Selection=o,this.Visibility=s,this.Parent=r}return e}();t.TreeviewItemInfo=p;var u=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.minBarHeight=15,i.treeItemsInfo=[],i.items=[],i.selectedNodeIds=[],i.currentExpandedNode=0,i.firstInit=!0,i.tooltips=[],i.tooltipKeys=[],i.addEventListener=function(){i.firstInit&&(document.getElementById("wv-canvas").addEventListener("mouseenter",function(e){i.toggleScrollEvents(!0)}),document.getElementById("wv-canvas").addEventListener("mouseleave",function(e){i.toggleScrollEvents(!1)}),i.firstInit=!1),$(i.itemsContainer).kendoTouch({drag:function(e){if(i.touchStart>e.touch.y.location&&i.touchStart-e.touch.y.location>20){i.touchStart=e.touch.y.location,i.touchSteps++;var t=i.contentWrapper.offsetHeight;i.scrollPosition+=3,i.scrollPosition<0&&(i.scrollPosition=0),i.scrollPosition>t-i.bar.offsetHeight&&(i.scrollPosition=t-i.bar.offsetHeight),i.bar.style.top=i.scrollPosition+"px"}else if(i.touchStart<e.touch.y.location&&e.touch.y.location-i.touchStart>20){i.touchStart=e.touch.y.location,i.touchSteps--;var t=i.contentWrapper.offsetHeight;i.scrollPosition-=3,i.scrollPosition<0&&(i.scrollPosition=0),i.scrollPosition>t-i.bar.offsetHeight&&(i.scrollPosition=t-i.bar.offsetHeight),i.bar.style.top=i.scrollPosition+"px"}},dragstart:function(e){i.touchSteps=0,i.touchStart=e.touch.y.location},dragend:function(e){i.touchSteps*=3;var t;i.touchSteps>0?(t='<Call Method="VirtualTreeViewScrollDown"><Steps>'+i.touchSteps+"</Steps></Call>",vsClient.command.executeXMLAsync(t)):(t='<Call Method="VirtualTreeViewScrollUp"><Steps>'+-1*i.touchSteps+"</Steps></Call>",vsClient.command.executeXMLAsync(t))}})},i.scrollPosition=0,i.scrollTravelled=0,i.barOnclick=function(e){i.lastPageY=e.pageY,document.addEventListener("mousemove",i.barOndrag,!1),document.addEventListener("mouseup",i.barOnstop,!1)},i.barOndrag=function(e){var t=e.pageY-i.lastPageY;i.lastPageY=e.pageY,i.scrollPosition+=t,i.scrollTravelled+=t,i.scrollPosition<0&&(i.scrollPosition=0),i.scrollPosition>i.bar.parentElement.offsetHeight-i.bar.offsetHeight&&(i.scrollPosition=i.bar.parentElement.offsetHeight-i.bar.offsetHeight),i.bar.style.top=i.scrollPosition+"px"},i.barOnstop=function(e){var t,n=Math.floor(Math.abs(i.scrollTravelled)/(i.lineHeight*i.currentMaxVisible())*i.currentExpandedNode);i.scrollTravelled>0?(t='<Call Method="VirtualTreeViewScrollDown"><Steps>'+n+"</Steps></Call>",vsClient.command.executeXML(t)):i.scrollTravelled<0&&(t='<Call Method="VirtualTreeViewScrollUp"><Steps>'+n+"</Steps></Call>",vsClient.command.executeXML(t)),document.removeEventListener("mousemove",i.barOndrag),document.removeEventListener("mouseup",i.barOnstop),i.scrollTravelled=0},i.barOnwheel=function(e){e.preventDefault();var t=e.deltaY>0?1:-1,n=i.contentWrapper.offsetHeight;i.scrollPosition+=3*t,i.scrollPosition<0&&(i.scrollPosition=0),i.scrollPosition>n-i.bar.offsetHeight&&(i.scrollPosition=n-i.bar.offsetHeight),i.bar.style.top=i.scrollPosition+"px";var a;t>0?(a='<Call Method="VirtualTreeViewScrollDown"><Steps>3</Steps></Call>',vsClient.command.executeXMLAsync(a)):(a='<Call Method="VirtualTreeViewScrollUp"><Steps>3</Steps></Call>',vsClient.command.executeXMLAsync(a))},i.barOntouchstart=function(e){i.lastPageY=e.touches[0].pageY},i.barOntouchmove=function(e){var t=e.touches[0].pageY-i.lastPageY;i.lastPageY=e.touches[0].pageY,i.scrollPosition+=t,i.scrollTravelled+=t,i.scrollPosition<0&&(i.scrollPosition=0),i.scrollPosition>i.contentWrapper.offsetHeight-i.bar.offsetHeight&&(i.scrollPosition=i.contentWrapper.offsetHeight-i.bar.offsetHeight),i.bar.style.top=i.scrollPosition+"px"},i.update=function(e){if(-1===l.appStates.popoutPanes.indexOf("modeltree"))if(e){i.minBarHeight=15;var t=e.VirtualScrollPosition/e.ExpandedNodes,n=i.contentWrapper.offsetHeight,a=t*n;a>n-i.minBarHeight&&(a=n-i.minBarHeight),i.scrollPosition=a,i.bar.style.top=a+"px";var o=i.currentMaxVisible()/e.ExpandedNodes,s=o*i.contentWrapper.offsetHeight;o>=1?(i.bar.style.height="0px",i.barRail.style.display="none"):s<i.minBarHeight?(i.bar.style.height=i.minBarHeight+"px",i.barRail.style.display=""):(i.bar.style.height=100*o+"%",i.barRail.style.display=""),i.treeItemsInfo=e.Items,i.currentExpandedNode=e.ExpandedNodes,i.layout(),0===e.VirtualScrollPosition&&r.canvasStack.setTabTitle(i.treeItemsInfo[0].NodeName)}else if(i.contentWrapper.style.top=i.modeltreeButtons.offsetHeight+"px",i.contentWrapper.style.height="calc(100% - "+i.modeltreeButtons.offsetHeight+"px)",vsClient.command){var c=i.currentMaxVisible(),d='<Call Method="VirtualTreeViewSetSize"><Size>'+c+"</Size></Call>";vsClient.command.executeXML(d)}},i.noAdapter=!0,i.scrollOnKey=i.scrollOnKey.bind(i),i.modeltreeButtons=document.createElement("div"),i.modeltreeButtons.classList.add("modeltree-buttons"),i.expandAll=document.createElement("i"),i.expandAll.className="fa fa-chevron-double-right tree-header-action-icon",i.expandAllTooltip=new c.WVTooltip(i.expandAll),i.expandAllTooltip.setTitle(_lang_data.ID_EXPAND_ALL[i.lang]),i.expandAll.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewExpandAll"></Call>')},!1),i.collapseAll=document.createElement("i"),i.collapseAll.className="fa fa-chevron-double-left tree-header-action-icon",i.collapseAllTooltip=new c.WVTooltip(i.collapseAll),i.collapseAllTooltip.setTitle(_lang_data.ID_COLLAPSE_ALL[i.lang]),i.collapseAll.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewCollapseAll"></Call>')},!1),i.expandSelected=document.createElement("i"),i.expandSelected.className="fa fa-chevron-right tree-header-action-icon",i.expandSelectedTooltip=new c.WVTooltip(i.expandSelected),i.expandSelectedTooltip.setTitle(_lang_data.ID_EXPAND_SELECTED[i.lang]),i.expandSelected.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewExpandSelected"></Call>')},!1),i.collapseSelected=document.createElement("i"),i.collapseSelected.className="fa fa-chevron-left tree-header-action-icon",i.collapseSelectedTooltip=new c.WVTooltip(i.collapseSelected),i.collapseSelectedTooltip.setTitle(_lang_data.ID_COLLAPSE_SELECTED[i.lang]),i.collapseSelected.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewCollapseSelected"></Call>')},!1),i.expandSelectedLevel=document.createElement("i"),i.expandSelectedLevel.className="tree-header-action-icon fa fa-code",i.expandSelectedLevelTooltip=new c.WVTooltip(i.expandSelectedLevel),i.expandSelectedLevelTooltip.setTitle(_lang_data.ID_EXPAND_EACH_TILL_SELECTED[i.lang]),i.expandSelectedLevel.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewExpandToSelectedLevel"></Call>')},!1),i.selectSameLevel=document.createElement("i"),i.selectSameLevel.className="tree-header-action-icon fa fa-stream",i.selectSameLevelTooltip=new c.WVTooltip(i.selectSameLevel),i.selectSameLevelTooltip.setTitle(_lang_data.ID_SELECT_SAME_LEVEL[i.lang]),i.selectSameLevel.addEventListener("click",function(){vsClient.command.executeXML('<Call Method="VirtualTreeViewSelectSameLevelNodes"></Call>')},!1),i.modeltreeButtons.appendChild(i.expandAll),i.modeltreeButtons.appendChild(i.collapseAll),i.modeltreeButtons.appendChild(i.expandSelected),i.modeltreeButtons.appendChild(i.collapseSelected),i.modeltreeButtons.appendChild(i.expandSelectedLevel),i.modeltreeButtons.appendChild(i.selectSameLevel),i.el=document.createElement("div"),i.el.classList.add("modeltree-innerwrapper"),i.el.style.position="relative",i.el.style.height="100%",i.el.appendChild(i.modeltreeButtons),i.contentWrapper=document.createElement("div"),i.contentWrapper.classList.add("modeltree-content"),i.el.appendChild(i.contentWrapper),i.bar=document.createElement("div"),i.bar.classList.add("modeltree-bar"),i.contentWrapper.appendChild(i.bar),i.barRail=document.createElement("div"),i.barRail.className="modeltree-bar-rail",i.barRail.style.display="none",i.barRail.addEventListener("click",function(e){var t=parseInt(i.bar.style.top.replace("px",""))-e.offsetY,n=i.currentMaxVisible();if(t>0){var a='<Call Method="VirtualTreeViewScrollUp"><Steps>'+n+"</Steps></Call>";vsClient.command.executeXMLAsync(a)}else{var a='<Call Method="VirtualTreeViewScrollDown"><Steps>'+n+"</Steps></Call>";vsClient.command.executeXMLAsync(a)}}),i.contentWrapper.addEventListener("mouseenter",function(e){i.toggleScrollEvents(!0)}),i.contentWrapper.addEventListener("mouseleave",function(e){i.toggleScrollEvents(!1)}),i.contentWrapper.appendChild(i.barRail),i.itemsContainer=document.createElement("div"),i.itemsContainer.classList.add("modeltree-itemscontainer"),i.contentWrapper.appendChild(i.itemsContainer),i.el.addEventListener("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.createContextMenu(e)}),i.bar.addEventListener("mousedown",i.barOnclick,!1),i.el.addEventListener("wheel",i.barOnwheel,!1),i.bar.addEventListener("touchstart",i.barOntouchstart),i.bar.addEventListener("touchmove",i.barOntouchmove),i.bar.addEventListener("touchend",i.barOnstop),i.wrapperEl.appendChild(i.el),i.lineHeight=20,i.contentWrapper.style.top=i.modeltreeButtons.offsetHeight+"px",i.contentWrapper.style.height="calc(100% - "+i.modeltreeButtons.offsetHeight+"px)",i.touchStart=0,vsClient.on("GetNodeTooltip",function(e,t){var n={key:e.CustomId,tooltip:e.Tooltip};i.addTooltipKey(n);var a=i.actualTooltip.key,o=i.mapTooltip(a);o&&(i.actualTooltip.removeAttributes(),i.actualTooltip.addAttribute(o.tooltip))}),i}return a(t,e),t.prototype.addMethods=function(){},t.prototype.addTooltipKey=function(e){var t=this.tooltipKeys.length;t>200&&this.tooltipKeys.shift();for(var n=!1,i=0;i<t;i++)if(this.tooltipKeys[i].key===e.key){n=!0;break}n||this.tooltipKeys.push(e)},t.prototype.mapTooltip=function(e){for(var t=this.tooltipKeys.length,n=0;n<t;n++)if(this.tooltipKeys[n].key===e)return this.tooltipKeys[n]},t.prototype.toggleScrollEvents=function(e){e?$(document).off("keydown",this.scrollOnKey).on("keydown",this.scrollOnKey):$(document).off("keydown",this.scrollOnKey)},t.prototype.scrollOnKey=function(e){var t,n=this;switch(e.keyCode){case e.ctrlKey&&67:t='<Call Method="ModifySelection"><SelectionModifier>Copy</SelectionModifier></Call>';break;case e.ctrlKey&&86:t='<Call Method="ModifySelection"><SelectionModifier>PasteToSelection</SelectionModifier></Call>'}if(t&&vsClient.command.executeXML(t),-1===l.appStates.interactionMode.indexOf("Flythrough")){if(37===e.keyCode||39===e.keyCode){if(37===e.keyCode){var i='<Call Method="VirtualTreeViewCollapseSelected"></Call>';vsClient.command.executeXML(i)}else{var i='<Call Method="VirtualTreeViewExpandSelected"></Call>';vsClient.command.executeXML(i)}return}if(40!==e.keyCode&&38!==e.keyCode||Date.now()-this.firstScrollHit<200)return;if(this.firstScrollHit=Date.now(),0===this.selectedNodeIds.length){if(40===e.keyCode){vsClient.command.executeXMLAsync('<Call Method="VirtualTreeViewScrollDown"><Steps>1</Steps></Call>')}else if(38===e.keyCode){vsClient.command.executeXMLAsync('<Call Method="VirtualTreeViewScrollUp"><Steps>1</Steps></Call>')}}else{for(var a=this.treeItemsInfo.length,o=void 0,s=0;s<a;s++)if(this.treeItemsInfo[s].NodeId===this.selectedNodeIds[0]){o=s;break}if(0===o&&38===e.keyCode){vsClient.command.executeXMLAsync('<Call Method="VirtualTreeViewScrollUp"><Steps>1</Steps></Call>'),vsClient.once("TreeviewUpdated",function(){n.setSelectedNodes(n.treeItemsInfo[0].NodeId),n.selectedNodeIds=[],n.selectedNodeIds.push(n.treeItemsInfo[0].NodeId)})}else if(o===a-1&&40===e.keyCode){vsClient.command.executeXMLAsync('<Call Method="VirtualTreeViewScrollDown"><Steps>1</Steps></Call>'),vsClient.once("TreeviewUpdated",function(){n.setSelectedNodes(n.treeItemsInfo[a-1].NodeId),n.selectedNodeIds=[],n.selectedNodeIds.push(n.treeItemsInfo[a-1].NodeId)})}else if(38===e.keyCode){var r=this.treeItemsInfo[o-1];this.setSelectedNodes(r.NodeId),this.selectedNodeIds=[],this.selectedNodeIds.push(r.NodeId)}else if(40===e.keyCode){var r=this.treeItemsInfo[o+1];this.setSelectedNodes(r.NodeId),this.selectedNodeIds=[],this.selectedNodeIds.push(r.NodeId)}}}},t.prototype.changeLang=function(e){this.expandAllTooltip.setTitle(_lang_data.ID_EXPAND_ALL[e]),this.collapseAllTooltip.setTitle(_lang_data.ID_COLLAPSE_ALL[e]),this.expandSelectedTooltip.setTitle(_lang_data.ID_EXPAND_SELECTED[e]),this.collapseSelectedTooltip.setTitle(_lang_data.ID_COLLAPSE_SELECTED[e]),this.expandSelectedLevelTooltip.setTitle(_lang_data.ID_EXPAND_EACH_TILL_SELECTED[e]),this.selectSameLevelTooltip.setTitle(_lang_data.ID_SELECT_SAME_LEVEL[e])},t.prototype.currentMaxVisible=function(){return Math.floor(this.contentWrapper.clientHeight/this.lineHeight)},t.prototype.layout=function(){var e=this;for($(".webviewer-tooltip-wrapper").each(function(){$(this).remove()});this.itemsContainer.firstChild;)this.itemsContainer.removeChild(this.itemsContainer.firstChild);this.items=[],this.tooltips=[];var t=0;vsClient.setMaxListeners(0);for(var n=this.treeItemsInfo.length-1;n>=0;n--){for(var a=-1,o=n-1;o>=0;o--)if(this.treeItemsInfo[o].Level+1===this.treeItemsInfo[n].Level){a=o;break}this.treeItemsInfo[n].Parent=a}this.selectedNodeIds=[];for(var s=this,r=0,p=this.treeItemsInfo;r<p.length;r++){var u=p[r];!function(n){if(81===n.NodeType){var a=n.NodeName;try{a=_SceneNameOverride}catch(e){l.appStates.fileName&&(a=l.appStates.fileName)}n.NodeName=a}var o=document.createElement("div");o.classList.add("modeltree-item"),o.style.paddingLeft=10+10*n.Level+"px",o.style.height="20px";var r=document.createElement("span");switch(r.classList.add("modeltree-item-expander"),n.ExpanderState){case 0:r.style.marginLeft="12px";break;case 1:r.style.display="inline-block";var p=document.createElementNS(d,"svg");p.style.width="12px",p.style.height="8px";var u=document.createElementNS(d,"polygon");u.setAttributeNS(null,"points","9,0 0,9 9,9"),u.setAttributeNS(null,"style","fill:black"),p.appendChild(u),r.appendChild(p);break;case 2:r.style.display="inline-block";var h=document.createElementNS(d,"svg");h.style.width="12px",h.style.height="10px",h.style.zIndex="50";var m=document.createElementNS(d,"polygon");m.setAttributeNS(null,"points","4,0 4,10 10,5"),m.setAttributeNS(null,"style","fill:black"),h.appendChild(m),r.appendChild(h)}r.addEventListener("click",function(e){e.stopPropagation();var t='<Call Method="VirtualTreeViewToggleExpansion"><NodeId>'+n.NodeId+"</NodeId></Call>";vsClient.command.executeXML(t)},!1);var f=document.createElement("span");switch(f.classList.add("modeltree-item-visibility"),f.style.fontSize="12px",n.Visibility){case 0:f.classList.add("fa"),f.classList.add("fa-eye-slash"),f.style.color="black";break;case 1:f.classList.add("fa"),f.classList.add("fa-eye"),f.style.color="black";break;case 2:f.style.color="black";break;case 3:f.classList.add("fa"),f.classList.add("fa-eye"),f.style.color="lightsteelblue"}f.addEventListener("click",function(e){e.stopPropagation();var t='<Call Method="VirtualTreeViewToggleVisibility"><NodeId>'+n.NodeId+"</NodeId></Call>";vsClient.command.executeXML(t)});var v=document.createElementNS(d,"svg");v.setAttribute("class","viewpane-item-icon"),v.style.width="12px",v.style.height="12px",v.style.marginRight="2px",v.style.marginBottom="1px";var g=document.createElementNS(d,"use");g.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+i(n.NodeType)),"ICON_GEOMETRY"!==i(n.NodeType)&&"ICON_ROOT"!==i(n.NodeType)||$(v).addClass("viewpane-item-icon-translate-down"),v.appendChild(g);var C=document.createElement("span");switch(C.classList.add("modeltree-item-nodename"),C.textContent=n.NodeName,n.Selection){case 0:o.classList.add("treeitem-selection-none");break;case 1:o.classList.add("treeitem-selection-highlight"),s.selectedNodeIds.push(n.NodeId);break;case 2:o.classList.add("treeitem-selection-parent-selected")}o.addEventListener("contextmenu",function(t){l.appStates.nodesSelected||(e.setSelectedNodes(n.NodeId),e.selectedNodeIds=[],e.selectedNodeIds.push(n.NodeId))}),o.addEventListener("click",function(t){if(e.selectedNodeIds.push(n.NodeId),!0===t.ctrlKey&&!1===t.shiftKey)e.addToSelection(n.NodeId);else if(!1===t.ctrlKey&&!0===t.shiftKey&&e.selectedNodeIds.length>=2){var i=e.selectedNodeIds[e.selectedNodeIds.length-2],a='<Call Method="VirtualTreeViewSelectBetweenNodes">\n<NodeId>'+i+"</NodeId>\n<NodeId>"+n.NodeId+"</NodeId></Call>";vsClient.command.executeXML(a)}else e.setSelectedNodes(n.NodeId),e.selectedNodeIds=[],e.selectedNodeIds.push(n.NodeId)});var _=new c.WVTooltip(o);_.setTitle(n.NodeName),_.setKey(n.NodeId.toString()),_.setTriggerTime(1e3),$(o).hover(function(t){e.actualTooltip=_;var i='<Call Method="GetNodeTooltip" CustomId="'+n.NodeId+'"><NodeId>'+n.NodeId+"</NodeId></Call>";vsClient.command.executeXML(i)}),o.appendChild(r),o.appendChild(f),o.appendChild(v),o.appendChild(C),s.items.push(o);var I=document.createElementNS(d,"svg");I.style.width="100%",I.style.height="100%",I.style.position="absolute",I.style.pointerEvents="none";var S=document.createElementNS(d,"line");S.setAttributeNS(null,"x1",(7+10*n.Level).toString()),S.setAttributeNS(null,"x2",(14+10*n.Level).toString()),S.setAttributeNS(null,"y1","10"),S.setAttributeNS(null,"y2","10"),S.setAttributeNS(null,"style","stroke:black;stroke-width:2"),I.appendChild(S);var y=document.createElementNS(d,"svg");y.style.width="100%",y.style.height="100%",y.style.position="absolute",y.style.top="0",y.style.zIndex="1",y.style.pointerEvents="none";var E=document.createElementNS(d,"line");E.setAttributeNS(null,"x1",(10*n.Level+8).toString()),E.setAttributeNS(null,"x2",(10*n.Level+8).toString()),-1!==n.Parent?E.setAttributeNS(null,"y1",(20*(n.Parent+1)).toString()):E.setAttributeNS(null,"y1","0"),E.setAttributeNS(null,"y2",(10+20*t).toString()),E.setAttributeNS(null,"style","stroke:black;stroke-width:2"),y.appendChild(E),s.itemsContainer.appendChild(y),s.itemsContainer.appendChild(I),s.itemsContainer.appendChild(o),t++}(u)}vsClient.setMaxListeners(30)},t.prototype.addToSelection=function(e){var t='<Call Method="SetSelectedNodes"><NodeId>'+e+"</NodeId><AddToSelection>true</AddToSelection></Call>";vsClient.command.executeXML(t)},t.prototype.setSelectedNodes=function(e){if("undefined"!=typeof vsClient){var t="";if(Array.isArray(e))for(var n=0;n<e.length;n++)t+="<NodeId>",t+=e[n],t+="</NodeId>";else t+="<NodeId>",t+=e,t+="</NodeId>";var i='<Call Method="SetSelectedNodes">'+t+"</Call>";vsClient.command.executeXML(i)}},t}(s.PaneTemplate);t.Modeltree=u},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),s=n(0),r=n(3),l=n(1),c=n(4),d=n(13),p=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){e&&!e.Type&&i.values&&i.values.Event&&(e=i.values.Event),i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:s.settingsPane.sceneSettings?s.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>NeighbourhoodSearchPane</Type></Call>'),vsClient.once("GetTemplate.NeighbourhoodSearchPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){$("#wv-neighbourhoodsearch #OnNHSApplyToAllClick").off("click").click(function(e){vsClient.command.executeXML('<Call Method="ApplyNeighbourhoodSearchSettings"/>')}),$("#wv-neighbourhoodsearch #OnNHSCompute").off("click").click(function(e){vsClient.command.executeXML('<Call Method="ExecuteNeighbourhoodSearch"/>'),vsClient.once("ExecuteNeighbourhoodSearch",function(e){"SUCCESS"===e.Error&&"true"===$("#UID_NEIGHBOURHOOD_SEARCH_CLOSE_SELECTION_MODE_FLAG").val()&&(vsClient.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>Select</SelectionMode></Call>'),vsClient.once("SetSelectionMode",function(e){if("SUCCESS"===e.Error){c.appStates.selectionMode="Select",d.handlePrependingPane("wv-neighbourhoodsearch","off");var t=o.findButton("ID_RIBBON_NEIGHBOURHOOD_SEARCH");t&&t.applyHighlight(!1);var n=o.findButton("ID_RIBBON_SELECT");n&&n.applyHighlight(!0)}}))})})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(n,i){if("toggle-folder-visibility"===i)return void t.adapter.updateValues(t.values);var o=n.item.path;if("Event"===o[0]){i=parseFloat(i).toString(),a.modifySettings(t.values,o,i);var l=r.serializeWithValue(o,i,["Type="+e.Event]);vsClient.command.executeXML(l)}else{a.modifySettings(s.settingsPane.sceneSettings,o,i);var l=r.serializeWithValue(o,i),c='<Call Method="SetSceneSettings"> '+l+" </Call>";vsClient.command.executeXML(c),t.hasPresets&&t.stack.changeToCustomPreset()}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(l.PaneTemplate);t.NeighbourhoodSearchPane=p},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>NeutralAxisPane</Type></Call>'),vsClient.once("GetTemplate.NeutralAxisPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.addMethods=function(){$("#wv-neutralaxis #OnNeutralAxisComputeClicked").click(function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>NeutralAxis</Mode></Call>')})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.addMethods(),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.NeutralAxisPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-projectedarea #OnProjectedAreaComputeClicked").click(function(e){var t='<Call Method="Compute">';t+="<Mode>ProjectedArea</Mode>",t+="</Call>",vsClient.command.executeXML(t)})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>ProjectedAreaPane</Type></Call>'),vsClient.once("GetTemplate.ProjectedAreaPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.ProjectedAreaPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(4),s=n(10),r=n(3),l=n(1),c=n(8),d=n(0),p=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.scrollPosNode=0,i.scrollPosScene=0,i.sortAttributes=!1,i.update=function(){i.nodePropertiesWrapper.scrollTop=i.scrollPosNode,i.scenePropertiesWrapper.scrollTop=i.scrollPosScene;var e="calc(100% - "+$(i.buttonRow).outerHeight(!0)+"px)";i.nodePropertiesWrapper.style.height=e,i.scenePropertiesWrapper.style.height=e},i.noAdapter=!0,i.wrapperEl.style.overflow="hidden",i.nodePropertiesWrapper=document.createElement("div"),i.nodePropertiesWrapper.style.overflowY="scroll",i.nodePropertiesWrapper.onscroll=function(e){i.scrollPosNode=i.nodePropertiesWrapper.scrollTop},i.scenePropertiesWrapper=document.createElement("div"),i.scenePropertiesWrapper.style.overflowY="scroll",i.scenePropertiesWrapper.onscroll=function(e){i.scrollPosScene=i.scenePropertiesWrapper.scrollTop},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.scenePropertiesEl=document.createElement("table"),i.scenePropertiesEl.classList.add("pane-content"),i.scenePropertiesWrapper.style.display="",i.nodePropertiesWrapper.style.display="none",i.attributesList=[],i.buttonRow=document.createElement("div"),i.buttonRow.classList.add("pane-buttons-tab");var a=document.createElement("i");return a.className="fa fa-sort-alpha-up tree-header-action-icon",a.addEventListener("click",function(e){i.sortAttributes=!i.sortAttributes,i.sortAttributes?a.style.backgroundColor="rgb(160, 160, 160)":a.style.backgroundColor="",i.addAttributes()}),i.sortAttributesTooltip=new c.WVTooltip(a),i.sortAttributesTooltip.setTitle(d.translate("ID_SORT_NODE_ATTRIBUTES_SETTING_INFO")),i.buttonRow.appendChild(a),i.nodePropertiesWrapper.appendChild(i.el),i.scenePropertiesWrapper.appendChild(i.scenePropertiesEl),i.wrapperEl.appendChild(i.buttonRow),i.wrapperEl.appendChild(i.nodePropertiesWrapper),i.wrapperEl.appendChild(i.scenePropertiesWrapper),i.addMethods(),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-properties #OnCreateGravityCenterClicked").off("click").on("click",function(e){var t='<Call Method="VisualizeGravityCenter">';t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-properties #OnNumberOfTrianglesClicked").off("click").on("click",function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>NumberOfTriangles</Mode></Call>')})},t.prototype.changeLang=function(e){this.changeTemplateLang(),this.sortAttributesTooltip.setTitle(d.translate("ID_SORT_NODE_ATTRIBUTES_SETTING_INFO")),this.addMethods()},t.prototype.changeTemplateLang=function(){var e=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>PropertiesPane</Type></Call>'),vsClient.once("GetTemplate.PropertiesPane",function(t){var n=t.Source.Template;e.fromTemplate(n),e.sceneSettings&&e.updateSceneSettings(e.sceneSettings),e.nodeProperties&&e.updateNodeProperties(e.nodeProperties)})},t.prototype.updateSceneSettings=function(e){if("SUCCESS"===e.Error){this.sceneSettings=e;var t=e.Settings.Scene.Visualization.RenderMode,n=t;if(n.length>0){var i=n.split(" ");o.appStates.renderingModes=i}else o.appStates.renderingModes=[];var a=s.findGroup("ID_RIBBON_RENDERING_MODE"),r=s.findGroup("ID_RIBBON_GRAPHIC_EFFECTS");a.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),r.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),o.appStates.renderingModes.forEach(function(e){switch(e){case"Solid":s.findButton("ID_RIBBON_SOLID").applyHighlight(!0);break;case"Wires":s.findButton("ID_RIBBON_WIRES").applyHighlight(!0);break;case"Illustration":s.findButton("ID_RIBBON_ILLUSTRATION_1").applyHighlight(!0),s.findButton("ID_RIBBON_ILLUSTRATION").applyHighlight(!0);break;case"Perspective":s.findButton("ID_RIBBON_PERSPECTIVE").applyHighlight(!0);break;case"Inverse":s.findButton("ID_RIBBON_INVERT").applyHighlight(!0)}});var l=s.findGroup("ID_RIBBON_GRAPHIC_EFFECTS_1");l||(l=s.findGroup("ID_RIBBON_GRAPHIC_EFFECTS")),l.getWidgets().forEach(function(e){return e.applyHighlight(!1)}),o.appStates.renderingModes.forEach(function(e){switch(e){case"Silhouette":s.findButton("ID_RIBBON_SILHOUETTE").applyHighlight(!0);break;case"Opaque":s.findButton("ID_RIBBON_OPAQUE").applyHighlight(!0);break;case"Shadow":s.findButton("ID_RIBBON_SHADOW").applyHighlight(!0);break;case"Material":s.findButton("ID_RIBBON_MATERIAL").applyHighlight(!0)}}),this.scenePropertiesAdapter.updateValues(this.sceneSettings)}},t.prototype.fromTemplate=function(e){var t=this;this.scenePropertiesAdapter=new a.PaneAdapter(this.scenePropertiesEl);this.scenePropertiesAdapter.fromTemplate(e.Group[0],!0),this.scenePropertiesAdapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.scenePropertiesAdapter.updateValues(t.sceneSettings);var i=e.item.path;a.modifySettings(t.sceneSettings,i,n);var o=r.serializeWithValue(i,n),s='<Call Method="SetSceneSettings"> '+o+" </Call>";vsClient.command.executeXML(s),t.hasPresets&&t.stack.changeToCustomPreset()}),this.nodePropertiesAdapter=new a.PaneAdapter(this.el),this.nodePropertiesAdapter.fromTemplate(e.Group[1],!0),this.nodePropertiesAdapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return t.nodePropertiesAdapter.updateValues(t.nodeProperties),void t.addAttributes();if("UID_PROPERTIES_PANE_ATTRIBUTES_SHOW"===n)return void t.attributesList.forEach(function(e){$(e).show()});if("UID_PROPERTIES_PANE_ATTRIBUTES_HIDE"===n)return void t.attributesList.forEach(function(e){$(e).hide()});if("UID_PRESET"===e.item.id)return void t.setNodeProperty(["Event","PhysicalProperties","Density"],n);var i=e.item.path;a.modifySettings(t.nodeProperties,i,n),t.setNodeProperty(i,n)})},t.prototype.setNodeProperty=function(e,t){var n=r.serializeWithValue(e,t);n=n.replace("<Event>",'<Event Type="NodePropertiesChanged">'),vsClient.command.executeXMLAsync(n.replace(/\n<\//,"</"))},t.prototype.clear=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)},t.prototype.showSceneProperties=function(){this.nodePropertiesWrapper.style.display="none",this.scenePropertiesWrapper.style.display=""},t.prototype.updateNodeProperties=function(e){var t;t=e.Event?e:{Event:e},this.nodeProperties=t,this.scenePropertiesWrapper.style.display="none",this.nodePropertiesWrapper.style.display="",this.nodePropertiesAdapter.updateValues(this.nodeProperties),$("#UID_PRESET").val(parseFloat(this.nodeProperties.Event.PhysicalProperties.Density.__text__).toFixed(6)),this.addAttributes(),this.addMethods()},t.prototype.addAttributes=function(){if(this.attributesList){for(var e=0;e<this.attributesList.length;e++)$(this.attributesList[e]).remove();this.attributesList=[]}if(this.attributesRow=document.getElementById("UID_PROPERTIES_PANE_ATTRIBUTES"),this.nodeProperties&&this.nodeProperties.Event&&this.nodeProperties.Event.Attributes){var t=this.nodeProperties.Event.Attributes.Attribute;Array.isArray(t)||(t=[t]);var n=t.slice();this.sortAttributes&&(n=n.sort(function(e,t){var n=e.Key.toUpperCase(),i=t.Key.toUpperCase();return n<i?1:n>i?-1:0}));for(var e=0;e<n.length;e++){var i=n[e],a=document.createElement("tr");a.className="pane-item";var o=document.createElement("td");$(o).addClass("pane-item-entry-name pane-item-indent-level2"),o.textContent=i.Key;new c.WVTooltip(o).setTitle(i.Key),a.appendChild(o);var s=document.createElement("td");s.className="pane-item-visual";var r=document.createElement("div");r.className="pane-item-entry-wrapper",r.style.position="relative";var l=document.createElement("span");l.className="pane-item-entry-text",l.textContent=i.Value;new c.WVTooltip(l).setTitle(i.Value),r.appendChild(l),s.appendChild(r),a.appendChild(s),this.attributesList.push(a)}if($(this.attributesRow).show(),this.attributesList&&this.attributesList.length>0&&this.attributesRow)for(var d=0,p=this.attributesList;d<p.length;d++){var a=p[d];this.attributesRow.parentNode.insertBefore(a,this.attributesRow.nextSibling)}}else $(this.attributesRow).hide()},t.prototype.toggleAttributes=function(e){if(this.attributesRow&&e){if($(this.el).find("tbody").find(".far").first().hasClass("fa-plus-square")){this.attributesRow.style.display="none";for(var t=0;t<this.attributesList.length;t++)this.attributesList[t].style.display="none"}else if(this.attributesRow.style.display="",$(this.attributesRow).find("i").first().hasClass("fa-minus-square"))for(var t=0;t<this.attributesList.length;t++)this.attributesList[t].style.display=""}else for(var t=0;t<this.attributesList.length;t++)""===this.attributesList[t].style.display||!0===e?(this.attributesList[t].style.display="none",$("#properties_attributes").removeClass("fa-minus-square"),$("#properties_attributes").addClass("fa-plus-square")):($("#properties_attributes").removeClass("fa-plus-square"),$("#properties_attributes").addClass("fa-minus-square"),this.attributesList[t].style.display="")},t}(l.PaneTemplate);t.PropertyPane=p},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>QuickComparePane</Type></Call>'),vsClient.once("GetTemplate.QuickComparePane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n)})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.QuickComparePane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=n(37),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.setSectionNormal=function(){if(i.values.Event){var e=i.values.Event.Movement.Normal,t='<Call Method="SectionSetNormal">';t+="<X>"+e.X+"</X>",t+="<Y>"+e.Y+"</Y>",t+="<Z>"+e.Z+"</Z>",t+="</Call>",vsClient.command.executeXMLAsync(t)}},i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-section #OnSectionCenterHandleClicked").click(function(e){vsClient.command.executeXML('<Call Method="SectionCenterHandles"></Call>')}),$("#wv-section #OnSectionAlignmentXClicked").click(function(e){var t='<Call Method="SectionAlignAxis">';t+="<Axis>X</Axis>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-section #OnSectionAlignmentYClicked").click(function(e){var t='<Call Method="SectionAlignAxis">';t+="<Axis>Y</Axis>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-section #OnSectionAlignmentZClicked").click(function(e){var t='<Call Method="SectionAlignAxis">';t+="<Axis>Z</Axis>",t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-section #OnSectionSetNormalClicked").click(function(e){vsClient.emit("setSectionNormal")}),$("#wv-section #OnSectionCreateSurfaceClicked").click(function(e){var t='<Call Method="Compute"><Mode>SectionGeometry</Mode>';t+="<Type>Filled</Type>","true"===$("#UID_SECTION_PANE_CREATE_MULTIPLE").val()&&(t+="<Step>"+$("#UID_SECTION_PANE_STEP_WIDTH").text()+"</Step>"),t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-section #OnSectionCreateWireClicked").click(function(e){var t='<Call Method="Compute"><Mode>SectionGeometry</Mode>';t+="<Type>Wire</Type>","true"===$("#UID_SECTION_PANE_CREATE_MULTIPLE").val()&&(t+="<Step>"+$("#UID_SECTION_PANE_STEP_WIDTH").val()+"</Step>"),t+="</Call>",vsClient.command.executeXML(t)}),$("#wv-section #OnSectionVectorExportClicked").click(function(e){vsClient.command.executeXML('<Call Method="ExportSectionGeometry"><ExportFormat2D>SVG</ExportFormat2D></Call>'),vsClient.once("ExportSectionGeometry",function(e){var t=e.Image;new l.ClipboardModal(t,vsClient.vsCanvas.width,vsClient.vsCanvas.height,"svg+xml")})})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>SectionPane</Type></Call>'),vsClient.once("GetTemplate.SectionPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(n,i){if("UID_SECTION_PANE_CREATE_MULTIPLE"!==n.item.id){if("toggle-folder-visibility"===i)return void t.adapter.updateValues(t.values);var r=n.item.path;if("Event"===r[0]){var l=e.Event;i=parseFloat(i).toString(),a.modifySettings(t.values,r,i);var c=s.serializeWithValue(r,i,["Type="+l]);vsClient.command.executeXML(c)}else{a.modifySettings(o.settingsPane.sceneSettings,r,i);var c=s.serializeWithValue(r,i),d='<Call Method="SetSceneSettings"> '+c+" </Call>";vsClient.command.executeXML(d),t.hasPresets&&t.stack.changeToCustomPreset()}}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}vsClient.on("setSectionNormal",this.setSectionNormal)},t}(r.PaneTemplate);t.SectionPane=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=n(1),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.rows=[],i.selections=[],i.multiSelections=[],i.multiRows=[],i.update=function(){},i.noAdapter=!0,i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i.tableBody=document.createElement("tbody"),i.el.appendChild(i.tableBody),i.el.addEventListener("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.createContextMenu(e)});var o=document.createElement("tr");i.tableBody.appendChild(o);var s=document.createElement("tr");s.className="pane-item";var r=document.createElement("td");r.className="pane-item-visual pane-item-group",r.colSpan=2,i.tableTitle=document.createElement("b"),i.tableTitle.className="",i.tableTitle.textContent=_lang_data.ID_SELECTIONS_COLUMN_NAME[a.settings.lang],s.appendChild(r),r.appendChild(i.tableTitle),i.tableBody.appendChild(s),vsClient.on("OpenFile",function(e){i.reset()}),vsClient.on("NewScene3D",function(e){i.reset()}),vsClient.on("GetSavedSelections",function(e){i.buildSelectionTable(e)}),vsClient.on("SavedSelectionsChanged",function(e){i.buildSelectionTable(e,!1)}),i.buttons=document.createElement("div"),i.buttons.classList.add("pane-buttons-tab");var l=document.createElement("i");l.className="fa fa-plus tree-header-action-icon",l.addEventListener("click",function(e){vsClient.command.executeXML('<Call Method="SaveCurrentSelection"></Call>')});var c=document.createElement("i");c.className="fa fa-sync-alt tree-header-action-icon",c.addEventListener("click",function(e){var t=i.selectedRow,n='<Call Method="UpdateSavedSelection"><Index>'+t.id.split("_")[1]+"</Index></Call>";vsClient.command.executeXML(n)});var d=document.createElement("i");return d.className="fa fa-trash tree-header-action-icon",d.addEventListener("click",function(e){for(var t='<Call Method="DeleteSavedSelections">',n=0;n<i.multiRows.length;n++){t+="<Index>"+i.multiRows[n].id.split("_")[1]+"</Index>"}t+="</Call>",vsClient.command.executeXML(t),i.multiRows=[]}),i.buttons.appendChild(l),i.buttons.appendChild(c),i.buttons.appendChild(d),i.wrapperEl.appendChild(i.buttons),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){this.tableTitle.textContent=_lang_data.ID_SELECTIONS_COLUMN_NAME[a.settings.lang]},t.prototype.reset=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var n=0;n<this.rows.length;n++)$(this.rows[n]).remove();if(this.rows=[],t&&(this.multiRows=[],this.multiSelections=[],this.selectedRow=void 0),this.selections=[],e){vsClient.command.executeXML('<Call Method="GetSavedSelections"></Call>')}},t.prototype.buildSelectionTable=function(e,t){if(void 0===t&&(t=!0),this.reset(!1,t),e.Selection){e.Selection&&!Array.isArray(e.Selection)&&(e.Selection=[e.Selection]);for(var n=0;n<e.Selection.length;n++)this.addRow(e.Selection[n].Index,e.Selection[n].Name,!t)}},t.prototype.enableTextChange=function(e){var t=$(e);t.attr("contenteditable","true"),t.focus();var n=document.createRange();n.selectNodeContents(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),t.blur(function(e){$(e.target).off("blur"),$(e.target).attr("contenteditable","false");var t=e.target.textContent,n=e.target.parentElement.parentElement.id.split("_")[1],i='<Call Method="RenameSavedSelection"><Index>'+n+"</Index>";i+="<Name>"+t+"</Name></Call>",vsClient.command.executeXML(i)}),t.on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).off("keyup"),$(e.target).attr("contenteditable","false"))})},t.prototype.addRow=function(e,t,n){var i=this;void 0===n&&(n=!1);var a=document.createElement("tr");a.className="pane-item selection-pane-row",a.id="Selection_"+e;var o=document.createElement("td");o.className="pane-item-entry-name pane-item-visual",o.colSpan=2,o.style.whiteSpace="normal";var s=document.createElement("i");s.className="fas fa-edit selection-pane-row-icon",s.onclick=function(e){i.enableTextChange(r)};var r=document.createElement("span");r.textContent=t,r.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()});var l=document.createElement("div");l.className="selection-pane-row-badge",l.id="Selection_"+e+"_Number",l.textContent="-";var c=!1;$(r).mousedown(function(e){c=!0,setTimeout(function(){c&&i.enableTextChange(r)},500)}),$(r).mouseup(function(e){c=!1}),a.onclick=function(e){var t=a.id.split("_")[1];if(e.ctrlKey)if($(a).toggleClass("selection-pane-row-active"),-1===i.multiRows.indexOf(a)){i.multiRows.push(a),-1===i.multiSelections.indexOf(t)&&i.multiSelections.push(t);for(var n='<Call Method="ActivateSavedSelections">',o=0;o<i.multiSelections.length;o++)n+="<Index>"+i.multiSelections[o]+"</Index>";n+="</Call>",vsClient.command.executeXML(n)}else{var s=i.multiRows.indexOf(a);i.multiRows.splice(s,1);for(var r=0;r<t.length;r++)-1!==i.multiSelections.indexOf(t)&&i.multiSelections.splice(i.multiSelections.indexOf(t),1);for(var n='<Call Method="ActivateSavedSelections">',o=0;o<i.multiSelections.length;o++)n+="<Index>"+i.multiSelections[o]+"</Index>";n+="</Call>",vsClient.command.executeXML(n)}else{$(".selection-pane-row-active").each(function(e){$(this).removeClass("selection-pane-row-active")}),$(a).addClass("selection-pane-row-active"),i.selectedRow=a,i.multiRows=[],i.multiSelections=[],i.multiRows.push(a),i.multiSelections.push(t);var n='<Call Method="ActivateSavedSelections">';n+="<Index>"+t+"</Index>",n+="</Call>",vsClient.command.executeXML(n)}},o.appendChild(s),o.appendChild(r),a.appendChild(o),this.rows.push(a);var d={id:"Selection_"+e,count:"-"};this.tableBody.appendChild(a),this.selections.push(d),n&&this.selectedRow&&this.selectedRow.id.split("_")[1]===e&&$(a).addClass("selection-pane-row-active")},t}(o.PaneTemplate);t.SelectionsPane=s},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=n(0),s=n(2),r=n(17),l=n(3),c=n(1),d=n(8),p=n(4),u=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scrollPosGlobal=0,i.scrollPosScene=0,i.resizableHandleAdded=!1,i.update=function(){i.globalSettingsWrapper.scrollTop=i.scrollPosGlobal,i.sceneSettingsWrapper.scrollTop=i.scrollPosScene;var e="calc(100% - "+($(i.buttonsTab).outerHeight(!0)+$(i.viewTab).outerHeight(!0))+"px)";i.globalSettingsWrapper.style.height=e,i.sceneSettingsWrapper.style.height=e,i.defaultSettings&&(i.updateSceneSettings(),i.updateSettings(i.defaultSettings))},i.noAdapter=!0,i.langId_default="ID_DEFAULT_COLOR",i.langId_currentScene="ID_SCENE_TAB",i.globalSettingsEl=document.createElement("table"),i.globalSettingsEl.classList.add("pane-content"),i.globalSettingsEl.style.minWidth="100px",i.sceneSettingsEl=document.createElement("table"),i.sceneSettingsEl.classList.add("pane-content"),i._buildTabs(),i._buildSearch(),i.buttonsTab.appendChild(i.searchInput),i.wrapperEl.appendChild(i.buttonsTab),i.wrapperEl.appendChild(i.viewTab),i.globalSettingsWrapper=document.createElement("div"),i.globalSettingsWrapper.classList.add("pane-scroll-area"),i.globalSettingsWrapper.style.overflowY="scroll",i.globalSettingsWrapper.appendChild(i.globalSettingsEl),i.globalSettingsWrapper.onscroll=function(e){i.scrollPosGlobal=i.globalSettingsWrapper.scrollTop},i.sceneSettingsWrapper=document.createElement("div"),i.sceneSettingsWrapper.classList.add("pane-scroll-area"),i.sceneSettingsWrapper.style.overflowY="scroll",i.sceneSettingsWrapper.appendChild(i.sceneSettingsEl),i.sceneSettingsWrapper.hidden=!0,i.sceneSettingsWrapper.onscroll=function(e){i.scrollPosScene=i.sceneSettingsWrapper.scrollTop},i.wrapperEl.appendChild(i.globalSettingsWrapper),i.wrapperEl.appendChild(i.sceneSettingsWrapper),i.wrapperEl.style.overflow="hidden",i}return i(t,e),t.prototype._buildTabs=function(){var e=this;this.buttonsTab=document.createElement("div"),this.buttonsTab.classList.add("pane-buttons-tab-large"),this.expandAll=document.createElement("i"),this.expandAll.className="fa fa-chevron-double-right tree-header-action-icon",this.expandAll.addEventListener("click",function(t){var n;n=e.globalSettingsWrapper.hidden?e.sceneSettingsAdapter:e.settingsAdapter,n.root.children.forEach(function(e){var t=e.visual;t.expander.classList.remove(s.Folder.minus,s.Folder.plus),t.expander.classList.add(s.Folder.minus),e.expandAll()}),e.sceneSettingsAdapter.emit("user-input",e,"toggle-folder-visibility"),e.settingsAdapter.emit("user-input",e,"toggle-folder-visibility")}),this.expandAllTooltip=new d.WVTooltip(this.expandAll),this.expandAllTooltip.setTitle(_lang_data.ID_EXPAND_ALL[this.lang]),this.collapseAll=document.createElement("i"),this.collapseAll.className="fa fa-chevron-double-left tree-header-action-icon",this.collapseAll.addEventListener("click",function(t){var n;n=e.globalSettingsWrapper.hidden?e.sceneSettingsAdapter:e.settingsAdapter,n.root.children.forEach(function(e){var t=e.visual;t.expander.classList.remove(s.Folder.minus,s.Folder.plus),t.expander.classList.add(s.Folder.plus),e.collapseAll(!1)}),e.sceneSettingsAdapter.emit("user-input",e,"toggle-folder-visibility"),e.settingsAdapter.emit("user-input",e,"toggle-folder-visibility")}),this.collapseAllTooltip=new d.WVTooltip(this.collapseAll),this.collapseAllTooltip.setTitle(_lang_data.ID_COLLAPSE_ALL[this.lang]),this.saveIcon=document.createElement("i"),this.saveIcon.className="fa fa-save tree-header-action-icon",this.saveIcon.id="save_scene_settings",this.saveIcon.addEventListener("click",function(t){var n=e.sceneSettings.Settings.Scene,i=e.defaultSettings.Settings;i.Scene=n,i=h(i,"__text__"),i=h(i,"__ordinal__"),delete i.Renderer.General.Language;var a=r.parse("Settings",i).replace("<?xml version='1.0'?>",""),o='<Call Method="SetSettings">'+a+"</Call>";vsClient.command.executeXML(o)}),this.saveIconTooltip=new d.WVTooltip(this.saveIcon),this.saveIconTooltip.setTitle(_lang_data.ID_RIBBON_SAVE[this.lang].split("(")[0]),this.refreshIcon=document.createElement("i"),this.refreshIcon.className="fa fa-sync-alt tree-header-action-icon",this.refreshIcon.id="settings_refresh",this.refreshIcon.addEventListener("click",function(t){localStorage.setItem("VSWVSettings",localStorage.getItem("VSWVDefaultSettings"));var n='<Call Method="SetSettings">'+localStorage.getItem("VSWVDefaultSettings")+"</Call>";vsClient.command.executeXMLAsync(n),n='<Call Method="GetSettings"></Call>',vsClient.command.executeXMLAsync(n),vsClient.once("GetSettings",function(t,n){e.updateSettings(t)}),localStorage.removeItem("nativeLoadingSettings")}),this.refreshIconTooltip=new d.WVTooltip(this.refreshIcon),this.refreshIconTooltip.setTitle(_lang_data.ID_BUTTON_PROFILES_DEFAULT[this.lang].split("(")[0]),this.buttonsTab.appendChild(this.expandAll),this.buttonsTab.appendChild(this.collapseAll),this.buttonsTab.appendChild(this.saveIcon),this.buttonsTab.appendChild(this.refreshIcon),this.viewTab=document.createElement("div"),this.viewTab.classList.add("settings-selector-header"),this.settingsButton=document.createElement("span"),this.settingsButton.textContent=_lang_data[this.langId_default][a.settings.lang],this.settingsButton.className="active-settings-pane",this.settingsButton.classList.add("general-settings-tab"),this.settingsButton.addEventListener("click",function(t){$(e.settingsButton).hasClass("active-settings-pane")||($(e.settingsButton).toggleClass("active-settings-pane"),$(e.currentSceneButton).toggleClass("active-settings-pane"),e.sceneSettingsWrapper.hidden=!0,e.globalSettingsWrapper.hidden=!1,e.settingsAdapter.filter(e.searchInput.value))}),this.currentSceneButton=document.createElement("span"),this.currentSceneButton.textContent=_lang_data[this.langId_currentScene][a.settings.lang],this.currentSceneButton.classList.add("scene-settings-tab"),this.currentSceneButton.addEventListener("click",function(t){$(e.currentSceneButton).hasClass("active-settings-pane")||($(e.settingsButton).toggleClass("active-settings-pane"),$(e.currentSceneButton).toggleClass("active-settings-pane"),e.sceneSettingsWrapper.hidden=!1,e.globalSettingsWrapper.hidden=!0,e.sceneSettingsAdapter.filter(e.searchInput.value))}),this.viewTab.appendChild(this.settingsButton),this.viewTab.appendChild(this.currentSceneButton)},t.prototype._buildSearch=function(){var e=this;this.searchInput=document.createElement("input"),this.searchInput.className="settings-pane-search-input",this.searchInput.placeholder="Search Settings...",this.searchInput.setAttribute("type","search"),this.searchInput.onfocus=function(e){p.appStates.preventGlobalKeyEvents=!0},this.searchInput.onblur=function(e){p.appStates.preventGlobalKeyEvents=!1},this.searchInput.addEventListener("input",function(t){e.sceneSettingsWrapper.hidden?(e.settingsAdapter.filter(e.searchInput.value),e.settingsAdapter.filterString=e.searchInput.value):e.globalSettingsWrapper.hidden&&(e.sceneSettingsAdapter.filter(e.searchInput.value),e.sceneSettingsAdapter.filterString=e.searchInput.value)})},t.prototype.fromTemplate=function(e){var t=this;this.settingsTemaplte=e,this.settingsAdapter=new s.PaneAdapter(this.globalSettingsEl),this.settingsAdapter.fromTemplate(e.Group),this.settingsAdapter.on("user-input",function(e,n){if("toggle-folder-visibility"!==n){var i=e.item.path;s.modifySettings(t.defaultSettings,i,n);var a=l.serializeWithValue(i,n),o='<Call Method="SetSettings"> '+a+" </Call>";vsClient.command.executeXMLAsync(o)}}),this.sceneSettingsAdapter=new s.PaneAdapter(this.sceneSettingsEl),this.sceneSettingsAdapter.fromTemplate(e.Group.Group[2]),this.sceneSettingsAdapter.on("user-input",function(e,n){if("toggle-folder-visibility"!==n){var i=e.item.path;s.modifySettings(t.sceneSettings,i,n);var a=l.serializeWithValue(i,n),o='<Call Method="SetSceneSettings"> '+a+" </Call>";vsClient.command.executeXMLAsync(o),t.hasPresets&&t.stack.changeToCustomPreset()}})},t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){var t=this;this.expandAllTooltip.setTitle(_lang_data.ID_EXPAND_ALL[e]),this.collapseAllTooltip.setTitle(_lang_data.ID_COLLAPSE_ALL[e]),this.refreshIconTooltip.setTitle(_lang_data.ID_BUTTON_PROFILES_DEFAULT[e].split("(")[0]),this.saveIconTooltip.setTitle(_lang_data.ID_RIBBON_SAVE[e]),this.settingsButton.textContent=_lang_data[this.langId_default][e],this.currentSceneButton.textContent=_lang_data[this.langId_currentScene][e];vsClient.command.executeXML('<Call Method="GetTemplate"><Type>SettingsPane</Type></Call>'),vsClient.once("GetTemplate.SettingsPane",function(e){var n=e.Source.Template;o.settingsPane.fromTemplate(n),t.defaultSettings&&(t.updateSettings(t.defaultSettings),t.sceneSettings&&t.updateSceneSettings(t.sceneSettings))})},t.prototype.updateSettings=function(e){this.defaultSettings=e,this.settingsAdapter.updateValues(this.defaultSettings)},t.prototype.updateSceneSettings=function(e){void 0===e&&(e=void 0),void 0!==e&&(this.sceneSettings=e),this.sceneSettingsAdapter.updateValues(this.sceneSettings)},t.prototype.applySettings=function(e){var t='Build="'+e.Build+'"',n=r.parse("Settings",e),i=new RegExp("<Settings>\n    <Build>"+e.Build+"</Build>");n=n.replace(i,"<Settings "+t+">");var a='<Call Method="SetSettings">'+n+"</Call>";vsClient.command.executeXML(a)},t.prototype.applySceneSettings=function(e){var t='Build="'+e.Build+'"',n=r.parse("Settings",e),i=new RegExp("<Settings>\n    <Build>"+e.Build+"</Build>");n=n.replace(i,"<Settings "+t+">");var a='<Call Method="SetSceneSettings">'+n+"</Call>";vsClient.command.executeXMLAsync(a)},t}(c.PaneTemplate);t.SettingsPane=u;var h=function(e,t){return Object.keys(e).forEach(function(n){return n===t&&delete e[n]||e[n]&&"object"==typeof e[n]&&h(e[n],t)}),e}},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=n(11),c=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.sessions=[],i.resultInitialized=!1,i.update=function(e){!0===e&&($(i.groupTableBody).empty(),$(i.groupTable).hide(),i.sessions=[],i.activeSession=void 0,i.resultGroup&&(i.resultGroup.collapse(),$(i.resultGroup.wrapperEl).hide())),i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)};var a=document.createElement("table");a.className="pane-content";new l.PlainButton(3,a,"","","ID_SPLIT_RESTART_SESSION_BUTTON",i.restartSession.bind(i));i.wrapperEl.appendChild(a),i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i.groupTable=document.createElement("table"),i.groupTable.className="pane-content",i.wrapperEl.appendChild(i.groupTable);var s=document.createElement("thead");i.groupTable.appendChild(s);var r=document.createElement("tr");r.className="pane-item",s.appendChild(r),i.directionCol=document.createElement("th"),i.directionCol.textContent=o.translate("ID_SPLIT_DIRECTION_VECTOR"),i.directionCol.className="pane-item-entry-name",r.appendChild(i.directionCol),i.upCol=document.createElement("th"),i.upCol.textContent=o.translate("ID_SPLIT_RESULT_GROUP_UP"),i.upCol.className="pane-item-entry-name",r.appendChild(i.upCol),i.downCol=document.createElement("th"),i.downCol.textContent=o.translate("ID_SPLIT_RESULT_GROUP_DOWN"),i.downCol.className="pane-item-entry-name",r.appendChild(i.downCol),i.groupTableBody=document.createElement("tbody"),i.groupTable.appendChild(i.groupTableBody);var c=document.createElement("tr");return i.groupTableBody.appendChild(c),$(i.groupTable).hide(),i}return i(t,e),t.prototype.appendSplitSession=function(e){var t=this;if("SUCCESS"===e.Error){var n=$(this.el).children("tbody").first()[0],i={id:parseInt(e.SplitSessionId),name:e.SplitSessionName,directionId:parseInt(e.SplitDirectionId),directionName:e.SplitDirectionName,upColor:e.SplitGroupUpColor,upNumPatches:parseInt(e.SplitGroupUpNumPatches),downColor:e.SplitGroupDownColor,downNumPatches:parseInt(e.SplitGroupDownNumPatches),unassignedColor:e.SplitGroupUnassignedColor,unassignedNumPatches:parseInt(e.SplitGroupUnassignedNumPatches),directionEl:void 0,upEl:void 0,downEl:void 0,maxExplodeDistance:parseFloat(e.SplitFullExplodeDistance),sliderPos:e.SplitExplodeSliderPosition?parseFloat(e.SplitExplodeSliderPosition):0};if(!this.resultInitialized){this.resultGroup=new l.PlainGroup(1,n,"ID_SPLIT_RESULTS",""),this.resultSessionIdEl=new l.PlainInput(2,n,"ID_SPLIT_SESSION_ID","","false",void 0),this.resultSessionNameEl=new l.PlainInput(2,n,"ID_SPLIT_SESSION_NAME","","true",this.setSessionName.bind(this)),this.resultExplodeDistanceEl=new l.PlainInput(2,n,"ID_SPLIT_EXPLODE_DISTANCE","","true",this.setMaxExplodeDistance.bind(this)),this.resultSliderEl=new l.PlainSlider(2,n,"ID_SPLIT_EXPLODE_LEVEL","",this.setDistance),this.resultSliderEl.setVal(0),this.resultGroup.children.push(this.resultSessionIdEl.wrapperEl,this.resultSessionNameEl.wrapperEl,this.resultExplodeDistanceEl.wrapperEl,this.resultSliderEl.wrapperEl);var a=new l.PlainGroup(2,n,"ID_SPLIT_RESULT_GROUP_UNASSIGNED","");this.unassignedPatches=new l.PlainInput(3,n,"ID_SPLIT_NUMBER_OF_UNASSIGNED_PATCHES","","false",void 0),this.unassignedColor=new l.PlainColorPicker(3,n,"ID_COLOR","",this.setUnassignedColor.bind(this));var o=new l.PlainButton(3,n,"","","ID_SPLIT_REGROUP_PATCH",this.moveUnassigned.bind(this));a.children.push(this.unassignedPatches.wrapperEl,this.unassignedColor.wrapperEl,o.wrapperEl);var s=new l.PlainGroup(2,n,"ID_SPLIT_RESULT_GROUP_UP","");this.upColor=new l.PlainColorPicker(3,n,"ID_COLOR","",this.setUpColor.bind(this));var r=new l.PlainButton(3,n,"","","ID_SPLIT_REGROUP_PATCH",this.moveUp.bind(this));s.children.push(this.upColor.wrapperEl,r.wrapperEl);var c=new l.PlainGroup(2,n,"ID_SPLIT_RESULT_GROUP_DOWN","");this.downColor=new l.PlainColorPicker(3,n,"ID_COLOR","",this.setDownColor.bind(this));var d=new l.PlainButton(3,n,"","","ID_SPLIT_REGROUP_PATCH",this.moveDown.bind(this));c.children.push(this.downColor.wrapperEl,d.wrapperEl),this.resultGroup.childGroups.push(a,s,c),this.resultInitialized=!0,$(this.groupTable).show()}if(0===this.sessions.length){var p=document.createElement("tr");this.groupTableBody.appendChild(p),$(this.groupTable).show(),this.resultGroup.expand(),$(this.resultGroup.wrapperEl).show()}var u=document.createElement("tr");u.className="pane-item",u.onclick=function(e){t.activateSession(i)},this.groupTableBody.appendChild(u),i.directionEl=document.createElement("td"),i.directionEl.textContent=i.directionName,i.directionEl.className="pane-item-entry-name",u.appendChild(i.directionEl),i.upEl=document.createElement("td"),i.upEl.textContent=i.upNumPatches.toString(),i.upEl.style.backgroundColor="#"+i.upColor.slice(3),i.upEl.style.color=this.calculateFontColor("#"+i.downColor.slice(3)),i.upEl.className="pane-item-entry-name",u.appendChild(i.upEl),i.downEl=document.createElement("td"),i.downEl.textContent=i.downNumPatches.toString(),i.downEl.style.backgroundColor="#"+i.downColor.slice(3),i.downEl.style.color=this.calculateFontColor("#"+i.downColor.slice(3)),i.downEl.className="pane-item-entry-name",u.appendChild(i.downEl),this.sessions.push(i),this.activateSession(i)}},t.prototype.clearGroupTable=function(){$(this.groupTableBody).empty()},t.prototype.restartSession=function(){if(this.resultGroup){vsClient.command.executeXML('<Call Method="StartNewSplitSession"></Call>'),$(this.groupTable).hide(),this.sessions=[],this.resultGroup.collapse(),this.clearGroupTable(),$(this.resultGroup.wrapperEl).hide()}},t.prototype.activateSession=function(e){this.resultSliderEl.setVal(e.sliderPos/100),this.resultExplodeDistanceEl.setVal(e.maxExplodeDistance),this.resultSessionIdEl.setVal(e.id),this.resultSessionNameEl.setVal(e.name),this.unassignedPatches.setVal(e.unassignedNumPatches),this.unassignedColor.setVal(e.unassignedColor),this.upColor.setVal(e.upColor),this.downColor.setVal(e.downColor),this.activeSession=e,$(".split-group-active").removeClass("split-group-active"),$(e.directionEl).addClass("split-group-active")},t.prototype.setSessionName=function(e){},t.prototype.setMaxExplodeDistance=function(e){var t='<Call Method="SetSplitFullExplodeDistance">';t+="<SplitFullExplodeDistance>"+parseFloat(e)+"</SplitFullExplodeDistance>",t+="</Call>",vsClient.command.executeXML(t)},t.prototype.setDistance=function(e){var t='<Call Method="ExplodeSplitGroups">';t+="<Position>"+parseInt((100*e).toString())+"</Position>",t+="</Call>",vsClient.command.executeXML(t)},t.prototype.setUnassignedColor=function(e){var t='<Call Method="SetSplitUnassignedColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupUnassignedColor>"+e+"</SplitGroupUnassignedColor>",t+="</Call>",vsClient.command.executeXML(t),this.activeSession.unassignedColor=e},t.prototype.setUpColor=function(e){var t='<Call Method="SetSplitGroupUpColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupUpColor>"+e+"</SplitGroupUpColor>",t+="</Call>",vsClient.command.executeXML(t),this.activeSession.upColor=e,this.activeSession.upEl.style.backgroundColor=e},t.prototype.setDownColor=function(e){var t='<Call Method="SetSplitGroupDownColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupDownColor>"+e+"</SplitGroupDownColor>",t+="</Call>",vsClient.command.executeXML(t),this.activeSession.downColor=e,this.activeSession.downEl.style.backgroundColor=e},t.prototype.moveUnassigned=function(){vsClient.command.executeXML('<Call Method="UnassignSplitSelectedPatches"></Call>')},t.prototype.moveUp=function(){var e='<Call Method="AssignSplitSelectedPatchesToGroupUp">';e+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",e+="</Call>",vsClient.command.executeXML(e)},t.prototype.moveDown=function(){var e='<Call Method="AssignSplitSelectedPatchesToGroupDown">';e+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",e+="</Call>",vsClient.command.executeXML(e)},t.prototype.calculateFontColor=function(e){for(var t=e.substr(1),n=parseInt(t,16),i=(n>>16&255)/255,a=(n>>8&255)/255,o=(255&n)/255,s=[i,a,o],r=0;r<s.length;r++)s[r]<=.03928?s[r]=s[r]/12.92:s[r]=Math.pow((s[r]+.055)/1.055,2.4);return.2126*s[0]+.7152*s[1]+.0722*s[2]>.179?"black":"white"},t.prototype.setSplitDirection=function(){var e='<Call Method="SetSplitDirection">';e+="<X>"+$("#wv-split #SplitXDirection").text()+"</X>",e+="<Y>"+$("#wv-split #SplitYDirection").text()+"</Y>",e+="<Z>"+$("#wv-split #SplitZDirection").text()+"</Z>",e+="</Call>",vsClient.command.executeXML(e)},t.prototype.addMethods=function(){var e=this;$("#wv-split #OnSplitByNormalClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="ActivateSplitDirectionPick"></Call>')}),$("#wv-split #OnSplitXClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="SetSplitDirectionXAxis"></Call>')}),$("#wv-split #OnSplitYClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="SetSplitDirectionYAxis"></Call>')}),$("#wv-split #OnSplitZClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="SetSplitDirectionZAxis"></Call>')}),$("#wv-split #OnSplitComputeClicked").off("click").click(function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>Split</Mode></Call>')}),$("#wv-split #SplitXDirection").text(0),$("#wv-split #SplitYDirection").text(0),$("#wv-split #SplitZDirection").text(0),$("#wv-split #SplitXDirection").off("blur").blur(function(t){e.setSplitDirection()}),$("#wv-split #SplitYDirection").off("blur").blur(function(t){e.setSplitDirection()}),$("#wv-split #SplitZDirection").off("blur").blur(function(t){e.setSplitDirection()})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>SplitPane</Type></Call>'),vsClient.once("GetTemplate.SplitPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;(-1!==i.indexOf("Angle1")&&n<0||-1!==i.indexOf("Angle2")&&n>0||-1!==i.indexOf("Tolerance")&&n<0)&&(n*=-1),a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.SplitPane=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.stackSize=0,this.stack=[],this.isMaximized=!1,this.sceneStack=[],this.parent=e,this.client=t,this.tabBar=document.createElement("div"),this.tabBar.className="canvas-pane-tab-bar",this.parent.appendChild(this.tabBar)}return e.prototype.addScene=function(e){this.addTab(e);var t=document.createElement("div");t.id="wv-canvas",t.className="pane-content-area",t.style.margin="0px",this.parent.appendChild(t),this.activeSceneId=e;var n={id:e,canvas:t};return this.sceneStack.push(n),t},e.prototype.addTab=function(e){var t=this;$(this.parent).show();var n=document.createElement("div");n.className="pane-tab active-scene-pane-tab",n.style.marginBottom="0px!important",n.textContent="/",$(n).click(function(e){for(var i=0;i<t.stackSize;i++)t.stack[i].active=!1,$(t.stack[i].tab).removeClass("active-pane-tab");$(n).addClass("active-pane-tab")});for(var i={name:"/",id:e,tab:n,active:!0},a=0;a<this.stackSize;a++)this.stack[a].active=!1,$(this.stack[a].tab).removeClass("active-pane-tab");this.stack.push(i),this.stackSize++,this.tabBar.appendChild(n)},e.prototype.setTabTitle=function(e){this.stack[0].tab.textContent=e},e.prototype.maximize=function(){this.isMaximized=!0,$(this.parent).addClass("canvas-maximized"),$(this.sceneStack[0].canvas).addClass("canvas-maximized")},e.prototype.minimize=function(){this.isMaximized=!1,$(this.sceneStack[0].canvas).removeClass("canvas-maximized"),$(this.parent).removeClass("canvas-maximized")},e}();t.CanvasStack=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(0),o=n(4),s=function(){function e(e){this.isVisible=!1,this.stackSize=0,this.tabStack=[],this.stickyPane=!1,this.paneArray=[],this.langKeys=[],this.orientation=e,this.paneWrapper=document.createElement("div"),this.paneWrapper.className="minimized-pane-wrapper",null===localStorage.getItem("WV"+this.orientation+"MinimizedPaneWidth")?this.paneWidth=document.body.clientWidth/5:this.paneWidth=parseInt(localStorage.getItem("WV"+this.orientation+"MinimizedPaneWidth")),this.paneWrapper.style.width=this.paneWidth+"px",this.tabBar=document.createElement("div"),this.tabBar.className="minimized-pane-tab-bar",this.panel=document.getElementById(e+"-minimized-pane-panel"),this.panel.appendChild(this.tabBar),this.panes=document.getElementById(e+"-pane-wrapper"),this.presetTable=document.createElement("table"),this.presetTable.className="pane-content",$(this.presetTable).hide(),this.paneWrapper.appendChild(this.presetTable),this.contentArea=document.createElement("div"),this.contentArea.className="minimized-pane-content-area",this.panel.appendChild(this.paneWrapper),this.handleVerticalDown=this.handleVerticalDown.bind(this),this.handleVerticalMove=this.handleVerticalMove.bind(this),this.handleVerticalUp=this.handleVerticalUp.bind(this),"left"===this.orientation?(this.paneWrapper.style.left=-(this.paneWidth+20)+"px",this.tabBar.style.borderRight="1px solid #c3c3c3"):(this.paneWrapper.style.right=-(this.paneWidth+20)+"px",this.tabBar.style.borderLeft="1px solid #c3c3c3"),$(this.panel).hide(),this.checkTarget=this.checkTarget.bind(this)}return e.prototype.registerPane=function(e,t){$(this.panel).show(),this.isVisible=!0,"left"===this.orientation?this.panes.style.left="20px":this.panes.style.right="20px",this.registerTab(e,t),e.registerInStack(this.contentArea,this.presetTable),a.paneResize()},e.prototype.translateTitle=function(e){return _lang_data[e]&&_lang_data[e][i.settings.lang]?_lang_data[e][i.settings.lang]:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e][i.settings.lang]?_custom_lang_data[e][i.settings.lang]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e},e.prototype.registerTab=function(e,t){var n=this;if(-1===this.paneArray.indexOf(t)){var i=e.langId,a=this.translateTitle(i),o=document.createElement("div");o.className="minimized-pane-tab",o.textContent=a,this.tabBar.appendChild(o),$(o).hover(function(a){for(var s=0;s<n.stackSize;s++)n.tabStack[s].style.backgroundColor="rgb(225, 225, 225)";o.style.backgroundColor="white",n.showPane(e,i,t,o)}),this.tabStack.push(o),this.paneArray.push(t),this.langKeys.push(e.langId),this.stackSize++}},e.prototype.changeTitleLang=function(){for(var e=0;e<this.stackSize;e++){var t=this.langKeys[e],n=this.translateTitle(t);this.tabStack[e].childNodes[0].nodeValue=n}},e.prototype.showPane=function(e,t,n,s){var r=this;$(this.paneWrapper).empty(),$(this.paneWrapper).show(),e.lang!==i.settings.lang&&e.changeLang(i.settings.lang);var l=document.getElementById("wv-ribbon");this.paneWrapper.style.height="calc(100% - "+l.clientHeight+"px)",document.addEventListener("mousemove",this.checkTarget),document.addEventListener("mousedown",this.checkTarget);var c=document.createElement("div");c.className="minimized-active-pane-tab";var d=this.translateTitle(t);c.textContent=d;var p=document.createElement("div");p.className="pane-tab-icon-wrapper",c.appendChild(p);var u=document.createElement("i");u.className="fal fa-thumbtack fa-rotate-90",u.style.cursor="pointer",p.appendChild(u),u.onclick=function(e){e.preventDefault(),e.stopPropagation();for(var t=o.appStates.panes.length,i=0;i<t;i++)o.appStates.panes[i].paneId===n&&(o.appStates.panes[i].minimized=!1);localStorage.setItem("panePositions",JSON.stringify(o.appStates.panes)),a.prependPane(n),$(r.paneWrapper).hide(),"left"===r.orientation?r.paneWrapper.style.left="-100%":r.paneWrapper.style.right="-100%",$(s).remove(),r.stackSize--;var l=r.tabStack.indexOf(c);r.tabStack.splice(l,1),r.paneArray.splice(l,1),r.langKeys.splice(l,1),0===r.stackSize&&($(r.panel).hide(),r.isVisible=!1,a.paneResize(!0),"left"===r.orientation?r.panes.style.left="0":r.panes.style.right="0")};var h=document.createElement("i");h.className="fal fa-times",h.style.marginLeft="10px",h.style.cursor="pointer",p.appendChild(h),this.paneWrapper.appendChild(c),this.paneWrapper.appendChild(this.presetTable),e.stack.checkForPresets(n,this.presetTable),this.contentArea.style.height=this.paneWrapper.clientHeight-c.clientHeight-5+"px",this.paneWrapper.appendChild(e.mount),$(e.mount).empty(),e.mount.appendChild(e.wrapperEl);var m=e.searchForEvent(e.paneId);m?e.update(m):e.update(),this.verticalDivider=document.createElement("div"),this.verticalDivider.className="vertical-pane-divider",o.appStates.lockPanes?this.verticalDivider.style.pointerEvents="none":(this.verticalDivider.addEventListener("mousedown",this.handleVerticalDown),$(this.verticalDivider).kendoTouch({dragstart:function(e){r.stickyPane=!0,r.paneWrapper.style.transition="0s"},drag:function(e){var t;if("left"===r.orientation)t=e.touch.x.location-20;else{t=document.getElementById("wv-dock").clientWidth-e.touch.x.location-20}r.paneWrapper.style.width=t+"px",r.paneWidth=t},dragend:function(e){setTimeout(function(e){r.stickyPane=!1},200),localStorage.setItem("WV"+r.orientation+"MinimizedPaneWidth",r.paneWidth.toString()),r.paneWrapper.style.transition="1s"}})),this.paneWrapper.appendChild(this.verticalDivider),h.onclick=function(t){t.preventDefault(),t.stopPropagation(),$(s).remove(),e.stack.removePane(n),r.stackSize--;var i=r.tabStack.indexOf(c);r.tabStack.splice(i,1),r.paneArray.splice(i,1),r.langKeys.splice(i,1),0===r.stackSize&&($(r.panel).hide(),r.isVisible=!1,a.paneResize(!0),"left"===r.orientation?r.panes.style.left="0":r.panes.style.right="0");for(var l=o.appStates.panes.length,d=0;d<l;d++)o.appStates.panes[d].paneId===n&&(o.appStates.panes[d].visible=!1);vsClient.emit("pane-closed",n),localStorage.setItem("panePositions",JSON.stringify(o.appStates.panes))},"left"===this.orientation?(this.paneWrapper.style.left="20px",this.verticalDivider.style.right="0"):(this.paneWrapper.style.right="20px",this.verticalDivider.style.left="0"),e.addMethods()},e.prototype.checkTarget=function(e){if(!this.panel.contains(e.target)&&!e.target.correspondingUseElement&&!this.stickyPane){for(var t=0;t<this.stackSize;t++)this.tabStack[t].style.backgroundColor="rgb(225, 225, 225)";document.removeEventListener("mousemove",this.checkTarget),document.removeEventListener("mousedown",this.checkTarget),"left"===this.orientation?this.paneWrapper.style.left=-(this.paneWidth+20)+"px":this.paneWrapper.style.right=-(this.paneWidth+20)+"px"}},e.prototype.handleVerticalDown=function(e){e.preventDefault(),this.stickyPane=!0,this.paneWrapper.style.transition="0s",document.addEventListener("mousemove",this.handleVerticalMove),document.addEventListener("mouseup",this.handleVerticalUp)},e.prototype.handleVerticalMove=function(e){var t;if("left"===this.orientation)t=e.pageX-20;else{t=document.getElementById("wv-dock").clientWidth-e.pageX-20}this.paneWrapper.style.width=t+"px",this.paneWidth=t},e.prototype.handleVerticalUp=function(e){var t=this;setTimeout(function(e){t.stickyPane=!1},200),localStorage.setItem("WV"+this.orientation+"MinimizedPaneWidth",this.paneWidth.toString()),this.paneWrapper.style.transition="1s",document.removeEventListener("mousemove",this.handleVerticalMove),document.removeEventListener("mouseup",this.handleVerticalUp)},e.prototype.reset=function(){this.paneWidth=document.body.clientWidth/5,this.paneWrapper.style.width=this.paneWidth+"px","left"===this.orientation?this.panes.style.left="0":this.panes.style.right="0",$(this.panel).hide(),$(this.paneWrapper).empty(),$(this.tabBar).empty(),this.isVisible=!1,this.stackSize=0,this.tabStack=[],this.paneArray=[]},e.prototype.closeTabById=function(e){var t=this.paneArray.indexOf(e);if(-1!==t){this.paneArray.splice(t,1),this.langKeys.splice(t,1);var n=this.tabStack.splice(t,1)[0];$(n).remove(),this.stackSize--,0===this.stackSize&&($(this.panel).hide(),this.isVisible=!1,"left"===this.orientation?this.panes.style.left="0":this.panes.style.right="0")}},e}();t.MinimizedPaneStack=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(0),o=n(4),s=n(10),r=n(17),l=n(11),c=function(){function e(e,t,n){var i=this;this.isVisible=!1,this.stackSize=0,this.stack=[],this.stackedTabs=[],this.height="50%",this.hasPresets=!1,this.parent=e,this.pos=n,this.orientation=t.orientation,this.tabBar=document.createElement("div"),this.tabBar.className="pane-tab-bar",this.tabBarTitle=document.createElement("div"),this.tabBarTitle.textContent="No Tab",this.tabBarTitle.className="pane-tab-bar-title",this.tabBarTitle.onclick=function(e){i.tabStack.click()},this.parent.appendChild(this.tabBarTitle),this.parent.appendChild(this.tabBar),this.presetTable=document.createElement("table"),this.presetTable.className="pane-content",this.presetTable.style.marginTop="5px",this.presetTable.style.marginBottom="-5px","right"===this.orientation&&(this.presetTable.style.marginLeft="5px"),$(this.presetTable).hide(),this.parent.appendChild(this.presetTable),this.contentArea=document.createElement("div"),this.contentArea.className="pane-content-area","right"===this.orientation&&(this.contentArea.style.marginLeft="5px",this.contentArea.style.position="relative",this.contentArea.style.right="5px"),this.parent.appendChild(this.contentArea),this.minimizedStack=t,this.tabStack=document.createElement("div"),this.tabStack.className="pane-tab",this.tabStack.style.minWidth="min-content",this.tabStack.style.overflow="visible",this.tabStackCountEl=document.createElement("span"),this.tabStackCountEl.style.marginRight="3px",this.tabStack.appendChild(this.tabStackCountEl);var a=document.createElement("i");a.className="fas fa-caret-down",this.tabStack.appendChild(a),this.tabList=document.createElement("div"),this.tabList.className="stacked-pane-tab-list-wrapper",vsClient.on("@changeLang",function(e){i.minimizedStack.changeTitleLang();for(var t=0;t<i.stackSize;t++)(i.stack[t].pane.adapter||i.stack[t].pane.noAdapter)&&i.stack[t].pane.changeLang(e),i.stack[t].pane.lang=e,i.setTitle(i.stack[t].tab,i.stack[t].pane.langId,!1);i.activePane&&(i.tabBarTitle.textContent=i.setTitle(void 0,i.activePane.langId,!1)+"...")}),$(this.tabStack).hide(),this.tabBar.appendChild(this.tabStack),this.tabStack.onclick=function(e){$(i.tabList).empty(),$(i.tabList).show();var t=i.stackedTabs.length,n=document.createElement("div");i.tabList.appendChild(n),i.tabStack.appendChild(i.tabList);for(var a=0;a<t;a++)!function(e){var t=i.stackedTabs[e],a=document.createElement("div");a.className="stacked-pane-tab",a.id=t.id+"-stacked-tab";var o=document.createElement("span");o.textContent=t.tab.textContent,a.appendChild(o),n.appendChild(a),a.onclick=function(e){e.preventDefault(),e.stopPropagation();for(var n=0;n<i.stackSize;n++)if(i.stack[n].id===t.id){var a=i.stack.splice(n,1)[0];i.stack.unshift(a),i.tabBar.removeChild(a.tab),i.tabBar.insertBefore(a.tab,i.tabBar.firstChild),$(a.tab).click(),i.tabResize(!1)}$(i.tabList).hide(),document.removeEventListener("mousedown",i.checkStackTabClick)}}(a);document.addEventListener("mousedown",i.checkStackTabClick)},this.checkStackTabClick=this.checkStackTabClick.bind(this),$(this.parent).hide()}return e.prototype.setTitle=function(e,t,n){var a;return a=_lang_data[t]&&_lang_data[t][i.settings.lang]?_lang_data[t][i.settings.lang]:_custom_lang_data&&_custom_lang_data[t]&&_custom_lang_data[t][i.settings.lang]?_custom_lang_data[t][i.settings.lang]:_lang_data[t]&&_lang_data[t].ENU?_lang_data[t].ENU:_custom_lang_data&&_custom_lang_data[t]&&_custom_lang_data[t].ENU?_custom_lang_data[t].ENU:t,n?e.textContent=a:e&&$(e).contents().filter(function(){return 3==this.nodeType}).replaceWith(a),a},e.prototype.checkStackTabClick=function(e){this.tabList.contains(e.target)||($(this.tabList).hide(),document.removeEventListener("mousedown",this.checkStackTabClick))},e.prototype.addPane=function(e,t){var n=this.stack.map(function(e){return e.id}).indexOf(t);if(-1!==n)return void $(this.stack[n].tab).click();this.addTab(e,t),e.setStack(this),this.activePane=e,e.registerInStack(this.contentArea),"wv-views"===t&&(e.wrapperEl.style.overflow="hidden"),this.isVisible=!0,this.tabBarTitle.textContent=this.setTitle(void 0,e.langId,!1)+"...";var i=s.findPaneButton(t);i&&i.applyHighlight(!0),a.paneStackIncrement(this.pos)},e.prototype.checkForPresets=function(e,t){try{if(_PanePresets[e]){$(this.presetTable).empty(),t&&$(t).empty();var n=document.createElement("tbody");t?t.appendChild(n):this.presetTable.appendChild(n);var i=document.createElement("tr");n.appendChild(i);var a=new l.PlainGroup(1,n,"ID_PRESETS_HEATMAP",""),o=_PanePresets[e];this.presetSelect=new l.PlainSelectSingleLine(2,n,this.selectPreset.bind(this)),a.children.push(this.presetSelect.wrapperEl);for(var s=[],r=0;r<o.length;r++){var c={name:o[r].name,val:o[r].settings,isDefault:o[r].isDefault,isCustom:!1};s.push(c)}var d=localStorage.getItem("WVPreset_"+this.activePane.paneId);if(null!==d)for(var p=JSON.parse(d),r=0;r<p.length;r++){var c={name:p[r].name,val:p[r].val,isDefault:p[r].isDefault,isCustom:!0};s.push(c)}this.presetSelect.setOptions(s);var u=this.activePane.activePreset;u&&("<Not saved>"===u&&this.changeToCustomPreset(),this.presetSelect.setActivePreset(u));var h=this.presetSelect.getActivePreset();this.selectPreset(h.val);try{_UseCachedSettings&&this.addPresetButtons(this.presetSelect.selectWrapperEl)}catch(e){this.addPresetButtons(this.presetSelect.selectWrapperEl)}t?$(t).show():$(this.presetTable).show(),this.hasPresets=!0}else t?$(t).hide():$(this.presetTable).hide(),this.hasPresets=!1}catch(e){t?$(t).hide():$(this.presetTable).hide(),this.hasPresets=!1}},e.prototype.addPresetButtons=function(e){var t=this;this.presetNameEl=new l.SimplePaneInlineModal(e,this.addPreset.bind(this));var n=document.createElement("span");n.className="pane-buttons-tab",n.style.position="relative",n.style.top="1px",e.appendChild(n);var i=document.createElement("i");i.className="fas fa-sync-alt tree-header-action-icon",i.onclick=function(e){t.restoreDefaultPreset()},n.appendChild(i);var a=document.createElement("i");a.className="fas fa-plus-circle tree-header-action-icon",a.onclick=function(e){for(var n={},i=t.activePane.adapter.settingItems,a=0;a<i.length;a++){var o=i[a];"hidden"!==o.visualStatus&&t.parseItem(o,n)}t.newPresetValue=r.parse("Settings",n,{declaration:{include:!1},format:{pretty:!1}}),t.presetNameEl.show()},n.appendChild(a);var o=document.createElement("i");o.className="fas fa-minus-circle tree-header-action-icon",o.onclick=function(e){t.deletePreset()},n.appendChild(o);var s=document.createElement("i");s.className="fas fa-bookmark tree-header-action-icon",s.style.left="5px",s.onclick=function(e){t.setPresetDefault()},n.appendChild(s)},e.prototype.changeToCustomPreset=function(){for(var e={},t=this.activePane.adapter.settingItems,n=0;n<t.length;n++){var i=t[n];"hidden"!==i.visualStatus&&this.parseItem(i,e)}var a=r.parse("Settings",e,{declaration:{include:!1},format:{pretty:!1}}),o={isDefault:!1,name:"<Not saved>",val:a,isCustom:!0,isActive:!0};this.presetSelect.removeOptionByName("<Not saved>"),this.presetSelect.addOption(o),this.activePane.activePreset=o.name},e.prototype.parseItem=function(e,t){for(var n=1;n<e.path.length;n++){var i=e.path[n];t=t[i]=n===e.path.length-1?e.value:t[i]||{}}},e.prototype.selectPreset=function(e,t){void 0===t&&(t=!0),t&&(this.activePane.activePreset=this.presetSelect.getActivePreset().name);var n='<Call Method="SetSceneSettings">'+e+"</Call>";vsClient.command.executeXML(n),n='<Call Method="GetSceneSettings"></Call>',vsClient.command.executeXML(n)},e.prototype.restoreDefaultPreset=function(){var e=this.presetSelect.restoreDefault();this.selectPreset(e.val)},e.prototype.addPreset=function(e){var t,n=localStorage.getItem("WVPreset_"+this.activePane.paneId),i={isDefault:!1,name:e,val:this.newPresetValue,isCustom:!0};if(null!==n){t=JSON.parse(n),Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++)t[a].name===e&&(i.name=e+"*");t.push(i)}else t=[i];localStorage.setItem("WVPreset_"+this.activePane.paneId,JSON.stringify(t)),this.presetSelect.addOption(i),this.presetSelect.removeOptionByName("<Not saved>")},e.prototype.deletePreset=function(){var e=this.presetSelect.getActivePreset();if(e.isCustom){this.presetSelect.removeOption(e);for(var t=JSON.parse(localStorage.getItem("WVPreset_"+this.activePane.paneId)),n=0;n<t.length;n++)if(t[n].name===e.name){t.splice(n,1);break}localStorage.setItem("WVPreset_"+this.activePane.paneId,JSON.stringify(t))}else{var i={ErrorCode:0,ErrorInfo:void 0,Identifier:"",Message:"Global presets cannot be deleted.",Type:["Event","Warning"]};vsClient.emit("ShowMessageBox",i)}},e.prototype.setPresetDefault=function(){var e=this.presetSelect.getActivePreset();if(e.isCustom){for(var t=JSON.parse(localStorage.getItem("WVPreset_"+this.activePane.paneId)),n=0;n<t.length;n++)t[n].name===e.name?t[n].isDefault=!0:t[n].isDefault=!1;localStorage.setItem("WVPreset_"+this.activePane.paneId,JSON.stringify(t))}this.presetSelect.setDefault(e)},e.prototype.addTab=function(e,t,n){var s=this;void 0===n&&(n=!0),$(this.parent).show();var r=document.createElement("div");r.className="pane-tab active-pane-tab",o.appStates.lockPanes||(r.draggable=!0),r.id=t+"-pane-tab";var l=e.langId,c=this.setTitle(r,e.langId,!0),d=document.createElement("div");if(d.className="pane-tab-icon-wrapper",r.appendChild(d),o.appStates.paneHelpLinks[t]){var p=document.createElement("i");p.className="fas fa-question-circle",p.style.marginRight="10px",d.appendChild(p),p.onclick=function(e){e.preventDefault(),e.stopPropagation();var n=!1;try{n=_UseOfflineHelp}catch(e){}var s=n?o.appStates.paneHelpLinks[t].replace("php","html"):o.appStates.paneHelpLinks[t],r=n?"/Help/webviewer/"+a.mapCountry(i.settings.lang)+"/"+s:"https://viewer.kisters.de/help/webviewer/"+o.appStates.version+"/"+a.mapCountry(i.settings.lang)+"/"+s;window.open(r,"_blank")}}var u=!0;try{u=!_PopoutLock}catch(e){}if(u&&"wv-command"!==t){var h=document.createElement("i");h.className="far fa-window-restore",h.style.marginRight="10px",d.appendChild(h),h.onclick=function(e){e.preventDefault(),e.stopPropagation(),a.popout(t,l)}}var m=document.createElement("i");m.className="fal fa-thumbtack",m.style.marginRight="10px",d.appendChild(m),m.onclick=function(n){n.preventDefault(),n.stopPropagation(),s.minimizePane(e,t)};var f=document.createElement("i");f.className="fal fa-times",d.appendChild(f),f.onclick=function(e){e.preventDefault(),e.stopPropagation();for(var n=o.appStates.panes.length,i=0;i<n;i++)o.appStates.panes[i].paneId===t&&(o.appStates.panes[i].visible=!1);vsClient.emit("pane-closed",t),localStorage.setItem("panePositions",JSON.stringify(o.appStates.panes)),s.removePane(t)},r.addEventListener("dragstart",function(e){e.stopPropagation(),e.dataTransfer.setData("Text","mock"),$(".pane-drop").each(function(){$(this).show()});var n=document.elementFromPoint(e.pageX,e.pageY);$(n).hasClass("pane-tab")||$(".pane-drop").each(function(){this.style.pointerEvents="none",r.ondrag=function(e){var t=document.elementFromPoint(e.pageX,e.pageY);$(t).hasClass("pane-drop")||($(".pane-drop").each(function(){this.style.pointerEvents=""}),$(r).off("drag"))}}),$(s.contentArea).toggleClass("pane-in-drag"),a.setDraggedPane(t),r.appendChild(s.contentArea.cloneNode(!0)),$(s.contentArea).toggleClass("pane-in-drag"),$(s.contentArea).empty(),s.dragTime=e.timeStamp}),r.addEventListener("dragend",function(e){if(!(e.timeStamp-s.dragTime<100)){e.preventDefault(),$(r).remove(),$(".pane-drop").each(function(){$(this).removeClass("allow-pane-drop"),$(this).hide()});for(var n=0;n<s.stackSize;n++)if(s.stack[n].id===t){s.stack.splice(n,1),s.stackSize--;break}if(0===s.stackSize)$(s.parent).hide(),s.isVisible=!1;else{for(var i=!0,n=0;n<s.stackSize;n++)s.stack[n].id===t&&(i=!1);i&&$(s.stack[0].tab).click()}a.paneStackDecrement(s.pos),a.prependPane(t)}}),$(r).click(function(t){t.preventDefault(),t.stopPropagation(),s.activePane=e,e.setStack(s),e.registerInStack(s.contentArea),s.tabBarTitle.textContent=s.setTitle(void 0,e.langId,!1)+"...";for(var n=0;n<s.stackSize;n++)s.stack[n].active=s.stack[n].tab===r,s.activeTab=v,$(s.stack[n].tab).removeClass("active-pane-tab"),$(s.stack[n].tabIconWrapper).hide();$(r).addClass("active-pane-tab"),$(d).show(),s.tabResize(!1)});for(var v={name:c,langId:l,id:t,tab:r,active:!0,pane:e,minimized:!1,tabIconWrapper:d,width:0},g=0;g<this.stackSize;g++)this.stack[g].active=!1,$(this.stack[g].tab).removeClass("active-pane-tab"),$(this.stack[g].tabIconWrapper).hide();this.stackSize++,this.stack.push(v),this.tabBar.appendChild(r),$(this.tabStack).remove(),this.tabBar.appendChild(this.tabStack),v.width=$(r).outerWidth(!0),this.activeTab=v},e.prototype.minimizePane=function(e,t){for(var n=o.appStates.panes.length,i=0;i<n;i++)o.appStates.panes[i].paneId===t&&(o.appStates.panes[i].minimized=!0);localStorage.setItem("panePositions",JSON.stringify(o.appStates.panes)),this.minimizedStack.registerPane(e,t),this.removePane(t)},e.prototype.removePane=function(e,t){void 0===t&&(t=!1);var n;if("wv-neighbourhoodsearch"===e){vsClient.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>Select</SelectionMode></Call>'),o.appStates.selectionMode="Select";var i=s.findButton("ID_RIBBON_SELECT");i&&i.applyHighlight(!0)}else if("wv-clash"===e){vsClient.command.executeXML('<Call Method="DeactivateClash"></Call>')}for(var r=0;r<this.stackSize;r++)if(e===this.stack[r].id){n=this.stack[r],$(n.tab).remove(),this.stack.splice(r,1),this.stackSize--,this.stackSize>0?0===r?$(this.stack[r].tab).click():$(this.stack[r-1].tab).click():($(this.parent).hide(),this.activePane=void 0,this.isVisible=!1),a.paneStackDecrement(this.pos);break}if(!t){var l=s.findPaneButton(e);l&&l.applyHighlight(!1)}},e.prototype.tabResize=function(e){void 0===e&&(e=!0),this.stackedTabs=[];for(var t=!0,n=this.activeTab?this.activeTab.width:0,i=n+55*(this.stackSize-1)>this.tabBar.clientWidth?this.tabBar.clientWidth-45:this.tabBar.clientWidth,a=0;a<this.stackSize;a++){var o=this.stack[a];n+=o.active?0:55,n<i?$(o.tab).removeClass("pane-tab-hidden"):($(o.tab).addClass("pane-tab-hidden"),$(this.tabStack).show(),this.stackedTabs.push(o),t=!1)}if(this.tabStackCountEl.textContent="+"+this.stackedTabs.length.toString(),0!==this.stackSize&&this.stackedTabs.length===this.stackSize?($(this.tabBarTitle).show(),$(this.tabStack).addClass("pane-stack-right-floating")):($(this.tabBarTitle).hide(),$(this.tabStack).removeClass("pane-stack-right-floating")),t&&$(this.tabStack).hide(),e)for(var s=this.stackedTabs.length,a=0;a<s;a++){var r=this.stackedTabs[a];if(r&&r.id===this.activePane.paneId)for(var l=0;l<this.stackSize;l++)if(this.stack[l].id===r.id){var c=this.stack.splice(l,1)[0];this.stack.unshift(c),this.tabBar.removeChild(c.tab),this.tabBar.insertBefore(c.tab,this.tabBar.firstChild),$(r.tab).click(),$(r.tab).removeClass("pane-tab-hidden"),this.stackedTabs.splice(a,1),this.stackedTabs.push(this.stack[1]),this.tabStackCountEl.textContent=this.stackedTabs.length.toString(),this.tabResize(!1)}}},e.prototype.resize=function(e,t){void 0===t&&(t=!0);var n=this.hasPresets?this.presetTable.clientHeight:0;if(e){if("0"===e)$(this.parent).hide();else if("100%"!==e&&(this.height=e),this.parent.style.height=e,this.contentArea.style.height=this.parent.clientHeight-this.tabBar.clientHeight-6-n+"px",this.activePane){var i=this.activePane.searchForEvent(this.activePane.paneId);i&&(this.activePane.adapter||this.activePane.noAdapter)?this.activePane.update(i):(this.activePane.adapter||this.activePane.noAdapter)&&this.activePane.update()}}else if(this.contentArea.style.height=this.parent.clientHeight-this.tabBar.clientHeight-6-n+"px",this.activePane){var i=this.activePane.searchForEvent(this.activePane.paneId);i?this.activePane.update(i):(this.activePane.adapter||this.activePane.noAdapter)&&this.activePane.update()}t&&this.tabResize()},e.prototype.reset=function(e){for(var t=this.stackSize,n=0;n<t;n++)this.removePane(this.stack[0].id);e&&(this.height="50%",this.minimizedStack.reset())},e.prototype.closePaneById=function(e,t,n){void 0===n&&(n=!1),t&&this.minimizedStack.closeTabById(e),this.removePane(e,n)},e}();t.PaneStack=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.searchCount=0,i.searchIndex=1,i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){var e=this;$("#wv-textsearch #OnTextSearchSearchClicked").off("click").click(this.textSearch),$("#wv-textsearch #UID_TEXT_SEARCH_TEXT").off("keyup").on("keyup",function(t){13===t.keyCode&&(t.preventDefault(),e.textSearch())}),$("#wv-textsearch #UID_TEXT_SEARCH_TEXT").off("keydown").on("keydown",function(e){13===e.keyCode&&e.preventDefault()}),$("#wv-textsearch #OnTextSearchNextResultClicked").click(function(e){vsClient.command.executeXML('<Call Method="HighlightNextTextSearchResult"></Call>'),vsClient.once("HighlightNextTextSearchResult",function(e){if("SUCCESS"===e.Error){vsClient.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),vsClient.once("GetHighlightedTextSearchResultIndex",function(e){vsClient.emit("TextSearchChangeIndex",e.Index)})}})}),$("#wv-textsearch #OnTextSearchPreviousResultClicked").click(function(e){vsClient.command.executeXML('<Call Method="HighlightPreviousTextSearchResult"></Call>'),vsClient.once("HighlightPreviousTextSearchResult",function(e){if("SUCCESS"===e.Error){vsClient.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),vsClient.once("GetHighlightedTextSearchResultIndex",function(e){vsClient.emit("TextSearchChangeIndex",e.Index)})}})})},t.prototype.textSearch=function(){var e=$("#UID_TEXT_SEARCH_TEXT").text();if(""!==e){vsClient.once("SearchText",function(e){"SUCCESS"===e.Error&&vsClient.emit("TextSearch",e.Results)});var t='<Call Method="SearchText"><SearchString>'+e+"</SearchString></Call>";vsClient.command.executeXML(t)}},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>TextSearchPane</Type></Call>'),vsClient.once("GetTemplate.TextSearchPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;n="TextSearchChanged",vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.TextSearchPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>TransformPane</Type></Call>'),vsClient.once("GetTemplate.TransformPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.adapter.updateValues(t.values)})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(n,i){if("toggle-folder-visibility"===i)return void t.adapter.updateValues(t.values);var r=n.item.path;if("Event"===r[0]){i=parseFloat(i).toString(),a.modifySettings(t.values,r,i);var l=s.serializeWithValue(r,i,["Type="+e.Event]);vsClient.command.executeXML(l)}else{a.modifySettings(o.settingsPane.sceneSettings,r,i);var l=s.serializeWithValue(r,i),c='<Call Method="SetSceneSettings"> '+l+" </Call>";vsClient.command.executeXML(c),t.hasPresets&&t.stack.changeToCustomPreset()}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.TransformPane=l},function(e,t,n){"use strict";function i(e,t){var n=$(e);$(n).children().first().css("border",t?"3px solid "+l.appStates.mainColor:"1px solid rgb(0, 0, 0)"),$(n).children().last().css("color",t?l.appStates.mainColor:"rgb(0, 0, 0)")}function a(e,t){var n='<Call Method="UpdateConfigurationView"><Position>'+t+"</Position>";n+="<Name>"+e.target.textContent+"</Name></Call>",vsClient.command.executeXML(n)}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),r=n(1),l=n(4),c=n(8),d=function(e){function t(t,n){var o=e.call(this,t,n)||this;o.scrollPos=0,o.currentPosition=0,o.duration=3.5,o.viewElements=[],o.hasMultiSelect=!1,o.positionArray=[],o.inDragPos=-1,o.tooltips=[],o.update=function(e){if(!e){var t="calc(100% - "+$(o.buttons).outerHeight(!0)+"px)";return void(o.el.style.height=t)}vsClient.setConfigurationViews(e),o.viewElements=[];var n=1e3;o.positionArray=[],o.tooltips=[];for(var s=0,r=e;s<r.length;s++){var d=r[s];!function(e){var t=document.createElement("div");t.classList.add("viewpane-item"),t.tabIndex=n++;var s=document.createElement("img");s.width=160,s.height=90,s.style.border="1px solid #000",s.src="data:image/jpeg;base64,"+e.Image,s.draggable=!1,s.style.pointerEvents="none",t.draggable=!0,t.appendChild(s);var r=document.createElement("div");r.className="viewpane-item-action-bar",t.appendChild(r);var d=document.createElement("i");d.className="fas fa-play view-action-icon";var p=new c.WVTooltip(d);p.setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_TOOLTIP[o.lang]),o.tooltips.push(p),r.appendChild(d),d.onclick=function(t){vsClient.setConfigurationViewPosition(parseInt(e.Position))};var u=document.createElement("i");u.className="fas fa-video view-action-icon";var h=new c.WVTooltip(u);h.setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_CAMERA_TOOLTIP[o.lang]),o.tooltips.push(h),r.appendChild(u),u.onclick=function(t){vsClient.setConfigurationViewPosition(parseInt(e.Position),!0,!1)};var m=document.createElement("i");m.className="fas fa-video-slash view-action-icon";var f=new c.WVTooltip(m);f.setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_STATE_TOOLTIP[o.lang]),o.tooltips.push(f),r.appendChild(m),m.onclick=function(t){vsClient.setConfigurationViewPosition(parseInt(e.Position),!1,!0)};var v=document.createElement("div");t.appendChild(v);var g=document.createElement("i");g.className="fas fa-edit",g.style.marginRight="5px";var C=document.createElement("span");v.appendChild(g),C.textContent=e.Name,v.appendChild(C),t.ondragstart=function(t){o.inDragPos=parseInt(e.Position)},t.ondragenter=function(e){e.preventDefault(),s.style.borderLeft="5px solid "+l.appStates.mainColor},t.ondragleave=function(e){e.preventDefault(),s.style.borderLeft="1px solid rgb(0, 0, 0)"},t.ondragover=function(e){e.preventDefault(),s.style.borderLeft="5px solid "+l.appStates.mainColor},t.ondrop=function(t){if(-1!==o.inDragPos){var n='<Call Method="MoveConfigurationView">';n+="<ConfigurationView>"+o.inDragPos+"</ConfigurationView>",n+="<Position>"+parseInt(e.Position)+"</Position></Call>",o.inDragPos=-1,n+='<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>',vsClient.command.executeXML(n)}},t.addEventListener("click",function(n){var a=o.content.querySelectorAll(".viewpane-item"),s=Array.prototype.slice.call(a),r=parseInt(e.Position)||0;n.ctrlKey?o.hasMultiSelect=!0:(o.hasMultiSelect=!1,o.positionArray=[]),o.hasMultiSelect?(-1===o.positionArray.indexOf(r)?(o.positionArray.push(r),i(t,!0)):(o.positionArray.splice(o.positionArray.indexOf(r),1),i(t,!1)),-1===o.positionArray.indexOf(o.currentPosition)&&void 0!==o.currentPosition&&(o.positionArray.push(o.currentPosition),i(t,!0)),o.currentPosition=void 0):(s.forEach(function(e){return i(e,!1)}),o.positionArray=[],o.currentPosition=r,i(t,!0))}),g.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=$(C);n.attr("contenteditable","true");var i=document.createRange();i.selectNodeContents(C);var o=window.getSelection();o.removeAllRanges(),o.addRange(i),n.focus(),n.blur(function(t){t.stopPropagation(),a(t,e.Position),n.off("blur"),n.attr("contenteditable","false")}),n.on("keydown",function(e){e.stopPropagation(),13===e.keyCode&&(e.preventDefault(),n.off("keydown"),n.attr("contenteditable","false"))}),n.on("keyup",function(e){e.stopPropagation()})}),$(t).kendoTouch({doubletap:function(n){o.activateView(e),i(t,!0),o.currentPosition=parseInt(e.Position)||0},hold:function(t){t.preventDefault();var n=$(C);n.attr("contenteditable","true"),n.focus();var i=document.createRange();i.selectNodeContents(C);var o=window.getSelection();o.removeAllRanges(),o.addRange(i),n.focus(),n.blur(function(t){t.stopPropagation(),a(t,e.Position),$(t.target).off("blur"),$(t.target).attr("contenteditable","false")}),n.on("keydown",function(e){e.stopPropagation(),13===e.keyCode&&(e.preventDefault(),$(e.target).off("keydown"),$(e.target).attr("contenteditable","false"))}),n.on("keyup",function(e){e.stopPropagation()})}}),o.content.appendChild(t),o.viewElements.push(t)}(d)}!o.viewElements.length||o.currentPosition&&0!==o.currentPosition||(vsClient.setDefaultConfigurationView(e[0]),$(o.viewElements[0]).children().first().css("border","3px solid "+l.appStates.mainColor),$(o.viewElements[0]).children().last().css("color",l.appStates.mainColor),o.currentPosition=0),o.el.scrollTop=o.scrollPos},o.noAdapter=!0,o.el=document.createElement("div"),o.el.classList.add("viewpane-innerwrapper"),o.el.onkeydown=function(e){e.preventDefault(),e.stopPropagation()},o.buttons=document.createElement("div"),o.buttons.classList.add("pane-buttons-tab");var s=document.createElement("i");s.className="fa fa-plus tree-header-action-icon",s.addEventListener("click",function(e){vsClient.command.executeXML('<Call Method="CreateConfigurationView"></Call>');vsClient.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')}),o.addTooltip=new c.WVTooltip(s),o.addTooltip.setTitle(_lang_data.ID_CREATE_CONFIGVIEW[o.lang]);var r=document.createElement("i");r.className="fa fa-trash tree-header-action-icon",r.addEventListener("click",function(e){var t=o.positionArray.length;if(t>0)for(var n=o.positionArray.sort(function(e,t){return e-t}),i=0;i<t;i++){var a="<Position>"+(n[i]-i)+"</Position>",s='<Call Method="DeleteConfigurationView">'+a+"</Call>";vsClient.command.executeXML(s)}else{var a="<Position>"+o.currentPosition+"</Position>",s='<Call Method="DeleteConfigurationView">'+a+"</Call>";vsClient.command.executeXML(s)}vsClient.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')}),o.deleteTooltip=new c.WVTooltip(r),o.deleteTooltip.setTitle(_lang_data.ID_DELETE_CONFIGVIEW[o.lang]);var d=document.createElement("i");d.className="fa fa-sync-alt tree-header-action-icon",d.addEventListener("click",function(e){var t=o.positionArray.length;if(t>0)for(var n=0;n<t;n++){var i="<Position>"+o.positionArray[n]+"</Position>",a='<Call Method="UpdateConfigurationView">'+i+"</Call>";vsClient.command.executeXML(a)}else{var i="<Position>"+o.currentPosition+"</Position>",a='<Call Method="UpdateConfigurationView">'+i+"</Call>";vsClient.command.executeXML(a)}vsClient.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')}),o.updateTooltip=new c.WVTooltip(d),o.updateTooltip.setTitle(_lang_data.ID_VIEWS_UPDATE_VIEW[o.lang]);var p=document.createElement("i");p.className="fas fa-home tree-header-action-icon",p.addEventListener("click",function(e){vsClient.command.executeXML('<Call Method="ActivateOnSaveConfigurationView"></Call>')}),o.homeTooltip=new c.WVTooltip(p),o.homeTooltip.setTitle(_lang_data.ID_BUTTON_ACTIVATE_VIEW_ON_SAVE[o.lang]);var u=document.createElement("i");u.className="fa fa-backward tree-header-action-icon",u.addEventListener("click",function(e){var t='<Call Method="StartPlayConfigurationViews"><Reverse>true</Reverse><ConfigurationView>'+o.currentPosition+"</ConfigurationView></Call>";vsClient.command.executeXML(t)}),o.reversePlayTooltip=new c.WVTooltip(u),o.reversePlayTooltip.setTitle(_lang_data.ID_VIEWS_PLAY_BACKWARD[o.lang]);var h=document.createElement("i");h.className="fa fa-stop tree-header-action-icon",h.addEventListener("click",function(e){f()}),o.stopTooltip=new c.WVTooltip(h),o.stopTooltip.setTitle(_lang_data.ID_VIEWS_STOP[o.lang]),vsClient.on("OpenFile",function(e){f()}),vsClient.on("NewScene3D",function(e){f()}),vsClient.on("ImportFile",function(e){f()}),vsClient.on("GetSceneSettings",function(e){"SUCCESS"===e.Error&&(o.duration=parseInt(e.Settings.Scene.ConfigurationView.ViewPlay.DurationTime))});var m=document.createElement("i");m.className="fa fa-forward tree-header-action-icon",m.addEventListener("click",function(e){var t='<Call Method="StartPlayConfigurationViews"><Reverse>false</Reverse><ConfigurationView>'+o.currentPosition+"</ConfigurationView></Call>";vsClient.command.executeXML(t)}),o.playTooltip=new c.WVTooltip(m),o.playTooltip.setTitle(_lang_data.ID_VIEWS_PLAY_FORWARD[o.lang]),vsClient.on("ConfigurationViewPlaySelectionChange",function(e){var t=parseInt(e.Selection),n={pos:t,view:vsClient.getConfigurationViews()[t]};vsClient.setDefaultConfigurationView(vsClient.getConfigurationViews()[t]),vsClient.emit("ConfigurationViewChanged",n)}),vsClient.on("ConfigurationViewChanged",function(e){o.currentPosition=e.pos,o.viewElements[e.pos].focus(),o.viewElements.forEach(function(e){return i(e,!1)}),i(o.viewElements[e.pos],!0);vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')}),vsClient.on("ConfigurationViewPlayStart",function(e){u.style.color="true"===e.Reverse?l.appStates.mainColor:"black",m.style.color="true"===e.Reverse?"black":l.appStates.mainColor}),vsClient.on("ConfigurationViewPlayFinish",function(e){u.style.color="black",m.style.color="black"});var f=function(){vsClient.command.executeXML('<Call Method="StopPlayConfigurationViews"></Call>')},v=document.createElement("i");v.className="fas fa-file-pdf tree-header-action-icon",v.onclick=function(e){o.createPDF()},o.exportPDFTooltip=new c.WVTooltip(v),o.exportPDFTooltip.setTitle(_lang_data.ID_BUTTON_SAVE_VIEWS_PDF[o.lang]);var g=document.createElement("i");return g.className="fas fa-check-double tree-header-action-icon",g.onclick=function(e){o.selectAll()},o.selectAllTooltip=new c.WVTooltip(g),o.selectAllTooltip.setTitle(_lang_data.ID_RIBBON_SELECT_ALL[o.lang]),o.buttons.appendChild(p),o.buttons.appendChild(s),o.buttons.appendChild(g),o.buttons.appendChild(d),o.buttons.appendChild(r),o.buttons.appendChild(u),o.buttons.appendChild(h),o.buttons.appendChild(m),o.buttons.appendChild(v),o.content=document.createElement("div"),o.content.classList.add("viewpane-content"),o.el.appendChild(o.content),o.el.onscroll=function(e){o.scrollPos=o.el.scrollTop},o.wrapperEl.appendChild(o.buttons),o.wrapperEl.appendChild(o.el),o}return o(t,e),t.prototype.addMethods=function(){if(vsClient&&vsClient.command){vsClient.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')}},t.prototype.changeLang=function(e){for(var t=0;t<this.tooltips.length;t+=3)this.tooltips[t]&&this.tooltips[t].setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_TOOLTIP[e]),this.tooltips[t+1]&&this.tooltips[t+1].setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_CAMERA_TOOLTIP[e]),this.tooltips[t+2]&&this.tooltips[t+2].setTitle(_lang_data.ID_ACTIVATE_CONFIGURATION_VIEW_STATE_TOOLTIP[e]);this.homeTooltip.setTitle(_lang_data.ID_BUTTON_ACTIVATE_VIEW_ON_SAVE[e]),this.addTooltip.setTitle(_lang_data.ID_CREATE_CONFIGVIEW[e]),this.deleteTooltip.setTitle(_lang_data.ID_DELETE_CONFIGVIEW[e]),this.updateTooltip.setTitle(_lang_data.ID_VIEWS_UPDATE_VIEW[e]),this.reversePlayTooltip.setTitle(_lang_data.ID_VIEWS_PLAY_BACKWARD[e]),this.stopTooltip.setTitle(_lang_data.ID_VIEWS_STOP[e]),this.playTooltip.setTitle(_lang_data.ID_VIEWS_PLAY_FORWARD[e]),this.exportPDFTooltip.setTitle(_lang_data.ID_BUTTON_SAVE_VIEWS_PDF[e]),this.selectAllTooltip.setTitle(_lang_data.ID_RIBBON_SELECT_ALL[e])},t.prototype.selectAll=function(){var e=this;this.hasMultiSelect=!0,this.positionArray=[],this.viewElements.forEach(function(t,n){i(t,!0),e.positionArray.push(n)})},t.prototype.createPDF=function(){var e='<Call Method="GetViewsAsPDF" CustomId="WVViewPDF">';if(this.positionArray.length>0){this.positionArray.sort(function(e,t){return e-t}).forEach(function(t){e+="<Id>"+t+"</Id>"})}else e+="<Id>"+this.currentPosition+"</Id>";e+="</Call>",vsClient.command.executeXML(e),s.blockUI()},t.prototype.clearViews=function(){for(;this.content.firstChild;)this.content.removeChild(this.content.firstChild)},t.prototype.activateView=function(e){vsClient.setConfigurationViewPosition(parseInt(e.Position))},t}(r.PaneTemplate);t.ViewPane=d},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-visibilitytest #OnVisibilityTestComputeClicked").click(function(e){vsClient.command.executeXMLAsync('<Call Method="Compute"><Mode>VisibilityTest</Mode></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>VisibilityTestPane</Type></Call>'),vsClient.once("GetTemplate.VisibilityTestPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(e,n){if("toggle-folder-visibility"===n)return void t.adapter.updateValues(t.values);var i=e.item.path;a.modifySettings(o.settingsPane.sceneSettings,i,n);var r=s.serializeWithValue(i,n),l='<Call Method="SetSceneSettings"> '+r+" </Call>";vsClient.command.executeXML(l),t.hasPresets&&t.stack.changeToCustomPreset()}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.VisibilityTestPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(0),s=n(3),r=n(1),l=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update=function(e){i.values={Event:e&&!e.Type&&i.values&&i.values.Event&&i.values.Event.Type?i.values.Event:e,Settings:o.settingsPane.sceneSettings?o.settingsPane.sceneSettings.Settings:void 0},i.adapter.updateValues(i.values)},i.el=document.createElement("table"),i.el.classList.add("pane-content"),i.wrapperEl.appendChild(i.el),i}return i(t,e),t.prototype.addMethods=function(){$("#wv-wallthickness #OnWallthicknessComputeClicked").click(function(e){vsClient.command.executeXML('<Call Method="Compute"><Mode>Wallthickness</Mode></Call>')}),$("#wv-wallthickness #OnWallthicknessStopComputationClicked").click(function(e){vsClient.command.executeXML('<Call Method="StopComputation"></Call>')}),$("#wv-wallthickness #OnWallthicknessResetClicked").click(function(e){vsClient.command.executeXML('<Call Method="ResetWallthicknessVisualization"></Call>')})},t.prototype.changeLang=function(e){var t=this;vsClient.command.executeXML('<Call Method="GetTemplate"><Type>WallThicknessPane</Type></Call>'),vsClient.once("GetTemplate.WallThicknessPane",function(e){var n=e.Source.Template;t.adapter.fromTemplate(n),t.addMethods()})},t.prototype.fromTemplate=function(e){var t=this;if(this.adapter=new a.PaneAdapter(this.el),this.adapter.fromTemplate(e),this.adapter.on("user-input",function(n,i){if("toggle-folder-visibility"===i)return void t.adapter.updateValues(t.values);var r=n.item.path;if(r.length>1&&"Preset"===r[1]&&"USERDEF"!==i){var l='<Call Method="ActivatePreset"><Type>WallthicknessHeatmap</Type>';l+="<Identifier>"+i+"</Identifier></Call>",vsClient.command.executeXML(l),vsClient.on("ActivatePreset",function(e){vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')})}else if("Event"===r[0]){i=parseFloat(i).toString(),a.modifySettings(t.values,r,i);var l=s.serializeWithValue(r,i,["Type="+e.Event]);vsClient.command.executeXML(l)}else{a.modifySettings(o.settingsPane.sceneSettings,r,i);var l=s.serializeWithValue(r,i),c='<Call Method="SetSceneSettings"> '+l+" </Call>";vsClient.command.executeXML(c),t.hasPresets&&t.stack.changeToCustomPreset()}}),e.Event){var n=e.Event;vsClient.removeListener(n,this.update),vsClient.on(n,this.update)}},t}(r.PaneTemplate);t.WallthicknessPane=l},function(e,t,n){"use strict";function i(e){return e-Z.getBoundingClientRect().left}function a(e){return e-Z.getBoundingClientRect().top}function o(e){if(!A.appStates.touchActive)return void e.sender.cancel();var t=i(e.touch.x.client),n=a(e.touch.y.client);!0!==e.event.altKey&&e.event.ctrlKey;var o='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>";U||(o+='<Call Method="MouseDown" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>Left</MouseButton></Call>",U=!0),vsClient.command.executeXMLMouse(o)}function s(e){A.appStates.lastGestureDistance=e.distance,A.appStates.lastGestureCenterX=i(e.center.x),A.appStates.lastGestureCenterY=a(e.center.y);var t='<Call Method="SetMouseButtonFunctions" Response="false"><LeftMouseButtonFunction>Pan</LeftMouseButtonFunction></Call>';t+='<Call Method="MouseDown" Response="false"><X>'+A.appStates.lastGestureCenterX+"</X><Y>"+A.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>",vsClient.command.executeXMLMouse(t)}function r(e){var t=!1;A.appStates.lastGestureDelta=e.distance-A.appStates.lastGestureDistance,Math.abs(A.appStates.lastGestureDelta)>10&&(t=!0,A.appStates.lastGestureDistance=e.distance),A.appStates.lastGestureCenterX=i(e.center.x),A.appStates.lastGestureCenterY=a(e.center.y);var n='<Call Method="MouseMove" Response="true"><X>'+A.appStates.lastGestureCenterX+"</X><Y>"+A.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>";t?vsClient.command.executeXMLZoomMouseWheel(A.appStates.lastGestureCenterX,A.appStates.lastGestureCenterY,A.appStates.lastGestureDelta):vsClient.command.executeXMLMouse(n)}function l(){var e='<Call Method="MouseUp" Response="false"><X>'+A.appStates.lastGestureCenterX+"</X><Y>"+A.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>";e+='<Call Method="SetMouseButtonFunctions" Response="false"><LeftMouseButtonFunction>'+A.appStates.mouseLeftButtonMode+"</LeftMouseButtonFunction></Call>",vsClient.command.executeXMLMouse(e)}function c(e){if(!A.appStates.touchGestureActive&&!A.appStates.mouseActive){e.preventDefault();var t=i(e.touch.x.client),n=a(e.touch.y.client);"RectZoom"!==A.appStates.mouseLeftButtonMode&&"RectSelect"!=A.appStates.mouseLeftButtonMode||vsClient.startRect(t,n);var o='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>";o+='<Call Method="MouseDown" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>Left</MouseButton></Call>",vsClient.command.executeXMLMouse(o)}}function d(e){if(!A.appStates.touchGestureActive&&!A.appStates.mouseActive){e.preventDefault();var t=i(e.touch.x.client),n=a(e.touch.y.client),o='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>Left</MouseButton></Call>";"RectZoom"!==A.appStates.mouseLeftButtonMode&&"RectSelect"!=A.appStates.mouseLeftButtonMode||!A.appStates.drawRect||-1!==A.appStates.interactionMode.indexOf("Flythrough")?vsClient.command.executeXMLMouseMove(o):vsClient.drawRect(t,n)}}function p(e){if(!A.appStates.touchGestureActive&&!A.appStates.mouseActive){e.preventDefault();var t=i(e.touch.x.client),n=a(e.touch.y.client),o='<Call Method="MouseUp" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>Left</MouseButton></Call>";vsClient.command.executeXMLMouse(o)}}function u(e){if($("#floating-attribute-wrapper").remove(),!A.appStates.touchActive){A.appStates.mouseActive=!0,Y=!0;var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.pageX-n,o=e.pageY-i,s="None";switch(e.which){case 1:$("#wv-dock").toggleClass("disable-selection"),A.appStates.mouseLeftButtonDown=!0,s="Left","RectZoom"!==A.appStates.mouseLeftButtonMode&&"RectSelect"!==A.appStates.mouseLeftButtonMode||vsClient.startRect(a,o);break;case 2:s="Middle","RectZoom"!==A.appStates.mouseMiddleButtonMode&&"RectSelect"!==A.appStates.mouseMiddleButtonMode||vsClient.startRect(a,o);break;case 3:s="Right","RectZoom"!==A.appStates.mouseRightButtonMode&&"RectSelect"!==A.appStates.mouseRightButtonMode||vsClient.startRect(a,o)}var r='<Call Method="MouseDown"><X>'+a+"</X><Y>"+o+"</Y><MouseButton>"+s+"</MouseButton></Call>";vsClient.command.executeXMLMouse(r)}}function h(e){if(!A.appStates.touchActive&&(e.pageX!==A.appStates.lastPagePosX||e.pageY!==A.appStates.lastPagePosY)){A.appStates.lastPagePosX=e.pageX,A.appStates.lastPagePosY=e.pageY;var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.pageX-n,o=e.pageY-i;vsClient.mouseX=a,vsClient.mouseY=o;var s="None";switch(e.which){case 1:if(e.buttons>1){if(s="Middle",("RectZoom"===A.appStates.mouseMiddleButtonMode||"RectSelect"==A.appStates.mouseMiddleButtonMode)&&A.appStates.drawRect&&-1===A.appStates.interactionMode.indexOf("Flythrough")){if(!K){vsClient.startRect(a,o),K=!0;var r='<Call Method="MouseDown"><X>'+a+"</X><Y>"+o+"</Y><MouseButton>"+s+"</MouseButton></Call>";return void vsClient.command.executeXMLNoMirror(r)}return void vsClient.drawRect(a,o)}break}if(s="Left",A.appStates.mouseLeftButtonDown&&("RectZoom"===A.appStates.mouseLeftButtonMode||"RectSelect"==A.appStates.mouseLeftButtonMode)&&A.appStates.drawRect&&-1===A.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(a,o);break;case 2:if(("RectZoom"===A.appStates.mouseMiddleButtonMode||"RectSelect"==A.appStates.mouseMiddleButtonMode)&&A.appStates.drawRect&&-1===A.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(a,o);s="Middle";break;case 3:if(("RectZoom"===A.appStates.mouseRightButtonMode||"RectSelect"==A.appStates.mouseRightButtonMode)&&A.appStates.drawRect&&-1===A.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(a,o);s="Right"}var r='<Call Method="MouseMove" Response="true"><X>'+a+"</X><Y>"+o+"</Y><MouseButton>"+s+"</MouseButton></Call>";vsClient.command.executeXMLMouseMove(r)}}function m(e){if(A.appStates.lastMouseY=e.clientY,A.appStates.lastMouseX=e.clientX,!A.appStates.touchActive){var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.pageX-n,o=e.pageY-i,s="None";switch(e.which){case 1:$("#wv-dock").toggleClass("disable-selection"),s="Left",A.appStates.mouseLeftButtonDown=!1;break;case 2:s="Middle";break;case 3:s="Right"}var r="";!0===e.ctrlKey&&(r="<MouseFlag>Ctrl</MouseFlag>"),K&&(K=!1,s="Middle");var l='<Call Method="MouseUp" Response="false"><X>'+a+"</X><Y>"+o+"</Y>"+r+"<MouseButton>"+s+"</MouseButton></Call>";vsClient.command.executeXMLMouse(l),A.appStates.mouseActive=!1}}function f(e){e.preventDefault(),e.stopPropagation();var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.pageX-n,o=e.pageY-i,s="None";1===e.which&&(s="Left"),v(a,o,s)}function v(e,t,n){if(j)return void(j=!1);vsClient.command.executeXML('<Event Type="NodePropertiesChanged"></Event>'),vsClient.once("NodePropertiesChanged",function(i){if(i&&i.General&&"MarkupSet"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){vsClient.once("NodePropertiesChanged",function(n){g(n,e,t)})})}else if(i&&i.General&&"CreatedNotes"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){if(i&&"MarkupSet"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){vsClient.once("NodePropertiesChanged",function(n){g(n,e,t)})})}else{var a='<Call Method="MouseDoubleClick" Response="false"><X>'+e+"</X><Y>"+t+"</Y><MouseButton>"+n+"</MouseButton></Call>";vsClient.command.executeXMLMouse(a)}})}else if(i&&i.Markup)g(i,e,t);else{var a='<Call Method="MouseDoubleClick" Response="false"><X>'+e+"</X><Y>"+t+"</Y><MouseButton>"+n+"</MouseButton></Call>";vsClient.command.executeXMLMouse(a)}})}function g(e,t,n){if(e.Markup){A.appStates.preventGlobalKeyEvents=!0;var i,a=Z.getBoundingClientRect(),o=a.left,s=a.top;vsClient.command.executeXML('<Event Type="NodePropertiesChanged"><Markup><Text><Content>.</Content></Text></Markup></Event>');var r=document.createElement("div");r.contentEditable="true",r.className="editable-markup-overlay",t=Math.max(0,Math.min(t-150,Z.clientWidth-300)),n=Math.max(0,Math.min(n-50,Z.clientHeight-100)),r.style.top=n+s+"px",r.style.left=t+o+"px";var l=e.Markup.Text.Content;$(r).html(l),document.body.appendChild(r),r.focus(),window.getSelection().selectAllChildren(r),r.addEventListener("keydown",function(e){if(27===e.keyCode){A.appStates.preventGlobalKeyEvents=!1;var t='<Event Type="NodePropertiesChanged"><Markup><Text><Content>'+l+"</Content></Text></Markup></Event>";vsClient.command.executeXML(t),$(r).off("blur"),$(r).remove()}}),$(r).on("blur",function(e){A.appStates.preventGlobalKeyEvents=!1,i=r.innerText?r.innerText:".";var t='<Event Type="NodePropertiesChanged"><Markup><Text><Content>'+i+"</Content></Text></Markup></Event>";vsClient.command.executeXML(t),$(r).remove()})}}function C(e){e.preventDefault(),e=e.originalEvent;var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.pageX-n,o=e.pageY-i,s=e.deltaY,r=-1!=navigator.userAgent.indexOf("Firefox")?-.1*s:-.005*s,l='<Call Method="MouseWheel" Response="false"><X>'+a+"</X><Y>"+o+"</Y><Delta>"+r+" </Delta></Call>";vsClient.command.executeXMLMouse(l)}function _(e){try{if(_UseCachedSettings){var t=X.parseXML(localStorage.getItem("VSWVSettings"));R.settingsPane.updateSettings(t);var n='<Call Method="SetSettings">'+localStorage.getItem("VSWVSettings")+"</Call>";vsClient.command.executeXMLNoMirror(n)}else R.settingsPane.updateSettings(e)}catch(t){R.settingsPane.updateSettings(e)}}function I(e){if(e.FileName&&(A.appStates.fileName=e.FileName),"SUCCESS"!=e.Error){var t="SUCCESS"==e.Error;alert("Error on loading file! "+t)}else{var n=e.Type;if(A.appStates.fileType=n,"2D"===n)try{for(var g=0;g<_2DReducedSet.length;g++)$("#"+_2DReducedSet[g]).hide();for(var g=0;g<_3DReducedSet.length;g++)$("#"+_3DReducedSet[g]).show()}catch(e){}else try{for(var g=0;g<_2DReducedSet.length;g++)$("#"+_2DReducedSet[g]).show();for(var g=0;g<_3DReducedSet.length;g++)$("#"+_3DReducedSet[g]).hide()}catch(e){}vsClient.command.executeXMLNoMirror('<Call Method="GetSceneSettings"></Call>'),A.appStates.fileLoaded=!0,R.vsRibbon.reset();var _=R.modeltreePane.currentMaxVisible();if(-1!==A.appStates.popoutPanes.indexOf("wv-modeltree")){var I=A.appStates.popedOutWindows[A.appStates.popoutPanes.indexOf("wv-modeltree")].innerHeight-30,y=R.modeltreePane.lineHeight;_=Math.floor(I/y)}var E='<Call Method="VirtualTreeViewSetSize"><Size>'+_+"</Size></Call>";vsClient.command.executeXML(E);if(vsClient.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>'),"2D"===e.Type){vsClient.command.executeXML('<Call Method="GetPageCount"></Call>'),vsClient.once("GetPageCount",function(e){if("SUCCESS"!==e.Error)A.appStates.pageCount="";else{A.appStates.pageCount=e.Pages;R.vsRibbon.classes.PageInput[0].el.value="1 / "+e.Pages}})}$(Z).off("mousedown").on("mousedown",function(e){u(e)}),$(Z).off("mousemove").on("mousemove",function(e){h(e)}),$(Z).off("mouseup").on("mouseup",function(e){m(e)}),$(Z).off("dblclick").on("dblclick",function(e){f(e)}),$(Z).off("wheel").on("wheel",function(e){C(e)}),$(Z).off("mouseleave").on("mouseleave",function(e){m(e)}),Z.ontouchmove=S,z||(z=!0,$(Z).kendoTouch({doubleTapTimeout:250,multiTouch:!0,enableSwipe:!1,touchstart:function(e){A.appStates.mouseActive||e.event.originalEvent.pointerType&&"touch"!==e.event.originalEvent.pointerType?e.sender.cancel():A.appStates.touchActive=!0},gesturestart:function(e){A.appStates.touchGestureActive=!0,s(e)},gesturechange:function(e){r(e)},gestureend:function(e){e.preventDefault(),l()},drag:function(e){if(U)return void o(e);d(e)},dragstart:function(e){if(U)return void o(e);c(e)},dragend:function(e){if(U){e.sender.cancel(),U=!1;var t=i(e.touch.x.client),n=a(e.touch.y.client),o="";!0!==e.event.altKey&&!0!==e.event.ctrlKey||(o="<MouseFlag>Ctrl</MouseFlag>");var s='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>";return s+='<Call Method="MouseUp" Response="false"><X>'+t+"</X><Y>"+n+"</Y>"+o+"<MouseButton>Left</MouseButton></Call>",void vsClient.command.executeXMLMouse(s)}p(e),A.appStates.touchActive=!1,A.appStates.touchGestureActive=!1},hold:function(e){-1!==A.appStates.interactionMode.indexOf("Flythrough")&&o(e)},doubletap:function(e){e.preventDefault(),j=!1;var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.touch.x.location-n,o=e.touch.y.location-i,s="None";void 0===e.event.which||1!==e.event.which&&0!==e.event.which||(s="Left"),v(a,o,s),j=!0},tap:function(e){if(Y)return void(Y=!1);var t=Z.getBoundingClientRect(),n=t.left,i=t.top,a=e.touch.x.location-n,o=e.touch.y.location-i;$("#wv-dock").toggleClass("disable-selection"),A.appStates.mouseLeftButtonDown=!0,"RectZoom"!==A.appStates.mouseLeftButtonMode&&"RectSelect"!==A.appStates.mouseLeftButtonMode||vsClient.startRect(a,o);var s='<Call Method="MouseMove" Response="true"><X>';s+=a,s+="</X><Y>",s+=o,s+="</Y><MouseButton>None</MouseButton></Call>",vsClient.command.executeXMLNoMirror(s),s='<Call Method="MouseDown"><X>',s+=a+"</X><Y>",s+=o+"</Y>",s+="<MouseButton>",s+="Left</MouseButton></Call>",vsClient.command.executeXMLNoMirror(s),s='<Call Method="MouseUp"><X>',s+=a+"</X><Y>",s+=o+"</Y>",s+="<MouseButton>",s+="Left</MouseButton></Call>",vsClient.command.executeXMLNoMirror(s)}}));try{if(_ClosePanesOnOpenFile){if(R.resetPanes(!1),A.appStates.qsMode){var b=-1!==A.appStates.panes.map(function(e){return"wv-command"===e.paneId&&e.visible}).indexOf(!0),w=-1!==A.appStates.popoutPanes.indexOf("wv-command");b||w||R.prependPane("wv-command")}}else R.closePane("wv-neighbourhoodsearch"),R.closePane("wv-split")}catch(e){R.closePane("wv-neighbourhoodsearch"),R.closePane("wv-split")}}}function S(e){e.preventDefault(),e.stopPropagation()}function y(e){var t=e.Session,n=e.Client;if(se=e.NewSession,n&&(localStorage.setItem("WVClient",n),vsClient.initOptions.client=n),t){if(A.appStates.session&&se){var i={ErrorCode:0,ErrorInfo:"SessionInvalid",Identifier:"SessionInvalid",Message:"Invalid session.",Type:["Event","Error"]};vsClient.emit("ShowMessageBox",i),vsClient.vsCanvas.setDefaultImage()}A.appStates.session=t}}function E(e){if(e.CustomId&&-1!==e.CustomId.indexOf("VSOpen")){A.appStates.VisShareSpec=e.CustomId,-1!==e.CustomId.indexOf("VSName")&&(document.title=e.CustomId.split("VSName")[1]);var t=e.CustomId.split("VSOpen")[1].split("_")[0];"Write"===t?$("#ID_RIBBON_VISSHARE_SAVE").hide():"None"===t&&R.vsRibbon.deleteShareRibbon()}else R.vsRibbon.deleteShareRibbon()}function b(e){switch(e.split("-")[0].toLowerCase()){case"en":return"ENU";case"de":return"DEU";case"it":return"ITA";case"es":return"ESP";case"fr":return"FRA";case"ko":return"KOR";case"zh":return"CHS";case"ja":return"JPN";default:return"ENU"}}function w(e){if(!re){re=!0;var t=localStorage.getItem("WVLang");t||(t=b(navigator.language),vsClient.emit("@changeLang",t)),$("#wv-ribbon-language").val(t).change(),vsClient.setMaxListeners(30);vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>SettingsPane</Type></Call>'),vsClient.once("GetTemplate.SettingsPane",function(t){var n=t.Source.Template;R.settingsPane.fromTemplate(n);vsClient.command.executeXMLNoMirror('<Call Method="GetSettings"></Call>'),vsClient.once("GetSettings",function(t,n){var i=localStorage.getItem("VSWVSettings");t=de(t,"__text__"),t=de(t,"__ordinal__"),delete t.Settings.Renderer.General.Language;var a;t.Settings.Version&&(a=Array.isArray(t.Settings.Version)?t.Settings.Version[0]:t.Settings.Version),delete t.Settings.Version;var o=G.parse("Settings",t.Settings).replace("<?xml version='1.0'?>","");o=o.replace("<Settings>",'<Settings Version="'+a+'">'),localStorage.setItem("VSWVDefaultSettings",o),null===i?(localStorage.setItem("VSWVSettings",o),R.settingsPane.updateSettings(t),M(e)):(_(t),M(e)),localStorage.setItem("WVSettingsChange"+A.appStates.sessionUID,JSON.stringify(t)),vsClient.on("GetSettings",function(e,t){e=de(e,"__text__"),e=de(e,"__ordinal__");var n;e.Settings.Version&&(n=Array.isArray(e.Settings.Version)?e.Settings.Version[0]:e.Settings.Version),delete e.Settings.Version;var i=G.parse("Settings",e.Settings).replace("<?xml version='1.0'?>","");i=i.replace("<Settings>",'<Settings Version="'+n+'">'),R.settingsPane.updateSettings(e),delete e.Settings.Renderer.General.Language,localStorage.setItem("VSWVSettings",i),localStorage.setItem("WVSettingsChange"+A.appStates.sessionUID,JSON.stringify(e))})}),vsClient.on("SetSceneSettings",function(){vsClient.command.executeXMLNoMirror('<Call Method="GetSceneSettings"></Call>')}),vsClient.on("SetSettings",function(){vsClient.command.executeXMLNoMirror('<Call Method="GetSettings"></Call>')})}),vsClient.on("GetSceneSettings",N);for(var n=' <Call Method="AddEventListener">',i=J.length,a=0;a<i;a++)n+="<Event>"+J[a]+"</Event>",vsClient.on(J[a],T);n+="</Call>",vsClient.command.executeXMLNoMirror(n);vsClient.command.executeXMLAsync('<Call Method="GetVersionInfo"></Call>'),vsClient.once("GetVersionInfo",function(e){var t=e.Version.split(".");t.pop(),A.appStates.version=t.join(".")})}}function T(e){Array.isArray(e.Type)||localStorage.setItem("WV"+e.Type+A.appStates.sessionUID,JSON.stringify(e))}function M(e){vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>PropertiesPane</Type></Call>'),vsClient.once("GetTemplate.PropertiesPane",function(e){var t=e.Source.Template;R.propertiesPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>MeasurementPane</Type></Call>'),vsClient.once("GetTemplate.MeasurementPane",function(e){var t=e.Source.Template;R.measurementPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>DraftAnglePane</Type></Call>'),vsClient.once("GetTemplate.DraftAnglePane",function(e){var t=e.Source.Template;R.draftAnglePane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>TransformPane</Type></Call>'),vsClient.once("GetTemplate.TransformPane",function(e){var t=e.Source.Template;R.transformPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>MarkupPane_Reduced</Type></Call>'),vsClient.once("GetTemplate.MarkupPane_Reduced",function(e){var t=e.Source.Template;R.markupPane_Reduced.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>MarkupPane</Type></Call>'),vsClient.once("GetTemplate.MarkupPane",function(e){var t=e.Source.Template;R.markupPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>SectionPane</Type></Call>'),vsClient.once("GetTemplate.SectionPane",function(e){var t=e.Source.Template;R.sectionPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>QuickComparePane</Type></Call>'),vsClient.once("GetTemplate.QuickComparePane",function(e){var t=e.Source.Template;R.quickComparePane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>ProjectedAreaPane</Type></Call>'),vsClient.once("GetTemplate.ProjectedAreaPane",function(e){var t=e.Source.Template;R.projectedAreaPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>ExactComparePane</Type></Call>'),vsClient.once("GetTemplate.ExactComparePane",function(e){var t=e.Source.Template;R.exactComparePane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>MirrorPane</Type></Call>'),vsClient.once("GetTemplate.MirrorPane",function(e){var t=e.Source.Template;R.mirrorPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>FilterPane</Type></Call>'),vsClient.once("GetTemplate.FilterPane",function(e){var t=e.Source.Template;R.filterPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>FlyThroughPane</Type></Call>'),vsClient.once("GetTemplate.FlyThroughPane",function(e){var t=e.Source.Template;R.flyThroughPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>DistortionPane</Type></Call>'),vsClient.once("GetTemplate.DistortionPane",function(e){var t=e.Source.Template;R.distortionPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>VisibilityTestPane</Type></Call>'),vsClient.once("GetTemplate.VisibilityTestPane",function(e){var t=e.Source.Template;R.visibilityTestPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>WallThicknessPane</Type></Call>'),vsClient.once("GetTemplate.WallThicknessPane",function(e){var t=e.Source.Template;R.wallthicknessPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>DrillholePane</Type></Call>'),vsClient.once("GetTemplate.DrillholePane",function(e){var t=e.Source.Template;R.drillholePane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>NeutralAxisPane</Type></Call>'),vsClient.once("GetTemplate.NeutralAxisPane",function(e){var t=e.Source.Template;R.neutralAxisPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>NeighbourhoodSearchPane</Type></Call>'),vsClient.once("GetTemplate.NeighbourhoodSearchPane",function(e){var t=e.Source.Template;R.neighbourhoodSearchPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>BOMPane</Type></Call>'),vsClient.once("GetTemplate.BOMPane",function(e){var t=e.Source.Template;R.bomPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>ClashPane</Type></Call>'),vsClient.once("GetTemplate.ClashPane",function(e){var t=e.Source.Template;R.clashPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>CalloutPane</Type></Call>'),vsClient.once("GetTemplate.CalloutPane",function(e){var t=e.Source.Template;R.calloutPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>SplitPane</Type></Call>'),vsClient.once("GetTemplate.SplitPane",function(e){var t=e.Source.Template;R.splitPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>ExplodePane</Type></Call>'),vsClient.once("GetTemplate.ExplodePane",function(e){var t=e.Source.Template;R.explodePane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>AnimationPane</Type></Call>'),vsClient.once("GetTemplate.AnimationPane",function(e){var t=e.Source.Template;R.animationPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>GeometryToolsPane</Type></Call>'),vsClient.once("GetTemplate.GeometryToolsPane",function(e){var t=e.Source.Template;R.geometryToolsPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>BandAnalysisPane</Type></Call>'),vsClient.once("GetTemplate.BandAnalysisPane",function(e){var t=e.Source.Template;R.bandAnalysisPane.fromTemplate(t)});vsClient.command.executeXMLNoMirror('<Call Method="GetTemplate"><Type>TextSearchPane</Type></Call>'),vsClient.once("GetTemplate.TextSearchPane",function(t){var n=t.Source.Template;R.textSearchPane.fromTemplate(n);if(vsClient.command.executeXML('\n        <Call Method="SendSessionReady">\n        </Call>\n        '),vsClient.emit("@logMousemove","false"!==localStorage.getItem("WVLogMouseMove")),!1===e?(vsClient.on("OpenFile",I),window.location.search.length>0&&x(!1)):x(!0),ae){var i=void 0;te?i=te:(i=localStorage.getItem("WVFileType")?localStorage.getItem("WVFileType"):"3D",localStorage.removeItem("WVFileType")),A.appStates.fileType=i;var a=void 0;ee?a=ee:(a=localStorage.getItem("WVFileName")?localStorage.getItem("WVFileName"):"",localStorage.removeItem("WVFileName"));var o=localStorage.getItem("WVVisShareSpec")?localStorage.getItem("WVVisShareSpec"):"";localStorage.removeItem("WVVisShareSpec"),vsClient.emit("OpenFile",{Error:"SUCCESS",Type:i,CustomId:o,FileName:a})}q=!1,console.log("WV Client send SessionReady")})}function N(e,t){R.settingsPane.updateSceneSettings(e),R.propertiesPane.updateSceneSettings(e),R.measurementPane.update(R.settingsPane.sceneSettings.Settings),R.draftAnglePane.update(R.settingsPane.sceneSettings.Settings),R.markupPane.update(R.settingsPane.sceneSettings.Settings),R.markupPane_Reduced.update(R.settingsPane.sceneSettings.Settings),R.sectionPane.update(R.settingsPane.sceneSettings.Settings),R.quickComparePane.update(R.settingsPane.sceneSettings.Settings),R.exactComparePane.update(R.settingsPane.sceneSettings.Settings),R.projectedAreaPane.update(R.settingsPane.sceneSettings.Settings),R.mirrorPane.update(R.settingsPane.sceneSettings.Settings),R.filterPane.update(R.settingsPane.sceneSettings.Settings),R.flyThroughPane.update(R.settingsPane.sceneSettings.Settings),R.distortionPane.update(R.settingsPane.sceneSettings.Settings),R.visibilityTestPane.update(R.settingsPane.sceneSettings.Settings),R.wallthicknessPane.update(R.settingsPane.sceneSettings.Settings),R.drillholePane.update(R.settingsPane.sceneSettings.Settings),R.neutralAxisPane.update(R.settingsPane.sceneSettings.Settings),R.neighbourhoodSearchPane.update(R.settingsPane.sceneSettings.Settings),R.textSearchPane.update(R.settingsPane.sceneSettings.Settings),R.bomPane.update(R.settingsPane.sceneSettings.Settings),R.clashPane.update(R.settingsPane.sceneSettings.Settings),R.calloutPane.update(R.settingsPane.sceneSettings.Settings),R.splitPane.update(R.settingsPane.sceneSettings.Settings),R.explodePane.update(R.settingsPane.sceneSettings.Settings),R.geometryToolsPane.update(R.settingsPane.sceneSettings.Settings),R.bandAnalysisPane.update(R.settingsPane.sceneSettings.Settings),R.animationPane.update(R.settingsPane.sceneSettings.Settings);var n=e.Settings.Scene.Mouse.LeftButtonFunction,i=e.Settings.Scene.Mouse.RightButtonFunction,a=e.Settings.Scene.Mouse.MiddleButtonFunction;A.appStates.mouseLeftButtonMode=n,A.appStates.mouseRightButtonMode=i,A.appStates.mouseMiddleButtonMode=a,O(n);var o="true"===e.Settings.Scene.Visualization.ShowGrid,s=W.findButton("ID_RIBBON_SHOW_GRID");s&&s.applyHighlight(o);var r="true"===e.Settings.Scene.Tools.Callout.SelectAssociatedNodes,l=W.findButton("ID_RIBBON_CALLOUTS_SELECT_ASSOCIATED_NODES");l&&l.applyHighlight(r);var c="true"===e.Settings.Scene.Tools.Callout.MultiAnchorGroups,d=W.findButton("ID_RIBBON_CALLOUTS_MULTIPLE_CONNECTIONS");d&&d.applyHighlight(c);var p="true"===e.Settings.Scene.Mouse.UseFreeRotate,u=W.findButton("ID_MOUSE_USE_FREE_ROTATE");u&&u.applyHighlight(p),A.appStates.popoutPanes.length>0&&localStorage.setItem("WVSceneSettingsChange"+A.appStates.sessionUID,JSON.stringify(e));var h="true"===e.Settings.Scene.General.Animation;W.findButton("ID_RIBBON_ANIMATE").applyHighlight(h)}function O(e){var t;switch(e){case"Rotate":t="ID_RIBBON_ROTATE";break;case"Pan":t="ID_RIBBON_PAN";break;case"RectSelect":t="ID_RIBBON_SELECTION_FRAME";break;case"Zoom":t="ID_RIBBON_ZOOM";break;case"RectZoom":t="ID_RIBBON_ZOOM_RECTANGLE";break;case"Turntable":t="ID_RIBBON_TURNTABLE"}R.vsRibbon.classes.LMBFunction.forEach(function(e){-1===e.id.indexOf(t)?e.applyHighlight(!1):-1!==e.id.indexOf("RECTANGLE")&&"ID_RIBBON_ZOOM"===t?e.applyHighlight(!1):e.applyHighlight(!0),e instanceof W.DropdownButton&&e.items.forEach(function(e){-1!==e.id.indexOf(t)?-1!==e.id.indexOf("RECTANGLE")&&"ID_RIBBON_ZOOM"===t?e.setHighlight(!1):e.activate():e.setHighlight(!1)})})}function P(e){vsClient.relayMessageToBackend("NativeLoadingModalFinished")}function x(e){for(var t=window.location.search.substr(1),n=t.split("&"),i={},a=0,o=n;a<o.length;a++){var s=o[a],r=s.split("="),l=r[0],c=r[1];i[l]=c}i.closesessions&&(A.appStates.sessionUrlClose=i.closesessions,localStorage.removeItem("WVSessionCloseID"),localStorage.setItem("WVSessionCloseID",i.closesessions),window.addEventListener("storage",function(e){var t=localStorage.getItem("WVSessionCloseID");if("WVSessionCloseID"===e.key&&t&&null!==t&&""!==t&&A.appStates.sessionUrlClose===t){vsClient.destroy();var n=location.href.split("/");n.pop(),window.open(n.join("/")+"/session_in_use_index.html","_self")}}));var d,p;if("2d"===i.compare){if(i.file1&&(d=decodeURIComponent(i.file1)),i.file2&&(p=decodeURIComponent(i.file2)),i.open1&&(d=decodeURIComponent(escape(window.atob(i.open1)))),i.open2&&(p=decodeURIComponent(escape(window.atob(i.open2)))),d&&p){try{_ShowFileRibbonOnUrlOpen||R.vsRibbon.disableFileList()}catch(e){R.vsRibbon.disableFileList()}vsClient.OpenFile(d),vsClient.on("ActivateGraphicalCompare",function(e){"full_ui_2d_compare"==e.CustomId&&(e.Error,"SUCCESS"!=e.Error&&(alert("Error on 2D compare: "+e.Error+" Info: "+e.ErrorInfo),console.log("Error on 2D compare: "+e.Error+" Info: "+e.ErrorInfo)))}),vsClient.on("OpenFile",function(){var e='\n                <Call Method="ImportFile">\n                <FileName>'+p+"</FileName>\n              </Call>";vsClient.command.executeXML(e);vsClient.command.executeXML('\n                <Call Method="ActivateGraphicalCompare"><Activate>true</Activate> CustomId="full_ui_2d_compare"</Call>')})}}else if("quick"===i.compare)B(i,"full_ui_quick_compare","ActivateGraphicalCompare");else if("exact"===i.compare)B(i,"full_ui_exact_compare","ComputeBrepCompare");else if(void 0!==i.file){try{_ShowFileRibbonOnUrlOpen||R.vsRibbon.disableFileList()}catch(e){R.vsRibbon.disableFileList()}var u=i.NativeLoadingModal,h=decodeURIComponent(i.file);u&&"true"===u?R.openNativeLoadingModal(h,vsClient.OpenFile.bind(vsClient)):vsClient.OpenFile(h)}else if(void 0!==i.open){try{_ShowFileRibbonOnUrlOpen||R.vsRibbon.disableFileList()}catch(e){R.vsRibbon.disableFileList()}var h=decodeURIComponent(escape(window.atob(i.open))),u=i.NativeLoadingModal;u&&"true"===u?R.openNativeLoadingModal(h,vsClient.OpenFile.bind(vsClient)):vsClient.OpenFile(h)}else if(i.internalMode){console.log("WebViewer runs in internal mode!");var m='<Call Method="EnableInternalMode"></Call>';vsClient.command.executeXML(m)}else if(i.qs){console.log("WebViewer runs in internal mode!");var m='<Call Method="EnableInternalMode"></Call>';vsClient.command.executeXML(m),A.appStates.qsMode=!0;var f=-1!==A.appStates.panes.map(function(e){return"wv-command"===e.paneId&&e.visible}).indexOf(!0),v=-1!==A.appStates.popoutPanes.indexOf("wv-command");-1===A.appStates.defaultPanes.indexOf("wv-command")&&A.appStates.defaultPanes.push("wv-command"),f||v||R.prependPane("wv-command")}}function B(e,t,n){var i,a;if(e.file1&&(i=decodeURIComponent(e.file1)),e.file2&&(a=decodeURIComponent(e.file2)),e.open1&&(i=decodeURIComponent(escape(window.atob(e.open1)))),e.open2&&(a=decodeURIComponent(escape(window.atob(e.open2)))),i&&a){try{_ShowFileRibbonOnUrlOpen||R.vsRibbon.disableFileList()}catch(e){R.vsRibbon.disableFileList()}vsClient.initOptions.blockOnLoad&&vsClient.blockUI(),vsClient.once(n,function(i){vsClient.unblockUI(),i.CustomId===t&&("SUCCESS"!=i.Error?"ComputeBrepCompare"===n?(console.log("Error on exact compare: "+i.ErrorInfo+" Try quick compare."),B(e,"full_ui_quick_compare","ActivateGraphicalCompare")):console.log("Error on quick compare: "+i.Error+" Info: "+i.ErrorInfo):L(i))}),vsClient.NewScene3D(),vsClient.once("NewScene3D",function(e){D(e,i,a,t,n)})}}function L(e){if("SUCCESS"==e.Error){vsClient.command.executeXML('<Call Method="AlignView"><Alignment>Isometric</Alignment></Call><Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')}var t=R.modeltreePane.currentMaxVisible();if(-1!==A.appStates.popoutPanes.indexOf("wv-modeltree")){var n=A.appStates.popedOutWindows[A.appStates.popoutPanes.indexOf("wv-modeltree")].innerHeight-30,i=R.modeltreePane.lineHeight;t=Math.floor(n/i)}var a='<Call Method="VirtualTreeViewSetSize"><Size>'+t+"</Size></Call>";vsClient.command.executeXML(a);vsClient.command.executeXML('<Call Method="ResumeRendering"/>')}function D(e,t,n,i,a){I(e);var o='\n    <Call Method="SetSettings">\n        <Settings>\n            <Import3D>\n                <General>\n                    <ReadMode>PreferGeometry</ReadMode>\n                    <ReadPMIs>false</ReadPMIs>\n                    <ReadSolids>true</ReadSolids>\n                    <ReadConstructionAndReferences>false</ReadConstructionAndReferences>\n                </General>\n                <_3DVS>\n                    <IncrementalLoading>false</IncrementalLoading>\n                    <RemoveBrep>false</RemoveBrep>\n                </_3DVS>\n            </Import3D>\n        </Settings>\n    </Call>\n\n    <Call Method="PauseRendering"/>\n\n    <Call Method="UpdateScene">\n        <VSXML>\n            <Node CustomId="Root1" Name="Compare1" Type="Root">\n                <Node CustomId="V1" Name="V1" Type="ProductOccurrence" FileName="'+t+'" />\n            </Node>\n            <Node CustomId="Root2" Name="Compare2" Type="Root">\n                <Node CustomId="V2" Name="V2" Type="ProductOccurrence" FileName="'+n+'" />\n            </Node>\n        </VSXML>\n    </Call>\n\n    <Call Method="FitAll"/>\n\n    <Call Method="SetSelectedNodes">\n    <NodeId>#V1</NodeId>\n    <NodeId>#V2</NodeId>\n    </Call>\n\n        ';o+="ComputeBrepCompare"===a?'<Call Method="ComputeBrepCompare" CustomId="full_ui_exact_compare"></Call>':'<Call Method="ActivateGraphicalCompare" CustomId="full_ui_quick_compare"><Activate>true</Activate></Call>',vsClient.command.executeXML(o)}var k=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};Object.defineProperty(t,"__esModule",{value:!0});var R=n(0),A=n(4),W=n(10),V=n(9),X=n(3),G=n(17),F=n(13),H=n(0),U=!1,z=!1,j=!1,Y=!1,K=!1,J=["MeasurementChanged","AsyncEventBegin","AsyncEventProgress","AsyncEventEnd","TransformChanged","DraftAngleChanged","ProjectedAreaChanged","TextSearchChanged","NeighbourhoodSearchChanged","SectionChanged","ShowMessageBox","ImportFinished","CalloutSelectionChanged","SavedSelectionsChanged","WallthicknessValuesChanged","SplitResultUpdated","ActivateCompare","CalloutAutoAlignmentChanged","BandAnalysis","ClashResultUpdated","ConfigurationViewPlaySelectionChange","ConfigurationViewPlayStart","ConfigurationViewPlayFinish","PresetChanged"];t.getClient=function(){return vsClient},t.getStates=function(){return A.appStates},t.render=function(){R.vsRibbon.render()},t.lang=function(e){V.settings.lang=e,R.vsRibbon.render()},t.modeltree=function(){},t.parseXML=function(e){return X.parseXML(e)},t.getRibbonGroups=function(){var e="var _RibbonGroups = "+JSON.stringify(R.vsRibbon.exposedGroupIDs,null,"\t"),t=new Blob([e],{type:"application/javascript"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download="custom_groups.js",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)};var q="true"===localStorage.getItem("WVStopInitialLogging");try{_AppMainColor&&(A.appStates.mainColor=_AppMainColor,document.documentElement.style.setProperty("--app-main-color",_AppMainColor))}catch(e){}try{_AppRibbonHeaderTextColor&&document.documentElement.style.setProperty("--app-ribbon-text-color",_AppRibbonHeaderTextColor)}catch(e){}var Z=R.init();vsClient.initOptions={canvasMode:"image",parseXMLResponse:!0,emitXMLResponsesUnparsed:!1,sendSessionReady:!1,blockOnLoad:!0},vsClient.on("@logMousemove",function(e){vsClient.command.logMousemove(e)});var Q="ws://localhost:8085/ws";try{Q=g_sWebSocketAdress}catch(e){console.warn("Please define a WebSocket address!")}var ee,te,ne=localStorage.getItem("WVParkedSession"),ie=localStorage.getItem("WVClient"),ae=!1,oe={},se=!0,re=!1;ie&&null!==ie?(oe.testForSessions=!0,oe.client=ie):oe.testForSessions=!1,ne&&null!==ne?(oe.sessionToConnect=ne,localStorage.removeItem("WVParkedSession"),ae=!0,vsClient.initialize(Z,Q,oe)):vsClient.initialize(Z,Q,oe),R.resizeHandler();var le=new Uint32Array(10);(function(e){return e.crypto||e.msCrypto})(window).getRandomValues(le);var ce=le[0];A.appStates.sessionUID=ce;var de=function(e,t){return Object.keys(e).forEach(function(n){return n===t&&delete e[n]||e[n]&&"object"==typeof e[n]&&de(e[n],t)}),e};vsClient.on("GetSessions",function(e){var t;try{t=_DisableSessionRestore}catch(e){t=!1}for(var n=window.location.search.substr(1),i=n.split("&"),a={},o=0,s=i;o<s.length;o++){var r=s[o],l=r.split("="),c=l[0],d=l[1];a[c]=d}void 0===a.session&&(e&&e.Session&&!Array.isArray(e.Session)&&(e.Session=[e.Session]),e.Session&&e.Session.length>0&&!t?R.showSessionRestoreDialog(e.Session):(vsClient.connect(),A.appStates.backendToken&&vsClient.SessionToken(A.appStates.backendToken)))}),vsClient.on("ConnectionLost",function(){R.blockUI("Connection lost.\n Trying to reconnect..")}),vsClient.on("ConnectionRestored",function(){try{$(".ws_indicator").css("fill",_AppRibbonHeaderTextColor)}catch(e){$(".ws_indicator").css("fill","green")}R.unblockUI()}),vsClient.on("initialized",function(e){try{$(".ws_indicator").css("fill",_AppRibbonHeaderTextColor)}catch(e){$(".ws_indicator").css("fill","green")}A.appStates.clientInitialized=!0;for(var t=window.location.search.substr(1),n=t.split("&"),i={},a=0,o=n;a<o.length;a++){var s=o[a],r=s.split("="),l=r[0],c=r[1];i[l]=c}vsClient.on("NewScene3D",function(e){var t='<Call Method="AddEventListener">';t+="<Event>ActivateInteraction</Event>",t+="<Event>DeactivateInteraction</Event>",t+="<Event>SelectionChanged</Event>",t+="<Event>SelectionChangedCustomId</Event>",t+="<Event>NodePropertiesChanged</Event></Call>",vsClient.command.executeXMLNoMirror(t),vsClient.AutoResize(),I(e)}),void 0!==i.session&&(vsClient.initOptions.sessionToConnect=i.session,ae=!0,void 0!==i.filetype&&(te=i.filetype),void 0!==i.filename&&(ee=i.filename),vsClient.connect()),void 0!==i.token?(A.appStates.backendToken=decodeURIComponent(i.token),R.vsRibbon.disableFileList(),ie?vsClient.sessionInfo.token=A.appStates.backendToken:vsClient.SessionToken(A.appStates.backendToken),vsClient.on("OpenFile",function(e){E(e);var t='<Call Method="AddEventListener">';t+="<Event>ActivateInteraction</Event>",t+="<Event>DeactivateInteraction</Event>",t+="<Event>SelectionChanged</Event>",t+="<Event>SelectionChangedCustomId</Event>",t+="<Event>NodePropertiesChanged</Event></Call>",vsClient.command.executeXMLNoMirror(t),vsClient.AutoResize(),I(e)}),vsClient.on("SessionInitialized",function(e){y(e),w(!0)})):(R.vsRibbon.deleteShareRibbon(),vsClient.on("SessionInitialized",function(e){y(e),w(!1)})),window.addEventListener("storage",function(e){if(e.key==="WVCommand"+A.appStates.sessionUID)-1!==e.newValue.indexOf("ComputeSplitForPopout")?vsClient.once("Compute",function(e){localStorage.setItem("WVSplitGroupAdded"+A.appStates.sessionUID,JSON.stringify(e))}):-1!==e.newValue.indexOf("ComputeBOMForPopout")?vsClient.once("Compute",function(e){localStorage.setItem("WVBOMComputed"+A.appStates.sessionUID,JSON.stringify(e))}):-1!==e.newValue.indexOf("ComputeClashForPopout")?vsClient.once("Compute",function(e){localStorage.setItem("WVClashComputed"+A.appStates.sessionUID,JSON.stringify(e))}):-1!==e.newValue.indexOf('CustomId="WVViewPDF"')?R.blockUI():e.newValue.indexOf("GetBOMAttributeCols")&&vsClient.once("GetBillOfMaterialNodePropertyNames",function(e){vsClient.command.executeXML('<Call Method="GetBillOfMaterialAttributeNames"></Call>'),vsClient.once("GetBillOfMaterialAttributeNames",function(t){var n={props:e,attr:t};localStorage.setItem("WVBOMColls"+A.appStates.sessionUID,JSON.stringify(n))})}),vsClient.command.executeXML(e.newValue),localStorage.removeItem(e.key);else switch(e.key){case"WVActivateView"+A.appStates.sessionUID:var t=JSON.parse(e.newValue);vsClient.setConfigurationViewPosition(t.pos,t.withCamera,t.withState),localStorage.removeItem(e.key);break;case"WVViewsData"+A.appStates.sessionUID:var n=JSON.parse(e.newValue);vsClient.setConfigurationViews(n),localStorage.removeItem(e.key)}},!1),window.onunload=function(e){localStorage.removeItem("WVCommand"+A.appStates.sessionUID);for(var t=J.length,n=0;n<t;n++)localStorage.removeItem("WV"+J[n]+A.appStates.sessionUID);localStorage.removeItem("WVNodePropertiesChanged"+A.appStates.sessionUID);for(var i=A.appStates.popedOutWindows.length,a=0;a<i;a++)A.appStates.popedOutWindows[a].close();localStorage.removeItem("WVSettingsChange"+A.appStates.sessionUID),localStorage.removeItem("WVTreeViewUpdated"+A.appStates.sessionUID),localStorage.removeItem("WVSceneSettingsChange"+A.appStates.sessionUID),localStorage.removeItem("WVCommand"+A.appStates.sessionUID),localStorage.removeItem("WVSelectedNodeColor"+A.appStates.sessionUID),localStorage.removeItem("WVSplitGroupAdded"+A.appStates.sessionUID)}}),vsClient.on("AsyncEventBegin",function(e){R.progressContainer.start(),"1"===e.BlockingOperation?R.progressContainer.addBar(e.Id,"1"===e.Indeterminate,e.Description,!0):R.progressContainer.addBar(e.Id,"1"===e.Indeterminate,e.Description)}),vsClient.on("AsyncEventProgress",function(e){R.progressContainer.stepBarById(e.Id,e.Progress)}),vsClient.on("AsyncEventEnd",function(e){R.progressContainer.stopBarById(e.Id)}),vsClient.on("ClashResultUpdated",function(e){var t=-1!==A.appStates.panes.map(function(e){return"wv-clash"===e.paneId&&e.visible}).indexOf(!0),n=-1!==A.appStates.popoutPanes.indexOf("wv-clash");t||n||R.prependPane("wv-clash")}),vsClient.on("SplitResultUpdated",function(e,t){var n=-1!==A.appStates.panes.map(function(e){return"wv-split"===e.paneId&&e.visible}).indexOf(!0),i=-1!==A.appStates.popoutPanes.indexOf("wv-split");n||i||R.prependPane("wv-split"),R.splitPane.clearGroupTable(),R.splitPane.sessions=[],Array.isArray(e.Data)||(e.Data=[e.Data]);var a=e.SplitGeneralData;Array.isArray(e.Data[0].SplitDirectionId)||(e.Data[0].SplitDirectionId=[e.Data[0].SplitDirectionId]),i&&localStorage.setItem("WVClearSplit"+A.appStates.sessionUID,"");for(var o=0;o<e.Data[0].SplitDirectionId.length;o++){var s=e.Data[0].SplitDirectionId[o],r=k({},a,s);r.SplitDirectionId=s.Id,r.Error="SUCCESS",i?localStorage.setItem("WVSplitGroupAdded"+A.appStates.sessionUID,JSON.stringify(r)):R.splitPane.appendSplitSession(r)}}),vsClient.on("UpdateScene",function(e){E(e);var t=R.modeltreePane.currentMaxVisible();if(-1!==A.appStates.popoutPanes.indexOf("wv-modeltree")){var n=A.appStates.popedOutWindows[A.appStates.popoutPanes.indexOf("wv-modeltree")].innerHeight-30,i=R.modeltreePane.lineHeight;t=Math.floor(n/i)}var a='<Call Method="VirtualTreeViewSetSize"><Size>'+t+"</Size></Call>";vsClient.command.executeXML(a)}),vsClient.on("TreeviewUpdated",function(e){A.appStates.popoutPanes.length>0&&-1!==A.appStates.popoutPanes.indexOf("wv-modeltree")?localStorage.setItem("WVTreeViewUpdated"+A.appStates.sessionUID,JSON.stringify(e)):R.modeltreePane.update(e)}),vsClient.on("GetConfigurationViewInformation",function(e){if(A.appStates.popoutPanes.length>0&&-1!==A.appStates.popoutPanes.indexOf("wv-views")&&e.ConfigurationView){var t=Array.isArray(e.ConfigurationView)?e.ConfigurationView:[e.ConfigurationView];localStorage.setItem("WVConfigurationViewInformation"+A.appStates.sessionUID,JSON.stringify(t))}else{if(R.viewPane.clearViews(),!e.ConfigurationView)return;var t=Array.isArray(e.ConfigurationView)?e.ConfigurationView:[e.ConfigurationView];R.viewPane.update(t)}}),vsClient.on("GetViewsAsPDF",function(e){if(e.CustomId&&-1!==e.CustomId.indexOf("WVViewPDF")){var t=A.appStates.fileName?"ViewExport_"+A.appStates.fileName+".pdf":"ViewExport.pdf";R.unblockUI();for(var n=atob(e.Image),i=new Array(n.length),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);var o=new Uint8Array(i),s=new Blob([o],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(s,t);else{var r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=t,document.body.appendChild(r),r.click(),r.remove()}}}),vsClient.on("PresetChanged",function(e){-1!==e.Type.indexOf("WallthicknessHeatmap")&&$("#UID_PRESETS").val(""===e.Name?"USERDEF":e.Name)}),vsClient.on("SelectionChanged",function(e){if(void 0!==e.NodeId?A.appStates.nodesSelected=!0:(R.propertiesPane.showSceneProperties(),A.appStates.nodesSelected=!1),A.appStates.panes.some(function(e){return"wv-bom"===e.paneId&&!0===e.visible})&&R.bomPane.selectCallouts(),-1!==A.appStates.popoutPanes.indexOf("wv-bom")){var t='<Call Method="GetSelectedBillOfMaterialRows"></Call>';vsClient.command.executeXML(t),vsClient.once("GetSelectedBillOfMaterialRows",function(e){if(e.RowId){var t=Array.isArray(e.RowId)?e.RowId:[e.RowId];localStorage.setItem("WVCalloutSelected"+A.appStates.sessionUID,JSON.stringify(t))}else localStorage.setItem("WVCalloutSelected"+A.appStates.sessionUID,JSON.stringify([]))})}if(-1!==A.appStates.popoutPanes.indexOf("wv-explode")){var t='<Call Method="GetSelectionExplosionValue"></Call>';t+='<Call Method="GetSelectionNodeLevel"></Call>',vsClient.command.executeXML(t),vsClient.once("GetSelectionNodeLevel",function(e){localStorage.setItem("WVNodeLevel"+A.appStates.sessionUID,JSON.stringify(e))}),vsClient.once("GetSelectionExplosionValue",function(e){localStorage.setItem("WVExplosionLevel"+A.appStates.sessionUID,JSON.stringify(e))})}-1!==A.appStates.popoutPanes.indexOf("wv-modeltree")&&localStorage.setItem("WVSelectedNodes"+A.appStates.sessionUID,JSON.stringify(e))}),vsClient.on("NodePropertiesChanged",function(e){if("Attributes"===A.appStates.selectionMode){var t=e.Attributes;if(t){var n=document.createElement("div");n.className="floating-attribute-wrapper",n.id="floating-attribute-wrapper",n.style.left=A.appStates.lastMouseX+10+"px",n.style.top=A.appStates.lastMouseY+10+"px",document.body.appendChild(n);for(var i=0;i<t.Attribute.length;i++){var a=t.Attribute[i],o=document.createElement("div");o.className="floating-attribute-item",o.textContent=a.Key+": "+a.Value,n.appendChild(o)}}}if(A.appStates.drawRect=!e.General||"Markup_Text"!==e.General.Type,e.General){if(R.propertiesPane.updateNodeProperties(e),localStorage.setItem("WVNodePropertiesChanged"+A.appStates.sessionUID,JSON.stringify(e)),e.General.Color){var s=e.General.Color.replace("#","");localStorage.setItem("WVSelectedNodeColor"+A.appStates.sessionUID,s),$(".color-search-result-row").each(function(){this.id==="ColorSearchResult_"+s?$(this).css("background-color","rgb(160, 160, 160)"):$(this).css("background-color","white")})}}else $(".color-search-result-row").each(function(){$(this).css("background-color","white")});if(e.Markup&&e.Markup.Text&&!e.Markup.Text.Content){var r=Z.getBoundingClientRect(),l=r.left,c=r.top;g(e,A.appStates.lastPagePosX-l,A.appStates.lastPagePosY-c)}}),vsClient.on("CalloutAutoAlignmentChanged",function(e){var t=W.findButton("ID_RIBBON_CALLOUTS_AUTO_ALIGNMENT");t&&e&&e.State&&t.applyHighlight("1"===e.State)}),vsClient.on("ActivateCompare",function(e){R.prependPane("wv-quickcompare")});try{_ShortCuts&&(window.onkeydown=function(e){var t=!1;try{t=_PreventGlobalKeyEvents}catch(e){}if(!A.appStates.preventGlobalKeyEvents&&!t&&_ShortCuts[e.keyCode]){var n=_ShortCuts[e.keyCode];if(n.ctrl&&!e.ctrlKey||n.alt&&!e.altKey||n.shift&&!e.shiftKey)return;e.preventDefault(),e.stopPropagation()}},window.onkeyup=function(e){var t=!1;try{t=_PreventGlobalKeyEvents}catch(e){}if(!A.appStates.preventGlobalKeyEvents&&!t&&_ShortCuts[e.keyCode]){var n=_ShortCuts[e.keyCode];if(n.ctrl&&!e.ctrlKey||n.alt&&!e.altKey||n.shift&&!e.shiftKey)return;if(e.preventDefault(),e.stopPropagation(),n.method)return void n.method(vsClient);if(n.ribbonKey)return void document.getElementById(n.ribbonKey).click();if(n.call&&vsClient.command.executeXML(n.call),n.paneId){var i=-1!==A.appStates.panes.map(function(e){return e.paneId===n.paneId&&e.visible}).indexOf(!0),a=-1!==A.appStates.popoutPanes.indexOf(n.paneId);i||a?(R.closePane(n.paneId,a),A.appStates.panes.forEach(function(e){e.paneId===n.paneId&&(e.visible=!1)})):R.prependPane(n.paneId)}}})}catch(e){}window.addEventListener("keyup",function(e){var t=!1;try{t=_PreventGlobalKeyEvents}catch(e){}if(!A.appStates.preventGlobalKeyEvents&&!t){var n="";try{if(_ShortCuts&&_ShortCuts[e.keyCode]){var i=_ShortCuts[e.keyCode];if(!(i.ctrl&&!e.ctrlKey||i.alt&&!e.altKey||i.shift&&!e.shiftKey))return}}catch(e){}switch(e.keyCode){case 27:F.deactivateAll(vsClient,H.vsRibbon);break;case 46:n='<Call Method="ModifySelection"><SelectionModifier>Delete</SelectionModifier></Call>',vsClient.command.executeXML(n);break;case 38:case 87:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>MoveFront</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 40:case 83:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>MoveBack</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 39:case 68:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanRight</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 37:case 65:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanLeft</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 32:case 33:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanUp</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 67:case 34:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanDown</FlythroughCommand><Activate>false</Activate></Call>',vsClient.command.executeXML(n));break;case 187:case 171:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>IncreaseSpeed</FlythroughCommand></Call>',n+='<Call Method="GetSceneSettings"></Call>',vsClient.command.executeXML(n));break;case 189:case 109:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>DecreaseSpeed</FlythroughCommand></Call>',n+='<Call Method="GetSceneSettings"></Call>',vsClient.command.executeXML(n))}}},!1),window.addEventListener("keydown",function(e){var t=!1;try{t=_PreventGlobalKeyEvents}catch(e){}if(!A.appStates.preventGlobalKeyEvents&&!t){var n="";try{if(_ShortCuts&&_ShortCuts[e.keyCode]){var i=_ShortCuts[e.keyCode];if(!(i.ctrl&&!e.ctrlKey||i.alt&&!e.altKey||i.shift&&!e.shiftKey))return}}catch(e){}switch(e.keyCode){case e.altKey&&65:n='<Call Method="ShowAll"></Call>';break;case e.altKey&&73:n='<Call Method="ModifySelection"><SelectionModifier>Isolate</SelectionModifier></Call>';break;case e.altKey&&72:n='<Call Method="MouseHoverAction"><Action>Hide</Action></Call>';break;case e.altKey&&71:n='<Call Method="MouseHoverAction"><Action>Ghost</Action></Call>';break;case e.altKey&&83:n='<Call Method="UnghostLastNode" />';break;case e.altKey&&65:n='<Call Method="ShowAll"></Call>';break;case e.ctrlKey&&65:e.preventDefault(),n=e.shiftKey?'<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>':'<Call Method="SelectAllGeometries"></Call>';break;case e.ctrlKey&&e.shiftKey&&65:n='<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>';break;case e.ctrlKey&&73:n='<Call Method="ModifySelection"><SelectionModifier>Invert</SelectionModifier></Call>';break;case e.ctrlKey&&90:n='<Call Method="Undo"><Steps>1</Steps></Call>';break;case e.ctrlKey&&85:e.preventDefault(),n='<Call Method="GetSceneSettings"></Call>',vsClient.command.executeXMLAsync(n),vsClient.once("GetSceneSettings",function(e){var t=e.Settings.Scene.Visualization.ShowGrid;t="true"===t?"false":"true",n='<Call Method="SetSceneSettings">',n+="<Settings><Scene><Visualization><ShowGrid>"+t,n+="</ShowGrid></Visualization></Scene></Settings></Call>",vsClient.command.executeXMLAsync(n)});break;case 112:e.preventDefault(),$("#wv-ribbon-about").click();break;case 120:var a=A.appStates.renderingModes.indexOf("Wireframe");-1===a?A.appStates.renderingModes.push("Wireframe"):A.appStates.renderingModes.splice(a,1),n='<Call Method="SetSceneSettings"><Settings><Scene><Visualization><RenderMode>';for(var o=0;o<A.appStates.renderingModes.length;o++)n=n+A.appStates.renderingModes[o]+" ";n+="</RenderMode></Visualization></Scene></Settings></Call>",vsClient.command.executeXML(n),vsClient.once("SetSceneSettings",function(e){vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')});break;case 113:for(var s=A.appStates.panes.length,r=!1,l=0;l<s;l++){var c=A.appStates.panes[l];"wv-command"===c.paneId&&(c.visible?(F.handlePrependingPane("wv-command","off"),A.appStates.panes[l].visible=!1):(F.handlePrependingPane("wv-command","on"),A.appStates.panes[l].visible=!0),r=!0)}r||F.handlePrependingPane("wv-command","on"),localStorage.setItem("panePositions",JSON.stringify(A.appStates.panes));break;case 122:e.preventDefault(),F.toggleFullscreen(R.vsRibbon);break;case 38:case 87:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>MoveFront</FlythroughCommand><Activate>true</Activate></Call>');break;case 40:case 83:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>MoveBack</FlythroughCommand><Activate>true</Activate></Call>');break;case 39:case 68:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanRight</FlythroughCommand><Activate>true</Activate></Call>');break;case 37:case 65:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanLeft</FlythroughCommand><Activate>true</Activate></Call>');break;case 32:case 33:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanUp</FlythroughCommand><Activate>true</Activate></Call>');break;case 67:case 34:-1!==A.appStates.interactionMode.indexOf("Flythrough")&&(n='<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanDown</FlythroughCommand><Activate>true</Activate></Call>');break;default:return}vsClient.command.executeXML(n)}},!1),vsClient.on("Relay",function(e){var t=e.__text__;if("VisShare_SaveAsDone"===t)R.toast(!0);else if(t.startsWith("ShowNativeLoadingModal_")&&!ae){var n=t.split("_");n.shift();var i=n.join("_"),a=R.openNativeLoadingModal(i,P.bind(vsClient),!0);a||P(i)}else if(t.startsWith("VisShareBlockUI")){var o=t.split("_")[1];vsClient.blockUI(),vsClient.once(o,function(e){vsClient.unblockUI()})}}),vsClient.on("@changeLang",function(e){for(var t=A.appStates.popoutPanes.length,n=0;n<t;n++){var i=function(e){var t=A.appStates.popoutPanes[e];if("wv-modeltree"===t||"wv-views"===t)return{value:void 0};var n=R.mapPaneIdToTemplate(t),i='<Call Method="GetTemplate"><Type>'+n+"</Type></Call>";vsClient.command.executeXML(i),vsClient.once("GetTemplate."+n,function(e){var n=e.Source.Template;localStorage.setItem("WV"+t+A.appStates.sessionUID,JSON.stringify(n))})}(n);if("object"==typeof i)return i.value}}),vsClient.on("@recvXML",function(e,t){var n={type:"inbound",msg:e};R.commandPane.addCommand(n)}),vsClient.on("@sendXML",function(e,t){if(!q){try{if((_HideUICommandLog||A.appStates.qsMode)&&(-1!==e.indexOf("GetTemplate")||-1!==e.indexOf("SendSessionReady")||-1!==e.indexOf("VirtualTreeViewSetSize")||-1!==e.indexOf("GetNodeTooltip")||-1!==e.indexOf("GetSettings")||-1!==e.indexOf("GetSceneSettings")||-1!==e.indexOf("VirtualTreeViewToggleVisibility")||-1!==e.indexOf("SetSettings")||-1!==e.indexOf("GetSelectedBillOfMaterialRows")))return}catch(e){}var n={type:"outbound",msg:e};R.commandPane.addCommand(n)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(35),o=n(82),s=n(86),r=n(85),l=n(84),c=n(4),d=function(){function e(e,t,n){var r=this;this.doFolderSearch=!0,this.showFilePreview=!1,this.searchedFolder=[9],this.fileList=[],this.client=e,this.type=t,this.openCallBack=n,this.isOpen=!0,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscPressed=this.detectEscPressed.bind(this),this.pageSize=100,this.activePath=c.appStates.activePath;try{this.pageSize=_FileBrowserPageSize}catch(e){}this.page=1,this.folderSearchClick=this.folderSearchClick.bind(this),this.filePreviewClick=this.filePreviewClick.bind(this),this.submit=this.submit.bind(this),this.resize=this.resize.bind(this),document.body.addEventListener("mousedown",this.detectOutsideClick),document.body.addEventListener("keyup",this.detectEscPressed),this.modalWrapper=document.createElement("div"),this.modalWrapper.className="file-browser-modal",this.loadingWrapper=document.createElement("div"),this.loadingWrapper.className="fullscreen-loading-wrapper",this.loadingWrapper.style.left="0";var l=document.createElement("i");l.className="fullscreen-loading-icon fal fa-spinner-third fa-spin",this.loadingWrapper.appendChild(l);var d=document.createElement("div");d.className="file-browser-header",this.folderSearchEl=new a.FileBrowserSwitch(d,"ID_FILE_BROWSER_DEEP_SEARCH",this.folderSearchClick,"file",this.doFolderSearch),this.fileSearchEl=document.createElement("input"),this.fileSearchEl.className="file-browser-search-input",this.fileSearchEl.placeholder=i.translate("ID_FILE_BROWSER_SEARCH_PLACEHOLDER"),this.fileSearchEl.oninput=function(e){r.fileSearchEl.value,r.doFolderSearch;r.client.once("SearchFolders",function(e){}),r.folder=r.folder.filter(function(e){return-1!==e.key.toLowerCase().indexOf(r.fileSearchEl.value)}),r.build()},d.appendChild(this.fileSearchEl),this.breadcrumbBar=new o.BreadcrumbBar(this.modalWrapper,this);var p={key:"",name:"Root"};if(this.breadcrumbBar.pushBreadcrumb(p),""!==this.activePath)for(var u=this.activePath.split("\\"),h=u.length,m="",f=0;f<h;f++){m+=u[f]+"\\";var v={key:m,name:u[f]};this.breadcrumbBar.pushBreadcrumb(v)}var g=document.createElement("div");g.className="file-browser-table-header-row",this.modalWrapper.appendChild(g),this.nameHeader=document.createElement("div"),this.nameHeader.className="file-browser-table-header",this.nameHeader.style.width="calc(55% + 14px)",g.appendChild(this.nameHeader);var C=document.createElement("span");C.className="file-browser-table-header-text",C.textContent=i.translate("ID_FILE_BROWSER_TABLE_HEADER_NAME"),this.nameHeader.appendChild(C),document.createElement("i").className="file-brwoser-table-header-icon fas fa-sort-down",this.nameHeader.onclick=function(e){},this.dateHeader=document.createElement("div"),this.dateHeader.className="file-browser-table-header",this.dateHeader.style.width="calc(25% + 12px)",g.appendChild(this.dateHeader);var _=document.createElement("span");_.className="file-browser-table-header-text",_.textContent=i.translate("ID_FILE_BROWSER_TABLE_HEADER_DATE"),this.dateHeader.appendChild(_),document.createElement("i").className="file-brwoser-table-header-icon fas fa-sort-down",this.dateHeader.onclick=function(e){},this.sizeHeader=document.createElement("div"),this.sizeHeader.className="file-browser-table-header",this.sizeHeader.style.width="calc(20% - 26px)",g.appendChild(this.sizeHeader);var I=document.createElement("span");I.className="file-browser-table-header-text",I.textContent=i.translate("ID_FILE_BROWSER_TABLE_HEADER_SIZE"),this.sizeHeader.appendChild(I),document.createElement("i").className="file-brwoser-table-header-icon fas fa-sort-down",this.sizeHeader.onclick=function(e){},this.tableBody=document.createElement("div"),this.tableBody.className="file-browser-table-body",this.modalWrapper.appendChild(this.tableBody),this.tableFooterEl=document.createElement("div"),this.tableFooterEl.className="file-browser-table-footer",this.modalWrapper.appendChild(this.tableFooterEl),this.pagination=new s.PaginationRow(this.tableFooterEl,this),this.fileCountEl=document.createElement("div"),this.fileCountEl.className="file-browser-file-count",this.tableFooterEl.appendChild(this.fileCountEl),this.buttonRow=document.createElement("div"),this.buttonRow.className="file-browser-button-row",this.modalWrapper.appendChild(this.buttonRow);var S=localStorage.getItem("VSFilePreview");null!==S&&"open"===this.type&&(this.showFilePreview="true"===S),"open"===this.type&&(this.folderSearchEl=new a.FileBrowserSwitch(this.buttonRow,"ID_FILE_BROWSER_FILE_PREVIEW",this.filePreviewClick,"file",this.showFilePreview));var y=document.createElement("button");y.className="file-browser-submit-button",y.textContent="OK",this.buttonRow.appendChild(y),y.onclick=this.submit,document.body.appendChild(this.modalWrapper),this.client.on("GetFolderContent",function(e){r.folder=e,r.getFileNumber(),r.build(),r.stopLoadingBlocker()}),this.client.on("GetFolderFileCount",function(e){r.size=e,r.pagination.updatePageCount(),r.fileCountEl.textContent=r.size+" "+i.translate("ID_FILE_BROWSER_FILE_COUNT"),e<=r.pageSize?r.pagination.hide():r.pagination.show()});var E=this.client.command.makeBinaryPath(this.activePath,!0,0,this.pageSize-1);this.startLoadingBlocker(),this.client.sendBinaryPackage(1,210,E);var b=this.client.command.makeBinaryPath(this.activePath,!0,0,this.pageSize-1);this.client.sendBinaryPackage(1,211,b),this.resize(),window.addEventListener("resize",this.resize)}return e.prototype.resize=function(){var e=this.tableBody.offsetTop,t=this.tableFooterEl.offsetHeight,n=this.buttonRow.offsetHeight,i=this.modalWrapper.clientHeight;this.tableBody.style.height=i-n-t-e-40+"px"},e.prototype.build=function(){$(this.tableBody).empty(),$(".webviewer-tooltip-wrapper").each(function(){$(this).remove()});for(var e=0;e<this.folder.length;e++)if(this.folder[e].size){var t=void 0;t={name:this.folder[e].key,date:this.folder[e].modified,path:this.folder[e].path,size:this.folder[e].size};new l.File(this.tableBody,t,this)}else{var n=void 0;n={name:this.folder[e].key,date:this.folder[e].modified,path:this.folder[e].path};new r.Folder(this.tableBody,n,this)}},e.prototype.getFileNumber=function(){var e=this.client.command.makeBinaryPath(this.activePath,!1,0,100);this.client.sendBinaryPackage(1,211,e)},e.prototype.changeOrder=function(e,t,n){var i;$(e).hasClass("fa-sort-down")?(i="ASC",$(e).removeClass("fa-sort-down"),$(e).addClass("fa-sort-up"),this.sortAsc(n)):(i="DESC",$(e).addClass("fa-sort-down"),$(e).removeClass("fa-sort-up"),this.sortDesc(n)),$(this.nameHeader).removeClass("file-browser-table-header-active"),$(this.dateHeader).removeClass("file-browser-table-header-active"),$(this.sizeHeader).removeClass("file-browser-table-header-active"),$(t).addClass("file-browser-table-header-active"),this.build(),console.log("Sortkey:"+n+"Sortdirection: "+i)},e.prototype.sortDesc=function(e){switch(e){case"name":this.folder.sort(function(e,t){if(!e.size)return-1;var n=e.key.toLowerCase(),i=t.key.toLowerCase();return n<i?1:n>i?-1:0});break;case"date":this.folder.sort(function(e,t){if(!e.size)return-1;var n=new Date(e.modified),i=new Date(t.modified);return n<i?1:n>i?-1:0});break;case"size":this.folder.sort(function(e,t){if(!e.size)return-1;var n=parseFloat(e),i=parseFloat(t);return n<i?1:n>i?-1:0})}},e.prototype.sortAsc=function(e){switch(e){case"name":this.folder.sort(function(e,t){if(!e.size)return-1;var n=e.key.toLowerCase(),i=t.key.toLowerCase();return n>i?1:n<i?-1:0});break;case"date":this.folder.sort(function(e,t){if(!e.size)return-1;var n=new Date(e.modified),i=new Date(t.modified);return n>i?1:n<i?-1:0});break;case"size":this.folder.sort(function(e,t){if(!e.size)return-1;var n=parseFloat(e),i=parseFloat(t);return n>i?1:n<i?-1:0})}},e.prototype.folderSearchClick=function(e){this.doFolderSearch=e},e.prototype.filePreviewClick=function(e){localStorage.setItem("VSFilePreview",e.toString()),this.showFilePreview=e},e.prototype.getPage=function(){return this.page},e.prototype.setPath=function(e){this.activePath=e.path;var t={key:e.path,name:e.name};this.breadcrumbBar.pushBreadcrumb(t)},e.prototype.setPage=function(e){this.page=e,this.startLoadingBlocker();var t=this.client.command.makeBinaryPath(this.activePath,!0,(this.page-1)*this.pageSize,this.page*this.pageSize-1);this.client.sendBinaryPackage(1,210,t)},e.prototype.hide=function(){window.removeEventListener("resize",this.resize),document.body.removeEventListener("mousedown",this.detectOutsideClick),document.body.removeEventListener("keyup",this.detectEscPressed),this.isOpen=!1,$(this.modalWrapper).remove()},e.prototype.detectOutsideClick=function(e){e.target===this.modalWrapper||this.modalWrapper.contains(e.target)||this.submit()},e.prototype.detectEscPressed=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.submit()},e.prototype.submit=function(e){e&&(e.preventDefault(),e.stopPropagation()),$(".webviewer-tooltip-wrapper").each(function(){$(this).remove()}),c.appStates.activePath=this.activePath,this.fileList.length>0&&i.serializedLoad(this.fileList,!0),this.fileList=[],this.hide()},e.prototype.startLoadingBlocker=function(){this.modalWrapper.appendChild(this.loadingWrapper)},e.prototype.stopLoadingBlocker=function(){this.modalWrapper.contains(this.loadingWrapper)&&this.modalWrapper.removeChild(this.loadingWrapper)},e}();t.FileBrowserModal=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(83),a=function(){function e(e,t){var n=this;this.breadcrumbs=[],this.breadcrumbsMap=[],this.parentEl=e,this.fileBrowser=t,this.pageSize=t.pageSize,this.client=t.client;var i=document.createElement("div");i.className="file-browser-breadcrumb-bar-wrapper",this.parentEl.appendChild(i),this.backButton=document.createElement("i"),this.backButton.className="file-browser-breadcrumb-back-button fas fa-arrow-alt-square-left",this.backButton.onclick=function(e){n.popCrumb()},i.appendChild(this.backButton),this.barEl=document.createElement("ul"),this.barEl.className="file-browser-breadcrumb-bar",i.appendChild(this.barEl)}return e.prototype.changePath=function(){var e=this.client.command.makeBinaryPath(this.activePath,!0,0,this.pageSize-1);this.client.sendBinaryPackage(1,210,e),this.fileBrowser.activePath=this.activePath},e.prototype.pushBreadcrumb=function(e){var t=new i.Breadcrumb(this.barEl,this,e);this.breadcrumbs.push(t),this.breadcrumbsMap.push(e.key),this.activePath=e.key},e.prototype.popCrumb=function(){if(this.breadcrumbs.length>1){var e=this.breadcrumbs.pop();this.breadcrumbsMap.pop(),e.remove();var t=this.breadcrumbsMap[this.breadcrumbsMap.length-1];this.activePath=t,this.changePath()}},e.prototype.removeBreadcrumbByKey=function(e){for(var t,n=this.breadcrumbsMap.length,i=0;i<n;i++)if(this.breadcrumbsMap[i]===e){t=i+1;break}if(t){this.breadcrumbsMap.splice(t,this.breadcrumbsMap.length-1);for(var a=t;a<n;a++){this.breadcrumbs[a].remove()}this.breadcrumbs.splice(t,this.breadcrumbs.length-1)}this.activePath=e,this.changePath()},e}();t.BreadcrumbBar=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){var i=this;this.parentEl=e,this.bar=t,this.item=n,this.itemEl=document.createElement("li");var a=document.createElement("a");a.textContent=this.item.name.replace("\\",""),this.itemEl.appendChild(a),this.itemEl.onclick=function(e){t.removeBreadcrumbByKey(i.item.key)},this.parentEl.appendChild(this.itemEl)}return e.prototype.remove=function(){$(this.itemEl).remove()},e}();t.Breadcrumb=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=function(){function e(e,t,n){var a=this;this.parentEl=e,this.item=t,this.browser=n,this.fileWrapper=document.createElement("div"),this.fileWrapper.className="file-browser-item-row",this.parentEl.appendChild(this.fileWrapper);var o=document.createElement("i");o.className="fas fa-file file-browser-file-icon",o.style.width="20px",o.style.color="black",this.fileWrapper.appendChild(o);var s=document.createElement("span");s.className="file-browser-item-text",s.textContent=this.item.name,s.style.width="calc(55% - 12px)",this.fileWrapper.appendChild(s);var r=document.createElement("span");r.className="file-browser-item-text",r.style.width="calc(25% - 12px)";var l=this.item.date.replace(/-/g,"/");r.textContent=new Date(l).toLocaleString(),this.fileWrapper.appendChild(r);var c=document.createElement("span");c.className="file-browser-item-text",c.style.width="calc(20% - 12px)",c.style.textAlign="right";var d=this.calculateSize(this.item.size);c.textContent=d,this.fileWrapper.appendChild(c);var p=new i.WVTooltip(this.fileWrapper);p.setTitle(this.item.name),p.addAttribute(l),p.addAttribute(d),this.fileWrapper.onclick=function(e){if(e.preventDefault(),e.stopPropagation(),e.ctrlKey){var t=n.fileList.indexOf(a.item.path);return-1===t?n.fileList.push(a.item.path):n.fileList.splice(t,1),void $(a.fileWrapper).toggleClass("file-browser-item-row-slected")}n.fileList=[],n.openCallBack(a.item.path),n.showFilePreview||e.ctrlKey?($(".file-browser-item-row").each(function(){$(this).removeClass("file-browser-item-row-slected")}),$(a.fileWrapper).addClass("file-browser-item-row-slected")):n.submit()}}return e.prototype.calculateSize=function(e){var t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(e)/Math.log(1024));return 0===n?e+" "+t[n]:(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]},e}();t.File=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=function(){function e(e,t,n){var a=this;this.parentEl=e,this.item=t,this.folderWrapper=document.createElement("div"),this.folderWrapper.className="file-browser-item-row",this.parentEl.appendChild(this.folderWrapper);var o=document.createElement("i");o.className="far fa-folder file-browser-folder-icon",this.folderWrapper.appendChild(o);var s=document.createElement("span");s.className="file-browser-item-text";var r=this.item.name.replace("\\","");s.textContent=r,s.style.width="calc(55% - 12px)",this.folderWrapper.appendChild(s);var l=document.createElement("span");l.className="file-browser-item-text",l.style.width="calc(25% - 12px)";var c=this.item.date.replace(/-/g,"/");l.textContent=new Date(c).toLocaleString(),this.folderWrapper.appendChild(l);var d=new i.WVTooltip(this.folderWrapper);d.setTitle(r),d.addAttribute(c),this.folderWrapper.onclick=function(e){n.setPath(a.item),n.setPage(1)}}return e.prototype.calculateSize=function(e){var t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(e)/Math.log(1024));return 0===n?e+" "+t[n]:(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]},e}();t.Folder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=this;this.page=1,this.parentEl=e,this.browser=t,this.page=t.getPage(),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="file-browser-pagination-row",this.parentEl.appendChild(this.wrapperEl);var i=document.createElement("div");i.className="file-browser-pagination-icon";var a=document.createElement("i");a.className="far fa-chevron-double-left",$(i).off("click").on("click",function(e){n.setPage(1)}),i.appendChild(a),this.wrapperEl.appendChild(i);var o=document.createElement("div");o.className="file-browser-pagination-icon";var s=document.createElement("i");s.className="far fa-chevron-left",$(o).off("click").on("click",function(e){n.page>1&&n.setPage(n.page-1)}),o.appendChild(s),this.wrapperEl.appendChild(o),this.actualPageInput=document.createElement("input"),this.actualPageInput.className="file-browser-actual-page-input",this.actualPageInput.value=this.page.toString(),$(this.actualPageInput).change(function(e){n.setPage(parseInt(n.actualPageInput.value))}),this.wrapperEl.appendChild(this.actualPageInput),this.maxPage=document.createElement("span"),this.maxPage.className="file-browser-max-page",this.maxPage.textContent=" /"+Math.ceil(this.browser.size/this.browser.pageSize),this.wrapperEl.appendChild(this.maxPage);var r=document.createElement("div");r.className="file-browser-pagination-icon";var l=document.createElement("i");l.className="far fa-chevron-right",$(r).off("click").on("click",function(e){n.page<n.browser.size/n.browser.pageSize&&n.setPage(n.page+1)}),r.appendChild(l),this.wrapperEl.appendChild(r);var c=document.createElement("div");c.className="file-browser-pagination-icon";var d=document.createElement("i");d.className="far fa-chevron-double-right",$(c).off("click").on("click",function(e){n.setPage(Math.ceil(n.browser.size/n.browser.pageSize))}),c.appendChild(d),this.wrapperEl.appendChild(c)}return e.prototype.setPage=function(e){this.page=e,this.actualPageInput.value=this.page.toString(),this.browser.setPage(e)},e.prototype.updatePageCount=function(){this.maxPage.textContent=" /"+Math.ceil(this.browser.size/this.browser.pageSize)},e.prototype.show=function(){$(this.wrapperEl).show()},e.prototype.hide=function(){$(this.wrapperEl).hide()},e}();t.PaginationRow=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(90),o=n(89),s=n(88),r=n(8),l=["ID_IMPORTDIALOG_SLIDER_TEXT_0","ID_IMPORTDIALOG_SLIDER_TEXT_1","ID_IMPORTDIALOG_SLIDER_TEXT_2","ID_IMPORTDIALOG_SLIDER_TEXT_3"],c=["ID_IMPORTDIALOG_SLIDER_TOOLTIP_0","ID_IMPORTDIALOG_SLIDER_TOOLTIP_1","ID_IMPORTDIALOG_SLIDER_TOOLTIP_2","ID_IMPORTDIALOG_SLIDER_TOOLTIP_3"],d=function(){function e(e,t,n,l){var c=this;this.client=e,this.file=t,this.callback=n,this.modalWrapper=document.createElement("div"),this.modalWrapper.className="native-loading-modal",this.isOpen=!0,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscPressed=this.detectEscPressed.bind(this),this.setTesselation=this.setTesselation.bind(this),this.setImportMode=this.setImportMode.bind(this),this.setSliderStep=this.setSliderStep.bind(this),this.titleEl=document.createElement("span"),this.titleEl.className="native-loading-modal-title",this.titleEl.textContent=i.translate("ID_IMPORTDIALOG_TITLE_TEXT"),this.modalWrapper.appendChild(this.titleEl);var d=document.createElement("div");d.className="native-loading-modal-content-wrapper",d.style.marginTop="20px",d.style.height="calc(50% - 20px)",this.modalWrapper.appendChild(d),this.slider=new s.LoadingSlider(d,!0,this.setSliderStep),this.preferGeometrySwitch=new o.OptionToggle(d,"ID_IMPORTDIALOG_SWITCH_READMODE_TEXT_BREP","ID_IMPORTDIALOG_SWITCH_READMODE_TEXT_TESSELLATION",this.setTesselation),this.geomTooltip=new r.WVTooltip(this.preferGeometrySwitch.wrapperEl),this.geomTooltip.setTitle(i.translate("ID_IMPORTDIALOG_SWITCH_READMODE_TOOLTIP")),this.prefer3DSwitch=new o.OptionToggle(d,"ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TEXT_2D","ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TEXT_3D",this.setImportMode),this.readModeTooltip=new r.WVTooltip(this.prefer3DSwitch.wrapperEl),this.readModeTooltip.setTitle(i.translate("ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TOOLTIP")),this.prefer3DSwitch.wrapperEl.style.marginTop="20px";try{_Hide2DSwitch&&$(this.prefer3DSwitch.wrapperEl).hide()}catch(e){}var p=document.createElement("div");p.className="native-loading-buttons",this.modalWrapper.appendChild(p),this.skipButton=document.createElement("button"),this.skipButton.textContent=i.translate("ID_IMPORTDIALOG_BUTTON_SKIP"),this.skipButton.className="native-loading-skip",p.appendChild(this.skipButton),$(this.skipButton).click(function(e){c.skip()}),l||(this.rememberMeSwitch=new a.NativeLoadingSwitch(p,"ID_IMPORTDIALOG_SWITCH_DONOTSHOWAGAIN_TEXT",!1),this.rememberMeSwitch.wrapperEl.className="remember-me-switch"),this.submitButton=document.createElement("button"),this.submitButton.className="native-loading-ok",this.submitButton.textContent=i.translate("ID_IMPORTDIALOG_BUTTON_OK"),p.appendChild(this.submitButton),$(this.submitButton).click(function(e){var t=c.slider.getStep(),n={prefer2D:c.prefer3DSwitch.getVal(),preferTesselation:c.preferGeometrySwitch.getVal(),step:t,rememberMe:!!c.rememberMeSwitch&&c.rememberMeSwitch.getVal()};c.initSettings=n,c.submit(n)}),document.body.appendChild(this.modalWrapper),window.onresize=function(e){i.resizeHandler(),c.resize()};var u=localStorage.getItem("nativeLoadingSettings");if(null!==u){var h=JSON.parse(u);this.initSettings=h}else this.initSettings={step:3,prefer2D:!0,rememberMe:!1,preferTesselation:!0},this.slider.stepTo(3);this.langChanged(),this.client.on("@changeLang",function(e){c.langChanged()}),this.resize()}return e.prototype.setCallback=function(e){this.callback=e},e.prototype.setTesselation=function(e){this.preferGeometrySwitch&&(this.slider.setTesselationMode(!e),e?this.preferGeometrySwitch.setHighlightColor("darkgreen"):this.preferGeometrySwitch.setHighlightColor("darkred"))},e.prototype.setImportMode=function(e){},e.prototype.setSliderStep=function(e){if(this.preferGeometrySwitch&&this.prefer3DSwitch){var t=void 0;switch(e){case 0:t=_IncludeHiddenNativeLoading;break;case 1:t=_CompleteNativeLoading;break;case 2:t=_ModerateNativeLoading;break;case 3:t=_FastNativeLoading}-1!==t.indexOf("PreferGeometry")&&this.preferGeometrySwitch.setVal(!1);-1!==t.indexOf("PreferTessellation")&&this.preferGeometrySwitch.setVal(!0);-1!==t.indexOf("Prefer3D")&&this.prefer3DSwitch.setVal(!0);-1!==t.indexOf("Prefer2D")&&this.prefer3DSwitch.setVal(!1)}},e.prototype.langChanged=function(){this.titleEl.textContent=i.translate("ID_IMPORTDIALOG_TITLE_TEXT"),this.prefer3DSwitch.changeLang(),this.preferGeometrySwitch.changeLang(),this.readModeTooltip.setTitle(i.translate("ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TOOLTIP")),this.geomTooltip.setTitle(i.translate("ID_IMPORTDIALOG_SWITCH_READMODE_TOOLTIP"));var e=document.getElementById("slider_step_0_text");e.textContent=i.translate(l[0]),new r.WVTooltip(e).setTitle(i.translate(c[0]));var t=document.getElementById("Step_0");new r.WVTooltip(t).setTitle(i.translate(c[0]));var n=document.getElementById("slider_step_1_text");n.textContent=i.translate(l[1]),new r.WVTooltip(n).setTitle(i.translate(c[1]));var a=document.getElementById("Step_1");new r.WVTooltip(a).setTitle(i.translate(c[1]));var o=document.getElementById("slider_step_2_text");o.textContent=i.translate(l[2]),new r.WVTooltip(o).setTitle(i.translate(c[2]));var s=document.getElementById("Step_2");new r.WVTooltip(s).setTitle(i.translate(c[2]));var d=document.getElementById("slider_step_3_text");d.textContent=i.translate(l[3]),new r.WVTooltip(d).setTitle(i.translate(c[3]));var p=document.getElementById("Step_3");new r.WVTooltip(p).setTitle(i.translate(c[3])),this.rememberMeSwitch&&this.rememberMeSwitch.changeLang()},e.prototype.resize=function(){this.slider.resize(),this.prefer3DSwitch.resize(),this.preferGeometrySwitch.resize()},e.prototype.skip=function(){var e=!!this.rememberMeSwitch&&this.rememberMeSwitch.getVal();this.initSettings.rememberMe=e,localStorage.setItem("nativeLoadingSettings",JSON.stringify(this.initSettings)),this.hide()},e.prototype.hide=function(e){document.body.removeEventListener("click",this.detectOutsideClick),document.body.removeEventListener("keyup",this.detectEscPressed),this.isOpen=!1,e||(i.deactivateInteraction(this.client),this.callback(this.file),i.canvasStack.setTabTitle(this.file.split("/")[this.file.split("/").length-1]),this.client.emit("@NativeLoad",this.file)),this.file=void 0,this.callback=void 0,$(this.modalWrapper).hide()},e.prototype.setFile=function(e){this.file=e},e.prototype.show=function(){if(this.isOpen=!0,$(this.modalWrapper).show(),document.body.addEventListener("click",this.detectOutsideClick),document.body.addEventListener("keyup",this.detectEscPressed),null===localStorage.getItem("nativeLoadingSettings")&&(this.initSettings={step:3,prefer2D:!0,preferTesselation:!0}),this.prefer3DSwitch.setVal(this.initSettings.prefer2D),this.preferGeometrySwitch.setVal(this.initSettings.preferTesselation),this.slider.stepTo(this.initSettings.step),this.rememberMeSwitch){this.rememberMeSwitch.setVal(!1);var e=this.submitButton.offsetWidth+this.skipButton.offsetWidth+100;this.rememberMeSwitch.wrapperEl.style.width="calc(100% - "+e+"px)",this.rememberMeSwitch.titleEl.style.overflow="hidden",this.rememberMeSwitch.titleEl.style.textOverflow="ellipsis",this.rememberMeSwitch.titleEl.style.whiteSpace="nowrap",this.rememberMeSwitch.titleEl.style.width="calc(100% - 40px)"}},e.prototype.detectOutsideClick=function(e){e.target!==this.modalWrapper&&!this.modalWrapper.contains(e.target)&&this.rememberMeSwitch&&this.hide(!0)},e.prototype.detectEscPressed=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.hide(!0)},e.prototype.submit=function(e){var t=this;localStorage.removeItem("nativeLoadingSettings"),localStorage.setItem("nativeLoadingSettings",JSON.stringify(e));var n='<Call Method="SetSettings">';switch(e.step){case 0:n+=_IncludeHiddenNativeLoading;break;case 1:n+=_CompleteNativeLoading;break;case 2:n+=_ModerateNativeLoading;break;case 3:n+=_FastNativeLoading}n+="</Call>",this.client.command.executeXML(n);var i=e.prefer2D?"Prefer3D":"Prefer2D",a=!1===e.preferTesselation?"PreferGeometry":"PreferTessellation";n='<Call Method="SetSettings"><Settings><Import3D><General><ImportMode>'+i+"</ImportMode>",n+="<ReadMode>"+a+"</ReadMode></General ></Import3D ></Settings ></Call > ",this.client.command.executeXML(n),this.client.once("SetSettings",function(e){t.hide()})},e}();t.NativeLoadingModal=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=["ID_IMPORTDIALOG_SLIDER_TEXT_0","ID_IMPORTDIALOG_SLIDER_TEXT_1","ID_IMPORTDIALOG_SLIDER_TEXT_2","ID_IMPORTDIALOG_SLIDER_TEXT_3"],o=function(){function e(e,t,n){var o=this;this.clickcallBack=n,this.parent=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="stepped-slider-wrapper",this.parent.appendChild(this.wrapperEl),this.sliderWrapper=document.createElement("div"),this.sliderWrapper.className="stepped-slider-bar",this.wrapperEl.appendChild(this.sliderWrapper),this.handle=document.createElement("span"),this.handle.className="stepped-slider-handle draggable",this.handle.id="native-loading-handle",this.sliderWrapper.appendChild(this.handle),this.bar=document.createElement("span"),this.bar.className="stepped-slider-bar-filled",this.bar.id="native-loading-bar",this.sliderWrapper.appendChild(this.bar);for(var s=this,r=0;r<a.length;r++)!function(e){var t=document.createElement("span");t.id="Step_"+e,t.className="slider-step",$(t).css("left",133*e);var n=document.createElement("span");t.appendChild(n);var r=document.createElement("span");r.className="slider-step-title",r.id="slider_step_"+e+"_text";var l=a[e];r.textContent=i.translate(l),$(t).click(function(t){o.stepTo(e)}),t.appendChild(r),s.sliderWrapper.appendChild(t)}(r);var l=document.createElement("span");l.className="stepped-slider-bar-empty",$(l).click(function(e){var t=e.pageX-$(e.target).parent().offset().left,n=Math.floor(t/133),i=Math.ceil(t/133);i>o.step?o.stepTo(i):o.stepTo(n)}),this.sliderWrapper.appendChild(l),this.setTesselationMode(t),this.shrink=0,$(this.handle).kendoTouch({dragstart:function(e){o.offset=$(o.parent).offset().left},drag:function(e){var t=500-document.body.clientWidth;e.touch.x.location-o.offset<=404-t&&e.touch.x.location-o.offset>=0&&(o.handle.style.left=e.touch.x.location-o.offset+"px",o.bar.style.width=e.touch.x.location-o.offset+"px")},dragend:function(e){var t=parseInt($(o.handle).css("left"));o.stepTo(Math.round(t/(133-o.shrink)))}})}return e.prototype.stepTo=function(e){this.clickcallBack(e),this.step=e,$("#native-loading-bar").css("width",133*e-e*this.shrink),$("#native-loading-handle").css("left",133*e-e*this.shrink+4);var t=this.loadTesselation;$(".slider-step").each(function(n){var i=parseInt(this.id.split("_")[1]);t?($(this).removeClass("slider-step-green-hover").addClass("slider-step-orange-hover"),i===e?$(this).children(".slider-step-title").css("color","darkred"):$(this).children(".slider-step-title").css("color","black")):($(this).removeClass("slider-step-orange-hover").addClass("slider-step-green-hover"),i===e?$(this).children(".slider-step-title").css("color","green"):$(this).children(".slider-step-title").css("color","black")),i<e?$(this).children().first().addClass("slider-step-highlighted"):$(this).children().first().removeClass("slider-step-highlighted")}),t?($("#native-loading-handle").css("background-color","darkred"),$(".stepped-slider-bar-filled").css("background-color","darkred"),$(".slider-step-highlighted").css("background-color","darkred")):($("#native-loading-handle").css("background-color","darkgreen"),$(".stepped-slider-bar-filled").css("background-color","darkgreen"),$(".slider-step-highlighted").css("background-color","darkgreen"))},e.prototype.setTesselationMode=function(e){if(this.loadTesselation=e,e){$("#native-loading-handle").css("background-color","darkred"),$(".stepped-slider-bar-filled").css("background-color","darkred"),$(".slider-step-highlighted").css("background-color","darkred");var t=this.step;$(".slider-step").each(function(e){var n=parseInt(this.id.split("_")[1]);$(this).removeClass("slider-step-green-hover").addClass("slider-step-orange-hover"),n===t?$(this).children(".slider-step-title").css("color","darkred"):$(this).children(".slider-step-title").css("color","black")})}else{$("#native-loading-handle").css("background-color","darkgreen"),$(".stepped-slider-bar-filled").css("background-color","darkgreen"),$(".slider-step-highlighted").css("background-color","darkgreen");var n=this.step;$(".slider-step").each(function(e){var t=parseInt(this.id.split("_")[1]);$(this).removeClass("slider-step-orange-hover").addClass("slider-step-green-hover"),t===n?$(this).children(".slider-step-title").css("color","darkgreen"):$(this).children(".slider-step-title").css("color","black")})}},e.prototype.resize=function(){var e=500-document.body.clientWidth;if(e>0){this.sliderWrapper.style.width=418-e+"px";var t=e/3;this.shrink=t,this.bar.style.width=133*this.step-this.step*this.shrink+"px",this.handle.style.left=133*this.step-this.step*this.shrink+4+"px",$(".slider-step").each(function(e){this.style.left=133*e-e*t+"px"})}else{this.sliderWrapper.style.width="418px",this.shrink=0;this.bar.style.width=133*this.step-this.step*this.shrink+"px",this.handle.style.left=133*this.step-this.step*this.shrink+4+"px",$(".slider-step").each(function(e){this.style.left=133*e-0*e+"px"})}},e.prototype.getStep=function(){return this.step},e}();t.LoadingSlider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e,t,n,a,o){var s=this;this.val=!1,this.parent=e,this.clickCallback=a,this.titleIdLeft=t,this.titleIdRight=n,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="option-toggle",this.parent.appendChild(this.wrapperEl),o&&(this.val="right"===o),this.titleElLeft=document.createElement("div"),this.titleElLeft.className="option-toggle-title",this.titleElLeft.id=t,this.titleElLeft.textContent=i.translate(t),this.wrapperEl.appendChild(this.titleElLeft),this.boxEl=document.createElement("div"),this.boxEl.className="option-toggle-wrapper option-toggle-wrapper";var r=this.val?"toggle-on":"toggle-off";$(this.boxEl).addClass(r),this.wrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="toggle-handle",this.boxEl.appendChild(this.handleEl),this.titleElRight=document.createElement("div"),this.titleElRight.className="option-toggle-title",this.titleElRight.id=n,this.titleElRight.textContent=i.translate(n),this.wrapperEl.appendChild(this.titleElRight),this.titleElLeft.style.left="calc(50% - "+(this.titleElLeft.clientWidth+15)+"px)",$(this.boxEl).click(function(e){s.setVal(!s.val)}),this.setVal(this.val)}return e.prototype.resize=function(){this.titleElLeft.style.left="calc(50% - "+(this.titleElLeft.clientWidth+15)+"px)"},e.prototype.getVal=function(){return this.val},e.prototype.setVal=function(e){this.val=e,this.clickCallback(this.val),this.val?($(this.boxEl).removeClass("toggle-off").addClass("toggle-on"),$(this.titleElLeft).removeClass("option-toggle-title-active"),$(this.titleElRight).addClass("option-toggle-title-active")):($(this.boxEl).removeClass("toggle-on").addClass("toggle-off"),$(this.titleElLeft).addClass("option-toggle-title-active"),$(this.titleElRight).removeClass("option-toggle-title-active"))},e.prototype.changeLang=function(){this.titleElLeft.textContent=i.translate(this.titleIdLeft),this.titleElRight.textContent=i.translate(this.titleIdRight)},e.prototype.setHighlightColor=function(e){this.val?(this.titleElRight.style.color=e,this.titleElLeft.style.color="black"):(this.titleElLeft.style.color=e,this.titleElRight.style.color="black")},e}();t.OptionToggle=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e,t,n){var a=this;this.val=!1,this.parent=e,this.titleId=t,this.wrapperEl=document.createElement("div"),this.parent.appendChild(this.wrapperEl),n&&(this.val=n),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val+"",this.hiddenCheckbox.style.display="none",this.wrapperEl.appendChild(this.hiddenCheckbox),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper",this.boxEl.style.display="inline-block";var o=this.val?"switch-on":"switch-off";$(this.boxEl).addClass(o),this.wrapperEl.appendChild(this.boxEl),this.titleEl=document.createElement("div"),this.titleEl.className="switch-title",this.titleEl.id=t,this.titleEl.textContent=i.translate(t),this.wrapperEl.appendChild(this.titleEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),$(this.boxEl).click(function(e){a.val=!a.val;var t=a.val?"true":"false";$(a.hiddenCheckbox).val(t),$(a.hiddenCheckbox).trigger("change"),a.val?$(a.boxEl).removeClass("switch-off").addClass("switch-on"):$(a.boxEl).removeClass("switch-on").addClass("switch-off")}),this.setVal(this.val)}return e.prototype.getTitleEl=function(){return this.titleEl},e.prototype.getClickEl=function(){return this.hiddenCheckbox},e.prototype.getVal=function(){return this.val},e.prototype.changeLang=function(){this.titleEl.textContent=i.translate(this.titleId)},e.prototype.setVal=function(e){var t=e?"true":"false";this.val=e,$(this.hiddenCheckbox).val(t),$(this.hiddenCheckbox).trigger("change"),this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e}();t.NativeLoadingSwitch=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.Root=1]="Root",e[e.ProductOccurrence=2]="ProductOccurrence",e[e.DoNotUse1=3]="DoNotUse1",e[e.DoNotUse2=4]="DoNotUse2",e[e.Ri_BrepModel=5]="Ri_BrepModel",e[e.Ri_PolyBrepModel=6]="Ri_PolyBrepModel",e[e.Ri_Set=7]="Ri_Set",e[e.Ri_PolyWire=8]="Ri_PolyWire",e[e.Ri_TessMarkup=9]="Ri_TessMarkup",e[e.DoNotUse3=10]="DoNotUse3",e[e.Part=11]="Part",e[e.AxisRoot=12]="AxisRoot",e[e.Axis=13]="Axis",e[e.PMIView=14]="PMIView",e[e.Annotation=15]="Annotation",e[e.PLACEHOLDER_AnnotationItem=16]="PLACEHOLDER_AnnotationItem",e[e.AnnotationReference=17]="AnnotationReference",e[e.AnnotationSet=18]="AnnotationSet",e[e.Curve=19]="Curve",e[e.Line=20]="Line",e[e.Plane=21]="Plane",e[e.Direction=22]="Direction",e[e.Point=23]="Point",e[e.PointSet=24]="PointSet",e[e.CoordinateSystem=25]="CoordinateSystem",e[e.Handle_Root=26]="Handle_Root",e[e.Handle_Arrow=27]="Handle_Arrow",e[e.Handle_Sphere=28]="Handle_Sphere",e[e.Handle_Curlyarrow=29]="Handle_Curlyarrow",e[e.Solid=30]="Solid",e[e.Wire=31]="Wire",e[e.AnnotationItem=32]="AnnotationItem",e[e.Markup_Text=33]="Markup_Text",e[e.Dimensioning=34]="Dimensioning",e[e.PointMarker=35]="PointMarker",e[e.EdgeMarker=36]="EdgeMarker",e[e.CircleMarker=37]="CircleMarker",e[e.AxisMarker=38]="AxisMarker",e[e.ReferenceLine=39]="ReferenceLine",e[e.LineMarker=40]="LineMarker",e[e.TriangleMesh=41]="TriangleMesh",e[e.Scene=42]="Scene",e[e.Markup_Circle=43]="Markup_Circle",e[e.Markup_Rectangle=44]="Markup_Rectangle",e[e.Markup_Freehand=45]="Markup_Freehand",e[e.CutGeometry_Surface=46]="CutGeometry_Surface",e[e.CutGeometry_Wire=47]="CutGeometry_Wire",e[e.PmiMarkup_Unknown=48]="PmiMarkup_Unknown",e[e.PmiMarkup_Text=49]="PmiMarkup_Text",e[e.PmiMarkup_Dimension=50]="PmiMarkup_Dimension",e[e.PmiMarkup_Arrow=51]="PmiMarkup_Arrow",e[e.PmiMarkup_Balloon=52]="PmiMarkup_Balloon",e[e.PmiMarkup_CircleCenter=53]="PmiMarkup_CircleCenter",e[e.PmiMarkup_Coordinate=54]="PmiMarkup_Coordinate",e[e.PmiMarkup_Datum=55]="PmiMarkup_Datum",e[e.PmiMarkup_Fastener=56]="PmiMarkup_Fastener",e[e.PmiMarkup_Gdt=57]="PmiMarkup_Gdt",e[e.PmiMarkup_Locator=58]="PmiMarkup_Locator",e[e.PmiMarkup_MeasurementPoint=59]="PmiMarkup_MeasurementPoint",e[e.PmiMarkup_Roughness=60]="PmiMarkup_Roughness",e[e.PmiMarkup_Welding=61]="PmiMarkup_Welding",e[e.PmiMarkup_Table=62]="PmiMarkup_Table",e[e.PmiMarkup_Other=63]="PmiMarkup_Other",e[e.OffsetLine=64]="OffsetLine",e[e.Drawing=65]="Drawing",e[e.Drawing_Model=66]="Drawing_Model",e[e.Drawing_Sheet=67]="Drawing_Sheet",e[e.Drawing_View=68]="Drawing_View",e[e.Drawing_Entity=69]="Drawing_Entity",e[e.Drawing_Block=70]="Drawing_Block",e[e.Drawing_BlockBasic=71]="Drawing_BlockBasic",e[e.Drawing_BlockOperator=72]="Drawing_BlockOperator",e[e.Drawing_BlockBackground=73]="Drawing_BlockBackground",e[e.Drawing_ClipFrame=74]="Drawing_ClipFrame",e[e.Drawing_Curve=75]="Drawing_Curve",e[e.Drawing_FilledArea=76]="Drawing_FilledArea",e[e.Drawing_Picture=77]="Drawing_Picture",e[e.Drawing_Vertices=78]="Drawing_Vertices",e[e.Dummy=79]="Dummy",e[e.CutGeometry_Set=80]="CutGeometry_Set",e[e.MasterRootNode=81]="MasterRootNode",e[e.MarkupSet=82]="MarkupSet",e[e.DataAnalysisResult=83]="DataAnalysisResult",e[e.Markup=84]="Markup",e[e.UnitTranslation=85]="UnitTranslation",e[e.Document2D=86]="Document2D",e[e.Various=4294967294]="Various",e[e.Unknown=4294967295]="Unknown"}(t.NodeType||(t.NodeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(94),a=n(0),o=n(35),s=n(93),r=n(4),l=function(){function e(e){var t=this;this.textModule="%file",this.orientation="Portrait",this.client=e,this.isOpen=!0,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscPressed=this.detectEscPressed.bind(this),this.submit=this.submit.bind(this),this.resize=this.resize.bind(this),this.setWhiteBackgroundSetting=this.setWhiteBackgroundSetting.bind(this),this.setLineWidthEnabledSetting=this.setLineWidthEnabledSetting.bind(this),this.setTiledSetting=this.setTiledSetting.bind(this),this.setFontColorSetting=this.setFontColorSetting.bind(this),this.orientation=a.settingsPane.defaultSettings.Settings.Print.Orientation,this.printFontNameEnum=[],this.printFontStyleEnum=[{langId:"ID_PRINT_MODAL_FONT_REGULAR",value:"0"},{langId:"ID_PRINT_MODAL_FONT_BOLD",value:"1"},{langId:"ID_PRINT_MODAL_FONT_ITALIC",value:"2"},{langId:"ID_PRINT_MODAL_FONT_BOLD_ITALIC",value:"3"},{langId:"ID_PRINT_MODAL_FONT_UNDERLINE",value:"4"},{langId:"ID_PRINT_MODAL_FONT_STRIKEOUT",value:"8"}];try{this.printPaperSizeEnum=_PrintPaperSizes}catch(e){this.printPaperSizeEnum=[{langId:"-",width:-1,height:-1,dpi:600},{langId:"A0",width:841,height:1189,dpi:200},{langId:"A1",width:594,height:841,dpi:300},{langId:"A2",width:420,height:594,dpi:400},{langId:"A3",width:297,height:420,dpi:500},{langId:"A4",width:210,height:297,dpi:600},{langId:"A5",width:148,height:210,dpi:600},{langId:"Letter",width:216,height:279,dpi:600},{langId:"Legal",width:216,height:256,dpi:600},{langId:"Ledger",width:279,height:432,dpi:500}]}document.body.addEventListener("mousedown",this.detectOutsideClick),document.body.addEventListener("keyup",this.detectEscPressed),this.modalWrapper=document.createElement("div"),this.modalWrapper.className="print-modal";var n=document.createElement("div");n.className="print-modal-site-wrapper",n.style.borderRight="1px solid lightgrey",this.modalWrapper.appendChild(n);var i=document.createElement("div");i.className="print-modal-image-title",i.textContent=a.translate("ID_PRINT_MODAL_PRINT_SETTINGS"),n.appendChild(i);var o=document.createElement("div");o.className="print-modal-tab-bar",n.appendChild(o);var s=document.createElement("div");s.className="print-modal-tab print-modal-active-tab",s.textContent="General",o.appendChild(s);var r=document.createElement("div");r.className="print-modal-tab",r.textContent="Text",o.appendChild(r),s.onclick=function(e){$(s).hasClass("print-modal-active-tab")||($(r).removeClass("print-modal-active-tab"),$(s).addClass("print-modal-active-tab"),t.buildDefaultOptions(),$(t.textOptionWrapper).hide(),$(t.defaultOptionWrapper).show())},r.onclick=function(e){$(r).hasClass("print-modal-active-tab")||($(s).removeClass("print-modal-active-tab"),$(r).addClass("print-modal-active-tab"),$(t.defaultOptionWrapper).hide(),$(t.textOptionWrapper).show())},this.defaultOptionWrapper=document.createElement("div"),this.defaultOptionWrapper.className="print-modal-options-wrapper",n.appendChild(this.defaultOptionWrapper),this.textOptionWrapper=document.createElement("div"),this.textOptionWrapper.className="print-modal-options-wrapper",n.appendChild(this.textOptionWrapper),this.showDefaultOptions();this.client.command.executeXML('<Call Method="GetTemplate"><Type>PrintTemplate</Type></Call>'),this.client.on("GetTemplate.PrintTemplate",function(e){t.fillOptions(e),t.buildTextOptions(),t.buildDefaultOptions()}),this.buttonRow=document.createElement("div"),this.buttonRow.className="print-modal-button-row",n.appendChild(this.buttonRow);var l=!1;try{l=_BrowserPrintButtonDeactivated}catch(e){}if(!l){var c=document.createElement("i");c.className="print-modal-icon fas fa-print",c.style.marginRight="15px",this.buttonRow.appendChild(c),c.onclick=function(e){t.createPDF(!0)}}var d=document.createElement("i");d.className="print-modal-icon fas fa-download",d.style.marginRight="15px",this.buttonRow.appendChild(d),d.onclick=function(e){t.createPDF(!1)};var p=document.createElement("button");p.className="print-modal-button",p.textContent=a.translate("ID_PRINT_MODAL_PRINT");var u=document.createElement("button");u.className="print-modal-button",u.style.cssFloat="right",u.textContent="OK",this.buttonRow.appendChild(u),u.onclick=this.submit;var h=document.createElement("div");h.className="print-modal-site-wrapper",h.style.left="50%",this.modalWrapper.appendChild(h);var m=document.createElement("div");m.className="print-modal-image-title",m.textContent=a.translate("ID_PRINT_MODAL_IMAGE_PREVIEW"),h.appendChild(m);var f=document.createElement("div");f.className="print-modal-image-canvas",h.appendChild(f),this.previewImage=document.createElement("img"),this.previewImage.className="print-modal-image",f.appendChild(this.previewImage),this.dpi=parseInt(a.settingsPane.defaultSettings.Settings.Print.PageDPI);var v=document.createElement("div");v.className="print-modal-long-input-wrapper",h.appendChild(v),this.paperSizeSelect=document.createElement("select"),this.paperSizeSelect.style.margin="0",this.paperSizeSelect.className="print-modal-select";for(var g=this.printPaperSizeEnum.length,C=0;C<g;C++){var _=document.createElement("option");_.value=C.toString(),_.text=a.translate(this.printPaperSizeEnum[C].langId),_.selected=this.isSelectedPaperSize(this.printPaperSizeEnum[C].width,this.printPaperSizeEnum[C].height),this.paperSizeSelect.appendChild(_)}this.paperSizeSelect.onchange=function(e){var n=parseInt(t.paperSizeSelect.value);t.dpi=t.printPaperSizeEnum[n].dpi;var i=t.mmToPPI(t.printPaperSizeEnum[n].width.toString()),a=t.mmToPPI(t.printPaperSizeEnum[n].height.toString()),o='<Call Method="SetSettings"><Settings><Print>';o+="<PageWidth>",o+="Portrait"===t.orientation?i:a,o+="</PageWidth>",o+="<PageHeight>",o+="Portrait"===t.orientation?a:i,o+="</PageHeight>",o+="<PageDPI>"+t.dpi+"</PageDPI>",o+="</Print></Settings></Call>",t.client.command.executeXML(o)},v.appendChild(this.paperSizeSelect);var I=document.createElement("div");I.className="print-modal-size-wrapper",this.widthEl=document.createElement("span"),this.widthEl.textContent=this.ppiToMM(a.settingsPane.defaultSettings.Settings.Print.PageWidth)+" mm",I.appendChild(this.widthEl);var S=document.createElement("span");S.textContent=" x ",I.appendChild(S),this.heightEl=document.createElement("span"),this.heightEl.textContent=this.ppiToMM(a.settingsPane.defaultSettings.Settings.Print.PageHeight)+" mm",I.appendChild(this.heightEl),v.appendChild(I);var y=document.createElement("div");y.className="print-modal-option-group",h.appendChild(y);var E=document.createElement("div");E.textContent=a.translate("ID_PRINT_MODAL_DOCUMENT_SIZE"),E.className="print-modal-option-group-title",y.appendChild(E);var b=document.createElement("div");b.className="print-modal-long-input-wrapper",y.appendChild(b);var w=document.createElement("span");w.textContent=a.translate("ID_TEXT_PAPERWIDTH"),w.className="print-modal-long-input-title",b.appendChild(w),this.widthInput=document.createElement("input"),this.widthInput.className="print-modal-long-input",this.widthInput.value=this.ppiToMM(a.settingsPane.defaultSettings.Settings.Print.PageWidth).toString(),this.widthInput.onfocus=this.onInputFocus,this.widthInput.onblur=this.onInputBlur,this.widthInput.onchange=function(e){var n=t.mmToPPI(t.widthInput.value),i=a.settingsPane.defaultSettings.Settings.Print.PageHeight,o='<Call Method="SetSettings"><Settings><Print><PageWidth>'+n+"</PageWidth>";o+=n>i?"<Orientation>Landscape</Orientation>":"<Orientation>Portrait</Orientation>",o+="</Print></Settings></Call>",t.client.command.executeXML(o)},b.appendChild(this.widthInput);var T=document.createElement("div");T.className="print-modal-long-input-wrapper",y.appendChild(T);var M=document.createElement("span");M.textContent=a.translate("ID_TEXT_PAPERHEIGHT"),M.className="print-modal-long-input-title",T.appendChild(M),this.heightInput=document.createElement("input"),this.heightInput.className="print-modal-long-input",this.heightInput.value=this.ppiToMM(a.settingsPane.defaultSettings.Settings.Print.PageHeight).toString(),this.heightInput.onfocus=this.onInputFocus,this.heightInput.onblur=this.onInputBlur,this.heightInput.onchange=function(e){var n=t.mmToPPI(t.heightInput.value),i=a.settingsPane.defaultSettings.Settings.Print.PageWidth,o='<Call Method="SetSettings"><Settings><Print><PageHeight>'+n+"</PageHeight>";o+=n>i?"<Orientation>Portrait</Orientation>":"<Orientation>Landscape</Orientation>",o+="</Print></Settings></Call>",t.client.command.executeXML(o)},T.appendChild(this.heightInput);var N=document.createElement("div");N.className="print-modal-long-input-wrapper",y.appendChild(N);var O=document.createElement("span");O.textContent=a.translate("ID_DPI"),O.className="print-modal-long-input-title",N.appendChild(O),this.dpiInput=document.createElement("input"),this.dpiInput.className="print-modal-long-input",this.dpiInput.value=a.settingsPane.defaultSettings.Settings.Print.PageDPI,this.dpiInput.onfocus=this.onInputFocus,this.dpiInput.onblur=this.onInputBlur,this.dpiInput.onchange=function(e){t.dpi=parseInt(t.dpiInput.value);var n='<Call Method="SetSettings"><Settings><Print>';n+="<PageHeight>"+t.mmToPPI(t.heightInput.value)+"</PageHeight>",n+="<PageWidth>"+t.mmToPPI(t.widthInput.value)+"</PageWidth><PageDPI>"+t.dpiInput.value+"</PageDPI></Print></Settings></Call>",t.client.command.executeXML(n)},N.appendChild(this.dpiInput),this.getPrintPreview(),this.client.on("CreatePrintPreview",function(e){var n="data:image/png;base64, "+e.Image;t.previewImage.src=n}),document.body.appendChild(this.modalWrapper),window.addEventListener("resize",this.resize),this.client.on("GetSettings",function(e){t.isOpen&&(t.getPrintPreview(),t.updateUI(e.Settings.Print))})}return e.prototype.onInputFocus=function(){r.appStates.preventGlobalKeyEvents=!0},e.prototype.onInputBlur=function(){r.appStates.preventGlobalKeyEvents=!1},e.prototype.createPDF=function(e){this.client.command.executeXML('<Call Method="GetPrintImageAsPDF"></Call>'),a.blockUI();var t=r.appStates.fileName?r.appStates.fileName+".pdf":"print.pdf";this.client.once("GetPrintImageAsPDF",function(n){a.unblockUI();for(var i=atob(n.Image),o=new Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);var r=new Uint8Array(o),l=new Blob([r],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)e?window.navigator.msSaveOrOpenBlob(l):window.navigator.msSaveOrOpenBlob(l,t);else{var c=URL.createObjectURL(l);if(e)window.open(c);else{var d=document.createElement("a");d.href=URL.createObjectURL(l),d.download=t,document.body.appendChild(d),d.click(),d.remove()}}})},e.prototype.updateUI=function(e){for(var t=this.printScaleEnum.length,n=0;n<t;n++)e.ScaleMode===this.printScaleEnum[n].value&&this.scalingGroup.setStateByIndex(n,!0);this.scaleDynamicValue.value=e.Scale;var i=this.printOrientationEnum.length;this.orientation=e.Orientation;for(var n=0;n<i;n++)e.Orientation===this.printOrientationEnum[n].value&&this.orientationGroup.setStateByIndex(n,!0);this.whiteBackgroundSwitch.setVal("true"===e.WhiteBackground),this.lineWidthSwitch.setVal("true"===e.LineWidthEnabled);for(var a=this.printLineWidthUnit.length,n=0;n<a;n++)e.LineWidthUnit===this.printLineWidthUnit[n].value&&(this.unitSelect.selectedIndex=n);for(var o=this.printRangeEnum.length,n=0;n<o;n++)e.PageRange===this.printRangeEnum[n].value&&this.rangeGroup.setStateByIndex(n,!0);this.fromInput.value=e.PageRangeFirst,this.toInput.value=e.PageRangeLast,this.widthInput.value=this.ppiToMM(e.PageWidth).toString(),this.widthEl.textContent=this.ppiToMM(e.PageWidth).toString()+" mm",this.heightInput.value=this.ppiToMM(e.PageHeight).toString(),this.heightEl.textContent=this.ppiToMM(e.PageHeight).toString()+" mm";for(var s=this.printPaperSizeEnum.length,r=!1,n=0;n<s;n++)this.isSelectedPaperSize(this.printPaperSizeEnum[n].width,this.printPaperSizeEnum[n].height)&&(r=!0,this.paperSizeSelect.selectedIndex=n);r||(this.paperSizeSelect.selectedIndex=0);var l=e.PageDPI;this.dpiInput.value=l},e.prototype.ppiToMM=function(e){return Math.round(parseInt(e)/this.dpi*25.4)},e.prototype.mmToPPI=function(e){return Math.round(parseInt(e)/25.4*this.dpi)},e.prototype.isSelectedPaperSize=function(e,t){e=this.mmToPPI(e.toString()),t=this.mmToPPI(t.toString());var n=parseInt(a.settingsPane.defaultSettings.Settings.Print.PageWidth),i=parseInt(a.settingsPane.defaultSettings.Settings.Print.PageHeight);switch(this.orientation){case"Portrait":return e===n&&t===i;case"Landscape":return e===i&&t===n;default:return!1}},e.prototype.getPrintPreview=function(){var e='<Call Method="CreatePrintPreview">';e+="<Width>300</Width>",e+="<Height>300</Height>",e+="</Call>",this.client.command.executeXML(e)},e.prototype.showDefaultOptions=function(){$(this.textOptionWrapper).hide(),$(this.defaultOptionWrapper).show()},e.prototype.showTextOptions=function(){$(this.textOptionWrapper).show(),$(this.defaultOptionWrapper).hide()},e.prototype.buildDefaultOptions=function(){var e=this;$(this.defaultOptionWrapper).empty(),this.scalingGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_SCALING");for(var t=this.printScaleEnum.length,n=this,s=0;s<t;s++)!function(t){var i={value:n.printScaleEnum[t].value,langId:n.printScaleEnum[t].langId,initialState:a.settingsPane.defaultSettings.Settings.Print.ScaleMode===n.printScaleEnum[t].value},o=function(){var t='<Call Method="SetSettings"><Settings><Print><ScaleMode>'+i.value+"</ScaleMode></Print></Settings></Call>";e.client.command.executeXML(t)};if(n.scalingGroup.addButton(i,o),"Scale"===i.value){var s=document.createElement("div");s.textContent="1:",s.className="print-modal-static-text";var r=n.scalingGroup.buttons[n.scalingGroup.buttons.length-1].wrapperEl;r.appendChild(s),n.scaleDynamicValue=document.createElement("input"),n.scaleDynamicValue.className="print-modal-input",n.scaleDynamicValue.value=a.settingsPane.defaultSettings.Settings.Print.Scale,n.scaleDynamicValue.onfocus=n.onInputFocus,n.scaleDynamicValue.onblur=n.onInputBlur,n.scaleDynamicValue.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print>';n+="<Scale>"+e.scaleDynamicValue.value+"</Scale></Print></Settings></Call>",e.client.command.executeXML(n)},r.appendChild(n.scaleDynamicValue)}}(s);this.orientationGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_ORIENTATION");for(var r=this.printOrientationEnum.length,l=this,s=0;s<r;s++)!function(t){var n={value:l.printOrientationEnum[t].value,langId:l.printOrientationEnum[t].langId,initialState:a.settingsPane.defaultSettings.Settings.Print.Orientation===l.printOrientationEnum[t].value},i=function(){if(e.orientation!==n.value){var t='<Call Method="SetSettings"><Settings><Print><Orientation>'+n.value+"</Orientation>",i=a.settingsPane.defaultSettings.Settings.Print.PageWidth,o=a.settingsPane.defaultSettings.Settings.Print.PageHeight;switch(n.value){case"Landscape":case"Portrait":t+="<PageWidth>"+o+"</PageWidth>",t+="<PageHeight>"+i+"</PageHeight>"}t+="</Print></Settings></Call>",e.client.command.executeXML(t)}};l.orientationGroup.addButton(n,i)}(s);var c=document.createElement("div");c.className="print-modal-option-group",this.defaultOptionWrapper.appendChild(c);var d=document.createElement("div");d.textContent=a.translate("ID_PRINT_MISC"),d.className="print-modal-option-group-title",c.appendChild(d),this.whiteBackgroundSwitch=new o.FileBrowserSwitch(c,"ID_WHITE_BACKGROUND",this.setWhiteBackgroundSetting,"print",!0),this.lineWidthSwitch=new o.FileBrowserSwitch(c,"ID_CUSTOM_LINEWIDTH",this.setLineWidthEnabledSetting,"print",!0),this.lineWidthInput=document.createElement("input"),this.lineWidthInput.className="print-modal-input",this.lineWidthInput.style.marginLeft="15px",this.lineWidthInput.value=a.settingsPane.defaultSettings.Settings.Print.LineWidth,this.lineWidthInput.onfocus=this.onInputFocus,this.lineWidthInput.onblur=this.onInputBlur,this.lineWidthInput.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><LineWidth>'+e.lineWidthInput.value+"</LineWidth></Print></Settings></Call>";e.client.command.executeXML(n)},this.lineWidthSwitch.wrapperEl.appendChild(this.lineWidthInput),this.unitSelect=document.createElement("select"),this.unitSelect.className="print-modal-select";for(var p=this.printLineWidthUnit.length,s=0;s<p;s++){var u=document.createElement("option");u.value=this.printLineWidthUnit[s].value,u.text=a.translate(this.printLineWidthUnit[s].langId),u.selected=a.settingsPane.defaultSettings.Settings.Print.LineWidthUnit===this.printLineWidthUnit[s].value,this.unitSelect.appendChild(u)}this.unitSelect.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><LineWidthUnit>'+e.unitSelect.value+"</LineWidthUnit></Print></Settings></Call>";e.client.command.executeXML(n)},this.lineWidthSwitch.wrapperEl.appendChild(this.unitSelect),this.tiledSwitch=new o.FileBrowserSwitch(c,"ID_PRINT_TILED",this.setTiledSetting,"print",!1),this.rangeGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_RANGE");for(var h=this.printRangeEnum.length,m=this,s=0;s<h;s++)!function(t){var n={value:m.printRangeEnum[t].value,langId:m.printRangeEnum[t].langId,initialState:a.settingsPane.defaultSettings.Settings.Print.PageRange===m.printRangeEnum[t].value},i=function(){var t='<Call Method="SetSettings"><Settings><Print><PageRange>'+n.value+"</PageRange></Print></Settings></Call>";e.client.command.executeXML(t)};if(m.rangeGroup.addButton(n,i),"Range"===n.value){var o=document.createElement("div");o.textContent=a.translate("ID_PRINT_RANGE_FROM")+":",o.className="print-modal-static-text";var s=m.rangeGroup.buttons[m.rangeGroup.buttons.length-1].wrapperEl;s.appendChild(o),m.fromInput=document.createElement("input"),m.fromInput.className="print-modal-input",m.fromInput.value=a.settingsPane.defaultSettings.Settings.Print.PageRangeFirst,m.fromInput.onfocus=m.onInputFocus,m.fromInput.onblur=m.onInputBlur,m.fromInput.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><PageRangeFirst>'+e.fromInput.value+"</PageRangeFirst></Print></Settings></Call>";e.client.command.executeXML(n)},s.appendChild(m.fromInput);var r=document.createElement("div");r.textContent=a.translate("ID_PRINT_RANGE_TO")+":",r.className="print-modal-static-text",s.appendChild(r),m.toInput=document.createElement("input"),m.toInput.className="print-modal-input",m.toInput.value=a.settingsPane.defaultSettings.Settings.Print.PageRangeLast,m.toInput.onfocus=m.onInputFocus,m.toInput.onblur=m.onInputBlur,m.toInput.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><PageRangeLast>'+e.toInput.value+"</PageRangeLast></Print></Settings></Call>";e.client.command.executeXML(n)},s.appendChild(m.toInput)}}(s)},e.prototype.buildTextOptions=function(){var e=this;$(this.textOptionWrapper).empty();var t=document.createElement("div");t.className="print-modal-option-group",this.textOptionWrapper.appendChild(t);var n=document.createElement("div");n.textContent=a.translate("ID_PRINT_HEADER"),n.className="print-modal-option-group-title",t.appendChild(n);var i=document.createElement("div");i.className="print-modal-long-input-wrapper",t.appendChild(i);var o=document.createElement("span");o.className="print-modal-long-input-title",o.textContent=a.translate("ID_PRINT_HEADER_LEFT"),i.appendChild(o);var l=document.createElement("input");l.className="print-modal-long-input",l.value=a.settingsPane.defaultSettings.Settings.Print.HeaderLeft,this.activeTextInput=l,this.activeTextInput.onblur=this.onInputBlur,l.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderLeft>'+l.value+"</HeaderLeft></Print></Settings></Call>";e.client.command.executeXML(n)},l.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=l},i.appendChild(l);var c=document.createElement("div");c.className="print-modal-long-input-wrapper",t.appendChild(c);var d=document.createElement("span");d.textContent=a.translate("ID_PRINT_HEADER_CENTER"),d.className="print-modal-long-input-title",c.appendChild(d);var p=document.createElement("input");p.className="print-modal-long-input",p.value=a.settingsPane.defaultSettings.Settings.Print.HeaderCenter,p.onblur=this.onInputBlur,p.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderCenter>'+p.value+"</HeaderCenter></Print></Settings></Call>";e.client.command.executeXML(n)},p.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=p},c.appendChild(p);var u=document.createElement("div");u.className="print-modal-long-input-wrapper",t.appendChild(u);var h=document.createElement("span");h.textContent=a.translate("ID_PRINT_HEADER_RIGHT"),h.className="print-modal-long-input-title",u.appendChild(h);var m=document.createElement("input");m.className="print-modal-long-input",m.value=a.settingsPane.defaultSettings.Settings.Print.HeaderRight,m.onblur=this.onInputBlur,m.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderRight>'+m.value+"</HeaderRight></Print></Settings></Call>";e.client.command.executeXML(n)},m.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=m},u.appendChild(m);var f=document.createElement("div");f.className="print-modal-option-group",this.textOptionWrapper.appendChild(f);var v=document.createElement("div");v.textContent=a.translate("ID_PRINT_FOOTER"),v.className="print-modal-option-group-title",f.appendChild(v);var g=document.createElement("div");g.className="print-modal-long-input-wrapper",f.appendChild(g);var C=document.createElement("span");C.textContent=a.translate("ID_PRINT_FOOTER_LEFT"),C.className="print-modal-long-input-title",g.appendChild(C);var _=document.createElement("input");_.className="print-modal-long-input",_.value=a.settingsPane.defaultSettings.Settings.Print.FooterLeft,_.onblur=this.onInputBlur,_.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterLeft>'+_.value+"</FooterLeft></Print></Settings></Call>";e.client.command.executeXML(n)},_.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=_},u.appendChild(m),g.appendChild(_);var I=document.createElement("div");I.className="print-modal-long-input-wrapper",f.appendChild(I);var S=document.createElement("span");S.textContent=a.translate("ID_PRINT_FOOTER_CENTER"),S.className="print-modal-long-input-title",I.appendChild(S);var y=document.createElement("input");y.className="print-modal-long-input",y.value=a.settingsPane.defaultSettings.Settings.Print.FooterCenter,y.onblur=this.onInputBlur,y.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterCenter>'+y.value+"</FooterCenter></Print></Settings></Call>";e.client.command.executeXML(n)},y.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=y},I.appendChild(y);var E=document.createElement("div");E.className="print-modal-long-input-wrapper",f.appendChild(E);var b=document.createElement("span");b.textContent=a.translate("ID_PRINT_FOOTER_RIGHT"),b.className="print-modal-long-input-title",E.appendChild(b);var w=document.createElement("input");w.className="print-modal-long-input",w.value=a.settingsPane.defaultSettings.Settings.Print.FooterRight,w.onblur=this.onInputBlur,w.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterRight>'+w.value+"</FooterRight></Print></Settings></Call>";e.client.command.executeXML(n)},w.onfocus=function(t){r.appStates.preventGlobalKeyEvents=!0,e.activeTextInput=w},E.appendChild(w);var T=document.createElement("div");T.className="print-modal-option-group",this.textOptionWrapper.appendChild(T);var M=document.createElement("div");M.textContent=a.translate("ID_PRINT_ADD_TEXT"),M.className="print-modal-option-group-title",T.appendChild(M);var N=document.createElement("button");N.className="print-modal-button",N.textContent=a.translate("ID_PRINT_INSERT_VARIABLE"),T.appendChild(N);var O=document.createElement("select");O.className="print-modal-select",T.appendChild(O);var P=document.createElement("option");P.value="%file",P.selected=!0,P.text=a.translate("ID_PRINT_INSERT_VARIABLE_FILE_NAME"),O.appendChild(P);var x=document.createElement("option");x.value="%date",x.text=a.translate("ID_PRINT_INSERT_VARIABLE_DATE"),O.appendChild(x);var B=document.createElement("option");B.value="%time",B.text=a.translate("ID_PRINT_INSERT_VARIABLE_TIME"),O.appendChild(B);var L=document.createElement("option");L.value="%user",L.text=a.translate("ID_PRINT_INSERT_VARIABLE_USER_NAME"),O.appendChild(L),O.onchange=function(t){e.textModule=O.value},N.onclick=function(t){var n=e.activeTextInput.value;n+=e.textModule,$(e.activeTextInput).val(n),$(e.activeTextInput).trigger("change")};var D=document.createElement("div");D.className="print-modal-option-group",this.textOptionWrapper.appendChild(D);var k=document.createElement("div");k.textContent=a.translate("ID_PRINT_MODAL_FONT"),k.className="print-modal-option-group-title",D.appendChild(k);var R=document.createElement("div");R.className="print-modal-long-input-wrapper",D.appendChild(R);var A=document.createElement("div");A.className="print-modal-long-input-title",A.textContent=a.translate("ID_PRINT_SET_FONT"),R.appendChild(A),this.fontName=document.createElement("select"),this.fontName.className="print-modal-select",this.fontName.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontName>'+e.fontName.value+"</BannerFontName></Print></Settings></Call>";e.client.command.executeXML(n)},R.appendChild(this.fontName);this.client.command.executeXML('<Call Method="GetFonts"></Call>'),this.client.on("GetFonts",function(t){e.printFontNameEnum=t.Font;for(var n=e.printFontNameEnum.length,i=0;i<n;i++){var o=e.printFontNameEnum[i],s=document.createElement("option");s.text=o,s.value=o,a.settingsPane.defaultSettings.Settings.Print.BannerFontName===o&&(s.selected=!0),e.fontName.appendChild(s)}});var W=document.createElement("div");W.className="print-modal-long-input-wrapper",D.appendChild(W);var V=document.createElement("div");V.className="print-modal-long-input-title",V.textContent=a.translate("ID_FONT_SIZE"),W.appendChild(V);var X=document.createElement("input");X.className="print-modal-input",X.value=a.settingsPane.defaultSettings.Settings.Print.BannerFontSize,X.onfocus=this.onInputFocus,X.onblur=this.onInputBlur,X.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontSize>'+X.value+"</BannerFontSize></Print></Settings></Call>";e.client.command.executeXML(n)},W.appendChild(X);var G=document.createElement("div");G.className="print-modal-long-input-wrapper",D.appendChild(G);var F=document.createElement("div");F.className="print-modal-long-input-title",F.textContent=a.translate("ID_PRINT_MODAL_FONT_STYLE"),G.appendChild(F);var H=document.createElement("select");H.className="print-modal-select";for(var U=this.printFontStyleEnum.length,z=0;z<U;z++){var j=this.printFontStyleEnum[z],Y=document.createElement("option");Y.text=a.translate(j.langId),Y.value=j.value,a.settingsPane.defaultSettings.Settings.Print.BannerFontStyle===j.value&&(Y.selected=!0),H.appendChild(Y)}H.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontStyle>'+H.value+"</BannerFontStyle></Print></Settings></Call>";e.client.command.executeXML(n)},G.appendChild(H);var K=document.createElement("div");K.className="print-modal-long-input-wrapper",D.appendChild(K);var J=document.createElement("div");J.className="print-modal-long-input-title",J.textContent=a.translate("ID_TEXT_COLOR"),J.style.marginBottom="5px",K.appendChild(J),this.fontColor=new s.ModalColorPicker(K,this.setFontColorSetting),this.fontColor.setColor(a.settingsPane.defaultSettings.Settings.Print.BannerFontColor)},e.prototype.setFontColorSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><BannerFontColor>'+e+"</BannerFontColor></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setWhiteBackgroundSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><WhiteBackground>'+e+"</WhiteBackground></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setLineWidthEnabledSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><LineWidthEnabled>'+e+"</LineWidthEnabled></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setTiledSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print>';t+="<Tiled>"+e+"</Tiled>",t+="</Print></Settings></Call>",this.client.command.executeXML(t)},e.prototype.fillOptions=function(e){this.printRangeEnum=[],this.printScaleEnum=[],this.printOrientationEnum=[],this.printLineWidthUnit=[];for(var t=e.Source.Template.Enum,n=t[0].Options.Option,i=n.length,a=0;a<i;a++){var o={value:n[a].Value,langId:n[a].DisplayName};this.printRangeEnum.push(o)}for(var s=t[1].Options.Option,r=s.length,l=0;l<r;l++){var c={value:s[l].Value,langId:s[l].DisplayName};this.printScaleEnum.push(c)}for(var d=t[2].Options.Option,p=d.length,u=0;u<p;u++){var h={value:d[u].Value,langId:d[u].DisplayName};this.printOrientationEnum.push(h)}for(var m=t[3].Options.Option,f=m.length,v=0;v<f;v++){var g={value:m[v].Value,langId:m[v].DisplayName};this.printLineWidthUnit.push(g)}},e.prototype.resize=function(){},e.prototype.hide=function(){window.removeEventListener("resize",this.resize),document.body.removeEventListener("mousedown",this.detectOutsideClick),document.body.removeEventListener("keyup",this.detectEscPressed),this.isOpen=!1,$(this.modalWrapper).remove()},e.prototype.detectOutsideClick=function(e){e.target===this.modalWrapper||this.modalWrapper.contains(e.target)||$(".wv-color-picker-popup").find(e.target).length>0||this.submit()},e.prototype.detectEscPressed=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.submit()},e.prototype.submit=function(){this.hide()},e}();t.PrintModal=l},function(e,t,n){"use strict";function i(e){var t,n,i,a,o,s;s="#"==e[0]?e.substr(1):e.substr(2),t=parseInt(s,16),n=t>>16&255,i=t>>8&255,a=255&t;return o=(t>>24&255)/255,{a:o,r:n,g:i,b:a}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),o=n(16),s=function(){function e(e,t){var n=this;this.isDefaultSet=!1,this.parentEl=e,this.callback=t,this.colorpicker=document.createElement("span"),this.colorpicker.classList.add("modal-colorpicker"),this.parentEl.appendChild(this.colorpicker),this.colorpicker.addEventListener("click",function(e){n.openPalette()},!1)}return e.prototype.openPalette=function(){var e=this,t=this.colorpicker.dataset.lastPickedColor;this.palette=new a.CustomPalette(t,this.showAlpha),this.palette.on("customColorChosen",function(t){return e.updateElementState(t)})},e.prototype.updateElementState=function(e){this.colorpicker.dataset.lastPickedColor=e,this.colorpicker.style.backgroundColor=e;var t=o(e).toHexString();this.color=t,this.callback(this.color)},e.prototype.setColor=function(e){var t=i(e);this.alpha=t.a;var n;n=this.showAlpha?"rgba("+t.r+", "+t.g+", "+t.b+", "+this.alpha+")":"rgb("+t.r+", "+t.g+", "+t.b+")",this.isDefaultSet||(this.colorpicker.dataset.defaultColor=n,this.isDefaultSet=!0),this.colorpicker.dataset.lastPickedColor=n,this.colorpicker.style.backgroundColor=n},e}();t.ModalColorPicker=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(4),o=function(){function e(e,t){this.buttons=[],this.newButtonIndex=0,this.parentEl=e,this.titleId=t,this.groupWrapper=document.createElement("div"),this.groupWrapper.className="radio-button-group",this.parentEl.appendChild(this.groupWrapper),this.titleEl=document.createElement("div"),this.titleEl.className="radio-button-group-title",this.titleEl.textContent=i.translate(t),this.groupWrapper.appendChild(this.titleEl),this.buttonGroup=document.createElement("div"),this.buttonGroup.className="radio-button-group-content",this.groupWrapper.appendChild(this.buttonGroup)}return e.prototype.toggleStates=function(e){for(var t=this.buttons.length,n=0;n<t;n++)n!==e&&this.buttons[n].setState(!1)},e.prototype.setStateByIndex=function(e,t){e<this.buttons.length&&this.buttons[e].setState(!0)},e.prototype.addButton=function(e,t){var n=new s(this.buttonGroup,e,this,this.newButtonIndex,t);this.buttons.push(n),n.setState(e.initialState),this.newButtonIndex++},e.prototype.setTitle=function(){for(var e=this.buttons.length,t=0;t<e;t++)this.buttons[t].setTitle();this.titleEl.textContent=i.translate(this.titleId)},e}();t.RadioButtonGroup=o;var s=function(){function e(e,t,n,o,s){var r=this;this.parentEl=e,this.item=t,this.group=n,this.titleId=t.langId,this.index=o,this.callback=s,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="radio-button-wrapper",this.parentEl.appendChild(this.wrapperEl);var l=document.createElement("div");l.className="radio-button-container",this.wrapperEl.appendChild(l),this.innerCircle=document.createElement("div"),this.innerCircle.className="radio-button-fill",l.appendChild(this.innerCircle),this.titleEl=document.createElement("div"),this.titleEl.className="radio-button-title",this.titleEl.textContent=i.translate(this.titleId),this.wrapperEl.appendChild(this.titleEl),l.onclick=function(e){r.state||(r.callback&&r.callback(),r.setState(!0))},l.onmouseenter=function(e){r.innerCircle.style.backgroundColor=a.appStates.mainColor},l.onmouseleave=function(e){r.state||(r.innerCircle.style.backgroundColor="white")}}return e.prototype.setState=function(e){this.state=e,e?(this.innerCircle.style.backgroundColor=a.appStates.mainColor,this.group.toggleStates(this.index)):this.innerCircle.style.backgroundColor="white"},e.prototype.setTitle=function(){this.titleEl.textContent=i.translate(this.titleId)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n,i){this.id=e,this.indeterminate=t,this.type=n,this.anchorEl=i,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="progress-bar-wrapper",this.anchorEl.appendChild(this.wrapperEl),this.titleEl=document.createElement("span"),this.titleEl.textContent=n,this.titleEl.className="progress-bar-title",this.wrapperEl.appendChild(this.titleEl),this.barEl=document.createElement("span"),this.barEl.className="progress-bar",this.indeterminate||(this.textEl=document.createElement("span"),this.textEl.className="progress-bar-text",this.textEl.textContent="0%",this.barEl.appendChild(this.textEl)),this.wrapperEl.appendChild(this.barEl),this.progressEl=document.createElement("div"),this.progressEl.className=this.indeterminate?"progress-indeterminate":"progress",this.barEl.appendChild(this.progressEl),this.wrapperEl.appendChild(this.barEl)}return e.prototype.setProgress=function(e){this.progressEl.style.width=e+"%",this.textEl.textContent=e+"%"},e}();t.ProgressBar=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(95),a=n(0),o=function(){function e(e,t){var n=this;this.isOpen=!1,this.progressBars=[],this.isBlocked=!1,this.anchorEl=e,this.anchorEl.onclick=function(e){n.isOpen?n.close():n.open()};var i=document.createElement("div");i.className="progress-container-wrapper",this.wrapperEl=i,this.anchorEl.appendChild(this.wrapperEl);var a=document.createElement("div");a.className="progress-bar-wrapper",this.wrapperEl.appendChild(a);var o=document.createElement("span");o.textContent="Cancel all",o.className="progress-bar-title",o.style.fontWeight="900",a.appendChild(o);var s=document.createElement("span");s.className="fas fa-ban progress-cancel-icon",s.onclick=function(e){t.command.executeXML('<Call Method="StopComputation"></Call>')},a.appendChild(s),this.close(),this.stop()}return e.prototype.open=function(){this.isOpen=!0,$(this.wrapperEl).show()},e.prototype.close=function(){this.isOpen=!1,$(this.wrapperEl).hide()},e.prototype.start=function(){$(this.anchorEl).show()},e.prototype.stop=function(){$(this.anchorEl).hide()},e.prototype.stopBarById=function(e){this.isBlocked&&(this.isBlocked=!1,a.unblockUI());var t=this.getBarIndexById(e);-1!==t&&($(this.progressBars[t].wrapperEl).remove(),this.progressBars.splice(t,1)),0===this.progressBars.length&&(this.close(),this.stop())},e.prototype.stepBarById=function(e,t){var n=this.getBarIndexById(e);if(-1!==n){var i=parseFloat(t),a=Math.round(i);this.progressBars[n].setProgress(a.toString())}},e.prototype.getBarIndexById=function(e){for(var t=0;t<this.progressBars.length;t++)if(this.progressBars[t].id===e)return t;return-1},e.prototype.addBar=function(e,t,n,o){if(o)this.isBlocked=!0,a.blockUI(n);else{var s=new i.ProgressBar(e,t,n,this.wrapperEl);this.progressBars.push(s)}},e}();t.ProgressContainer=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(19),s=n(11),r=n(0);String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return void 0===t&&(t=0),t=t||0,this.substr(t,e.length)===e}),String.prototype.includes||(String.prototype.includes=function(e,t){return void 0===t&&(t=0),"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)});var l=function(e){function t(t){var n=e.call(this)||this;return n.items={},n.settingItems=[],n.filterString="",n.toCollapse=[],n.$target=$(t),n.items={},n}return i(t,e),t.prototype.get=function(e){var t=this.items[e];return t||void 0},t.prototype.traverse__=function(e,t){for(var n=0,i=e.children;n<i.length;n++){var a=i[n];this.traverse__(a,t)}t(e)},t.prototype.traverseReverse=function(e){this.traverse__(this.root,e)},t.prototype.traverse=function(e){for(var t,n=[],i=this.root.children.length;i-- >0;)n.push(this.root.children[i]);for(;n.length;){t=n.pop(),e(t);for(var i=t.children.length;i-- >0;)n.push(t.children[i])}},t.prototype.buildItem__=function(e,t,n){var i=!1,o=e.DisplayName||"",l=new a.Item(this,o);e.Setting?(l.path=e.Setting.split("."),l.triggeredBySetting=!0,this.settingItems.push(l)):e.EventPath?(l.path=e.EventPath.split("."),l.triggeredByEvent=!0):!n&&e.Name?l.path=[e.Name]:n&&e.Name&&(l.path=n.path.concat([e.Name])),e.Tooltip&&(l.tooltip=e.Tooltip);var c=!1;switch("true"===e.IsHidden&&(c=!0),e.Prefix&&(l.prefix=e.Prefix),e.UId&&(l.id=e.UId),t){case"Template":case"Group":l.visual=new a.Folder(l),"true"===e.IsCollapsed&&this.toCollapse.push(l.visual);break;case"Enum":var d=new a.Select(l),p=e.Options.Option;if(void 0!==p){var u=[],h=[];p.forEach(function(e){u.push(e.DisplayName),h.push(e.Value)}),"UID_PRESETS"===l.id&&(u.push(r.translate("ID_WALLTHICKNESS_PRESET_USERDEFINED")),h.push("USERDEF")),d.addOptions(u,h)}l.visual=d,i=!0;break;case"Bool":l.visual=new a.Checkbox(l);break;case"Color":var m=new a.ColorPicker(l);"RGB"===e.Mode?m.showAlpha=!1:m.showAlpha=!0,l.visual=m;break;case"Float":case"Integer":case"Text":l.inputType=t,e.Suffix&&(l.suffix=e.Suffix),"true"===e.IsReadOnly?l.visual=new a.TextBox(l):-1!==l.path.indexOf("AttributesToDisplay")?l.visual=new s.MultiBox(l):l.visual=new a.Input(l),"Slider"===e.DisplayType&&(l.visual=new a.Slider(l));break;case"EnumFlag":var f=new a.Flag(l),p=e.Options.Option,v=[];p.forEach(function(e){var t={displayName:e.DisplayName,value:e.Value};v.push(t)}),f.addOptions(v),l.visual=f,i=!0;break;case"Button":l.id=e.OnClick,l.visual=new a.Button(l);break;case"KeyValue":l.visual=new a.KeyValue(l);break;default:i=!0}return l.readOnly="true"===e.IsReadOnly,n&&(n.children.push(l),l.parent=n,n.isHiddenAttr&&(c=!0),this.items[l.path.join(".")],this.items[l.path.join(".")]=l),l.isHiddenAttr=c,[l,i]},t.prototype.fromTemplate__=function(e,t,n){if("string"!=typeof e){var i=this.buildItem__(e,t,n),a=i[0];if(!i[1]){for(var o={},s=0;s<e.__ordinal__.length;s++){var r=e.__ordinal__[s],l=e[r];Array.isArray(l)?void 0===o[r]?(o[r]=0,l=l[o[r]],this.fromTemplate__(l,r,a)):(o[r]+=1,l=l[o[r]],this.fromTemplate__(l,r,a)):this.fromTemplate__(l,r,a)}return a}}},t.prototype.fromTemplate=function(e,t){var n=this;void 0===t&&(t=!1),this.$target.children().remove(),this.$target.append('<tr class="pane-item"><td/><td/></tr>'),this.root=this.fromTemplate__(e,"Group"),t&&(this.root.indent=0,this.root.visual.setText(this.root.text),this.root.visual.constructHTML(this.root.el),this.$target.append(this.root.el)),this.traverse(function(e){e.isHiddenAttr||(e.indent=e.parent.indent+1,e.visual.setText(e.text),e.tooltip&&e.visual.setTooltip(e.tooltip),e.visual.constructHTML(e.el),e.parent.visual instanceof a.KeyValue?e.parent.visual.addEntry(e.visual):n.$target.append(e.el))}),this.toCollapse.length>0&&this.toCollapse.forEach(function(e){return e.collapse(!0)})},t.prototype.resetVisibility=function(){var e=this;Object.keys(this.items).forEach(function(t){var n=e.items[t];n.visual.highlightSearchString(void 0),"hidden"==n.visualStatus?n.el.style.display="none":n.el.style.display=""})},t.prototype.filter=function(e){var t=this;e=e.toLowerCase();Object.keys(this.items);if(!e)return void this.resetVisibility();this.traverse(function(t){var n=t.text.toLowerCase();t.visual instanceof a.Folder||(n.includes(e)?(t.visual.highlightSearchString(e),t.el.style.display=""):(t.el.style.display="none",t.visual.highlightSearchString(void 0)))}),this.traverseReverse(function(n){var i=n.text.toLowerCase();if(n.visual instanceof a.Folder){var o=n.children,s=o.every(function(e){return"none"===e.el.style.display});s&&-1===i.indexOf(e)&&!n.id?(n.el.style.display="none",n.visual.highlightSearchString(void 0)):-1!==i.indexOf(e)?(n.el.style.display="",n.visual.highlightSearchString(e),(1!==n.indent||s)&&t.traverse__(n,function(e){e.el.style.display=""})):-1===i.indexOf(e)&&s&&n.id?(n.el.style.display="none",n.visual.highlightSearchString(void 0)):(n.el.style.display="",n.visual.highlightSearchString(void 0))}})},t.prototype.updateValues=function(e){var t=this,n=Object.keys(this.items);if(void 0===e)return void n.forEach(function(e){t.items[e].el.style.display="none"});for(var i=0,o=n;i<o.length;i++){var s=o[i],r=this.items[s],l=r.visual,c=r.indexByPath(e);void 0===c&&-1===r.path.indexOf("AttributesToDisplay")&&(r.triggeredByEvent&&"Preset"!==r.path[1]||r.triggeredBySetting&&"UID_DENSITY_PRESET"!==r.id)||r.isHiddenAttr?r.el.style.display="none":("hidden"!==r.visualStatus&&""===this.filterString&&(r.el.style.display=""),c?l.setUIValue(c):c||-1===r.path.indexOf("AttributesToDisplay")||l.setUIValue(""),void 0!==e.Event&&"MeasurementChanged"===e.Event.Type&&("OnAccumulatedLengthComplete"!==r.id&&"OnAccumulatedLengthFromSelection"!==r.id||void 0!==e.Event.AccumulatedLength||(r.el.style.display="none")))}this.traverseReverse(function(e){if(e.visual instanceof a.Folder){e.children.every(function(t){return"none"===t.el.style.display&&"hidden"!==t.visualStatus||"hidden"===e.visualStatus&&"hidden"===t.visualStatus})&&!e.id?e.el.style.display="none":e.el.style.display=""}}),this.filterString&&this.filter(this.filterString)},t.prototype.getItemById=function(e){for(var t=Object.keys(this.items),n=0,i=t;n<i.length;n++){var a=i[n],o=this.items[a];if(o.id&&o.id===e)return o}},t}(o.EventEmitter);t.PaneAdapter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=function(){function e(e,t){this.visualStatus="shown",this.indentClass="pane-item-indent-level0",this.displayAttr="",this.isHiddenAttr=!1,this.context=e,this.text=t||"",this.parent=void 0,this.children=[],this.path=[],this.indent=0,this.el=document.createElement("tr"),this.el.classList.add("pane-item")}return e.prototype.indexByPath=function(e){var t=e;if(0!==this.path.length){for(var n=0;n<this.path.length;n++)if(!(t=t[this.path[n]]))return;return t}},e.prototype.collapseAll=function(e){if(this.visual instanceof i.Folder){for(var t=this.visual,n=0,a=this.children;n<a.length;n++){a[n].collapseAll(!0)}t.collapse(!0,!1),e&&(this.visualStatus="hidden",this.el.style.display="none")}},e.prototype.expandAll=function(){if(this.visual instanceof i.Folder){for(var e=this.visual,t=0,n=this.children;t<n.length;t++){n[t].expandAll()}e.expand(!0,!1),-1!==this.text.toLowerCase().indexOf(this.context.filterString)&&(this.el.style.display=""),this.visualStatus="shown",""!==this.context.filterString&&-1===this.text.toLowerCase().indexOf(this.context.filterString)&&this.hasVisibleChild()&&(this.el.style.display="")}},e.prototype.hide=function(){if(this.visual instanceof i.Folder){var e=this.visual;return void(e.expander.classList.contains(i.Folder.minus)?(this.visualStatus="hidden",this.el.style.display="none",e.collapse(!1,!0)):(this.visualStatus="hidden",this.el.style.display="none"))}for(var t=0,n=this.children;t<n.length;t++){n[t].hide()}this.visualStatus="hidden",this.el.style.display="none"},e.prototype.show=function(e){var t=this;if(this.visual instanceof i.Folder){var n=this.visual;return-1!==this.text.toLowerCase().indexOf(this.context.filterString)?this.el.style.display="":""!==this.context.filterString&&this.children.map(function(e){"none"!==e.el.style.display&&(t.el.style.display="")}),n.expander.classList.contains(i.Folder.minus)&&n.expand(!1,e),void(this.visualStatus="shown")}for(var a=0,o=this.children;a<o.length;a++){o[a].show(e)}-1!==this.text.toLowerCase().indexOf(this.context.filterString)?this.el.style.display="":""!==this.context.filterString&&this.hasMatchingParent(this)&&(this.el.style.display=""),this.visualStatus="shown"},e.prototype.hasMatchingParent=function(e){return!!(e.parent&&e.parent.parent&&e.parent.parent.parent)&&(-1!==e.text.toLowerCase().indexOf(this.context.filterString)||(-1!==e.parent.text.toLowerCase().indexOf(this.context.filterString)||this.hasMatchingParent(e.parent)))},e.prototype.hasVisibleChild=function(){for(var e=!1,t=0,n=this.children;t<n.length;t++){var a=n[t];if(-1!==a.text.toLowerCase().indexOf(this.context.filterString))return!0;a.visual instanceof i.Folder&&(e=this.recHasVisibleChild(a))}return e},e.prototype.recHasVisibleChild=function(e){for(var t=0,n=e.children;t<n.length;t++){var a=n[t];if(-1!==a.text.toLowerCase().indexOf(this.context.filterString))return!0;if(a.visual instanceof i.Folder)return this.recHasVisibleChild(a)}},e}();t.Item=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.internalDisabledGroups={ID_RIBBON_VECTOR_EXPORT:!1,ID_RIBBON_FILTER:!0,ID_RIBBON_BILL_OF_MATERIAL:!0,ID_RIBBON_STATISTICS:!0,ID_RIBBON_COMPUTE:!0,ID_RIBBON_SCREENSHOT:!0,ID_RIBBON_PROJECTED_AREA:!0,ID_RIBBON_CLASH_DETECTION:!0,ID_RIBBON_BOUNDARY_CONDITION:!0,ID_RIBBON_ALIGNING_MOVE:!0,ID_RIBBON_ALIGNING_ROTATE:!0,ID_RIBBON_ALIGNING_MOVE_ROTATE:!0,ID_RIBBON_MODEL_ALIGNING:!1,ID_RIBBON_NODE:!1,ID_RIBBON_ROTATE:!1,ID_RIBBON_HEAT_MAP:!0,Extras:!0}},function(e,t,n){"use strict";function i(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),s=n(4),r=n(10),l=n(19),c=n(13),d=n(0),p=n(99),u=n(10),h=n(8),m="http://www.w3.org/2000/svg",f="http://www.w3.org/1999/xlink",v=function(e){function t(t){var n=e.call(this)||this;n.lastSliderPos="0",n.classes={},n.exposedGroupIDs={},n.toggleVisibility=function(e,t){void 0===t&&(t=!0),n.ribbonBody.style.position="relative",n.ribbonBody.style.top="",n.ribbonBody.style.left="",!0===s.appStates.ribbonVis&&!1===e?(n.ribbonBody.style.display="none",n.header.style.borderBottom="1px solid #c3c3c3",n.toggleVisibilityButton.classList.remove("fa-chevron-down"),n.toggleVisibilityButton.classList.add("fa-chevron-right"),s.appStates.ribbonVis=!1,t&&d.resizeHandler()):(n.ribbonBody.style.display="",n.header.style.borderBottom="none",n.toggleVisibilityButton.classList.remove("fa-chevron-right"),n.toggleVisibilityButton.classList.add("fa-chevron-down"),s.appStates.ribbonVis=!0,document.removeEventListener("click",n.hideRibbonBody),t&&d.resizeHandler())},n.hideRibbonBody=function(e){var t=e.target;i(g,t)||i(n.ribbonBody,t)||(n.ribbonBody.style.display="none",document.removeEventListener("click",n.hideRibbonBody))},n.closeAboutDialog=function(e){if(!$(e.target).hasClass("ribbon-about-button")){var t=document.getElementById("aboutDialog");(!document.getElementsByClassName("ribbon-about-version-wrapper")[0].contains(e.target)&&"click"===e.type||"keyup"===e.type&&27===e.keyCode)&&(n.aboutOpen=!1,document.body.removeChild(t),$(document).off("click",n.closeAboutDialog),$(document).off("keyup",n.closeAboutDialog))}},g=t,n.aboutOpen=!1,C=document.createElement("div"),C.id=o.settings.ribbon.expandablesContainerId,_=document.createElement("div"),_.id=o.settings.ribbon.dropdownsContainerId,g.appendChild(C),g.appendChild(_),n.header=document.createElement("ul"),n.header.classList.add("ribbon-header"),n.ribbonBody=document.createElement("div"),n.ribbonBody.classList.add("ribbon-body"),n.ribbonBody.style.position="relative",n.ribbonBody.style.background="white",n.ribbonBody.style.height=o.settings.ribbon.tabPageHeight+"px",n.toggleVisibilityButton=document.createElement("div"),n.toggleVisibilityButton.id="wv-ribbon-toggle-ribbon",n.toggleVisibilityButton.className="fa fa-chevron-down",g.appendChild(n.toggleVisibilityButton),n.toggleStreaming=document.createElement("div"),n.toggleStreaming.id="wv-ribbon-toggle-streaming",n.toggleStreaming.className="fa fa-image",n.toggleStreaming.style.right="30px",n.toggleStreaming.style.top="5px",n.wsIndicator=document.createElement("div"),n.wsIndicator.className="wv-ribbon-wsindicator",n.wsIndicator.addEventListener("click",function(){"red"===$(n.wsIndicator).css("fill")&&window.location.reload()}),n.wsIcon=document.createElementNS(m,"svg"),n.wsIcon.setAttribute("class","ws_indicator");var a=document.createElementNS(m,"use");a.setAttributeNS(f,"href","#cloud-connection-2"),n.wsIcon.appendChild(a),n.wsIndicator.appendChild(n.wsIcon),g.appendChild(n.wsIndicator);var l=!0;try{!0===_KISTERSWebViewerHideMobile&&(l=!1)}catch(e){}if(l){n.toggleMobile=document.createElement("div"),n.toggleMobile.className="fa fa-mobile-alt wv-mobile-switch",$(n.toggleMobile).off("click").click(function(e){localStorage.setItem("WVUseMobile","true"),localStorage.setItem("WVParkedSession",s.appStates.session),localStorage.setItem("WVFileType",s.appStates.fileType),localStorage.setItem("WVVisShareSpec",s.appStates.VisShareSpec),localStorage.setItem("WVFileName",s.appStates.fileName);vsClient.sessionInfo.socket.send('<Request Type="Park"><Timeout>0</Timeout></Request>'),setTimeout(function(){window.location.reload()},100)}),g.appendChild(n.toggleMobile);var c=new h.WVTooltip(n.toggleMobile);c.setOrientation("bottom"),c.setTitle("Mobile UI")}var p=document.createElement("div");p.className="wv-progress-bar-icon-wrapper";var v=document.createElement("span");v.className="fal fa-spinner-third fa-spin wv-progress-bar-icon",g.appendChild(p),d.initProgressContainer(p),p.appendChild(v),n.languageSwitch=n._buildLangSwitch(),g.appendChild(n.languageSwitch),n.aboutDialog=n._buildAboutDialog(),g.appendChild(n.aboutDialog);var I=localStorage.getItem("WVRibbonVis");if(null===I)try{localStorage.setItem("WVRibbonVis",_RibbonMenuVisibility.toString()),s.appStates.ribbonVis=!0,_RibbonMenuVisibility||n.toggleVisibility(!1,!1)}catch(e){localStorage.setItem("WVRibbonVis","true")}else s.appStates.ribbonVis=!0,"false"===I&&n.toggleVisibility(!1,!1);return n.toggleVisibilityButton.addEventListener("click",function(){n.toggleVisibility(!1);var e=localStorage.getItem("WVRibbonVis");localStorage.setItem("WVRibbonVis","true"===e?"false":"true")},!1),n.toggleStreaming.addEventListener("click",function(e){"image"===vsClient.getTransferMode()?vsClient.setTransferMode("streaming")&&(n.toggleStreaming.classList.remove("fa-image"),n.toggleStreaming.classList.add("fa-video-camera")):"streaming"===vsClient.getTransferMode()&&vsClient.setTransferMode("image")&&(n.toggleStreaming.classList.remove("fa-video-camera"),n.toggleStreaming.classList.add("fa-image"))}),vsClient.on("pane-closed",function(e){var t=u.findPaneButton(e);t&&t.applyHighlight(!1);var n=d.getInteractionForPane(e,s.appStates.interactionMode);n&&d.deactivateInteraction(vsClient,n)}),vsClient.on("ActivateInteraction",function(e){var t;if("Flythrough_SelectStartPositionAndDirection"!==(t=e.Interaction)&&t){switch(t){case"CuttingPlane_FromPointNormal":t="Section_FromPointNormal";break;case"CuttingPlane":t="Section"}n.classes.Interaction.forEach(function(e){e.event===t&&e.applyHighlight(!0),e instanceof r.DropdownButton&&e.items.forEach(function(e){e.event===t&&e.applyHighlight(!0)})}),s.appStates.interactionMode.push(t);var i=t.split("_")[0],a=void 0,o=!1;switch(i){case"Measurement":case"wv-measurement":a="wv-measurement";break;case"Section":case"wv-section":a="wv-section",o=!0;break;case"Transformation":case"wv-transform":a="wv-transform",o=!0;break;case"DraftAngle":case"wv-draftangle":a="wv-draftangle";break;case"wv-markup-reduced":a="wv-markup-reduced";break;case"Markup":case"wv-markup":"Markup_Circle"===t||"Markup_Freehand"===t||"Markup_Rectangle"===t?(o=!0,a="wv-markup-reduced"):a="wv-markup";break;case"Flythrough":a="wv-flythrough",o=!0,vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>');break;case"Callout":o=!0;break;default:a=void 0}if(a&&d.prependPane(a),o&&("RectZoom"===s.appStates.mouseLeftButtonMode||"RectSelect"===s.appStates.mouseLeftButtonMode)){var l=d.settingsPane.defaultSettings.Settings.Scene.Mouse.LeftButtonFunction;"RectZoom"!==l&&"RectSelect"!==l||(l="Rotate");var c='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><LeftButtonFunction>'+l+"</LeftButtonFunction></Mouse></Scene></Settings></Call>";vsClient.command.executeXML(c)}if("Measurement"===i){var p={Type:"MeasurementChanged"};"Measurement_EdgeLengthAccumulated"===t&&(p.AccumulatedLength=0),vsClient.emit("MeasurementChanged",p)}}}),vsClient.on("DeactivateInteraction",function(e){var t;if("Flythrough_SelectStartPositionAndDirection"!==(t=e.Interaction)){switch(t){case"CuttingPlane_FromPointNormal":t="Section_FromPointNormal";break;case"CuttingPlane":t="Section"}var i,a=t.split("_")[0];switch(a){case"Measurement":i="wv-measurement";break;case"Section":i="wv-section";break;case"Transformation":i="wv-transform";break;case"DraftAngle":i="wv-draftangle";break;case"Markup":i="Markup_Circle"===t||"Markup_Freehand"===t||"Markup_Rectangle"===t?"wv-markup-reduced":"wv-markup";break;case"Flythrough":i="wv-flythrough";break;default:i=void 0}i&&(void 0,d.closePane(i)),n.classes.Interaction.forEach(function(e){e.event===t&&e.applyHighlight(!1),e instanceof r.DropdownButton&&e.items.forEach(function(e){e.event===t&&e.applyHighlight(!1)})}),s.appStates.interactionMode.splice(s.appStates.interactionMode.indexOf(t),1);for(var o=0;o<s.appStates.lastInteractionModes.length;o++)s.appStates.lastInteractionModes[o].split("_")[0]===a&&s.appStates.lastInteractionModes.splice(o,1);s.appStates.lastInteractionModes.push(t)}}),n}return a(t,e),t.prototype.loadTab=function(e){var t=new r.Tab(e.langId);try{if(t.langId in _Tabs&&!1===_Tabs[t.langId])return}catch(e){}for(var n=0,i=e.groups;n<i.length;n++){for(var a=i[n],o=new r.Group(a.langId),s=0,l=a.widgets;s<l.length;s++){var c=l[s],d=void 0;switch(void 0===c.type&&(c.type=r.WidgetType.Button),c.type){case r.WidgetType.Button:d=o.addButton(c);break;case r.WidgetType.ButtonLet:d=o.addButtonlet(c);break;case r.WidgetType.Dropdown:d=o.addDropdown(c);var p=d;c.dropdownClick&&p.addClick(P,c.dropdownClick);break;case r.WidgetType.Input:d=o.addInput(c);var u=d;c.inputCallback&&u.addInputCallback(P,c.inputCallback);break;case r.WidgetType.SplittedDropdown:d=o.addSplittedDropdown(c);var h=d;c.splittedDropdownClick&&h.addClick(P,c.splittedDropdownClick);break;default:throw"unknown widget type"}if(c.interaction&&(d.event=c.interaction),c.ribbonClass)for(var m=0,f=c.ribbonClass;m<f.length;m++){var v=f[m];v in this.classes||(this.classes[v]=[]),this.classes[v].push(d)}}a.groupClick&&o.addClick(P,a.groupClick),t.addGroup(o)}return x.push(t),t},t.prototype.loadRibbonConfig=function(){var e=this;I=this.loadTab(c.startTab),S=this.loadTab(c.documentTab),y=this.loadTab(c.viewTab),E=this.loadTab(c.measurementTab),b=this.loadTab(c.analyseTab),w=this.loadTab(c.transformTab),N=this.loadTab(c.techDocTab),M=this.loadTab(c.modelTab),T=this.loadTab(c.toolTab);try{(Array.isArray(UserConfiguration)?UserConfiguration:[UserConfiguration]).forEach(function(t){e.loadTab(t)})}catch(e){}},t.prototype.cullRibbonGroups=function(){var e=this;x.forEach(function(e){for(var t=e.groups.length;t--;){var n=e.groups[t];n.id in p.internalDisabledGroups&&!1===p.internalDisabledGroups[n.id]&&e.groups.splice(t,1)}}),x.forEach(function(t){t.groups.forEach(function(t){e.exposedGroupIDs[t.id]=!0})}),x.forEach(function(e){try{for(var t=e.groups.length;t--;){var n=e.groups[t];n.id in _RibbonGroups&&!1===_RibbonGroups[n.id]&&e.groups.splice(t,1)}}catch(e){if("ReferenceError"===e.name);}});for(var t=x.length;t--;){0===x[t].groups.length&&x.splice(t,1)}},t.prototype.initialize=function(){var e=this;P={client:vsClient,ribbon:this,menu:c},this.loadRibbonConfig(),this.cullRibbonGroups(),s.appStates.ribbonWidth=window.innerWidth,s.appStates.ribbonWidth<600&&(s.appStates.ribbonWidth=600),x.forEach(function(t){t.el.addEventListener("click",function(n){if(x.forEach(function(e){n.currentTarget.id!==e.id&&e.hide()}),"none"===e.ribbonBody.style.display){var i=document.getElementById("wv-app"),a=document.getElementById("wv-dock");e.ribbonBody.style.position="absolute",e.ribbonBody.style.top="24px",e.ribbonBody.style.left="0px";var o=400;return e.ribbonBody.style.zIndex=o.toString(),a.style.zIndex=(o-100).toString(),i.insertBefore(e.ribbonBody,a),O=t,e.ribbonBody.style.display="",O.page.style.display="",void document.addEventListener("click",e.hideRibbonBody)}O=t,O.show()})}),O=I,this.render()},t.prototype.render=function(){var e=this;g.appendChild(this.header),g.appendChild(this.ribbonBody);for(var t=0,n=x;t<n.length;t++){n[t].addToHeader(this.header)}x.forEach(function(t){return t.render(e.ribbonBody)}),O.show(),this.classes.DeactivateAll.forEach(function(e){$(e.el).closest(".ribbon-group").addClass("ribbon-deactivate")})},t.prototype.reset=function(){s.appStates.reset(),x.forEach(function(e){e.groups.forEach(function(e){e.getWidgets().forEach(function(e){e instanceof r.BaseButton&&!e.paneId&&e.applyHighlight(!1)})})}),r.initHightlightedButtons.forEach(function(e){e.applyHighlight(!0)})},t.prototype.disableFileList=function(){var e=document.getElementById("ID_RIBBON_OPEN"),t=document.getElementById("ID_RIBBON_IMPORT"),n=document.getElementById("ID_RIBBON_SAVE");e&&(x[0].groups[0].configuration.splice(0,1),e.parentNode.removeChild(e)),t&&(x[0].groups[0].configuration.splice(0,1),t.parentNode.removeChild(t)),n&&n.parentNode.removeChild(n)},t.prototype.deleteShareRibbon=function(){var e=document.getElementById("ID_RIBBON_VISSHARE_FILE"),t=document.getElementById("ID_RIBBON_VISSHARE_FILE_Compact");e?(e.parentNode.removeChild(e),x[0].groups.splice(1,1)):t&&(t.parentNode.removeChild(t),x[0].groups.splice(1,1))},t.prototype._buildLangSwitch=function(){var e=document.createElement("select");e.id="wv-ribbon-language";var t={ENU:"English",DEU:"Deutsch",ITA:"Italiano",ESP:"Espaol",FRA:"Franais",KOR:"",CHS:"",JPN:""};for(var n in t){var i=document.createElement("option");i.value=n,i.textContent=t[n],i.value===o.settings.lang&&i.setAttribute("selected","selected"),e.appendChild(i)}var a=this;return e.onchange=function(){var t=e.value;o.settings.lang=t,a.render();var n="\n            <Settings>\n                <Renderer>\n                    <General>\n                        <Language>"+t+"</Language>\n                    </General>\n                </Renderer>\n            </Settings>\n        ",i='<Call Method="SetSettings">'+n+"</Call>";vsClient.command.executeXML(i),vsClient.once("SetSettings",function(e){if(vsClient.emit("@changeLang",t),localStorage.setItem("WVLang",t),s.appStates.fileLoaded){vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')}})},e},t.prototype.openPage=function(e){var t=!1;try{t=_UseOfflineHelp}catch(e){}"https://viewer.kisters.de/help/webviewer"===e&&(e=t?"/Help/webviewer/"+d.mapCountry(o.settings.lang)+"/index.html":e+"/"+s.appStates.version+"/"+d.mapCountry(o.settings.lang)+"/index.php"),window.open(e,"_blank")},t.prototype._buildAboutDialog=function(){var e=this,t=document.createElement("div");t.classList.add("ribbon-about");var n=document.createElement("i");n.id="wv-ribbon-about",n.classList.add("fa"),n.classList.add("fa-question-circle");var i=document.createElement("div");i.classList.add("ribbon-about-wrapper"),i.id="aboutDialog";var a=document.createElement("img");a.src="3D-VS_About-Screen.png";var r=document.createElement("div");r.classList.add("ribbon-about-default-text-wrapper");var l=document.createElement("span");l.classList.add("ribbon-about-default-text"),l.textContent="WebViewer-Edition";var c=document.createElement("span");c.classList.add("ribbon-about-default-copyright"),c.textContent="2020 by KISTERS All rights reserved";var d=document.createElement("div");d.classList.add("ribbon-about-version-wrapper");var p=document.createElement("div"),u=document.createElement("span");u.textContent=_lang_data.ID_ABOUT_PROGRAMVERSION[o.settings.lang]+" ";var h=document.createElement("span");h.id="program_version_text",p.appendChild(u),p.appendChild(h);var m=document.createElement("div"),f=document.createElement("span");f.textContent="Importer: ";var v=document.createElement("span");v.id="version_importer_text",m.appendChild(f),m.appendChild(v),vsClient.on("@changeLang",function(e){u.textContent=_lang_data.ID_ABOUT_PROGRAMVERSION[o.settings.lang]+" ",f.textContent="Importer: "}),d.appendChild(p),d.appendChild(m),i.appendChild(d),r.appendChild(l),r.appendChild(c),i.appendChild(r),i.appendChild(a);var g;try{g=_AboutLinks}catch(e){g=s.appStates.aboutLinks}for(var C=50*(g.length-1),_=0;_<g.length;_++)!function(t){var n=document.createElement("div");n.classList.add("ribbon-about-button"),n.style.right=C-40*t-10*t+"px",$(n).click(function(n){n.preventDefault(),e.openPage(g[t])}),i.appendChild(n)}(_);return n.onclick=function(t){if(!1===e.aboutOpen){t.stopPropagation();vsClient.command.executeXMLAsync('<Call Method="GetVersionInfo"></Call>'),vsClient.once("GetVersionInfo",function(e){var t=e.Version.split(".");t.pop(),s.appStates.version=t.join("."),$("#program_version_text").text(e.LongVersion),$("#version_importer_text").text(e.ImporterVersion)}),document.body.appendChild(i),$(document).on("click",e.closeAboutDialog),$(document).on("keyup",e.closeAboutDialog),e.aboutOpen=!0}else document.body.removeChild(i),$(document).off("click",e.closeAboutDialog),$(document).off("keyup",e.closeAboutDialog),e.aboutOpen=!1},t.appendChild(n),t},t}(l.EventEmitter);t.VSRibbon=v;var g,C,_,I,S,y,E,b,w,T,M,N,O,P,x=[]}]);
//# sourceMappingURL=webviewer-bundle.js.map