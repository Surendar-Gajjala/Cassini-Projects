this.__ws_debug=function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}([function(e,t,n){"use strict";function i(e){for(var t=e.substr(1),n=parseInt(t,16),i=(n>>16&255)/255,o=(n>>8&255)/255,a=(255&n)/255,l=[i,o,a],r=0;r<l.length;r++)l[r]<=.03928?l[r]=l[r]/12.92:l[r]=Math.pow((l[r]+.055)/1.055,2.4);return.2126*l[0]+.7152*l[1]+.0722*l[2]>.179?"black":"white"}function o(e,t){e.style.marginLeft=10*t+"px"}function a(e){t.paneCloseTouch=e}function l(){t.showTooltips=!t.showTooltips}function r(e,t){return t||(t=K.settings.lang),_lang_data[e]&&_lang_data[e][t]?_lang_data[e][t]:_custom_lang_data[e]&&_custom_lang_data[e][t]?_custom_lang_data[e][t]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e}function s(e,n){(document.body.clientWidth/2>300?($(t.leftPaneWrapper).width(document.body.clientWidth/2),$(t.rightPaneWrapper).width(document.body.clientWidth/2)):($(t.leftPaneWrapper).width(300),$(t.rightPaneWrapper).width(300)),"wv-file"===t.paneController.leftDefaultAdapter.openPane&&$(t.leftPaneWrapper).css("left","calc(-90%)"),e=parseInt(e.split("px")[0]),n=parseInt(n.split("px")[0]),vsClient.resize(e,n),t.ribbon.resize(),w(),x(),$(".mobile-pane-menu").css("max-height",de.clientHeight-10),be.resize(),he&&he.resize(),$("#mobile-browser-outer-wrapper").length>0)&&($("#mobile-browser-outer-wrapper")[0].style.height="calc(100% - "+($("#mobile-browser-footer").outerHeight()+40)+"px)")}function c(){ae=document.getElementById("wv-app"),le=document.getElementById("wv-ribbon"),de=document.getElementById("wv-dock"),de.style.height=window.innerHeight-le.offsetHeight+"px",de.style.width=window.innerWidth+"px",ce.style.height=de.style.height,s(de.style.width,de.style.height)}function d(){$(t.leftPaneWrapper).css("left","calc(-90%)"),$(t.rightPaneWrapper).css("right","calc(-90%)"),ge.style.pointerEvents="none",ge.style.opacity="0",Ce.style.pointerEvents="none",Ce.style.opacity="0",ue.style.opacity="0"}function p(e){switch(e){case"ENU":return"en";case"DEU":return"de";case"ITA":return"it";case"ESP":return"es";case"FRA":return"fr";case"KOR":return"kor";case"CHS":return"zh";case"JPN":return"ja";default:return"en"}}function h(){function e(e){e.requestFullscreen?document.body.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function n(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var i=this,o=localStorage.getItem("MobileWVContextMenuStyle");null!==o&&(t.mobileSettings.contextMenuStyle=o),window.addEventListener("touchstart",function(e){e.target!==vsClient.vsCanvas.canvas2D&&e.target!==vsClient.vsCanvas.canvasGL&&e instanceof TouchEvent&&e.touches.length>1&&e.preventDefault()}),ae=document.getElementById("wv-app"),le=document.getElementById("wv-ribbon"),le.className="mobile-ribbon",de=document.getElementById("wv-dock"),de.style.height=window.innerHeight-le.offsetHeight+"px",de.style.width=window.innerWidth+"px",ce=document.createElement("div"),ce.id="wv-canvas",ce.style.height=de.style.height,ce.style.width="100%",$(ce).kendoTouch({minHold:400,hold:function(e){if(-1===q.appStates.interactionMode.indexOf("Flythrough"))if("radial-menu"===t.mobileSettings.contextMenuStyle){$("#mobile-radial-contetxt-menu").length>0&&$("#mobile-radial-contetxt-menu").remove();var n=document.createElement("div");n.id="mobile-radial-contetxt-menu";var i=document.createElement("ul");n.style.position="absolute",n.style.left=e.touch.x.location-100+"px",n.style.top=e.touch.y.location-100+"px",i.className="mobile-radial-context-menu",n.appendChild(i);var o=_MobileRadialMenuEntry.length,a=200*Math.PI/o,l=document.createElement("div");l.className="mobile-radial-context-menu-inner-circle",n.appendChild(l),document.body.appendChild(n);for(var s=0;s<o;s++)!function(e){var n=_MobileRadialMenuEntry[e],l=document.createElement("li");l.className="mobile-radial-context-menu-slice";var s=360/o;l.style.transform="rotate("+(67.5+e*s)+"deg) skew(45deg)";var c=document.createElement("div");c.className="mobile-radial-context-menu-slice-inner-wrapper",l.appendChild(c),c.id="mobile-radial-context-menu-slice_"+e;var d=document.createElement("span");d.className="mobile-radial-context-menu-slice-text",67.5+e*s>157.5&&67.5+e*s<337.5&&(d.style.transform="rotate(180deg)"),d.id=n.langId,d.textContent=r(n.langId,K.settings.lang),d.style.maxWidth=a-10+"px",t.translationObjects.push(d),c.appendChild(d);var p=document.createElement("div");p.className="mobile-radial-context-menu-slice-content-wrapper",p.style.transform="rotate(-"+e*s+"deg)",c.appendChild(p);var h=document.createElement("div");h.className="mobile-radial-context-menu-slice-icon";var u=document.createElementNS(ie,"svg");u.style.width="20px",u.style.height="20px";var m=document.createElementNS(ie,"use");m.setAttributeNS(oe,"href","#"+n.iconId),u.appendChild(m),h.appendChild(u),p.appendChild(h),i.appendChild(l),$(c).click(function(e){n.function(vsClient)})}(s);$(document).click(function(e){$(e.target).hasClass("mobile-radial-context-menu-slice-inner-wrapper")||$(n).remove()})}else if("list-menu"===t.mobileSettings.contextMenuStyle){e.touch.x.location,e.touch.y.location;vsClient.vsCanvas.rightClickTimeStamp=e.event.timeStamp}},drag:function(e){if(e.preventDefault(),$("#mobile-radial-contetxt-menu").length>0){e.event.preventDefault(),e.event.stopImmediatePropagation();var t=$("#mobile-radial-contetxt-menu")[0],n=document.elementFromPoint(e.touch.x.location,e.touch.y.location);(n===t||$.contains(t,n))&&($(n).hasClass("mobile-radial-context-menu-slice-inner-wrapper")?$(n).hasClass("mobile-radial-context-menu-slice-active")||($(".mobile-radial-context-menu-slice-inner-wrapper").removeClass("mobile-radial-context-menu-slice-active"),$(n).addClass("mobile-radial-context-menu-slice-active")):$(".mobile-radial-context-menu-slice-inner-wrapper").removeClass("mobile-radial-context-menu-slice-active"))}},dragend:function(e){if($("#mobile-radial-contetxt-menu").length>0){var t=$("#mobile-radial-contetxt-menu")[0],n=document.elementFromPoint(e.touch.x.location,e.touch.y.location);if((n===t||$.contains(t,n))&&$(n).hasClass("mobile-radial-context-menu-slice-inner-wrapper"))try{var i=parseInt(n.id.replace("mobile-radial-context-menu-slice_",""));_MobileRadialMenuEntry[i].function(vsClient),$(t).remove()}catch(e){}}}}),ce.addEventListener("contextmenu",function(e){e.preventDefault(),"radial-menu"!==t.mobileSettings.contextMenuStyle&&($("#contextMenu").remove(),$(document).off("mousedown",vsClient.vsCanvas.closeContextMenu),$(document).off("keyup",vsClient.vsCanvas.closeContextMenu),vsClient.vsCanvas.createContextMenu(e))}),de.appendChild(ce),window.onresize=c,"iPad"===navigator.platform&&navigator.userAgent.match("CriOS")&&(window.onorientationchange=function(){setTimeout(function(e){c()},200)}),re=document.createElement("div"),re.className="fullscreen-loading-wrapper",se=document.createElement("span"),se.className="fullscreen-loading-text",se.textContent="",re.appendChild(se);var a=document.createElement("i");a.className="fullscreen-loading-icon fal fa-spinner-third fa-spin",re.appendChild(a),t.ribbon=new z.MobileRibbon(le),t.ribbon.initialize(),t.leftPaneWrapper=document.createElement("div"),t.leftPaneWrapper.className="mobile-left-pane",ae.appendChild(t.leftPaneWrapper),t.rightPaneWrapper=document.createElement("div"),t.rightPaneWrapper.className="mobile-right-pane",ae.appendChild(t.rightPaneWrapper),ue=document.createElement("div"),ue.className="mobile-status-dialog",ue.style.opacity="0",me=document.createElement("div"),me.className="mobile-status-dialog-title",ue.appendChild(me),fe=document.createElement("div"),ue.appendChild(fe),document.body.appendChild(ue),t.paneController=new Y.MobilePanes(t.leftPaneWrapper,t.rightPaneWrapper),ge=document.createElement("div"),ge.style.pointerEvents="none",ge.style.opacity="0",ge.className="mobile-pane-menu",ge.style.left="50px",Ce=document.createElement("div"),Ce.style.pointerEvents="none",Ce.style.opacity="0",Ce.className="mobile-pane-menu",Ce.style.right="50px",ce.addEventListener("mousedown",function(e){("0px"===t.paneController.leftDefaultAdapter.paneEl.style.left||"0px"===t.paneController.rightDefaultAdapter.paneEl.style.right||t.ribbon.adapter.levelArr.length>1)&&(e.stopImmediatePropagation(),e.preventDefault(),t.paneCloseTouch=!0),d(),t.ribbon.adapter.closeRibbons(),t.paneController.leftDefaultAdapter.clearFileBrowser()},!0),ce.addEventListener("touchstart",function(e){("0px"===t.paneController.leftDefaultAdapter.paneEl.style.left||"0px"===t.paneController.rightDefaultAdapter.paneEl.style.right||t.ribbon.adapter.levelArr.length>1)&&(e.stopImmediatePropagation(),e.preventDefault()),d(),t.ribbon.adapter.closeRibbons(),t.paneController.leftDefaultAdapter.clearFileBrowser()},!0),$(le).click(function(){ge.style.pointerEvents="none",ge.style.opacity="0",Ce.style.pointerEvents="none",Ce.style.opacity="0"}),vsClient.on("@changeLang",function(e){for(var n=0;n<t.translationObjects.length;n++)t.translationObjects[n].textContent=r(t.translationObjects[n].id,e)}),vsClient.on("ExplodeByDistance",function(){if(Re!==xe){var e='<Call Method="ExplodeByDistance"><Position>'+Math.round(xe)+"</Position></Call>";vsClient.command.executeXML(e),Re=xe}else Be=!0}),vsClient.on("ShowMessageBox",function(e){var t=["WARN_NO_STATE_CHANGE","ERR_SCENE_ID_NOT_FOUND","ERR_VIEW_ID_NOT_FOUND","ERR_ID_ALREADY_EXISTS"];try{_IgnoredErrors&&_IgnoredErrors.length>0&&(t=t.concat(_IgnoredErrors))}catch(e){}var n={code:parseInt(e.ErrorCode),info:e.ErrorInfo,method:e.Identifier,message:i.translate("ID_"+e.ErrorInfo),type:e.Type[1]};if(-1===t.indexOf(n.info)){var o=n.method,a={key:"code",value:n.message},l=[a];"SocketError"===n.type?H(o,l,-1):H(o,l,1)}}),vsClient.on("openPrintDialog",function(e){new ee.MobilePrintModal(vsClient)});var l=document.createElement("div");l.className="mobile-floating-action-button",l.id="mobile-floating-action-button";var s=document.createElementNS(ie,"svg");s.style.marginTop="8px",s.style.width="50px",s.style.height="35px";var p=document.createElementNS(ie,"use");p.setAttributeNS(oe,"href","#mobile_UI_picker"),s.appendChild(p),l.appendChild(s),document.body.appendChild(l),t.leftPaneWrapper.style.maxWidth="calc(100% -"+(l.clientWidth+5)+"px )",t.rightPaneWrapper.style.maxWidth="calc(100% -"+(l.clientWidth+5)+"px )",$(l).click(function(e){$(l).hasClass("mobile-floating-action-button-active")?($(l).removeClass("mobile-floating-action-button-active"),be.hide()):($(l).addClass("mobile-floating-action-button-active"),be.show())});var h=document.createElement("div");h.className="mobile-floating-deactivate-button",h.id="mobile-floating-deactivate-button";var u=document.createElementNS(ie,"svg");u.style.marginTop="8px",u.style.width="50px",u.style.height="35px";var m=document.createElementNS(ie,"use");m.setAttributeNS(oe,"href","#deactivate_all"),u.appendChild(m),h.appendChild(u),$(h).click(function(e){var n='<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>';vsClient.command.executeXML(n);var i=localStorage.getItem("VSWVSettings");null===i&&(i=localStorage.getItem("VSWVDefaultSettings"));var o=J.parseXML(i),a=o.Settings.Scene.Mouse.LeftButtonFunction;try{a=_MobileTouchControl}catch(e){}n='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><LeftButtonFunction>'+a+"</LeftButtonFunction></Mouse></Scene></Settings></Call>",vsClient.command.executeXML(n),q.appStates.selectionMode="Select",n='<Call Method="SetSelectionMode"><SelectionMode>'+q.appStates.selectionMode+"</SelectionMode></Call>",vsClient.command.executeXML(n),vsClient.emit("Select","Select"),$("#mobile-text-search-panel").hide(),d(),-1!==te.paneBadgeIdx.indexOf("wv-quickcompare")&&te.togglePaneBadge("QuickComparePane");var l=te.ribbon.adapter.getButtonByUID("rQuickCompare");l&&l.highlight(!1),n='<Call Method="ActivateRotation"><Activate>false</Activate></Call>',vsClient.command.executeXML(n);var r=t.ribbon.adapter.getButton("ID_RIBBON_SPIN");r&&(r.state.active=!1,r.highlight(!1)),n='<Call Method="StopPlayConfigurationViews"></Call>',vsClient.command.executeXML(n)}),document.body.appendChild(h);var f=document.createElement("div");f.className="mobile-floating-fullscreen-button";try{0===_MobileRightMoreBadge.length&&(f.style.right="5px")}catch(e){}var v=document.createElement("i");$(v).addClass("fa fa-expand mobile-more-badge"),f.appendChild(v),$(f).click(function(t){$(v).hasClass("fa-expand")?($(v).removeClass("fa-expand").addClass("fa-compress"),e(document.documentElement)):($(v).removeClass("fa-compress").addClass("fa-expand"),n())}),document.body.appendChild(f),document.body.appendChild(h);var g=document.createElement("div");g.className="mobile-floating-ctrl-button mobile-more-badge";try{0===_MobileLeftMoreBadge.length&&(g.style.left="5px")}catch(e){}var C=document.createElementNS(ie,"svg");C.style.height="40px",C.style.verticalAlign="middle",C.style.width="20px",C.style.height="20px";var E=document.createElementNS(ie,"use");E.setAttributeNS(oe,"href","#mobile_UI_multiselect"),C.appendChild(E),g.appendChild(C),$(g).click(function(e){t.mockCtrl=!t.mockCtrl,t.mockCtrl?$(g).addClass("mobile-badge-highlighted"):$(g).removeClass("mobile-badge-highlighted")}),document.body.appendChild(g);try{_MobileLeftMoreBadge.length>0&&(Ae=_MobileLeftMoreBadge)}catch(e){}if(Ae.length>0){1;var _=document.createElement("div");_.style.left="5px",_.id="left-more-badge",$(_).addClass("mobile-pane-badge"),_.style.top="5px",_.style.textAlign="center";var b=document.createElement("i");$(b).addClass("fa fa-ellipsis-v mobile-more-badge"),_.appendChild(b),document.body.appendChild(_),M(),document.body.appendChild(ge),$(_).click(function(e){Ce.style.pointerEvents="none",Ce.style.opacity="0","0"!==ge.style.opacity?(ge.style.pointerEvents="none",ge.style.opacity="0"):(ge.style.pointerEvents="auto",ge.style.opacity="1")})}try{for(var I=0;I<_MobileBadgesLeft.length;I++)t.paneBadgeIdx.push(_MobileBadgesLeft[I])}catch(e){}w(),Ee=0;try{if(_MobileRightMoreBadge.length>0){Ee=1;var S=document.createElement("div");S.style.right="5px",S.id="right-more-badge",$(S).addClass("mobile-pane-badge"),S.style.top="5px",S.style.textAlign="center";var y=document.createElement("i");$(y).addClass("fa fa-ellipsis-v mobile-more-badge"),S.appendChild(y),document.body.appendChild(S);for(var N=0;N<_MobileRightMoreBadge.length;N++)!function(e){var n=_MobileRightMoreBadge[e],i=document.createElement("div");i.id=n,$(i).addClass("mobile-pane-menu-badge");var o=document.createElementNS(ie,"svg");o.style.height="40px",o.style.verticalAlign="middle",o.style.width="20px",o.style.height="20px";var a=document.createElementNS(ie,"use");a.setAttributeNS(oe,"href","#"+n),o.appendChild(a),i.appendChild(o),Ce.appendChild(i);var l=document.createElement("span");l.className="mobile-pane-menu-item-title",l.textContent=r(n,K.settings.lang),l.id="ID_"+n,t.translationObjects.push(l),i.appendChild(l),$(i).click(function(e){Ce.style.opacity="0",Ce.style.pointerEvents="none",t.paneController.render($(i).attr("id"),"right")})}(N);document.body.appendChild(Ce),$(S).click(function(e){ge.style.pointerEvents="none",ge.style.opacity="0","0"!==Ce.style.opacity?(Ce.style.pointerEvents="none",Ce.style.opacity="0"):(Ce.style.pointerEvents="auto",Ce.style.opacity="1")})}}catch(e){}return x(),be=new Z.MobilePointer(vsClient,ce),ce}function u(e){var t=[],n=[],i=document.createElement("div");i.className="fullscreen-loading-wrapper",document.body.appendChild(i);var o=document.createElement("div");o.className="session-box",i.appendChild(o);var a=document.createElement("div");a.textContent="Restore sessions",o.appendChild(a);var l=document.createElement("div");l.className="session-select-all-row",l.textContent="Select all",o.appendChild(l);var r=document.createElement("i");r.className="fal fa-square session-select-all-icon",l.onclick=function(i){var o=$(r);t=o.hasClass("fa-square")?e.map(function(e){return e.Id}):[],o.toggleClass("fa-square"),o.toggleClass("fa-check-square"),n.forEach(function(e){var t=$(e);t.toggleClass("fa-square"),t.toggleClass("fa-check-square")})},l.appendChild(r),e.forEach(function(e,i){var a=document.createElement("div");a.className="session-row",e.Lifetime=parseInt(e.Lifetime)/6e4;var l=e.Lifetime>1?Math.round(e.Lifetime)+" minute(s)":"< 1 minute";a.textContent="Session "+(i+1)+", started "+l+" ago",a.id=e;var r=document.createElement("i");r.className="fal fa-square session-select-icon",a.onclick=function(n){$(r).toggleClass("fa-square"),$(r).toggleClass("fa-check-square"),-1===t.indexOf(e.Id)?t.push(e.Id):t.splice(t.indexOf(e.Id),1)},a.appendChild(r),n.push(r),o.appendChild(a)});var s=document.createElement("button");s.textContent="OK",s.className="session-continue-button",s.onclick=function(o){e.forEach(function(e){var n='<Request Type="CloseSessions">';-1===t.indexOf(e.Id)&&(n+="<Session>"+e.Id+"</Session>"),n+="</Request>",vsClient.command.executeXML(n)});var a=window.location.origin+window.location.pathname.replace("/index.html","/");t.forEach(function(e){window.open(a+"index.html?session="+e,"_blank")}),t=void 0,n=void 0,vsClient.connect(),q.appStates.backendToken&&vsClient.SessionToken(q.appStates.backendToken),$(i).remove()},o.appendChild(s)}function m(e){se.textContent=void 0!==e?e:"",ae.contains(re)||ae.appendChild(re)}function f(){ae&&ae.contains(re)&&ae.removeChild(re)}function v(e,t){var n;n=t?C(e.shift()):E(e.shift()),n&&e.length>0?vsClient.once("@NativeLoad",function(t){v(e,!1)}):e.length>0&&v(e,!1)}function g(e,n){try{_NativeLoadingModal&&(pe=_NativeLoadingModal)}catch(e){pe=!1}var i=e.toLowerCase().split("."),o=localStorage.getItem("nativeLoadingSettings"),a={rememberMe:!1};return null!==o&&(a=JSON.parse(o)),!(-1!==["3dvs","vsxml","dxf","dwf","dwg","mil","txt","xml","cg4","catdrawing","cgm","drw","ger"," tiff","bmp","webp","906","907","gbr","cs-ger","ss-ger","phd","gif","plt","jpeg","jpg","jp2","xls","xlsx","ppt","pptx","doc","docx","dgn","odg","odp","ods","odt","png","dft","slddrw","tif"].indexOf(i[i.length-1])||!a||!0===a.rememberMe||!0!==pe||(t.paneController.leftDefaultAdapter.clearFileBrowser(),he?(he.setFile(e),he.setCallback(n)):he=new Q.MobileLoadingModal(vsClient,e,n),he.show(),0))}function C(e){q.appStates.fileName=e,$("#mobile-floating-deactivate-button").click();var t=g(e,vsClient.OpenFile.bind(vsClient));return t||vsClient.OpenFile(e),t}function E(e){var t=g(e,vsClient.ImportFile.bind(vsClient));return t||vsClient.ImportFile(e),t}function _(){$("#mobile-text-search-panel").hide(),$(Ie).hide(),$(Me).hide()}function b(){if($("#mobile-text-search-panel").show(),$(Ie).show(),$(Me).length>0)$(Me).show(),Me.className="mobile-floating-extra-layer-button mobile-badge-highlighted";else{Me=document.createElement("div"),Me.id="mobile-2D-extra-layer",Me.className="mobile-floating-extra-layer-button mobile-badge-highlighted";var e=document.createElement("i");e.className="fas fa-clone",$(Me).off("click").click(function(e){$(Me).hasClass("mobile-badge-highlighted")?($("#mobile-text-search-panel").hide(),$(Ie).hide()):($("#mobile-text-search-panel").show(),$(Ie).show()),$(Me).toggleClass("mobile-badge-highlighted")}),Me.appendChild(e),document.body.appendChild(Me)}}function I(){$(Ie).hide()}function S(){q.appStates.pageCount;if(we="1",$("#mobile-document-bar").length>0)$(Ie).show(),Se.value="1",ye.textContent="/ "+q.appStates.pageCount;else{Ie=document.createElement("div"),Ie.id="mobile-document-bar",Ie.className="mobile-document-bar",$(Ie).empty();var e=document.createElement("i");e.className="fa fa-chevron-left mobile-document-bar-icon",$(e).click(function(e){vsClient.command.executeXML('<Call Method="PreviousPage"></Call>')}),Se=document.createElement("input"),Se.className="mobile-document-bar-input",Se.value="1",$(Se).change(function(e){var t='<Call Method="GotoPage"><Page>'+Se.value+"</Page></Call>";vsClient.command.executeXML(t),vsClient.once("GotoPage",function(e){"SUCCESS"===e.Error?we=Se.value:Se.value=we})}),ye=document.createElement("span"),ye.className="mobile-document-bar-page-count",ye.textContent="/ "+q.appStates.pageCount;var t=document.createElement("i");t.className="fa fa-chevron-right mobile-document-bar-icon",$(t).click(function(e){vsClient.command.executeXML('<Call Method="NextPage"></Call>')}),document.body.appendChild(Ie),Ie.appendChild(e),Ie.appendChild(Se),Ie.appendChild(ye),Ie.appendChild(t)}}function y(e){Se.value=e}function w(){for(var e=0;e<_e.length;e++)$(_e[e]).remove();_e=[];var n=0;Ae.length>0&&(n=1),M();try{for(var i=_MobileBadgesLeft.length-1;i>=0;i--){var o=_MobileBadgesLeft[i];t.paneBadgeIdx.splice(t.paneBadgeIdx.indexOf(o),1),t.paneBadgeIdx.unshift(o)}for(var a=0;a<t.paneBadgeIdx.length;a++){var l=t.paneBadgeIdx[a];45*a>de.clientHeight-45*n-(a+45)-60?(-1===Ae.indexOf(l)?Ae.push(l):Ae.splice(Ae.indexOf(l),1),M()):X(l)}}catch(e){}}function M(){$(ge).empty();for(var e=0;e<Ae.length;e++)!function(e){var n=_MobileLeftMoreBadge[e],i=document.createElement("div");i.id=n,$(i).addClass("mobile-pane-menu-badge");var o=document.createElementNS(ie,"svg");o.style.height="40px",o.style.verticalAlign="middle",o.style.width="20px",o.style.height="20px";var a=document.createElementNS(ie,"use");a.setAttributeNS(oe,"href","#"+n),o.appendChild(a),i.appendChild(o),ge.appendChild(i);var l=document.createElement("span");l.className="mobile-pane-menu-item-title",l.textContent=r(n,K.settings.lang),l.id="ID_"+n,t.translationObjects.push(l),i.appendChild(l),$(i).click(function(e){ge.style.pointerEvents="none",ge.style.opacity="0",t.paneController.render($(i).attr("id"),"left")})}(e)}function x(){var e=0;t.interactionBadges.length>0&&(e=45);var n=0;"Ghost"===q.appStates.selectionMode&&(n=45);var i=de.clientHeight,o=i-110-n-e,a=$("#unghostBadge"),l=$("#unghostAllBadge"),r=$("#toggleSelectionModeBadge"),s=0;if(o>90&&"Ghost"===q.appStates.selectionMode){o-=90;var c=R(o+e);o-=45*c-e,o-=B(o),s=o/2;var d=50+45*c+s;r.css({right:"5px",top:d+"px"}),l.css({right:"5px",top:d+45+"px"}),a.css({right:"5px",top:d+90+"px"})}else if("Ghost"===q.appStates.selectionMode){var c=R(o+e);o-=45*c-e,o-=B(o),s=o/2;var d=50+45*c+s;r.css({right:"5px",top:d+"px"}),l.css({right:"50px",top:d+"px"}),a.css({right:"100px",top:d+"px"})}else{var c=R(o);o-=45*c,o-=B(o)}}function N(){for(var e=t.interactionBadges.length,n=0;n<e;n++){var i=t.interactionBadges[n];-1!==i.className.indexOf("wv-flythrough")&&$(i).show()}$("#mobile-floating-deactivate-button").removeClass("main-action-flythrough-position"),$("#mobile-floating-action-button").show(),$("#mobile-flythrough-controls").remove(),$("#mobile-flythrough-speed-slider").remove()}function T(){for(var e=t.interactionBadges.length,n=0;n<e;n++){var i=t.interactionBadges[n];-1===i.className.indexOf("wv-flythrough")?$(i).hide():$(i).addClass("flythrough-action-badge-position")}$("#mobile-floating-deactivate-button").addClass("main-action-flythrough-position"),$("#mobile-floating-action-button").hide();var o=document.createElement("div");o.className="mobile-flythrough-outer-circle",o.id="mobile-flythrough-controls",document.body.appendChild(o);var a=document.createElement("div");a.className="mobile-flythrough-transparency-wrapper",o.appendChild(a);var l=document.createElement("div");l.className="mobile-flythrough-handle",o.appendChild(l);var r=document.createElement("i");r.className="mobile-flythrough-direction-icon fas fa-caret-up",r.style.left="0",r.style.right="0",r.ontouchstart=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanUp</FlythroughCommand><Activate>true</Activate></Call>')},r.ontouchend=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanUp</FlythroughCommand><Activate>false</Activate></Call>')},o.appendChild(r);var s=document.createElement("i");s.className="mobile-flythrough-direction-icon fas fa-caret-right",s.style.top="55px",s.style.right="12px",o.appendChild(s),s.ontouchstart=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanRight</FlythroughCommand><Activate>true</Activate></Call>')},s.ontouchend=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanRight</FlythroughCommand><Activate>false</Activate></Call>')};var c=document.createElement("i");c.className="mobile-flythrough-direction-icon fas fa-caret-down",c.style.bottom="0",c.style.right="0",c.style.left="0",o.appendChild(c),c.ontouchstart=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanDown</FlythroughCommand><Activate>true</Activate></Call>')},c.ontouchend=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanDown</FlythroughCommand><Activate>false</Activate></Call>')};var d=document.createElement("i");d.className="mobile-flythrough-direction-icon fas fa-caret-left",d.style.top="55px",d.style.left="12px",o.appendChild(d),d.ontouchstart=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanLeft</FlythroughCommand><Activate>true</Activate></Call>')},d.ontouchend=function(e){e.preventDefault();vsClient.command.executeXML('<Call Method="ApplyFlythroughCommand"><FlythroughCommand>PanLeft</FlythroughCommand><Activate>false</Activate></Call>')};var p=document.createElement("i");p.className="mobile-flythrough-inner-direction-icon far fa-angle-up",p.style.left="0",p.style.right="0",l.appendChild(p);var h=document.createElement("i");h.className="mobile-flythrough-inner-direction-icon far fa-angle-right",h.style.right="5px",h.style.top="15px",l.appendChild(h);var u=document.createElement("i");u.className="mobile-flythrough-inner-direction-icon far fa-angle-down",u.style.left="0",u.style.right="0",u.style.bottom="0",l.appendChild(u);var m=document.createElement("i");m.className="mobile-flythrough-inner-direction-icon far fa-angle-left",m.style.left="5px",m.style.top="15px",l.appendChild(m),$(l).kendoTouch({touchstart:function(e){e.preventDefault(),Xe=!0,Oe=A(),Ne=e.touch.x.location,Te=e.touch.y.location;var n='<Call Method="MouseDown" Response="false"><X>'+Oe.center[0]+"</X><Y>"+Oe.center[1];n+="</Y><MouseButton>"+t.flythroughMouseButton+"</MouseButton></Call>",vsClient.command.executeXMLMouse(n),document.addEventListener("touchend",L)},drag:function(e){e.preventDefault();var t=e.touch.x.location-Ne,n=e.touch.y.location-Te,i=50+t,o=50+n;Math.sqrt(Math.pow(i-50,2)+Math.pow(o-50,2))<50&&(l.style.top=50+n+"px",l.style.left=50+t+"px",Pe=[t,n]);var a=Oe.center[0]+Pe[0]*Oe.widthRatio,r=Oe.center[1]+Pe[1]*Oe.heightRatio,s='<Call Method="MouseMove" Response="true"><X>'+a+"</X><Y>"+r;s+="</Y><MouseButton>None</MouseButton></Call>",vsClient.command.executeXMLMouse(s)},dragend:function(e){e.preventDefault(),Xe=!1,l.style.top="50px",l.style.left="50px";var n='<Call Method="MouseUp" Response="false"><X>'+Oe.center[0]+"</X><Y>"+Oe.center[1];n+="</Y><MouseButton>"+t.flythroughMouseButton+"</MouseButton></Call>",vsClient.command.executeXMLMouse(n),document.removeEventListener("touchend",L)}});var f=parseInt(ne.sceneSettings.Scene.Flythrough.SpeedFactor);De=2*f,$e=f;var v=document.createElement("div");v.className="mobile-flythrough-speed-slider-wrapper",v.id="mobile-flythrough-speed-slider",document.body.appendChild(v);var g=document.createElement("div");g.className="mobile-flythrough-speed-slider-bar",v.appendChild(g);var C=document.createElement("div");C.className="mobile-flythrough-speed-slider-bar-center",g.appendChild(C);var E=document.createElement("div");E.className="mobile-flythrough-speed-slider-bar-handle",g.appendChild(E);var _=document.createElement("i");_.className="far fa-angle-up mobile-flythrough-speed-up-icon",E.appendChild(_);var b=document.createElement("i");b.className="far fa-angle-down mobile-flythrough-speed-up-icon",b.style.bottom="0",E.appendChild(b);var I=document.createElement("div");I.className="mobile-flythrough-speed-slider-bar-filled",v.appendChild(I);var S=D(f,g);E.style.top=S+"px",I.style.height=C.getBoundingClientRect().top-E.getBoundingClientRect().bottom+"px",Le=S,$(E).kendoTouch({dragstart:function(e){e.preventDefault(),Fe=!!Xe},drag:function(e){e.preventDefault();var t=Le-(e.touch.y.location-g.offsetTop),n=Le-t;n>=-25&&n<=g.offsetHeight-25&&(E.style.top=n+"px",O(n+25,g),"front"===ke?(I.style.height=C.getBoundingClientRect().top-E.getBoundingClientRect().bottom+"px",I.style.bottom="calc(50% + 9px)",I.style.top=""):(I.style.height=E.getBoundingClientRect().top-C.getBoundingClientRect().bottom+"px",I.style.top="calc(50% - 4px)",I.style.bottom="")),Fe=!!Xe},dragend:function(e){e.preventDefault(),Fe=!!Xe}}),window.addEventListener("resize",function(e){if("front"===ke){var t=D($e,g)-25;E.style.top=t+"px",Le=t,I.style.height=C.getBoundingClientRect().top-E.getBoundingClientRect().bottom+"px",I.style.bottom="calc(50% + 9px)",I.style.top=""}else{var n=D(De-$e,g)+g.offsetHeight/2;E.style.top=n+"px",Le=n,I.style.height=E.getBoundingClientRect().top-C.getBoundingClientRect().bottom+"px",I.style.top="calc(50% - 4px)",I.style.bottom=""}})}function O(e,n){var i,o,a=n.offsetHeight,l=a/2;if(e>l?(o="back",i=(l-(a-e))/l,t.flythroughMouseButton="Right"):(o="front",i=(l-e)/l,t.flythroughMouseButton="Left"),Xe&&o!==ke){var r='<Call Method="MouseDown" Response="false"><X>'+Oe.center[0]+"</X><Y>"+Oe.center[1];r+="</Y><MouseButton>"+t.flythroughMouseButton+"</MouseButton></Call>",vsClient.command.executeXMLMouse(r)}ke=o;var s=(1-i)*De;s<1&&(s=1),$e=s;var c='<Call Method="SetSceneSettings"><Settings><Scene><Flythrough><SpeedFactor>'+s+"</SpeedFactor></Flythrough></Scene></Settings></Call>";vsClient.command.executeXML(c)}function D(e,t){return t.offsetHeight/2*(e/De)}function L(e){if(e.preventDefault(),!Fe){document.removeEventListener("touchend",L);var t='<Call Method="MouseUp" Response="false"><X>'+Oe.center[0]+"</X><Y>"+Oe.center[1];t+="</Y><MouseButton>Left</MouseButton></Call>",Xe=!1,vsClient.command.executeXMLMouse(t)}}function A(){var e=vsClient.vsCanvas.width,t=vsClient.vsCanvas.height,n=e/150,i=t/150;return{center:[Math.round(e/2),Math.round(t)/2],widthRatio:n,heightRatio:i}}function R(e){for(var n=t.interactionBadges.length;e-45>0&&n>0;){var i=t.interactionBadges.length-n,o=t.interactionBadges[i];o.style.top=50+45*i+"px",o.style.right="5px",e-=45,n--}for(var a=0;a<n;a++){var i=t.interactionBadges.length-a-1,o=t.interactionBadges[i];o.style.top="50px",n===t.interactionBadges.length?o.style.right=5+50*(n-a-1)+"px":o.style.right=5+50*(n-a)+"px"}return t.interactionBadges.length-n}function B(e){var n=$("#mobile-floating-action-button"),i=$("#mobile-floating-deactivate-button"),o=63*(t.ribbon.adapter.levelArr.length-1);return e>55?(n.css({right:"5px",bottom:55+o+"px"}),i.css({right:"5px",bottom:110+o+"px"}),55):(n.css({right:"65px",bottom:55+o+"px"}),i.css({right:"5px",bottom:55+o+"px"}),0)}function P(e){var n=document.createElement("div");$(n).addClass("mobile-pane-badge mobile-badge-highlighted"),$(n).addClass(e);var i=(t.interactionBadges.length,document.createElementNS(ie,"svg"));i.style.width="20px",i.style.height="20px",i.style.marginTop="10px",i.style.marginLeft="10px";var o=document.createElementNS(ie,"use");o.setAttributeNS(oe,"href","#"+e),i.appendChild(o),n.appendChild(i),document.body.appendChild(n),t.interactionBadges.push(n),$(n).click(function(n){0!==e.indexOf("no_pane_")&&t.paneController.render(e,"right")}),x()}function k(e){if("wv-appsettings"===(e=t.paneController.mapPaneTemplateToId(e)))return!0;var n=!0;if(-1===t.paneBadgeIdx.indexOf(e)){Ae.length;if(45*(_e.length+1)>de.clientHeight-60){var i=_e.pop();Ae.push(i.id.replace("_paneBadge","")),$(i).remove(),M()}t.paneBadgeIdx.push(e),w()}else V(e),n=!1;return n}function X(e){var n=document.createElement("div");n.style.left="5px",$(n).addClass("mobile-pane-badge"),n.id=e+"_paneBadge";var i=_e.length;Ae.length>0&&i++,n.style.top=45*i+5+"px";var o=document.createElementNS(ie,"svg");"wv-modeltree"===e?(o.style.width="30px",o.style.height="30px",o.style.marginTop="4px",o.style.marginLeft="9px"):(o.style.width="20px",o.style.height="20px",o.style.marginTop="10px",o.style.marginLeft="10px");var a=document.createElementNS(ie,"use");a.setAttributeNS(oe,"href","#"+e),o.appendChild(a),n.appendChild(o),document.body.appendChild(n),_e.push(n),-1===t.paneBadgeIdx.indexOf(e)&&t.paneBadgeIdx.unshift(e),$(n).click(function(n){-1!==_MobileRightMoreBadge.indexOf(e)?t.paneController.render(e,"right"):t.paneController.render(e,"left")})}function F(){var e=document.createElement("div");e.id="mobile-file-open-badge",$(e).addClass("mobile-pane-badge mobile-file-open-badge");var t=document.createElementNS(ie,"svg");$(t).addClass("mobile-file-open-badge-icon");var n=document.createElementNS(ie,"use");n.setAttributeNS(oe,"href","#2_oeffnen"),t.appendChild(n),e.appendChild(t),document.body.appendChild(e),$(e).click(function(e){vsClient.emit("openFileDialog")})}function W(e,t){if(!0===e){var n=document.createElement("div");n.id="unghostBadge",$(n).addClass("mobile-pane-badge");var i=document.createElementNS(ie,"svg");i.style.width="30px",i.style.height="30px",i.style.marginTop="5px",i.style.marginLeft="5px";var o=document.createElementNS(ie,"use");o.setAttributeNS(oe,"href","#unghost_badge"),i.appendChild(o),n.appendChild(i),document.body.appendChild(n),$(n).click(function(e){vsClient.command.executeXML('<Call Method="UnghostLastNode"></Call>')});var a=document.createElement("div");a.id="unghostAllBadge",$(a).addClass("mobile-pane-badge");var l=document.createElementNS(ie,"svg");l.style.width="25px",l.style.height="25px",l.style.marginTop="8px",l.style.marginLeft="8px";var r=document.createElementNS(ie,"use");r.setAttributeNS(oe,"href","#2_ghost_ausschalten"),l.appendChild(r),a.appendChild(l),document.body.appendChild(a),$(a).click(function(e){vsClient.command.executeXML('<Call Method="UnGhostAll"></Call>')});var s=!0,c=document.createElement("div");c.id="toggleSelectionModeBadge",$(c).addClass("mobile-pane-badge mobile-badge-highlighted");var d=document.createElementNS(ie,"svg");d.style.width="25px",d.style.height="25px",d.style.marginTop="8px",d.style.marginLeft="8px";var p=document.createElementNS(ie,"use");p.setAttributeNS(oe,"href","#7_ghost"),d.appendChild(p),c.appendChild(d),document.body.appendChild(c),$(c).click(function(e){s?(vsClient.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>'+t+"</SelectionMode></Call>"),$(c).removeClass("mobile-badge-highlighted")):(vsClient.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>Ghost</SelectionMode></Call>'),$(c).addClass("mobile-badge-highlighted")),s=!s}),x()}else $("#unghostBadge").remove(),$("#unghostAllBadge").remove(),$("#toggleSelectionModeBadge").remove()}function G(e){for(var n,i=0;i<t.interactionBadges.length;i++)if($(t.interactionBadges[i]).hasClass(e))$(t.interactionBadges[i]).remove(),n=i;else if(void 0!==n){var o=i-1;t.interactionBadges[i].style.top=45*(o+Ee)+5+"px"}void 0!==n&&(t.interactionBadges.splice(n,1),x())}function V(e){var n=!1;-1!==t.paneBadgeIdx.indexOf(e)&&(n=!0,t.paneBadgeIdx.splice(t.paneBadgeIdx.indexOf(e),1)),-1!==Ae.indexOf(e)&&(n=!0,Ae.splice(Ae.indexOf(e),1)),n&&w()}function U(e){var t=document.createElement("div");t.className="toast mobile-toast",t.style.backgroundColor=e?"darkgreen":"darkred";var n=document.createElement("i");n.className=e?"far fa-check":"far fa-exclamation",t.appendChild(n),document.body.appendChild(t),setTimeout(function(){t.remove()},2e3)}function H(e,n,i){ue.style.opacity="0",ve=(new Date).getDate();var o=(new Date).getDate();switch($(fe).empty(),i){case 0:me.textContent=r(e,K.settings.lang),t.translationObjects.push(me);for(var a=0;a<n.length;a++){var l=document.createElement("div");l.className="mobile-status-dialog-message";var s=document.createElement("span");s.textContent=n[a].key,l.appendChild(s);var c=document.createElement("span");c.textContent="  :  ",l.appendChild(c);var d=document.createElement("span");d.textContent=n[a].value,l.appendChild(d),fe.appendChild(l)}ue.style.opacity="1",setTimeout(function(){ve===o&&(ue.style.opacity="0",t.translationObjects.splice(t.translationObjects.indexOf(me),1))},3e3);break;case 1:me.textContent=e;for(var a=0;a<n.length;a++){var l=document.createElement("div"),p=document.createElement("span");"code"===n[a].key?$(p).addClass("mobile-status-error-text"):l.style.textAlign="center",p.innerHTML=n[a].value.replace(/\\n/g,"\r"),l.appendChild(p),fe.appendChild(l),ue.style.opacity="1",setTimeout(function(){ue.style.opacity="0"},4e3)}break;case-1:me.textContent=e;for(var a=0;a<n.length;a++){var l=document.createElement("div"),p=document.createElement("span");"code"===n[a].key?$(p).addClass("mobile-status-error-text"):l.style.textAlign="center",p.innerHTML=r(n[a].value).replace(/\\n/g,"\r"),l.appendChild(p),fe.appendChild(l),ue.style.opacity="1"}}}function j(){var e=document.createElement("div");e.className="mobile-neighbourhood-search-panel",e.id="mobile-neighbourhood-search-panel",document.body.appendChild(e);var n=document.createElement("select");n.className="mobile-transformation-type",n.id="mobile-neighborhood-search-type",e.appendChild(n);var i=document.createElement("option");i.value="Box",i.id="ID_NEIGHBOURHOOD_SEARCH_SHAPE_BOX",i.textContent=r("ID_NEIGHBOURHOOD_SEARCH_SHAPE_BOX",K.settings.lang),t.translationObjects.push(i),n.appendChild(i);var o=document.createElement("option");o.value="Sphere",o.id="ID_NEIGHBOURHOOD_SEARCH_SHAPE_SPHERE",o.textContent=r("ID_NEIGHBOURHOOD_SEARCH_SHAPE_SPHERE",K.settings.lang),t.translationObjects.push(o),n.appendChild(o);var a=document.createElement("option");a.value="Linear",a.id="ID_NEIGHBOURHOOD_SEARCH_SHAPE_LINEAR",a.textContent=r("ID_NEIGHBOURHOOD_SEARCH_SHAPE_LINEAR",K.settings.lang),t.translationObjects.push(a),n.appendChild(a),n.addEventListener("change",function(e){var t=n.value,i='<Call Method="SetSceneSettings"><Settings><Scene><Tools><NeighbourhoodSearch><Mode><Shape>'+t;i+="</Shape></Mode></NeighbourhoodSearch></Tools></Scene></Settings></Call>",vsClient.command.executeXML(i)});var l=document.createElement("div");l.className="mobile-neighbourhood-search-compute-button";var s=document.createElement("i");s.className="far fa-search mobile-neighbourhood-search-compute-icon",l.appendChild(s),$(l).click(function(e){vsClient.command.executeXML('<Call Method="ExecuteNeighbourhoodSearch"></Call>'),vsClient.once("ExecuteNeighbourhoodSearch",function(e){"SUCCESS"===e.Error&&"true"===$("#UID_NEIGHBOURHOOD_SEARCH_CLOSE_SELECTION_MODE_FLAG").val()&&(vsClient.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>Select</SelectionMode></Call>'),vsClient.emit("Select","Select"))})}),e.appendChild(l)}Object.defineProperty(t,"__esModule",{value:!0});var z=n(59),Y=n(52),K=n(4),Z=n(43),q=n(5),Q=n(42),J=n(11),ee=n(44),te=n(0),ne=n(29),ie="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xlink";t.calculateFontColor=i,t.applyIndent=o,t.mobileSettings={contextMenuStyle:"radial-menu",activePath:[]},t.mockCtrl=!1;var ae,le,re,se,ce,de,pe,he,ue,me,fe,ve;t.paneCloseTouch=!1,t.setPaneCloseTouch=a,t.toggleTooltipClick=l;var ge,Ce,Ee=0;t.interactionBadges=[];var _e=[];t.paneBadgeIdx=[];var be,Ie,Se,ye,we,Me,xe,Ne,Te,Oe,De,Le,Ae=[],Re=0,Be=!1,Pe=[],ke="front";t.flythroughMouseButton="Left";var $e,Xe=!1,Fe=!1;t.translationObjects=[],t.translate=r,t.resizeHandler=c,t.hideAll=d,t.mapCountry=p,t.init=h,t.showSessionRestoreDialog=u,t.blockUI=m,t.unblockUI=f,t.serializedLoad=v,t.openNativeLoadingModal=g,t.openFile=C,t.importFile=E,t.hide2DExtraLayerBadge=_,t.show2DExtraLayerBadge=b,t.hideDocumentBar=I,t.showDocumentBar=S,t.pageChange=y,t.removeFlyControls=N,t.createFlyControls=T,t.createInteractionBadge=P,t.togglePaneBadge=k,t.createPaneBadge=X,t.createFileOpenBadge=F,t.toggleGhostBadges=W,t.deleteInteractionBadge=G,t.deletePaneBadge=V,t.toast=U,t.openStatusDialog=H,t.buildNeighbourhoodSearchPanel=j},function(e,t,n){"use strict";function i(e,t){var n=e.length;if(!(t<0||t>=n)){var i=e.charCodeAt(t);if(i>=55296&&i<=56319&&n>t+1){var o=e.charCodeAt(t+1);if(o>=56320&&o<=57343)return 1024*(i-55296)+o-56320+65536}return i}}function o(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,o=t;i<o.length;i++){var a=o[i];if(Object.prototype.toString.call(e)==="[object "+a+"]")return!0}return!1}t.getCodePoint=i,t.isInteger=o,t.isType=a},function(e,t,n){"use strict";var i=n(1),o=function(){function e(){this._parent=void 0,this._children=[]}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),e.prototype.children=function(){return this._children.slice()},e.prototype.insertChild=function(t,n){if(void 0===n&&(n=this._children.length),!(t instanceof e))throw new TypeError("node should be an instance of XmlNode");if(!i.isType(n,"Number")||!i.isInteger(n))throw new TypeError("index should be an integer");if(n<0||n>this._children.length)throw new RangeError("index should respect children array bounds");if(-1===this._children.indexOf(t))return i.isType(t.parent,"Undefined")||t.parent.removeChild(t),t._parent=this,this._children.splice(n,0,t),t},e.prototype.next=function(){if(!i.isType(this.parent,"Undefined")&&this.parent._children.indexOf(this)!==this.parent._children.length-1)return this.parent._children[this.parent._children.indexOf(this)+1]},e.prototype.prev=function(){if(!i.isType(this.parent,"Undefined")&&0!==this.parent._children.indexOf(this))return this.parent._children[this.parent._children.indexOf(this)-1]},e.prototype.remove=function(){if(!i.isType(this.parent,"Undefined")){var e=this.parent;return this.parent.removeChild(this),e}},e.prototype.removeChild=function(t){if(!(t instanceof e))throw new Error("node should be an instance of XmlNode");var n=this._children.indexOf(t);return-1!==n&&(t._parent=void 0,this._children.splice(n,1),!0)},e.prototype.removeChildAtIndex=function(e){if(!i.isType(e,"Number")||!i.isInteger(e))throw new TypeError("index should be a number");if(e<0||e>=this._children.length)throw new RangeError("index should respect children array bounds");var t=this._children[e];return t._parent=void 0,this._children.splice(e,1),t},e.prototype.toString=function(e){throw void 0===e&&(e={}),new Error("toString not implemented for XmlNode")},e.prototype.top=function(){return i.isType(this.parent,"Undefined")?this:this.parent.top()},e.prototype.up=function(){return this.parent},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function i(e){return new RegExp("^((\\u0009|\\u000A|\\u000D|[\\u0020-\\uD7FF])|([\\uD800-\\uDBFF][\\uDC00-\\uDFFF]))*$").test(e)}function o(e){return 1===e.length?new RegExp("^\\u0009|\\u000A|\\u000D|[\\u0020-\\uD7FF]$").test(e):2===e.length&&new RegExp("^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$").test(e)}function a(e){if(0===e.length)return!1;var t=":|[A-Z]|_|[a-z]|[\\u00C0-\\u00D6]|[\\u00D8-\\u00F6]|[\\u00F8-\\u02FF]|[\\u0370-\\u037D]|[\\u037F-\\u1FFF]|[\\u200C-\\u200D]|[\\u2070-\\u218F]|[\\u2C00-\\u2FEF]|[\\u3001-\\uD7FF]|[\\uF900-\\uFDCF]|[\\uFDF0-\\uFFFD]",n=":|[A-Z]|_|[a-z]|[\\u00C0-\\u00D6]|[\\u00D8-\\u00F6]|[\\u00F8-\\u02FF]|[\\u0370-\\u037D]|[\\u037F-\\u1FFF]|[\\u200C-\\u200D]|[\\u2070-\\u218F]|[\\u2C00-\\u2FEF]|[\\u3001-\\uD7FF]|[\\uF900-\\uFDCF]|[\\uFDF0-\\uFFFD]|-|\\.|[0-9]|\\u00B7|[\\u0300-\\u036F]|[\\u203F-\\u2040]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF]";return new RegExp("^"+t+"$").test(e.charAt(0))?1===e.length||new RegExp("^("+n+")+$").test(e.substr(1)):!!(e.length>=2&&new RegExp("^[\\uD800-\\uDB7F][\\uDC00-\\uDFFF]$").test(e.substr(0,2)))&&(2===e.length||new RegExp("^("+n+")+$").test(e.substr(2)))}t.validateChar=i,t.validateSingleChar=o,t.validateName=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settings={lang:"ENU",appId:"wv-app",ribbonId:"wv-ribbon",dockId:"wv-dock",minWidth:600,minHeight:480,ribbon:{expandablesContainerId:"wv-ribbon-expandables",dropdownsContainerId:"wv-ribbon-dropdowns",dropdownItemHeight:30,buttonWidth:70,tabPageHeight:90,buttonMouseHoverColor:"rgb(132,203,234)",buttonHighlightColor:"rgb(255, 198, 98)",buttonDefaultColor:""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.VisShareSpec="",this.ribbonWidth=0,this.ribbonAvailable=0,this.ribbonVis=!0,this.fullScreenMode=!1,this.mainColor="rgb(214, 124, 28)",this.clientInitialized=!1,this.fileLoaded=!1,this.nodesSelected=!1,this.selectionMode="Select",this.interactionMode=[],this.lastInteractionModes=[],this.renderingModes=[],this.pageCount="",this.mouseActive=!1,this.mouseLeftButtonDown=!1,this.mouseLeftButtonMode="RectZoom",this.mouseRightButtonMode="Rotate",this.mouseMiddleButtonMode="Pan",this.drawRect=!0,this.touchActive=!1,this.touchGestureActive=!1,this.touchStatus="cancel",this.ongoingTouches=[],this.touchDist=-1,this.touchMid=[],this.lastGestureDistance=0,this.lastGestureDelta=0,this.lastGestureCenterX=0,this.lastGestureCenterY=0,this.lastMouseX=0,this.lastMouseY=0,this.activePath="",this.panes=[{paneId:"wv-modeltree",pos:1,minimized:!1,visible:!0},{paneId:"wv-views",pos:1,minimized:!1,visible:!0},{paneId:"wv-properties",pos:2,minimized:!1,visible:!0}],this.defaultPanes=[],this.containersChanged=!1,this.commandPaneOpened=!1,this.lockPanes=!1,this.popoutPanes=[],this.popedOutWindows=[],this.preventGlobalKeyEvents=!1,this.qsMode=!1,this.aboutLinks=["https://viewer.kisters.de/en/kisters-products/3dviewstation-webviewer.html","https://viewer.kisters.de/help/webviewer","http://viewer.kisters.de/en/news/news.html","https://viewer.kisters.de/en/blog.html","https://www.youtube.com/user/KistersViewer","https://twitter.com/KistersViewer","https://www.facebook.com/KistersViewer"],this.version="",this.paneHelpLinks={"wv-views":"3dvs_wv_tut_functions_views.php","wv-draftangle":"3dvs_wv_tut_functions_draft.php","wv-exactcompare":"3dvs_wv_tut_functions_comparison.php","wv-filter":"3dvs_wv_tut_functions_filter.php","wv-flythrough":"3dvs_wv_tut_functions_flythroughmode.php","wv-markup":"3dvs_wv_tut_functions_annotations.php","wv-markup-reduced":"3dvs_wv_tut_functions_annotations.php","wv-measurement":"3dvs_wv_tut_functions_measurement.php","wv-mirror":"3dvs_wv_tut_functions_transformations.php","wv-projectedarea":"3dvs_wv_tut_functions_projectedarea.php","wv-properties":"3dvs_wv_tut_functions_propertiesselectedobjects.php","wv-quickcompare":"3dvs_wv_tut_functions_comparison.php","wv-section":"3dvs_wv_tut_functions_section.php","wv-transform":"3dvs_wv_tut_functions_transformations.php","wv-wallthickness":"3dvs_wv_tut_functions_wallthicknessheatmap.php","wv-neutralaxis":"3dvs_wv_tut_functions_neutralaxis.php","wv-neighbourhoodsearch":"3dvs_wv_tut_functions_neighborhoodsearch.php","wv-bom":"3dvs_wv_tut_functions_techdocandbom_bom.php","wv-callout":"3dvs_wv_tut_functions_techdocandbom_callouts.php","wv-explode":"3dvs_wv_tut_functions_transformations.php","wv-clash":"3dvs_wv_tut_functions_clashdetection.php","wv-selections":"3dvs_wv_tut_functions_savingselections.php"}}return e.prototype.reset=function(){this.selectionMode="Select",this.interactionMode=[],this.renderingModes=[],this.pageCount="",this.lastInteractionModes=[],this.preventGlobalKeyEvents=!1,this.resetMouse(),this.resetTouch()},e.prototype.resetMouse=function(){this.mouseActive=!1,this.mouseLeftButtonDown=!1,this.mouseLeftButtonMode="RectZoom"},e.prototype.resetTouch=function(){this.touchActive=!1,this.touchGestureActive=!1,this.touchStatus="cancel",this.ongoingTouches=[],this.touchDist=-1,this.touchMid=[],this.lastGestureDistance=0,this.lastGestureDelta=0,this.lastGestureCenterX=0,this.lastGestureCenterY=0},e}();t.appStates=new i},function(e,t,n){"use strict";function i(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,o){var l,r,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(r=e._events,void 0===r?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(l=a(e))>0&&s.length>l&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,i(c)}return e}function r(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,v(this.listener,this.target,e))}function s(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=r.bind(i);return o.listener=n,i.wrapFn=o,o}function c(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?u(o):p(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function u(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var m,f="object"==typeof Reflect?Reflect:null,v=f&&"function"==typeof f.apply?f.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=f&&"function"==typeof f.ownKeys?f.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var g=Number.isNaN||function(e){return e!==e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var C=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");C=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||g(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var r=o[e];if(void 0===r)return!1;if("function"==typeof r)v(r,this,t);else for(var s=r.length,c=p(r,s),n=0;n<s;++n)v(c[n],this,t);return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,s(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,s(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,o,a,l;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){l=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():h(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,l||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(o=a[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return c(this,e,!0)},o.prototype.rawListeners=function(e){return c(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(e,t,n){"use strict";function i(e){if(!a.isType(e.doubleQuotes,"Boolean","Undefined"))throw new TypeError("options.doubleQuotes should be a boolean or undefined");if(a.isType(e.doubleQuotes,"Boolean")||(e.doubleQuotes=l.doubleQuotes),!a.isType(e.indent,"String","Undefined"))throw new TypeError("options.indent should be a string or undefined");if(a.isType(e.indent,"String")||(e.indent=l.indent),!a.isType(e.newline,"String","Undefined"))throw new TypeError("options.newline should be a string or undefined");if(a.isType(e.newline,"String")||(e.newline=l.newline),!a.isType(e.pretty,"Boolean","Undefined"))throw new TypeError("options.pretty should be a boolean or undefined");return a.isType(e.pretty,"Boolean")||(e.pretty=l.pretty),e}function o(e){if(!a.isType(e.encoding,"String","Undefined"))throw new TypeError("options.encoding should be a string or undefined");if(!a.isType(e.standalone,"String","Undefined"))throw new TypeError("options.standalone should be a string or undefined");if(!a.isType(e.version,"String","Undefined"))throw new TypeError("options.version should be a string or undefined");return a.isType(e.version,"String")||(e.version=r.version),e}var a=n(1),l={doubleQuotes:!1,indent:"    ",newline:"\n",pretty:!0};Object.freeze(l),t.validateStringOptions=i;var r={encoding:void 0,standalone:void 0,version:"1.0"};Object.freeze(r),t.validateDeclarationOptions=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.content=t}return i(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){if(!o.isType(e,"String"))throw new TypeError("content should be a string");if(!a.validateChar(e))throw new Error("content should not contain characters not allowed in XML");if(!/^([^-]|-[^-])*$/.test(e))throw new Error("content should not contain the string '--' or end with '-'");this._content=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlComment nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlComment nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlComment nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlComment nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"\x3c!--"+this.content+"--\x3e"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t,n){e.call(this),this.target=t,this.content=n}return i(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){if(!o.isType(e,"String"))throw new TypeError("target should be a string");if(!a.validateChar(e))throw new Error("target should not contain characters not allowed in XML");if("xml"===e)throw new Error("target should not be the string 'xml'");this._target=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(e){if(!o.isType(e,"String","Undefined"))throw new TypeError("data should be a string or undefined");if(o.isType(e,"String")){if(!a.validateChar(e))throw new Error("data should not contain characters not allowed in XML");if(/\?>/.test(e))throw new Error("data should not contain the string '?>'")}this._content=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlProcInst nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),void 0===this.content?"<?"+this.target+"?>":"<?"+this.target+" "+this.content+"?>"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){var i;!function(o){function a(e,t){if(e=e||"",t=t||{},e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var n=l(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=U(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=U(this._r)),this._g<1&&(this._g=U(this._g)),this._b<1&&(this._b=U(this._b)),this._ok=n.ok,this._tc_id=V++}function l(e){var t={r:0,g:0,b:0},n=1,i=null,o=null,a=null,l=!1,s=!1;return"string"==typeof e&&(e=X(e)),"object"==typeof e&&($(e.r)&&$(e.g)&&$(e.b)?(t=r(e.r,e.g,e.b),l=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):$(e.h)&&$(e.s)&&$(e.v)?(i=B(e.s),o=B(e.v),t=p(e.h,i,o),l=!0,s="hsv"):$(e.h)&&$(e.s)&&$(e.l)&&(i=B(e.s),a=B(e.l),t=c(e.h,i,a),l=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=N(n),{ok:l,format:e.format||s,r:H(255,j(t.r,0)),g:H(255,j(t.g,0)),b:H(255,j(t.b,0)),a:n}}function r(e,t,n){return{r:255*T(e,255),g:255*T(t,255),b:255*T(n,255)}}function s(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var i,o,a=j(e,t,n),l=H(e,t,n),r=(a+l)/2;if(a==l)i=o=0;else{var s=a-l;switch(o=r>.5?s/(2-a-l):s/(a+l),a){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:o,l:r}}function c(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var o,a,l;if(e=T(e,360),t=T(t,100),n=T(n,100),0===t)o=a=l=n;else{var r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;o=i(s,r,e+1/3),a=i(s,r,e),l=i(s,r,e-1/3)}return{r:255*o,g:255*a,b:255*l}}function d(e,t,n){e=T(e,255),t=T(t,255),n=T(n,255);var i,o,a=j(e,t,n),l=H(e,t,n),r=a,s=a-l;if(o=0===a?0:s/a,a==l)i=0;else{switch(a){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:o,v:r}}function p(e,t,n){e=6*T(e,360),t=T(t,100),n=T(n,100);var i=o.floor(e),a=e-i,l=n*(1-t),r=n*(1-a*t),s=n*(1-(1-a)*t),c=i%6;return{r:255*[n,r,l,l,s,n][c],g:255*[s,n,n,r,l,l][c],b:255*[l,l,s,n,n,r][c]}}function h(e,t,n,i){var o=[R(U(e).toString(16)),R(U(t).toString(16)),R(U(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function u(e,t,n,i,o){var a=[R(U(e).toString(16)),R(U(t).toString(16)),R(U(n).toString(16)),R(P(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function m(e,t,n,i){return[R(P(i)),R(U(e).toString(16)),R(U(t).toString(16)),R(U(n).toString(16))].join("")}function f(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=O(n.s),a(n)}function v(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=O(n.s),a(n)}function g(e){return a(e).desaturate(100)}function C(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=O(n.l),a(n)}function E(e,t){t=0===t?0:t||10;var n=a(e).toRgb();return n.r=j(0,H(255,n.r-U(-t/100*255))),n.g=j(0,H(255,n.g-U(-t/100*255))),n.b=j(0,H(255,n.b-U(-t/100*255))),a(n)}function _(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=O(n.l),a(n)}function b(e,t){var n=a(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,a(n)}function I(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function S(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function y(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function w(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function M(e,t,n){t=t||6,n=n||30;var i=a(e).toHsl(),o=360/n,l=[a(e)];for(i.h=(i.h-(o*t>>1)+720)%360;--t;)i.h=(i.h+o)%360,l.push(a(i));return l}function x(e,t){t=t||6;for(var n=a(e).toHsv(),i=n.h,o=n.s,l=n.v,r=[],s=1/t;t--;)r.push(a({h:i,s:o,v:l})),l=(l+s)%1;return r}function N(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function T(e,t){L(e)&&(e="100%");var n=A(e);return e=H(t,j(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function O(e){return H(1,j(0,e))}function D(e){return parseInt(e,16)}function L(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function A(e){return"string"==typeof e&&-1!=e.indexOf("%")}function R(e){return 1==e.length?"0"+e:""+e}function B(e){return e<=1&&(e=100*e+"%"),e}function P(e){return o.round(255*parseFloat(e)).toString(16)}function k(e){return D(e)/255}function $(e){return!!Z.CSS_UNIT.exec(e)}function X(e){e=e.replace(W,"").replace(G,"").toLowerCase();var t=!1;if(Y[e])e=Y[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Z.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Z.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Z.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Z.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Z.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Z.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Z.hex8.exec(e))?{r:D(n[1]),g:D(n[2]),b:D(n[3]),a:k(n[4]),format:t?"name":"hex8"}:(n=Z.hex6.exec(e))?{r:D(n[1]),g:D(n[2]),b:D(n[3]),format:t?"name":"hex"}:(n=Z.hex4.exec(e))?{r:D(n[1]+""+n[1]),g:D(n[2]+""+n[2]),b:D(n[3]+""+n[3]),a:k(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=Z.hex3.exec(e))&&{r:D(n[1]+""+n[1]),g:D(n[2]+""+n[2]),b:D(n[3]+""+n[3]),format:t?"name":"hex"}}function F(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var W=/^\s+/,G=/\s+$/,V=0,U=o.round,H=o.min,j=o.max,z=o.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,i,a,l,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,i=e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4),a=t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4),l=n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4),.2126*i+.7152*a+.0722*l},setAlpha:function(e){return this._a=N(e),this._roundA=U(100*this._a)/100,this},toHsv:function(){var e=d(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=d(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),i=U(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=s(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=s(this._r,this._g,this._b),t=U(360*e.h),n=U(100*e.s),i=U(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return h(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return u(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:U(this._r),g:U(this._g),b:U(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+U(this._r)+", "+U(this._g)+", "+U(this._b)+")":"rgba("+U(this._r)+", "+U(this._g)+", "+U(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:U(100*T(this._r,255))+"%",g:U(100*T(this._g,255))+"%",b:U(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+U(100*T(this._r,255))+"%, "+U(100*T(this._g,255))+"%, "+U(100*T(this._b,255))+"%)":"rgba("+U(100*T(this._r,255))+"%, "+U(100*T(this._g,255))+"%, "+U(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(K[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=a(e);n="#"+m(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(I,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(y,arguments)}},a.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:B(e[i]));e=n}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:z(),g:z(),b:z()})},a.mix=function(e,t,n){n=0===n?0:n||50;var i=a(e).toRgb(),o=a(t).toRgb(),l=n/100;return a({r:(o.r-i.r)*l+i.r,g:(o.g-i.g)*l+i.g,b:(o.b-i.b)*l+i.b,a:(o.a-i.a)*l+i.a})},a.readability=function(e,t){var n=a(e),i=a(t);return(o.max(n.getLuminance(),i.getLuminance())+.05)/(o.min(n.getLuminance(),i.getLuminance())+.05)},a.isReadable=function(e,t,n){var i,o,l=a.readability(e,t);switch(o=!1,i=F(n),i.level+i.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},a.mostReadable=function(e,t,n){var i,o,l,r,s=null,c=0;n=n||{},o=n.includeFallbackColors,l=n.level,r=n.size;for(var d=0;d<t.length;d++)(i=a.readability(e,t[d]))>c&&(c=i,s=a(t[d]));return a.isReadable(e,s,{level:l,size:r})||!o?s:(n.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],n))};var Y=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},K=a.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Y),Z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=a:void 0!==(i=function(){return a}.call(t,n,t,e))&&(e.exports=i)}(Math)},function(e,t,n){"use strict";function i(e){function t(e,n){var i=void 0;i={__text__:"",__ordinal__:[]};for(var o=0;o<e.attributes.length;o++){var a=e.attributes[o].name;i[a]=e.attributes[o].value,i.__ordinal__.push(a)}if(1==e.childNodes.length&&3===e.childNodes[0].nodeType){var l=e.textContent.trim();e.attributes.length>0?i.__text__=l:i=l}else 0==e.childNodes.length&&0==e.attributes.length&&(i="");if(n)if(n[e.nodeName])if(Array.isArray(n[e.nodeName]))n[e.nodeName].push(i),n.__ordinal__.push(e.nodeName);else{var r=n[e.nodeName];n[e.nodeName]=[],n[e.nodeName].push(r),n[e.nodeName].push(i),n.__ordinal__.push(e.nodeName)}else"string"==typeof n?n=i:("Option"===e.nodeName?(n[e.nodeName]=[],n[e.nodeName].push(i)):n[e.nodeName]=i,n.__ordinal__.push(e.nodeName));for(var o=0;o<e.childNodes.length;o++){var s=e.childNodes,c=s.item(o);c instanceof Element&&t(c,i)}}var n=new DOMParser,i=n.parseFromString(e,"application/xml"),o={__text__:"",__ordinal__:[]};return t(i.documentElement,o),o}function o(e,t){for(var n,i=document.implementation.createDocument(null,"",null),o=i,a=0,l=e;a<l.length;a++){var r=l[a];n=i.createElement(r),o.appendChild(n),o=n}if(t.length>0)for(var s=0;s<t.length;s++){var c=t[s].split("="),d=c[0],p=c[1];i.firstElementChild.setAttribute(d,p)}return i}function a(e,t,n){void 0===n&&(n=[]);var i=o(e,n),a=e.join(" ");return i.querySelector(a).textContent=t,(new XMLSerializer).serializeToString(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseXML=i,t.serializeWithValue=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t,n){void 0===n&&(n=!1),e.call(this),this.char=t,this.hex=n}return i(t,e),Object.defineProperty(t.prototype,"char",{get:function(){return this._char},set:function(e){if(!o.isType(e,"String"))throw new TypeError("char should be a string");if(!a.validateSingleChar(e))throw new Error("char should contain a single character, and this character should be allowed in XML");this._char=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){return this._hex},set:function(e){if(!o.isType(e,"Boolean"))throw new TypeError("hex should be a boolean");this._hex=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlCharRef nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={});var t;return t=1===this.char.length?this.char.charCodeAt(0):o.getCodePoint(this.char,0),this.hex?"&#x"+t.toString(16)+";":"&#"+t+";"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.entity=t}return i(t,e),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(e){if(!o.isType(e,"String"))throw new TypeError("entity should be a string");if(!a.validateName(e))throw new Error("entity should not contain characters not allowed in XML names");this._entity=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlEntityRef nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"&"+this.entity+";"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(18),a=n(1),l=n(3),r=n(2),s=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!a.isType(e,"String"))throw new TypeError("text should be a string");if(!l.validateChar(e))throw new Error("text should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlText nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlText nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlText nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlText nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={});var t=this.text;return t=o.escapeAmpersands(t),t=o.escapeLeftAngleBrackets(t)},t}(r.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s},function(e,t,n){"use strict";function i(e){var t,n,i,o,a,l;l="#"==e[0]?e.substr(1):e.substr(2),t=parseInt(l,16),n=t>>16&255,i=t>>8&255,o=255&t;return a=(t>>24&255)/255,{a:a,r:n,g:i,b:o}}function o(e,t){var n=e.replace("<Event>",'<Event Type="'+t+'">');return n=n.replace('<Call Method="SetSceneSettings">',""),n=n.replace("</Call>","")}function a(e){for(var t=e.substr(1),n=parseInt(t,16),i=(n>>16&255)/255,o=(n>>8&255)/255,a=(255&n)/255,l=[i,o,a],r=0;r<l.length;r++)l[r]<=.03928?l[r]=l[r]/12.92:l[r]=Math.pow((l[r]+.055)/1.055,2.4);return.2126*l[0]+.7152*l[1]+.0722*l[2]>.179?"#878787":"lightgray"}function l(e){var t;switch(e){case d.NodeType.MasterRootNode:t="ICON_SCENE";break;case d.NodeType.Root:t="ICON_ROOT";break;case d.NodeType.ProductOccurrence:t="ICON_PO";break;case d.NodeType.DoNotUse1:case d.NodeType.DoNotUse2:case d.NodeType.Ri_BrepModel:case d.NodeType.Ri_PolyBrepModel:case d.NodeType.Ri_Set:t="ICON_GEOMETRY";break;case d.NodeType.Ri_PolyWire:t="ICON_WIRE";break;case d.NodeType.Ri_TessMarkup:t="ICON_MARKUP";break;case d.NodeType.DoNotUse3:t="";break;case d.NodeType.Part:t="ICON_PART";break;case d.NodeType.AxisRoot:case d.NodeType.Axis:t="ICON_WIRE";break;case d.NodeType.PMIView:t="ICON_VIEW";break;case d.NodeType.Annotation:case d.NodeType.AnnotationItem:t="ICON_MARKUP";break;case d.NodeType.PmiMarkup_Unknown:case d.NodeType.PmiMarkup_Text:case d.NodeType.PmiMarkup_Dimension:case d.NodeType.PmiMarkup_Arrow:case d.NodeType.PmiMarkup_Balloon:case d.NodeType.PmiMarkup_CircleCenter:case d.NodeType.PmiMarkup_Coordinate:case d.NodeType.PmiMarkup_Datum:case d.NodeType.PmiMarkup_Fastener:case d.NodeType.PmiMarkup_Gdt:case d.NodeType.PmiMarkup_Locator:case d.NodeType.PmiMarkup_MeasurementPoint:case d.NodeType.PmiMarkup_Roughness:case d.NodeType.PmiMarkup_Welding:case d.NodeType.PmiMarkup_Table:case d.NodeType.PmiMarkup_Other:t="ICON_MARKUP";break;case d.NodeType.DataAnalysisResult:t="ICON_HEATMAP";break;case d.NodeType.AnnotationReference:case d.NodeType.AnnotationSet:t="ICON_MARKUP";break;case d.NodeType.Curve:t="ICON_WIRE";break;case d.NodeType.Plane:t="ICON_PLANE";break;case d.NodeType.Solid:t="ICON_GEOMETRY";break;case d.NodeType.Wire:t="ICON_WIRE";break;case d.NodeType.Dimensioning:t="ICON_PMI_DISTANCE";break;case d.NodeType.MarkupSet:t="ICON_FOLDER";break;case d.NodeType.Markup_Circle:t="ICON_MARKUP_CIRCLE";break;case d.NodeType.Markup_Rectangle:t="ICON_RECTANGLE";break;case d.NodeType.Markup_Freehand:t="ICON_LINE_FREEHAND";break;case d.NodeType.Markup_Text:t="ICON_NOTE";break;case d.NodeType.OffsetLine:t="ICON_OFFSETLINE";break;case d.NodeType.Drawing_Block:case d.NodeType.Drawing_BlockBackground:case d.NodeType.Drawing_BlockBasic:case d.NodeType.Drawing_BlockOperator:t="ICON_FOLDER";break;case d.NodeType.Drawing_Sheet:t="ICON_SHEET";break;case d.NodeType.Drawing_View:t="ICON_VIEW";break;case d.NodeType.Drawing_Model:t="ICON_SHEET";break;case d.NodeType.CutGeometry_Set:t="ICON_FOLDER";break;case d.NodeType.CutGeometry_Wire:t="ICON_WIRE";break;case d.NodeType.CutGeometry_Surface:t="ICON_PLANE";break;case d.NodeType.Document2D:t="ICON_SHEET";break;default:t="ICON_GEOMETRY"}return t}var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),c=n(30),d=n(40),p=n(0),h=n(10),u="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",f=function(){function e(e,t,n){var i=this;this.tooltipVisible=!1,this.paneEl=e,this.visible=!1,this.client=n,this.val=void 0,this.readOnly=t,this.titleEl=document.createElement("div"),this.wrapperEl=document.createElement("div"),this.wrapperEl.ontouchstart=function(e){!p.showTooltips||!(i instanceof v&&i.tooltip)&&i instanceof v||(e.preventDefault(),e.stopPropagation(),i.showTooltip(),i.tooltipVisible=!0)},this.wrapperEl.onmousedown=function(e){!p.showTooltips||!(i instanceof v&&i.tooltip)&&i instanceof v||(e.preventDefault(),e.stopPropagation(),i.showTooltip(),i.tooltipVisible=!0)},setTimeout(function(){i.applyTooltipListener()})}return e.prototype.applyTooltipListener=function(){this.tooltipWrapper=$(this.paneEl).parent().children("#mobile-pane-tooltip")[0],$(this.tooltipWrapper).hide()},e.prototype.highlightSearchString=function(e){if(!e)return void(this.titleEl.innerHTML=this.key);var t=e.length,n=this.key.toLowerCase().indexOf(e),i=this.key.length,o="";if(-1!==n){for(var a=0;a<i;a++)o+=a>=n&&a<n+t?'<span class="pane-search-text-highlight">'+this.key[a]+"</span>":this.key[a];this.titleEl.innerHTML=o}else this.titleEl.innerHTML=this.key},e.prototype.showTooltip=function(){$(this.tooltipWrapper).empty();var e=document.createElement("div");e.textContent=this.key,e.className="mobile-pane-tooltip-title";var t=document.createElement("div");t.textContent=this.tooltip,t.className="mobile-pane-tooltip-message",this.tooltipWrapper.appendChild(e),this.tooltipWrapper.appendChild(t),$(this.tooltipWrapper).show(),document.addEventListener("touchstart",this.detectOusideClick.bind(this)),document.addEventListener("mousedown",this.detectOusideClick.bind(this))},e.prototype.setToolTip=function(e){this.tooltip=e},e.prototype.detectOusideClick=function(e){e.target===this.tooltipWrapper||this.tooltipWrapper.contains(e.target)||($(this.tooltipWrapper).hide(),document.removeEventListener("touchstart",this.detectOusideClick.bind(this)),document.removeEventListener("mousedown",this.detectOusideClick.bind(this)),this.tooltipVisible=!1)},e.prototype.hide=function(){this instanceof v&&$(this.panelContainer).hide(),$(this.wrapperEl).hide()},e.prototype.show=function(){if(this.children&&this instanceof v){for(var e=!1,t=0;t<this.children.length;t++)if(this.children[t]instanceof v){var n=this.children[t];if(e=this.hasVisibleChildren(n))break}else if(e=this.children[t].visible)break;!e||this.parent&&this.parent.isCollapsed||($(this.wrapperEl).show(),$(this.panelContainer).show())}else(void 0!==this.val||this instanceof b&&("UID_PRESET"===this.valueEl.id||"UID_DENSITY_PRESET"===this.valueEl.id))&&this.parent&&!this.parent.isCollapsed&&$(this.wrapperEl).show()},e.prototype.hasVisibleChildren=function(e){for(var t=!1,n=0;n<e.children.length;n++)if(e.children[n]instanceof v){var i=e.children[n];if(t=this.hasVisibleChildren(i))return!0}else if(t=e.children[n].visible)return!0;return t},e}();t.MobilePaneItem=f;var v=function(e){function t(t,n,i,o,a,l,r){var s=e.call(this,t,!1,l)||this;return s.level=a,s.flag=r,s.wrapperEl.className="mobile-pane-group",s.wrapperEl.style.marginLeft=10*a+"px",s.panelContainer=document.createElement("div"),s.panelContainer.style.marginBottom="5px",s.titleEl.className="mobile-pane-group-title",s.setKey(n),s.wrapperEl.appendChild(s.titleEl),s.toggleIcon=document.createElement("i"),s.toggleIcon.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",s.visible=!0,s.val="group",o?(s.wrapperEl.appendChild(s.toggleIcon),o.panelContainer.appendChild(s.wrapperEl),o.panelContainer.appendChild(s.panelContainer)):(t.appendChild(s.wrapperEl),t.appendChild(s.panelContainer)),s.isCollapsed=i,s.children=[],s.parent=o,!s.isCollapsed&&s.parent||!o?s.show():s.hide(),$(s.wrapperEl).click(function(e){e.stopPropagation(),s.parent&&(s.isCollapsed?s.expand():s.collapse())}),o&&o.addChild(s),s}return r(t,e),t.prototype.hasChild=function(e){for(var n=!1,i=0;i<this.children.length;i++)if(this.children[i]instanceof t){var o=this.children[i];if(n=o.hasChild(e))return!0}else if(n=this.children[i]===e)return!0;return n},t.prototype.setValue=function(e){},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t.prototype.addChild=function(e){this.children.push(e)},t.prototype.collapse=function(e){void 0===e&&(e=!1),this.isCollapsed=!0,$(this.panelContainer).hide(),$(this.toggleIcon).removeClass("fa-chevron-circle-down"),$(this.toggleIcon).addClass("fa-chevron-circle-right");for(var n=0;n<this.children.length;n++)if(this.children[n].hide(),this.children[n]instanceof t){var i=this.children[n];i.isCollapsed&&i.collapse()}e&&this.hide()},t.prototype.expand=function(e){void 0===e&&(e=!1),e&&this.show(),this.isCollapsed=!1,$(this.panelContainer).show(),$(this.toggleIcon).removeClass("fa-chevron-circle-right"),$(this.toggleIcon).addClass("fa-chevron-circle-down");for(var n=0;n<this.children.length;n++)if(this.children[n].visible&&this.children[n].show(),this.children[n]instanceof t&&this.children[n].visible){var i=this.children[n];i.isCollapsed||i.expand()}},t.prototype.clear=function(){$(this.panelContainer).empty();for(var e=0;e<this.children.length;e++)if(this.children[e]instanceof t){var n=this.children[e];n.clear()}this.children=[]},t}(f);t.MobileGroup=v;var g=function(e){function t(t,n,i,o,a,l,r,s,c){var d=e.call(this,t,r,s)||this;return d.isNumber=!1,d.path=i,d.parent=a,d.level=l,d.source=n,d.client=s,d.callback=c,d.wrapperEl.className="mobile-pane-input-wrapper",d.wrapperEl.style.marginLeft=10*l+"px",a?a.panelContainer.appendChild(d.wrapperEl):t.appendChild(d.wrapperEl),d.titleEl.className="mobile-pane-input-title",d.setKey(o),d.wrapperEl.appendChild(d.titleEl),d.valueEl=document.createElement("div"),d.valueEl.contentEditable=(!d.readOnly).toString(),d.readOnly||(d.valueEl.style.border="1px solid rgb(169, 169, 169)",d.valueEl.style.padding="2px"),d.valueEl.className="mobile-pane-input-val",d.wrapperEl.appendChild(d.valueEl),d.parent&&d.parent.isCollapsed?d.hide():d.show(),d.path||d.callback?(d.valueEl.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()}),d.valueEl.addEventListener("change",function(e){d.unit&&(d.valueEl.textContent+=""===d.unit?d.unit:" "+d.unit),d.fireChange()}),d.valueEl.addEventListener("blur",function(e){d.unit&&(d.valueEl.textContent+=""===d.unit?d.unit:" "+d.unit),d.fireChange()}),d.valueEl.addEventListener("focus",function(e){d.suffix?d.valueEl.textContent=d.val:(d.unit||d.isNumber)&&(d.valueEl.textContent=parseFloat(d.val).toString())})):(d.visible=!0,d.val="none"),a&&a.addChild(d),d}return r(t,e),t.prototype.fireChange=function(){if(this.callback)this.callback(this.valueEl.textContent);else{var e=this.suffix&&"%"===this.suffix?(parseFloat(this.valueEl.textContent)/100).toString():this.valueEl.textContent,t=s.serializeWithValue(this.path,e);t="setting"!==this.source?o(t,this.source):"true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==this.paneEl.parentElement.style.left&&"0px"!==this.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+t+"</Call>":'<Call Method="SetSettings">'+t+"</Call>",this.client.command.executeXML(t.replace(/\n<\//,"</")),-1!==this.path.indexOf("ClashDetection")&&this.client.emit("ClashVisualizationChanged")}},t.prototype.setValue=function(e){this.val=e;var t=e;this.suffix&&this.valueEl!==document.activeElement&&!this.unit&&(t="%"===this.suffix?100*t:t,this.val=t,t+=""===this.suffix?this.suffix:" "+this.suffix),this.valueEl.textContent=t},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t.prototype.setUnit=function(e){this.unit=e},t}(f);t.MobileInput=g;var C=function(){function e(e,t,n){this.stateString="",this.options=[],this.path=e,this.client=t,this.paneEl=n}return e.prototype.addOption=function(e){this.options.push(e)},e.prototype.setOptions=function(e){var t;t=void 0===e||null===e||""===e?[""]:e.split(" "),this.options.forEach(function(e){-1===t.indexOf(e.optionVal)?e.setValue("false"):e.setValue("true")})},e.prototype.triggerChange=function(){this.stateString="";for(var e=0;e<this.options.length;e++)this.stateString+=this.options[e].val?this.options[e].optionVal:"",e!==this.options.length-1&&(this.stateString+=" ");var t=s.serializeWithValue(this.path,this.stateString);t="true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==this.paneEl.parentElement.style.left&&"0px"!==this.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+t+"</Call>":'<Call Method="SetSettings">'+t+"</Call>",this.client.command.executeXML(t)},e}();t.MobileFlag=C;var E=function(e){function t(t,n,i,o,a,l,r,s){var c=e.call(this,t,l,r)||this;return c.parent=o,c.level=a,c.flag=s,c.val=!1,c.optionVal=n,c.wrapperEl.className="mobile-pane-switch-wrapper",c.wrapperEl.style.marginLeft=10*a+"px",o?o.panelContainer.appendChild(c.wrapperEl):t.appendChild(c.wrapperEl),c.hiddenCheckbox=document.createElement("input"),c.hiddenCheckbox.type="checkbox",c.hiddenCheckbox.value=c.val,c.hiddenCheckbox.style.display="none",c.wrapperEl.appendChild(c.hiddenCheckbox),c.titleEl.className="mobile-pane-switch-title",c.setKey(i),c.wrapperEl.appendChild(c.titleEl),c.boxEl=document.createElement("div"),c.boxEl.className="switch-wrapper switch-on mobile-switch",c.wrapperEl.appendChild(c.boxEl),c.handleEl=document.createElement("div"),c.handleEl.className="switch-handle",c.boxEl.appendChild(c.handleEl),$(c.boxEl).click(function(e){c.setValue(!c.val),c.flag.triggerChange()}),c.parent&&c.parent.isCollapsed?c.hide():c.show(),o&&o.addChild(c),c}return r(t,e),t.prototype.setValue=function(e){this.val="true"===e||!0===e,this.hiddenCheckbox.value=this.val,this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileFlagOption=E;var _=function(e){function t(t,n,i,a,l,r,c,d,p){var h=e.call(this,t,c,d)||this;return h.path=i,h.parent=l,h.level=r,h.source=n,h.wrapperEl.className="mobile-pane-switch-wrapper",h.wrapperEl.style.marginLeft=10*r+"px",l?l.panelContainer.appendChild(h.wrapperEl):t.appendChild(h.wrapperEl),h.hiddenCheckbox=document.createElement("input"),h.hiddenCheckbox.type="checkbox",h.hiddenCheckbox.value=h.val,h.hiddenCheckbox.style.display="none",h.wrapperEl.appendChild(h.hiddenCheckbox),h.titleEl.className="mobile-pane-switch-title",h.setKey(a),h.wrapperEl.appendChild(h.titleEl),h.boxEl=document.createElement("div"),h.boxEl.className="switch-wrapper switch-on mobile-switch",h.wrapperEl.appendChild(h.boxEl),h.handleEl=document.createElement("div"),h.handleEl.className="switch-handle",h.boxEl.appendChild(h.handleEl),$(h.boxEl).click(function(e){if(p)return void p(h.val);if(i){var t=h.val?"false":"true",n=s.serializeWithValue(h.path,t);n="setting"!==h.source?o(n,h.source):"true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==h.paneEl.parentElement.style.left&&"0px"!==h.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+n+"</Call>":'<Call Method="SetSettings">'+n+"</Call>",d.command.executeXML(n),-1!==h.path.indexOf("ClashDetection")&&d.emit("ClashVisualizationChanged")}else h.setValue(!h.val+"")}),h.parent&&h.parent.isCollapsed?h.hide():h.show(),l&&l.addChild(h),h}return r(t,e),t.prototype.setValue=function(e){this.val="true"===e,this.hiddenCheckbox.value=this.val,this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileSwitch=_;var b=function(e){function t(t,n,i,a,l,r,c,d,p,h){var u=e.call(this,t,c,p)||this;return u.path=i,u.parent=l,u.level=r,u.source=n,u.wrapperEl.className="mobile-pane-select-wrapper",u.wrapperEl.style.marginLeft=10*r+"px",l?l.panelContainer.appendChild(u.wrapperEl):t.appendChild(u.wrapperEl),u.titleEl.className="mobile-pane-select-title",u.setKey(a),u.wrapperEl.appendChild(u.titleEl),u.valueEl=document.createElement("select"),u.valueEl.className="mobile-pane-select-val",d&&d.length>0&&u.addOptions(d),u.wrapperEl.appendChild(u.valueEl),u.parent&&u.parent.isCollapsed?u.hide():u.show(),u.valueEl.addEventListener("change",function(e){var t=u.valueEl.value;if(h)return void h(t);if("UID_PRESET"===u.valueEl.id){var n='<Event Type="NodePropertiesChanged"><PhysicalProperties><Density>';return n+=t,n+="</Density></PhysicalProperties></Event>",void p.command.executeXML(n)}var i=s.serializeWithValue(u.path,t);if("setting"!==u.source){if("Preset"===u.path[1]&&"USERDEF"!==t){var a='<Call Method="ActivatePreset"><Type>WallthicknessHeatmap</Type>';a+="<Identifier>"+t+"</Identifier></Call>",p.command.executeXML(a),p.on("ActivatePreset",function(e){p.command.executeXML('<Call Method="GetSceneSettings"></Call>')})}i=o(i,u.source)}else i="true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==u.paneEl.parentElement.style.left&&"0px"!==u.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+i+"</Call>":'<Call Method="SetSettings">'+i+"</Call>";p.command.executeXML(i),-1!==u.path.indexOf("ClashDetection")&&p.emit("ClashVisualizationChanged")}),l&&l.addChild(u),u}return r(t,e),t.prototype.clearOptions=function(){this.options=[],$(this.valueEl).empty()},t.prototype.addOptions=function(e){this.options=e;for(var t=0;t<e.length;t++){var n=document.createElement("option");n.value=e[t].value,n.textContent=e[t].display,this.valueEl.appendChild(n)}},t.prototype.setValue=function(e){for(var t=0;t<this.options.length;t++)if(this.options[t].value===e){this.val=this.options[t].value,this.valueEl.value=e;break}},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileSelect=b;var I=function(e){function t(t,n,i,o,a,l,r){var s=e.call(this,t,a,l)||this;return s.parent=i,s.level=o,s.callback=r,s.wrapperEl.className="mobile-pane-button-wrapper",s.wrapperEl.style.marginLeft=10*o+"px",s.val="button",s.visible=!0,i?i.panelContainer.appendChild(s.wrapperEl):t.appendChild(s.wrapperEl),s.titleEl.className="mobile-pane-button-title",s.setKey(n),s.wrapperEl.appendChild(s.titleEl),s.parent&&s.parent.isCollapsed?s.hide():s.show(),s.callback&&(s.wrapperEl.onclick=function(e){s.callback()}),i&&i.addChild(s),s}return r(t,e),t.prototype.setValue=function(e){},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileButton=I;var S=function(e){function t(t,n,i,o,a,l,r,s,c){var d=e.call(this,t,r,s)||this;d.parent=a,d.level=l,d.source=n,d.path=o,d.callback=c,d.wrapperEl.className="mobile-pane-slider-wrapper",d.wrapperEl.style.marginLeft=10*l+"px",d.position=0,d.handlePosStyle={},d.fedBarWidthStyle={},d.sliderOffset=0,d.sliderWidth=0,d.handleMouseDown=d.handleMouseDown.bind(d),d.handleMouseMove=d.handleMouseMove.bind(d),d.handleMouseUp=d.handleMouseUp.bind(d),a?a.panelContainer.appendChild(d.wrapperEl):t.appendChild(d.wrapperEl),d.titleEl.className="mobile-pane-slider-title",d.setKey(i),d.wrapperEl.appendChild(d.titleEl),d.inputEl=document.createElement("input"),d.inputEl.className="slider-value-input",d.inputEl.min="0",d.inputEl.max="100",d.inputEl.style.width="40px",$(d.inputEl).blur(function(e){d.setValue(parseFloat(d.inputEl.value)/100)}),$(d.inputEl).change(function(e){d.handleInputChanged(e,!1)}),d.wrapperEl.appendChild(d.inputEl);var p=document.createElement("div");p.className="slider-wrapper",p.style.width="calc(100% - 50px)",d.wrapperEl.appendChild(p);var h=document.createElement("div");h.style.position="relative",h.className="slider-bar",h.onmousedown=function(e){d.handleClick(e)},p.appendChild(h),d.fedBar=document.createElement("span"),d.fedBar.className="slider-bar-filled",h.appendChild(d.fedBar),d.handleEl=document.createElement("span"),d.handleEl.style.marginLeft="0",$(d.handleEl).addClass("slider-handle draggable"),$(d.handleEl).kendoTouch({dragstart:function(e){d.handleMouseDown(e)},dragend:function(e){d.handleMouseUp(e)},drag:function(e){d.handleMouseMove(e)}}),d.handleEl.onmousedown=function(e){d.handleMouseDown(e)},h.appendChild(d.handleEl);var u=document.createElement("span");return u.className="slider-bar-empty",u.style.width="100%",h.appendChild(u),d.parent&&d.parent.isCollapsed?d.hide():d.show(),a&&a.addChild(d),d}return r(t,e),t.prototype.setValue=function(e){var t=!1;if(""!==this.inputEl.value&&this.inputEl.value&&void 0!==this.inputEl.value||(t=!0),this.inputEl.value=Math.round(100*e)+"",this.val=e,t||parseFloat(this.handleEl.style.left.replace("%",""))!==e){var n={target:this.inputEl,val:this.val};this.handleInputChanged(n,!0)}},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t.prototype.handleInputChanged=function(e,t){var n,i=e.target.value,o=$(e.target).next().children().first().width(),a=o/100*i,l=o;n=a<=5?"0px":100/(l/a)+"%",this.handleEl.style.left=n,this.fedBar.style.width=n;var r=parseFloat(i)/100;if(!t)if(this.setValue(r),this.callback)this.callback(r);else{var c=s.serializeWithValue(this.path,r.toString());this.fireChange(c)}},t.prototype.handleClick=function(e){this.sliderWidth=$(e.target).width(),this.sliderOffset=$(e.target).offset().left;var t,n=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),i=100/(this.sliderWidth/n),o=this.sliderWidth;if(t=n<=5?"0px":100/(o/n)+"%",this.handleEl.style.left=t,this.fedBar.style.width=t,this.setValue(i/100),this.callback)this.callback(this.val);else{var a=s.serializeWithValue(this.path,this.val);this.fireChange(a)}},t.prototype.handleMouseMove=function(e){var t;t=e.touch?Math.min(Math.max(0,e.touch.x.location-this.sliderOffset),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset-5),this.sliderWidth);var n,i=100/(this.sliderWidth/t),o=this.sliderWidth;n=t<=5?"0px":100/(o/t)+"%",this.handleEl.style.left=n,this.fedBar.style.width=n,this.setValue(i/100)},t.prototype.handleMouseUp=function(e){var t;t=e.touch?Math.min(Math.max(0,e.touch.x.location-this.sliderOffset-5),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset-5),this.sliderWidth);var n=100/(this.sliderWidth/t);if(this.setValue(n/100),this.callback)this.callback(this.val);else{var i=s.serializeWithValue(this.path,this.val);this.fireChange(i)}document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)},t.prototype.handleMouseDown=function(e){e.preventDefault(),e.touch?(this.sliderOffset=$(e.event.target).parent().offset().left,this.sliderWidth=$(e.event.target).parent().width()):(e.stopPropagation(),this.sliderOffset=$(e.target).parent().offset().left,this.sliderWidth=$(e.target).parent().width()),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)},t.prototype.fireChange=function(e){e="setting"!==this.source?o(e,this.source):"true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==this.paneEl.parentElement.style.left&&"0px"!==this.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+e+"</Call>":'<Call Method="SetSettings">'+e+"</Call>",this.client.command.executeXML(e),-1!==this.path.indexOf("ClashDetection")&&this.client.emit("ClashVisualizationChanged")},t}(f);t.MobileSlider=S;var y=function(e){function t(t,n,i,o,a,l,r){var s=e.call(this,t,a,l)||this;s.step=0,s.maxSteps=1,s.parent=i,s.level=o,s.callback=r,s.wrapperEl.className="mobile-pane-slider-wrapper",s.wrapperEl.style.marginLeft=10*o+"px",s.handlePosStyle={},s.fedBarWidthStyle={},s.sliderOffset=0,s.sliderWidth=0,s.handleMouseDown=s.handleMouseDown.bind(s),s.handleMouseMove=s.handleMouseMove.bind(s),s.handleMouseUp=s.handleMouseUp.bind(s),i?i.panelContainer.appendChild(s.wrapperEl):t.appendChild(s.wrapperEl),s.titleEl.className="mobile-pane-slider-title",s.setKey(n),s.wrapperEl.appendChild(s.titleEl),s.inputEl=document.createElement("input"),s.inputEl.className="slider-value-input",s.inputEl.min="0",s.inputEl.max="100",s.inputEl.style.width="20px",$(s.inputEl).blur(function(e){s.callback(parseInt(s.inputEl.value)),s.setValue(parseFloat(s.inputEl.value)/100)}),$(s.inputEl).change(function(e){s.handleInputChanged(e,!1)}),s.wrapperEl.appendChild(s.inputEl),s.maxStepEl=document.createElement("span"),s.maxStepEl.textContent="/1",s.maxStepEl.className="plain-stepped-slider-max-val",s.wrapperEl.appendChild(s.maxStepEl);var c=document.createElement("div");c.className="slider-wrapper",c.style.width="calc(100% - 50px)",s.wrapperEl.appendChild(c);var d=document.createElement("div");d.style.position="relative",d.className="slider-bar",d.onmousedown=function(e){s.handleClick(e)},c.appendChild(d),s.fedBar=document.createElement("span"),s.fedBar.className="slider-bar-filled",d.appendChild(s.fedBar),s.handleEl=document.createElement("span"),s.handleEl.style.marginLeft="0",$(s.handleEl).addClass("slider-handle draggable"),$(s.handleEl).kendoTouch({dragstart:function(e){s.handleMouseDown(e)},dragend:function(e){s.handleMouseUp(e)},drag:function(e){s.handleMouseMove(e)}}),s.handleEl.onmousedown=function(e){s.handleMouseDown(e)},d.appendChild(s.handleEl);var p=document.createElement("span");return p.className="slider-bar-empty",p.style.width="100%",d.appendChild(p),s.parent&&s.parent.isCollapsed?s.hide():s.show(),i&&i.addChild(s),s.setValue(0),s}return r(t,e),t.prototype.setMaxSteps=function(e){this.maxSteps=parseInt(e),this.maxStepEl.textContent="/"+e},t.prototype.setValue=function(e){e<0?e=0:e>this.maxSteps?e=this.maxSteps:NaN===e&&(e=0),this.step=e,this.inputEl.value=e.toString();var t=100/this.maxSteps,n=e*t+"%";this.handleEl.style.left=n,this.fedBar.style.width=n},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t.prototype.handleInputChanged=function(e,t){var n=parseInt(e.target.value);this.setValue(n),this.callback(n)},t.prototype.handleClick=function(e){this.sliderWidth=$(e.target).width(),this.sliderOffset=$(e.target).offset().left;var t=Math.min(Math.max(0,e.pageX-this.sliderOffset),this.sliderWidth),n=100/(this.sliderWidth/t),i=100/this.maxSteps,o=Math.round(n/i);this.setValue(o),this.callback(o)},t.prototype.handleMouseMove=function(e){var t;t=e.touch?Math.min(Math.max(0,e.touch.x.location-this.sliderOffset),this.sliderWidth):Math.min(Math.max(0,e.pageX-this.sliderOffset-5),this.sliderWidth);var n=100/(this.sliderWidth/t),i=100/this.maxSteps,o=Math.round(n/i);o!==this.step&&(this.setValue(o),this.callback(o))},t.prototype.handleMouseUp=function(e){document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)},t.prototype.handleMouseDown=function(e){e.preventDefault(),e.touch?(this.sliderOffset=$(e.event.target).parent().offset().left,this.sliderWidth=$(e.event.target).parent().width()):(e.stopPropagation(),this.sliderOffset=$(e.target).parent().offset().left,this.sliderWidth=$(e.target).parent().width()),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)},t}(f);t.MobileSteppedSlider=y;var w=function(e){function t(t,n,i,o,a,l,r,s,c,d){var p=e.call(this,t,s,c)||this;return p.path=i,p.parent=l,p.level=r,p.source=n,p.callback=d,p.wrapperEl.className="mobile-pane-color-wrapper",p.wrapperEl.style.marginLeft=10*r+"px",p.showAlpha=a,p.isDefaultSet=!1,i||(p.visible=!0),l?l.panelContainer.appendChild(p.wrapperEl):t.appendChild(p.wrapperEl),p.titleEl.className="mobile-pane-color-title",p.setKey(o),p.wrapperEl.appendChild(p.titleEl),p.colorEl=document.createElement("span"),p.colorEl.className="mobile-pane-color-box",p.titleEl.appendChild(p.colorEl),p.iconEl=document.createElement("i"),$(p.iconEl).addClass("fa fa-paint-brush mobile-pane-color-icon"),p.colorEl.appendChild(p.iconEl),p.wrapperEl.addEventListener("click",function(e){p.openPalette()},!1),p.parent&&p.parent.isCollapsed?p.hide():p.show(),l&&l.addChild(p),p}return r(t,e),t.prototype.openPalette=function(){var e=this,t=this.colorEl.dataset.lastPickedColor;this.colorPicker=new c.CustomPalette(t,this.showAlpha),this.colorPicker.on("customColorChosen",function(t){return e.updateElementState(t)})},t.prototype.updateElementState=function(e){this.colorEl.dataset.lastPickedColor=e,this.colorEl.style.backgroundColor=e;var t=h(e).toHexString();if(-1!==e.indexOf("rgba")){var n=Math.round(255*h(e)._a).toString(16);t=t.replace("#","#"+n)}if(this.callback)this.callback(t);else{var i=s.serializeWithValue(this.path,t);i="setting"!==this.source?o(i,this.source):"true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==this.paneEl.parentElement.style.left&&"0px"!==this.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+i+"</Call>":'<Call Method="SetSettings">'+i+"</Call>",this.client.command.executeXML(i),-1!==this.path.indexOf("ClashDetection")&&this.client.emit("ClashVisualizationChanged")}},t.prototype.setValue=function(e){this.val=e;var t,n=i(e),o=n.a;t=this.showAlpha?"rgba("+n.r+", "+n.g+", "+n.b+", "+o+")":"rgb("+n.r+", "+n.g+", "+n.b+")",this.isDefaultSet||(this.colorEl.dataset.defaultColor=t,this.isDefaultSet=!0),this.colorEl.dataset.lastPickedColor=t,this.colorEl.style.backgroundColor=t,this.iconEl.style.color=a(e)},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileColorPicker=w;var M=function(e){function t(t,n,o,l,r,c,d,p){var h=e.call(this,t,d,p)||this;h.isDefaultSet=!1,h.parent=r,h.level=c,h.wrapperEl.className="mobile-pane-key-value-wrapper",h.wrapperEl.style.marginLeft=10*c+"px",h.source=o,h.val="keyVal",h.visible=!0,h.keyValuePair=l,r?r.panelContainer.appendChild(h.wrapperEl):t.appendChild(h.wrapperEl),h.titleEl.className="mobile-pane-key-value-title",h.setKey(n),h.wrapperEl.appendChild(h.titleEl);for(var u=this,m=0;m<h.keyValuePair.length;m++)!function(e){var t=u.keyValuePair[e],n=void 0,o=void 0;switch(0===e?(u.keyEl=document.createElement("div"),u.keyEl.className="mobile-pane-key",u.wrapperEl.appendChild(u.keyEl),n=u.keyEl):(u.valEl=document.createElement("div"),u.valEl.className="mobile-pane-key",u.wrapperEl.appendChild(u.valEl),n=u.valEl,u.setValueVal=o),t.type){case"Float":if(t.addition){var l=document.createElement("span");l.className="mobile-pane-key-prefix",l.textContent=t.addition,n.appendChild(l)}var r=document.createElement("input");r.className="mobile-pane-input-val",n.appendChild(r),void 0!==t.setting||"Angle"!==t.name&&"Value"!==t.name||(t.setting=u.keyValuePair[1].setting,t.setting.includes("Color1")&&(t.setting=t.setting.replace("Color1","Angle1")),t.setting.includes("Color5")&&(t.setting=t.setting.replace("Color5","Angle2")));var c=function(e){var n=parseFloat(r.value);(-1!==t.name.split(".").indexOf("Angle1")&&n<0||-1!==t.name.split(".").indexOf("Angle2")&&n>0||-1!==t.name.split(".").indexOf("Tolerance")&&n<0)&&(n*=-1);var i=s.serializeWithValue(t.setting.split("."),n.toString());i="true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==h.paneEl.parentElement.style.left&&"0px"!==h.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+i+"</Call>":'<Call Method="SetSettings">'+i+"</Call>",p.command.executeXML(i)};r.addEventListener("change",function(e){c(r.value)}),o=function(e){r.value=e};break;case"Color":var d=document.createElement("span");d.className="mobile-pane-color-box";var m=document.createElement("i");$(m).addClass("fa fa-paint-brush mobile-pane-color-icon"),d.appendChild(m),o=function(e){h.val=e;var n,o=i(e),l=o.a;n="RGBA"===t.addition?"rgba("+o.r+", "+o.g+", "+o.b+", "+l+")":"rgb("+o.r+", "+o.g+", "+o.b+")",h.isDefaultSet||(d.dataset.defaultColor=n,h.isDefaultSet=!0),d.dataset.lastPickedColor=n,d.style.backgroundColor=n,m.style.color=a(e)},n.addEventListener("click",function(e){h.openPalette(d,t)},!1),n.appendChild(d)}0===e?u.setKeyVal=o:u.setValueVal=o}(m);return h.parent&&h.parent.isCollapsed?h.hide():h.show(),r&&r.addChild(h),h}return r(t,e),t.prototype.openPalette=function(e,t){var n=this,i=e.dataset.lastPickedColor;new c.CustomPalette(i,"RGBA"===t.addition).on("customColorChosen",function(i){return n.updateElementState(i,e,t)})},t.prototype.updateElementState=function(e,t,n){t.dataset.lastPickedColor=e,t.style.backgroundColor=e;var i=h(e).toHexString(),o=s.serializeWithValue(n.setting.split("."),i);o="true"!==$("#mobile-settings-pane-default-toggle").val()||"0px"!==this.paneEl.parentElement.style.left&&"0px"!==this.paneEl.parentElement.style.right?'<Call Method="SetSceneSettings">'+o+"</Call>":'<Call Method="SetSettings">'+o+"</Call>",this.client.command.executeXML(o)},t.prototype.setValue=function(e){this.setKeyVal(e[0]),this.setValueVal(e[1])},t.prototype.setKey=function(e){this.key=e.toString(),this.titleEl.textContent=e},t}(f);t.MobileKeyValue=M;var x=function(){function e(e,t,n,i){var o=this;this.parentEl=e,this.client=t,this.path=n.path,this.breadcrumbBar=i;var a=document.createElement("div");a.className="mobile-folder",e.appendChild(a);var l=document.createElement("i");$(l).addClass("fa fa-folder mobile-folder-icon"),a.appendChild(l);var r=document.createElement("span");r.className="mobile-folder-title",r.textContent=n.key.replace("\\",""),a.appendChild(r);var s=document.createElement("span");s.className="mobile-folder-date";var c=n.date.replace(/-/g,"/");s.textContent=new Date(c).toLocaleString(),a.appendChild(s),$(a).click(function(e){o.client.emit("@FolderClicked",n.path),o.breadcrumbBar.addBreadcrumb(n)}),a.style.width=r.clientWidth+l.clientWidth+"px"}return e}();t.MobileFolder=x;var N=function(){function e(e,t,n,i){var o=this;this.parentEl=e,this.client=t,this.path=n.path;var a=document.createElement("div");a.className="mobile-file",e.appendChild(a);var l=document.createElement("i");$(l).addClass("far fa-file mobile-file-icon"),a.appendChild(l);var r=document.createElement("span");r.className="mobile-file-title",r.textContent=n.key,a.appendChild(r);var s=document.createElement("span");s.className="mobile-file-size",s.textContent=this.calculateSize(n.size),a.appendChild(s);var c=document.createElement("span");c.className="mobile-file-date";var d=n.date.replace(/-/g,"/");c.textContent=new Date(d).toLocaleString(),c.style.paddingLeft=$(a).width()/10+"px",s.appendChild(c),a.onclick=function(e){e.preventDefault(),e.stopPropagation(),$(a).toggleClass("mobile-file-selected"),o.client.emit("@FileClicked",n.path)},a.style.width=r.clientWidth+l.clientWidth+"px"}return e.prototype.calculateSize=function(e){var t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(e)/Math.log(1024));return 0===n?e+" "+t[n]:(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]},e}();t.MobileFile=N;var T=function(){function e(e,t,n){var i=this;this.crumbElements=[],this.idMap=[],this.activePath="",this.parentEl=e,this.client=t,this.fileBrowser=n,this.barWrapper=document.createElement("ul"),this.barWrapper.className="mobile-file-browser-breadcrumb-bar",this.barWrapper.style.display="none";var o={key:"Root",path:"",date:""};new O(this.barWrapper,this,o);this.parentEl.appendChild(this.barWrapper),this.lastCrumbElWrapper=document.createElement("ul"),this.lastCrumbElWrapper.className="mobile-file-browser-breadcrumb-bar",this.parentEl.appendChild(this.lastCrumbElWrapper),this.showMoreEl=document.createElement("li");var a=document.createElement("a");a.textContent=".../...",this.showMoreEl.appendChild(a),this.showMoreEl.onclick=function(e){i.showFullBar(),i.fileBrowser.resize()},this.lastCrumbElWrapper.appendChild(this.showMoreEl),this.showMoreEl.style.display="none"}return e.prototype.addBreadcrumb=function(e){if(-1===this.idMap.indexOf(e.path)){this.fileBrowser.resize();var t=new O(this.barWrapper,this,e);this.crumbElements.push(t),this.idMap.push(e.path),this.lastBreadcrumb&&this.lastBreadcrumb.remove(),2===this.idMap.length?$(this.showMoreEl).show():this.idMap.length<2&&$(this.showMoreEl).hide(),this.lastBreadcrumb=new O(this.lastCrumbElWrapper,this,e)}},e.prototype.showFullBar=function(){$(this.lastCrumbElWrapper).hide(),$(this.barWrapper).show()},e.prototype.hideFullbar=function(){$(this.lastCrumbElWrapper).show(),$(this.barWrapper).hide()},e.prototype.popCrumb=function(){this.crumbElements.length>1?this.removeBreadcrumbByPath(this.crumbElements[this.idMap.length-2].item.path):this.removeBreadcrumbByPath("")},e.prototype.removeBreadcrumbByPath=function(e){if(""===e){for(var t=this.idMap.length,n=0;n<t;n++)this.crumbElements[n].remove();return this.idMap=[],this.crumbElements=[],this.lastBreadcrumb.remove(),$(this.showMoreEl).hide(),this.activePath=e,this.changePath(),void this.fileBrowser.resize()}for(var i,o=this.idMap.length,n=0;n<o;n++)if(this.idMap[n]===e){i=n+1;break}if(i){this.idMap.splice(i,this.idMap.length-1);for(var a=i;a<o;a++){this.crumbElements[a].remove()}this.crumbElements.splice(i,this.crumbElements.length-1)}this.activePath=e,this.lastBreadcrumb.remove(),this.idMap.length>1&&$(this.showMoreEl).show(),this.lastBreadcrumb=new O(this.lastCrumbElWrapper,this,this.crumbElements[this.idMap.length-1].item),this.changePath()},e.prototype.changePath=function(){this.client.emit("@FolderClicked",this.activePath)},e}();t.MobileBreadcrumbBar=T;var O=function(){function e(e,t,n){var i=this;this.parentEl=e,this.bar=t,this.item=n,this.itemEl=document.createElement("li");var o=document.createElement("a");o.textContent=this.item.key.replace("\\",""),this.itemEl.appendChild(o),this.itemEl.onclick=function(e){t.removeBreadcrumbByPath(i.item.path)},this.parentEl.appendChild(this.itemEl)}return e.prototype.remove=function(){$(this.itemEl).remove()},e}();t.MobileBreadcrumb=O;var D=function(){function e(e,t,n,i){var o=this;this.parentEl=e,this.client=t,this.options=n,this.lineHeight=20,this.selected=n.Selection,this.itemEl=document.createElement("div"),this.itemEl.className="mobile-modeltree-row",this.itemEl.style.marginLeft=37+10*n.Level+"px";var a=document.createElement("div");a.className="mobile-modeltree-row-wrapper";var r=document.createElement("span");switch(r.classList.add("modeltree-item-visibility"),r.style.position="absolute",r.style.left="10px",n.Visibility){case 0:r.classList.add("fa"),r.classList.add("fa-eye-slash"),r.style.color="black";break;case 1:r.classList.add("fa"),r.classList.add("fa-eye"),r.style.color="black";break;case 2:r.style.color="black";break;case 3:r.classList.add("fa"),r.classList.add("fa-eye"),r.style.color="lightsteelblue"}switch(r.addEventListener("click",function(e){e.stopPropagation();var t='<Call Method="VirtualTreeViewToggleVisibility"><NodeId>'+n.NodeId+"</NodeId></Call>";o.client.command.executeXML(t)}),a.appendChild(r),a.appendChild(this.itemEl),n.Selection){case 0:a.classList.add("treeitem-selection-none");break;case 1:a.classList.add("treeitem-selection-highlight");break;case 2:a.classList.add("treeitem-selection-parent-selected")}var s=document.createElement("span");switch(s.className="mobile-modeltree-expander",n.ExpanderState){case 0:s.style.marginLeft="20px";break;case 1:s.style.display="inline-block";var c=document.createElementNS(u,"svg");c.style.width="20px",c.style.height="10px";var d=document.createElementNS(u,"polygon");d.setAttributeNS(null,"points","10,0 0,10 10,10"),d.setAttributeNS(null,"style","fill:black"),c.appendChild(d),s.appendChild(c);break;case 2:s.style.display="inline-block";var p=document.createElementNS(u,"svg");p.style.height="12px",p.style.width="20px",p.style.zIndex="50";var h=document.createElementNS(u,"polygon");h.setAttributeNS(null,"points","4,0 4,12 12,6"),h.setAttributeNS(null,"style","fill:black"),p.appendChild(h),s.appendChild(p)}s.addEventListener("click",function(e){e.stopPropagation();var t='<Call Method="VirtualTreeViewToggleExpansion"><NodeId>'+n.NodeId+"</NodeId></Call>";o.client.command.executeXML(t)},!1),this.itemEl.appendChild(s);var f=document.createElementNS(u,"svg");f.setAttribute("class","viewpane-item-icon"),f.style.width=.8*this.lineHeight+"px",f.style.height=.8*this.lineHeight+"px",f.style.marginRight="2px";var v=document.createElementNS(u,"use");v.setAttributeNS(m,"href","#"+l(n.NodeType)),"ICON_GEOMETRY"!==l(n.NodeType)&&"ICON_ROOT"!==l(n.NodeType)||$(f).addClass("viewpane-item-icon-translate-down"),f.appendChild(v),this.itemEl.appendChild(f);var g=document.createElement("span");g.textContent=n.NodeName,g.className="mobile-modeltree-row-name",this.itemEl.appendChild(g);var C=document.createElementNS(u,"svg");C.style.width="100%",C.style.height="100%",C.style.position="absolute",C.style.pointerEvents="none";var E=document.createElementNS(u,"line");E.setAttributeNS(null,"x1",(34+10*n.Level).toString()),E.setAttributeNS(null,"x2",(41+10*n.Level).toString()),E.setAttributeNS(null,"y1","10"),E.setAttributeNS(null,"y2","10"),E.setAttributeNS(null,"style","stroke:black;stroke-width:2"),C.appendChild(E);var _=document.createElementNS(u,"svg");_.style.width="100%",_.style.height="100%",_.style.position="absolute",_.style.top="0",_.style.zIndex="1",_.style.pointerEvents="none";var b=document.createElementNS(u,"line");b.setAttributeNS(null,"x1",(10*n.Level+35).toString()),b.setAttributeNS(null,"x2",(10*n.Level+35).toString()),-1!==n.Parent?b.setAttributeNS(null,"y1",(20*(n.Parent+1)).toString()):b.setAttributeNS(null,"y1","0"),b.setAttributeNS(null,"y2",(10+20*i).toString()),b.setAttributeNS(null,"style","stroke:black;stroke-width:2"),_.appendChild(b),this.parentEl.appendChild(_),this.parentEl.appendChild(C),this.parentEl.appendChild(a)}return e}();t.MobileTreeRow=D},function(e,t,n){"use strict";function i(e,t,n){var i=function(e){return n.cdataInvalidChars&&(-1!==e.indexOf("<")||-1!==e.indexOf("&"))||-1!==n.cdataKeys.indexOf(t.name)||-1!==n.cdataKeys.indexOf("*")};if(t instanceof u.XmlElement&&i(e))for(var o=e.split("]]>"),a=0;a<o.length;a++)i(o[a])?t.cdata(o[a]):t.text(o[a]),a<o.length-1&&t.text("]]>");else t.text(e)}function o(e,t,n,o){var a=n.attribute(e,"");if(!(h.isType(t,"String")||h.isType(t,"Number")||h.isType(t,"Boolean")||h.isType(t,"Undefined")||h.isType(t,"Null")))throw new Error("attribute value for name '"+e+"' should be a primitive (string, number, boolean, null, or undefined)");i(h.stringify(t),a,o)}function a(e,t,n,i){if(e===i.aliasString){if(!h.isType(t,"String"))throw new Error("aliasString value for "+t+" should be a string");return void(n.name=t)}if(0!==e.indexOf(i.attributeString)){if(0===e.indexOf(i.valueString)){if(h.isType(t,"String")||h.isType(t,"Number")||h.isType(t,"Boolean")||h.isType(t,"Null")||h.isType(t,"Undefined"))return void s(e,t,n,i);throw new Error("value "+t+" should be a primitive (string, number, boolean, null, or undefined)")}var a=n;h.isType(t,"Array")||h.isType(t,"Set")||(a=n.element(e)),s(e,t,a,i)}else{if(!h.isType(t,"Object"))throw new Error("attributes object for "+e+" should be an object");for(var l=0,r=Object.keys(t);l<r.length;l++){var c=r[l];o(c,t[c],n,i)}}}function l(e,t,n){if(h.isType(e,"Map"))e.forEach(function(e,i){a(h.stringify(i),e,t,n)});else for(var i=0,o=Object.keys(e);i<o.length;i++){var l=o[i];a(l,e[l],t,n)}}function r(e,t,n,i){var o;i.wrapHandlers.hasOwnProperty("*")&&(o=i.wrapHandlers["*"]),i.wrapHandlers.hasOwnProperty(e)&&(o=i.wrapHandlers[e]);var a=e,l=n;if(!h.isType(o,"Undefined")){var r=o(a,t);if(h.isType(r,"String"))a=r,l=n.element(e);else if(!h.isType(r,"Null"))throw new Error("wrapHandlers function for "+a+" should return a string or null")}t.forEach(function(e){var t=l;h.isType(e,"Array")||h.isType(e,"Set")||(t=l.element(a)),s(a,e,t,i)})}function s(e,t,n,o){var a,s=Object.prototype.toString.call(t);return o.typeHandlers.hasOwnProperty("*")&&(a=o.typeHandlers["*"]),o.typeHandlers.hasOwnProperty(s)&&(a=o.typeHandlers[s]),h.isType(a,"Undefined")||(t=a(t)),h.isType(t,"Object")||h.isType(t,"Map")?void l(t,n,o):h.isType(t,"Array")||h.isType(t,"Set")?void r(e,t,n,o):void i(h.stringify(t),n,o)}function c(e,t,n){var i=new u.XmlDocument(e);return n.declaration.include&&i.decl(n.declaration),n.dtd.include&&i.dtd(n.dtd.name,n.dtd.sysId,n.dtd.pubId),s(e,t,i.root(),n),i}function d(e,t,n){return void 0===n&&(n={}),n=p.validateOptions(n),c(e,t,n).toString(n.format)}var p=n(33),h=n(17),u=n(34);t.parse=d},function(e,t,n){"use strict";function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,o=t;i<o.length;i++){var a=o[i];if(Object.prototype.toString.call(e)==="[object "+a+"]")return!0}return!1}function o(e){return i(e,"Undefined")||i(e,"Null")||i(e.toString,"Function")||(e=e.toString()),String(e)}t.isType=i,t.stringify=o},function(e,t,n){"use strict";function i(e){return e.replace(/&/g,"&amp;")}function o(e){return e.replace(/</g,"&lt;")}function a(e){return e.replace(/'/g,"&apos;")}function l(e){return e.replace(/"/g,"&quot;")}t.escapeAmpersands=i,t.escapeLeftAngleBrackets=o,t.escapeSingleQuotes=a,t.escapeDoubleQuotes=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(18),a=n(7),l=n(1),r=n(3),s=n(12),c=n(13),d=n(2),p=n(14),h=function(e){function t(t,n){if(e.call(this),this.name=t,l.isType(n,"Array"))for(var i=0,o=n;i<o.length;i++){var a=o[i];this.insertChild(a)}else this.insertChild(n)}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!l.isType(e,"String"))throw new TypeError("name should be a string");if(!r.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),t.prototype.charRef=function(e,t,n){var i=new s.default(e,t);return this.insertChild(i,n),i},t.prototype.entityRef=function(e,t){var n=new c.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(t,n){if(!(t instanceof s.default||t instanceof c.default||t instanceof p.default))throw new TypeError("node should be an instance of XmlCharRef, XmlEntityRef, or XmlText");return e.prototype.insertChild.call(this,t,n)},t.prototype.removeChild=function(t){if(1===this._children.length)throw new Error("XmlAttribute nodes must have at least one child");return e.prototype.removeChild.call(this,t)},t.prototype.removeChildAtIndex=function(t){if(1===this._children.length)throw new Error("XmlAttribute nodes must have at least one child");return e.prototype.removeChildAtIndex.call(this,t)},t.prototype.text=function(e,t){var n=new p.default(e);return this.insertChild(n,t),n},t.prototype.toString=function(e){void 0===e&&(e={}),a.validateStringOptions(e);for(var t=e.doubleQuotes?'"':"'",n=this.name+"="+t,i=0,l=this._children;i<l.length;i++){var r=l[i];e.doubleQuotes?n+=o.escapeDoubleQuotes(r.toString(e)):n+=o.escapeSingleQuotes(r.toString(e))}return n+=t},t}(d.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.data=t}return i(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){if(!o.isType(e,"String"))throw new TypeError("character data should be a string");if(!a.validateChar(e))throw new Error("character data should not contain characters not allowed in XML");if(/]]>/.test(e))throw new Error("data should not contain the string ']]>'");this._data=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlCdata nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlCdata nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlCdata nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlCdata nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<![CDATA["+this.data+"]]>"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(7),a=n(1),l=n(2),r=function(e){function t(t){void 0===t&&(t={}),e.call(this),o.validateDeclarationOptions(t),this.encoding=t.encoding,this.standalone=t.standalone,this.version=t.version}return i(t,e),Object.defineProperty(t.prototype,"encoding",{get:function(){return this._encoding},set:function(e){if(a.isType(e,"String")){if(!/^[A-Za-z][A-Za-z0-9._-]*$/.test(e))throw new Error("encoding should be a valid XML encoding")}else if(!a.isType(e,"Undefined"))throw new TypeError("name should be a string or undefined");this._encoding=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"standalone",{get:function(){return this._standalone},set:function(e){if(a.isType(e,"String")){if(!/^(yes|no)$/.test(e))throw new Error("standalone should be either the string 'yes' or the string 'no'")}else if(!a.isType(e,"Undefined"))throw new TypeError("standalone should be a string or undefined");this._standalone=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},set:function(e){if(!a.isType(e,"String"))throw new TypeError("version should be a string");if(!/^1\.[0-9]+$/.test(e))throw new Error("version should be a valid XML version");this._version=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDecl nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDecl nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDecl nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDecl nodes cannot have children")},t.prototype.toString=function(e){void 0===e&&(e={}),o.validateStringOptions(e);var t=e.doubleQuotes?'"':"'",n="<?xml version="+t+this.version+t;return a.isType(this.encoding,"String")&&(n+=" encoding="+t+this.encoding+t),a.isType(this.standalone,"String")&&(n+=" standalone="+t+this.standalone+t),n+="?>"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function i(e,t,n,i){if(n+=e+" ",i.doubleQuotes){if(-1!==t.indexOf('"'))throw new Error("options.doubleQuotes inconsistent with sysId or pubId");n+='"'+t+'"'}else{if(-1!==t.indexOf("'"))throw new Error("options.doubleQuotes inconsistent with sysId or pubId");n+="'"+t+"'"}return n}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(7),l=n(1),r=n(3),s=n(8),c=n(23),d=n(24),p=n(25),h=n(26),u=n(27),m=n(2),f=n(9),v=function(e){function t(t,n,i){e.call(this),this.name=t,this.sysId=n,this.pubId=i}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!l.isType(e,"String"))throw new TypeError("name should be a string");if(!r.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pubId",{get:function(){return this._pubId},set:function(e){if(l.isType(e,"String")){if(!/^(\u0020|\u000D|\u000A|[a-zA-Z0-9]|[-'()+,./:=?;!*#@$_%])*$/.test(e))throw new Error("pubId should not contain characters not allowed in public identifiers");if(l.isType(this.sysId,"Undefined"))throw new Error("pubId should not be defined if sysId is undefined")}else if(!l.isType(e,"Undefined"))throw new TypeError("pubId should be a string or undefined");this._pubId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sysId",{get:function(){return this._sysId},set:function(e){if(l.isType(e,"String")){if(!r.validateChar(e))throw new Error("sysId should not contain characters not allowed in XML");if(-1!==e.indexOf("'")&&-1!==e.indexOf('"'))throw new Error("sysId should not contain both single quotes and double quotes")}else{if(!l.isType(e,"Undefined"))throw new TypeError("sysId should be a string or undefined");if(!l.isType(this.pubId,"Undefined"))throw new Error("sysId should not be undefined if pubId is defined")}this._sysId=e},enumerable:!0,configurable:!0}),t.prototype.attlist=function(e,t){var n=new c.default(e);return this.insertChild(n,t),n},t.prototype.comment=function(e,t){var n=new s.default(e);return this.insertChild(n,t),n},t.prototype.element=function(e,t){var n=new d.default(e);return this.insertChild(n,t),n},t.prototype.entity=function(e,t){var n=new p.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(t,n){if(!(t instanceof s.default||t instanceof c.default||t instanceof d.default||t instanceof p.default||t instanceof h.default||t instanceof u.default||t instanceof f.default))throw new TypeError("node should be an instance of XmlComment, XmlDtdAttlist, XmlDtdElement, XmlDtdEntity, XmlDtdNotation, XmlDtdParamEntityRef, or XmlProcInst");return e.prototype.insertChild.call(this,t,n)},t.prototype.notation=function(e,t){var n=new h.default(e);return this.insertChild(n,t),n},t.prototype.paramEntityRef=function(e,t){var n=new u.default(e);return this.insertChild(n,t),n},t.prototype.procInst=function(e,t,n){var i=new f.default(e,t);return this.insertChild(i,n),i},t.prototype.toString=function(e){void 0===e&&(e={}),a.validateStringOptions(e);var t="<!DOCTYPE "+this.name;if(l.isType(this.pubId,"Undefined")?l.isType(this.sysId,"Undefined")||(t+=" ",t=i("SYSTEM",this.sysId,t,e)):(t+=" ",t=i("PUBLIC",this.pubId,t,e),t=i("",this.sysId,t,e)),0!==this._children.length){t+=" [";for(var n=0,o=this._children;n<o.length;n++){var r=o[n];e.pretty&&(t+=e.newline+e.indent),t+=r.toString(e)}e.pretty&&(t+=e.newline),t+="]>"}else t+=">";return t},t}(m.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=v},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!o.isType(e,"String"))throw new TypeError("text should be a string");if(!a.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdAttlist nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ATTLIST "+this.text+">"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!o.isType(e,"String"))throw new TypeError("text should be a string");if(!a.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdElement nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ELEMENT "+this.text+">"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!o.isType(e,"String"))throw new TypeError("text should be a string");if(!a.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdEntity nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!ENTITY "+this.text+">"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.text=t}return i(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){if(!o.isType(e,"String"))throw new TypeError("text should be a string");if(!a.validateChar(e))throw new Error("data should not contain characters not allowed in XML");this._text=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdNotation nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"<!NOTATION "+this.text+">"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(1),a=n(3),l=n(2),r=function(e){function t(t){e.call(this),this.entity=t}return i(t,e),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(e){if(!o.isType(e,"String"))throw new TypeError("entity should be a string");if(!a.validateName(e))throw new Error("entity should not contain characters not allowed in XML names");this._entity=e},enumerable:!0,configurable:!0}),t.prototype.children=function(){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.insertChild=function(e,t){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.removeChild=function(e){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.removeChildAtIndex=function(e){throw new Error("XmlDtdParamEntityRef nodes cannot have children")},t.prototype.toString=function(e){return void 0===e&&(e={}),"%"+this.entity+";"},t}(l.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function i(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(!(i instanceof p.default||i instanceof u.default||i instanceof v.default))return!1}return!0}function o(e,t){return(e instanceof p.default||e instanceof u.default||e instanceof v.default)&&(t instanceof p.default||t instanceof u.default||t instanceof v.default)}var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},l=n(7),r=n(1),s=n(3),c=n(19),d=n(20),p=n(12),h=n(8),u=n(13),m=n(2),f=n(9),v=n(14),g=function(e){function t(t){e.call(this),this.name=t}return a(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){if(!r.isType(e,"String"))throw new TypeError("name should be a string");if(!s.validateName(e))throw new Error("name should not contain characters not allowed in XML names");this._name=e},enumerable:!0,configurable:!0}),t.prototype.attribute=function(e,t,n){if(r.isType(t,"String"))t=new v.default(t);else if(r.isType(t,"Array"))for(var i=t,o=0;o<i.length;o++)if(r.isType(i[o],"String")){var a=i[o];i[o]=new v.default(a)}var l=new c.default(e,t);return this.insertChild(l,n),l},t.prototype.attributes=function(){return this._children.filter(function(e){return e instanceof c.default})},t.prototype.cdata=function(e,t){var n=new d.default(e);return this.insertChild(n,t),n},t.prototype.charRef=function(e,t,n){var i=new p.default(e,t);return this.insertChild(i,n),i},t.prototype.comment=function(e,t){var n=new h.default(e);return this.insertChild(n,t),n},t.prototype.element=function(e,n){var i=new t(e);return this.insertChild(i,n),i},t.prototype.entityRef=function(e,t){var n=new u.default(e);return this.insertChild(n,t),n},t.prototype.insertChild=function(n,i){if(!(n instanceof c.default||n instanceof d.default||n instanceof p.default||n instanceof h.default||n instanceof t||n instanceof u.default||n instanceof f.default||n instanceof v.default))throw new TypeError("node should be an instance of XmlAttribute, XmlCdata, XmlCharRef, XmlComment, XmlElement, XmlEntityRef, XmlProcInst, or XmlText");if(n instanceof c.default)for(var o=this._children.filter(function(e){return e instanceof c.default}),a=0,l=o;a<l.length;a++){var r=l[a];if(r.name===n.name)throw new Error("element already contains an XmlAttribute object with name "+n.name)}return e.prototype.insertChild.call(this,n,i)},t.prototype.procInst=function(e,t,n){var i=new f.default(e,t);return this.insertChild(i,n),i},t.prototype.text=function(e,t){var n=new v.default(e);return this.insertChild(n,t),n},t.prototype.toString=function(e){void 0===e&&(e={}),l.validateStringOptions(e);for(var t=this.attributes(),n=this._children.filter(function(e){return-1===t.indexOf(e)}),a="<"+this._name,r=0,s=t;r<s.length;r++){a+=" "+s[r].toString(e)}if(n.length>0){a+=">";for(var c=function(t){return e.indent+t},d=0;d<n.length;d++){var p=n[d],h=p.toString(e),u=d>0?n[d-1]:void 0;e.pretty&&(i(n)||d>0&&o(p,u)||(a+=e.newline,h=h.split(e.newline).map(c).join(e.newline))),a+=h}e.pretty&&(i(n)||(a+=e.newline)),a+="</"+this._name+">"}else a+="/>";return a},t}(m.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=g},function(e,t,n){"use strict";function i(e){var t=e.Session,n=e.Client;if(Z=e.NewSession,n&&localStorage.setItem("WVClient",n),t){if(P.appStates.session&&Z){var i={ErrorCode:0,ErrorInfo:"SessionInvalid",Identifier:"SessionInvalid",Message:"Invalid session.",Type:["Event","Error"]};vsClient.emit("ShowMessageBox",i),vsClient.vsCanvas.setDefaultImage()}P.appStates.session=t}}function o(e){switch(e.split("-")[0].toLowerCase()){case"en":return"ENU";case"de":return"DEU";case"it":return"ITA";case"es":return"ESP";case"fr":return"FRA";case"ko":return"KOR";case"zh":return"CHS";case"ja":return"JPN";default:return"ENU"}}function a(e){if(!q){q=!0;var t=localStorage.getItem("WVLang");t||(t=o(navigator.language));var n='<Call Method="SetSettings"><Settings><Renderer><General><Language>'+t+"</Language></General></Renderer></Settings></Call>";vsClient.command.executeXML(n),vsClient.emit("@changeLang",t);if(vsClient.command.executeXML('<Call Method="GetSettings"></Call>'),vsClient.once("GetSettings",function(e,t){var n=localStorage.getItem("VSWVSettings");e=Q(e,"__text__"),e=Q(e,"__ordinal__"),delete e.Settings.Renderer.General.Language;var i;e.Settings.Version&&(i=Array.isArray(e.Settings.Version)?e.Settings.Version[0]:e.Settings.Version),delete e.Settings.Version;var o=B.parse("Settings",e.Settings).replace("<?xml version='1.0'?>","");o=o.replace("<Settings>",'<Settings Version="'+i+'">'),localStorage.setItem("VSWVDefaultSettings",o),null===n?localStorage.setItem("VSWVSettings",o):y(),vsClient.on("GetSettings",function(e,t){e=Q(e,"__text__"),e=Q(e,"__ordinal__"),delete e.Settings.Renderer.General.Language;var n;e.Settings.Version&&(n=Array.isArray(e.Settings.Version)?e.Settings.Version[0]:e.Settings.Version),delete e.Settings.Version;var i=B.parse("Settings",e.Settings).replace("<?xml version='1.0'?>","");i=i.replace("<Settings>",'<Settings Version="'+n+'">'),localStorage.setItem("VSWVSettings",i)});vsClient.command.executeXML('<Call Method="SetSettings"><Settings><Scene><Mouse><LeftButtonFunction>Rotate</LeftButtonFunction></Mouse></Scene></Settings></Call>'),vsClient.on("SetSettings",function(e){vsClient.command.executeXML('<Call Method="GetSettings"></Call>')})}),vsClient.on("GetSceneSettings",s),!1===e?(vsClient.on("OpenFile",w),window.location.search.length>0?T(!1):R.createFileOpenBadge()):T(!0),Y){var i=localStorage.getItem("WVFileType")?localStorage.getItem("WVFileType"):"3D";localStorage.removeItem("WVFileType");var a=localStorage.getItem("WVVisShareSpec")?localStorage.getItem("WVVisShareSpec"):"";localStorage.removeItem("WVVisShareSpec");var l=localStorage.getItem("WVFileName")?localStorage.getItem("WVFileName"):"";localStorage.removeItem("WVFileName"),P.appStates.fileType=i,vsClient.emit("OpenFile",{Error:"SUCCESS",Type:i,CustomId:a,FileName:l}),R.resizeHandler()}vsClient.on("DraftAngleChanged",function(e){var t=r(e);R.openStatusDialog("ID_wv-draftangle",t,0)}),vsClient.on("MeasurementChanged",function(e){if(!e.Mock){var t=r(e);R.openStatusDialog("ID_wv-measurement",t,0)}}),vsClient.on("TransformChanged",function(e){for(var t=!1,n=0;n<P.appStates.interactionMode.length;n++)0===P.appStates.interactionMode[0].indexOf("Transform")&&(t=!0);if(t){var i=r(e.Position);R.openStatusDialog("ID_wv-transform",i,0)}}),vsClient.command.executeXML('\n    <Call Method="AddEventListener">\n        <Event>MeasurementChanged</Event>\n        <Event>TransformChanged</Event>\n        <Event>DraftAngleChanged</Event>\n        <Event>SectionChanged</Event>\n        <Event>ProjectedAreaChanged</Event>\n        <Event>TextSearchChanged</Event>\n        <Event>NeighbourhoodSearchChanged</Event>\n        <Event>ShowMessageBox</Event>\n        <Event>ImportFinished</Event>\n        <Event>CalloutSelectionChanged</Event>\n        <Event>SavedSelectionsChanged</Event>\n        <Event>SplitResultUpdated</Event>\n        <Event>WallthicknessValuesChanged</Event>\n        <Event>ActivateCompare</Event>\n        <Event>CalloutAutoAlignmentChanged</Event>\n        <Event>BandAnalysis</Event>\n        <Event>ClashResultUpdated</Event>\n        <Event>ConfigurationViewPlaySelectionChange</Event>\n        <Event>PresetChanged</Event>\n    </Call>\n    ');vsClient.command.executeXMLAsync('<Call Method="GetVersionInfo"></Call>'),vsClient.once("GetVersionInfo",function(e){var t=e.Version.split(".");t.pop(),P.appStates.version=t.join(".")})}}function l(e){if(e.CustomId&&-1!==e.CustomId.indexOf("VSOpen")){P.appStates.VisShareSpec=e.CustomId,-1!==e.CustomId.indexOf("VSName")&&(document.title=e.CustomId.split("VSName")[1]);var t=e.CustomId.split("VSOpen")[1].split("_")[0];"Write"===t?R.ribbon.deleteShareRibbon(!1):"None"===t&&R.ribbon.deleteShareRibbon(!0)}else R.ribbon.deleteShareRibbon(!0)}function r(e){for(var t=e.__ordinal__,n=[],i=0;i<t.length;i++)if("Type"!==t[i]&&"ViewId"!==t[i]){var o=t[i],a=e[o].__ordinal__[0],l=e[o].__text__+" "+e[o][a],r={key:o,value:l};n.push(r)}return n}function s(e,n){if("SUCCESS"===e.Error){var i=e.Settings.Scene.Visualization.RenderMode;vsClient.emit("RenderMode",i.split(" ")),t.sceneSettings=e.Settings;var o=e.Settings.Scene.Mouse.LeftButtonFunction,a=e.Settings.Scene.Mouse.RightButtonFunction,l=e.Settings.Scene.Mouse.MiddleButtonFunction;P.appStates.mouseLeftButtonMode=o,P.appStates.mouseRightButtonMode=a,P.appStates.mouseMiddleButtonMode=l,vsClient.emit("LMB",o)}}function c(e){return e-U.getBoundingClientRect().left}function d(e){return e-U.getBoundingClientRect().top}function p(e){P.appStates.lastGestureDistance=e.distance,P.appStates.lastGestureCenterX=c(e.center.x),P.appStates.lastGestureCenterY=d(e.center.y);var t='<Call Method="SetMouseButtonFunctions" Response="false"><LeftMouseButtonFunction>Pan</LeftMouseButtonFunction></Call>';t+='<Call Method="MouseDown" Response="false"><X>'+P.appStates.lastGestureCenterX+"</X><Y>"+P.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>",vsClient.command.executeXMLMouse(t)}function h(e){var t=!1;P.appStates.lastGestureDelta=e.distance-P.appStates.lastGestureDistance,Math.abs(P.appStates.lastGestureDelta)>10&&(t=!0,P.appStates.lastGestureDistance=e.distance),P.appStates.lastGestureCenterX=c(e.center.x),P.appStates.lastGestureCenterY=d(e.center.y);var n='<Call Method="MouseMove" Response="true"><X>'+P.appStates.lastGestureCenterX+"</X><Y>"+P.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>";t?vsClient.command.executeXMLZoomMouseWheel(P.appStates.lastGestureCenterX,P.appStates.lastGestureCenterY,P.appStates.lastGestureDelta):vsClient.command.executeXMLMouse(n)}function u(){var e='<Call Method="MouseUp" Response="false"><X>'+P.appStates.lastGestureCenterX+"</X><Y>"+P.appStates.lastGestureCenterY+"</Y><MouseButton>Left</MouseButton></Call>";e+='<Call Method="SetMouseButtonFunctions" Response="false"><LeftMouseButtonFunction>'+P.appStates.mouseLeftButtonMode+"</LeftMouseButtonFunction></Call>",vsClient.command.executeXMLMouse(e)}function m(e){if(!P.appStates.touchGestureActive&&!P.appStates.mouseActive){e.preventDefault();var t=c(e.touch.x.client),n=d(e.touch.y.client);"RectZoom"!==P.appStates.mouseLeftButtonMode&&"RectSelect"!=P.appStates.mouseLeftButtonMode||vsClient.startRect(t,n);var i='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>",o="Left";-1!==P.appStates.interactionMode.indexOf("Flythrough")&&(o="Right"),i+='<Call Method="MouseDown" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>"+o+"</MouseButton></Call>",vsClient.command.executeXMLMouse(i)}}function f(e){if(!P.appStates.touchGestureActive&&!P.appStates.mouseActive){e.preventDefault();var t=c(e.touch.x.client),n=d(e.touch.y.client),i="<MouseButton>Left</MouseButton>";-1!==P.appStates.interactionMode.indexOf("Flythrough")&&(i="<MouseButton>Right</MouseButton>");var o='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y>"+i+"</Call>";"RectZoom"!==P.appStates.mouseLeftButtonMode&&"RectSelect"!=P.appStates.mouseLeftButtonMode||!P.appStates.drawRect||-1!==P.appStates.interactionMode.indexOf("Flythrough")?vsClient.command.executeXMLMouseMove(o):vsClient.drawRect(t,n)}}function v(e){if(!P.appStates.touchGestureActive&&!P.appStates.mouseActive){e.preventDefault();var t=c(e.touch.x.client),n=d(e.touch.y.client),i="Left";-1!==P.appStates.interactionMode.indexOf("Flythrough")&&(i="Right");var o='<Call Method="MouseUp" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>"+i+"</MouseButton></Call>";vsClient.command.executeXMLMouse(o)}}function g(e){if(!P.appStates.touchActive){P.appStates.mouseActive=!0,G=!0;var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.pageX-n,a=e.pageY-i,l="None";switch(e.which){case 1:$("#wv-dock").toggleClass("disable-selection"),P.appStates.mouseLeftButtonDown=!0,l="Left","RectZoom"!==P.appStates.mouseLeftButtonMode&&"RectSelect"!==P.appStates.mouseLeftButtonMode||vsClient.startRect(o,a);break;case 2:l="Middle","RectZoom"!==P.appStates.mouseMiddleButtonMode&&"RectSelect"!==P.appStates.mouseMiddleButtonMode||vsClient.startRect(o,a);break;case 3:l="Right","RectZoom"!==P.appStates.mouseRightButtonMode&&"RectSelect"!==P.appStates.mouseRightButtonMode||vsClient.startRect(o,a)}var r='<Call Method="MouseDown"><X>'+o+"</X><Y>"+a+"</Y><MouseButton>"+l+"</MouseButton></Call>";vsClient.command.executeXML(r)}}function C(e){if(!P.appStates.touchActive&&(e.pageX!==P.appStates.lastPagePosX||e.pageY!==P.appStates.lastPagePosY)){P.appStates.lastPagePosX=e.pageX,P.appStates.lastPagePosY=e.pageY;var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.pageX-n,a=e.pageY-i;vsClient.mouseX=o,vsClient.mouseY=a;var l="None";switch(e.which){case 1:if(e.button>1){if(l="Middle",("RectZoom"===P.appStates.mouseLeftButtonMode||"RectSelect"==P.appStates.mouseLeftButtonMode)&&P.appStates.drawRect&&-1===P.appStates.interactionMode.indexOf("Flythrough")){if(!V){vsClient.startRect(o,a),V=!0;var r='<Call Method="MouseDown"><X>'+o+"</X><Y>"+a+"</Y><MouseButton>"+l+"</MouseButton></Call>";return void vsClient.command.executeXMLNoMirror(r)}return void vsClient.drawRect(o,a)}break}if(l="Left",("RectZoom"===P.appStates.mouseLeftButtonMode||"RectSelect"==P.appStates.mouseLeftButtonMode)&&P.appStates.drawRect&&-1===P.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(o,a);break;case 2:if(("RectZoom"===P.appStates.mouseLeftButtonMode||"RectSelect"==P.appStates.mouseLeftButtonMode)&&P.appStates.drawRect&&-1===P.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(o,a);l="Middle";break;case 3:if(("RectZoom"===P.appStates.mouseLeftButtonMode||"RectSelect"==P.appStates.mouseLeftButtonMode)&&P.appStates.drawRect&&-1===P.appStates.interactionMode.indexOf("Flythrough"))return void vsClient.drawRect(o,a)}var r='<Call Method="MouseMove" Response="true"><X>'+o+"</X><Y>"+a+"</Y><MouseButton>"+l+"</MouseButton></Call>";vsClient.command.executeXMLMouseMove(r)}}function E(e){if(!P.appStates.touchActive){var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.pageX-n,a=e.pageY-i,l="None";switch(e.which){case 1:$("#wv-dock").toggleClass("disable-selection"),l="Left",P.appStates.mouseLeftButtonDown=!1;break;case 2:l="Middle";break;case 3:l="Right"}var r="";(!0===e.ctrlKey||R.mockCtrl)&&(r="<MouseFlag>Ctrl</MouseFlag>"),V&&(V=!1,l="Middle");var s='<Call Method="MouseUp" Response="false"><X>'+o+"</X><Y>"+a+"</Y>"+r+"<MouseButton>"+l+"</MouseButton></Call>";vsClient.command.executeXMLMouse(s),P.appStates.mouseActive=!1}}function _(e){e.preventDefault(),e.stopPropagation();var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.pageX-n,a=e.pageY-i,l="None";1===e.which&&(l="Left"),b(o,a,l)}function b(e,t,n){if(W)return void(W=!1);vsClient.command.executeXML('<Event Type="NodePropertiesChanged"></Event>'),vsClient.once("NodePropertiesChanged",function(i){if(i&&i.General&&"MarkupSet"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){vsClient.once("NodePropertiesChanged",function(n){I(n,e,t)})})}else if(i&&i.General&&"CreatedNotes"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){if(i&&"MarkupSet"===i.General.Name){vsClient.command.executeXML('<Call Method="Undo"><Steps>1</Steps></Call>'),vsClient.once("Undo",function(){vsClient.once("NodePropertiesChanged",function(n){I(n,e,t)})})}else{var o='<Call Method="MouseDoubleClick" Response="false"><X>'+e+"</X><Y>"+t+"</Y><MouseButton>"+n+"</MouseButton></Call>";vsClient.command.executeXMLMouse(o)}})}else if(i&&i.Markup)I(i,e,t);else{var o='<Call Method="MouseDoubleClick" Response="false"><X>'+e+"</X><Y>"+t+"</Y><MouseButton>"+n+"</MouseButton></Call>";vsClient.command.executeXMLMouse(o)}})}function I(e,t,n){var i,o=U.getBoundingClientRect(),a=(o.left,o.top,document.createElement("div"));a.className="mobile-page-overlay";document.getElementById("wv-app");document.body.appendChild(a);var l=document.createElement("div");l.contentEditable="true",l.className="mobile-editable-markup-overlay";var r=e.Markup.Text.Content;$(l).html(r),a.appendChild(l),l.focus(),window.getSelection().selectAllChildren(l),l.addEventListener("keydown",function(e){if(27===e.keyCode){var t='<Event Type="NodePropertiesChanged"><Markup><Text><Content>'+r+"</Content></Text></Markup></Event>";vsClient.command.executeXML(t),$(l).off("blur"),$(l).remove(),$(a).remove()}}),$(l).on("blur",function(e){i=l.innerText;var t='<Event Type="NodePropertiesChanged"><Markup><Text><Content>'+i+"</Content></Text></Markup></Event>";vsClient.command.executeXML(t.replace(/\n<\//,"</")),$(l).remove(),$(a).remove()})}function S(e){e.preventDefault();var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.pageX-n,a=e.pageY-i,l=e.deltaY,r=-1!=navigator.userAgent.indexOf("Firefox")?-.1*l:-.005*l,s='<Call Method="MouseWheel" Response="false"><X>'+o+"</X><Y>"+a+"</Y><Delta>"+r+" </Delta></Call>";vsClient.command.executeXMLMouse(s)}function y(){try{if(_UseCachedSettings){var e='<Call Method="SetSettings">'+localStorage.getItem("VSWVSettings")+"</Call>";vsClient.command.executeXMLNoMirror(e)}}catch(e){}}function w(e){try{if("3D"===e.Type){for(var t=0;t<_3DReducedSet.length;t++){var n=_3DReducedSet[t];$("#"+n).hide()}for(var t=0;t<_2DReducedSet.length;t++){var n=_2DReducedSet[t];$("#"+n).show()}}else if("2D"===e.Type){for(var t=0;t<_3DReducedSet.length;t++){var n=_3DReducedSet[t];$("#"+n).show()}for(var t=0;t<_2DReducedSet.length;t++){var n=_2DReducedSet[t];$("#"+n).hide()}}}catch(e){}if(e.SceneId||(P.appStates.fileName=e.FileName),"SUCCESS"!=e.Error)alert("Error on loading file!");else{$("#mobile-file-open-badge").remove();if(vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>'),P.appStates.reset(),P.appStates.fileLoaded=!0,P.appStates.fileType=e.Type,"2D"===e.Type){var i='<Call Method="GetPageCount"></Call>';vsClient.command.executeXML(i),vsClient.once("GetPageCount",function(e){"SUCCESS"!==e.Error?P.appStates.pageCount="":P.appStates.pageCount=e.Pages,R.showDocumentBar(),R.show2DExtraLayerBadge()})}else R.hideDocumentBar(),R.hide2DExtraLayerBadge();R.paneController.leftDefaultAdapter.sessions.length>0?(R.paneController.leftDefaultAdapter.sessions=[],R.paneController.leftDefaultAdapter.activeSession=void 0,R.paneController.leftDefaultAdapter.resultInitialized=!1,$(R.paneController.leftDefaultAdapter.resultGroup.wrapperEl).remove(),$(R.paneController.leftDefaultAdapter.resultGroup.panelContainer).remove(),$(R.paneController.leftDefaultAdapter.splitGroupTable).remove()):R.paneController.rightDefaultAdapter.sessions.length>0&&(R.paneController.rightDefaultAdapter.sessions=[],R.paneController.rightDefaultAdapter.activeSession=void 0,R.paneController.rightDefaultAdapter.resultInitialized=!1,$(R.paneController.rightDefaultAdapter.resultGroup.wrapperEl).remove(),$(R.paneController.rightDefaultAdapter.resultGroup.panelContainer).remove(),$(R.paneController.rightDefaultAdapter.splitGroupTable).remove());var o="Rotate";try{o=_MobileTouchControl}catch(e){}var a='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><LeftButtonFunction>'+o+"</LeftButtonFunction></Mouse></Scene></Settings></Call>";vsClient.command.executeXML(a),P.appStates.selectionMode="Select";var l='<Call Method="SetSelectionMode"><SelectionMode>'+P.appStates.selectionMode+"</SelectionMode></Call>";vsClient.command.executeXML(l),vsClient.emit("Select","Select");if(vsClient.command.executeXMLAsync('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>'),"3D"!==e.Type){var i='<Call Method="GetPageCount"></Call>';vsClient.command.executeXMLAsync(i),vsClient.once("GetPageCount",function(e){"SUCCESS"!==e.Error?P.appStates.pageCount="":P.appStates.pageCount=e.Pages})}$(U).off("mousedown").on("mousedown",function(e){g(e)}),$(U).off("mousemove").on("mousemove",function(e){C(e)}),$(U).off("mouseup").on("mouseup",function(e){E(e)}),U.addEventListener("dblclick",_,!1),U.addEventListener("wheel",S,!1),U.ontouchmove=x,F||(F=!0,$(U).kendoTouch({doubleTapTimeout:250,multiTouch:!0,enableSwipe:!1,touchstart:function(e){P.appStates.mouseActive||e.event.originalEvent.pointerType&&"touch"!==e.event.originalEvent.pointerType?e.sender.cancel():P.appStates.touchActive=!0},gesturestart:function(e){P.appStates.touchGestureActive=!0,p(e)},gesturechange:function(e){h(e)},gestureend:function(e){e.preventDefault(),u()},drag:function(e){if(X)return void M(e);f(e)},dragstart:function(e){if(X)return void M(e);m(e)},dragend:function(e){if(X){e.sender.cancel(),X=!1;var t=c(e.touch.x.client),n=d(e.touch.y.client),i="";(!0===e.event.altKey||!0===e.event.ctrlKey||R.mockCtrl)&&(i="<MouseFlag>Ctrl</MouseFlag>");var o='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>";return o+='<Call Method="MouseUp" Response="false"><X>'+t+"</X><Y>"+n+"</Y>"+i+"<MouseButton>Left</MouseButton></Call>",void vsClient.command.executeXMLMouse(o)}v(e),P.appStates.touchActive=!1,P.appStates.touchGestureActive=!1},hold:function(e){-1!==P.appStates.interactionMode.indexOf("Flythrough")&&M(e)},doubletap:function(e){e.preventDefault(),W=!1;var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.touch.x.location-n,a=e.touch.y.location-i,l="None";void 0===e.event.which||1!==e.event.which&&0!==e.event.which||(l="Left"),b(o,a,l),W=!0},tap:function(e){if(G)return void(G=!1);if(R.paneCloseTouch)return void R.setPaneCloseTouch(!1);var t=U.getBoundingClientRect(),n=t.left,i=t.top,o=e.touch.x.location-n,a=e.touch.y.location-i;$("#wv-dock").toggleClass("disable-selection"),P.appStates.mouseLeftButtonDown=!0,"RectZoom"!==P.appStates.mouseLeftButtonMode&&"RectSelect"!==P.appStates.mouseLeftButtonMode||vsClient.startRect(o,a);var l='<Call Method="MouseMove" Response="true"><X>';l+=o,l+="</X><Y>",l+=a,l+="</Y><MouseButton>None</MouseButton></Call>",vsClient.command.executeXMLNoMirror(l),l='<Call Method="MouseDown"><X>',l+=o+"</X><Y>",l+=a+"</Y>",l+="<MouseButton>",l+="Left</MouseButton></Call>",vsClient.command.executeXMLNoMirror(l),l='<Call Method="MouseUp"><X>',l+=o+"</X><Y>",l+=a+"</Y>",(!0===e.event.altKey||!0===e.event.ctrlKey||R.mockCtrl)&&(l+="<MouseFlag>Ctrl</MouseFlag>"),l+="<MouseButton>",l+="Left</MouseButton></Call>",vsClient.command.executeXMLNoMirror(l)}}))}}function M(e){if(!P.appStates.touchActive)return void e.sender.cancel();var t=c(e.touch.x.client),n=d(e.touch.y.client);!0===e.event.altKey||!0===e.event.ctrlKey||R.mockCtrl;var i='<Call Method="MouseMove" Response="true"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>None</MouseButton></Call>";X||(i+='<Call Method="MouseDown" Response="false"><X>'+t+"</X><Y>"+n+"</Y><MouseButton>Left</MouseButton></Call>",X=!0),vsClient.command.executeXMLMouse(i)}function x(e){e.preventDefault(),e.stopPropagation()}function N(e){vsClient.relayMessageToBackend("NativeLoadingModalFinished")}function T(e){for(var t=window.location.search.substr(1),n=t.split("&"),i={},o=0,a=n;o<a.length;o++){var l=a[o],r=l.split("="),s=r[0],c=r[1];i[s]=c}var d,p;if(i.closesessions&&(P.appStates.sessionUrlClose=i.closesessions,localStorage.removeItem("WVSessionCloseID"),localStorage.setItem("WVSessionCloseID",i.closesessions),window.addEventListener("storage",function(e){var t=localStorage.getItem("WVSessionCloseID");if("WVSessionCloseID"===e.key&&t&&null!==t&&""!==t&&P.appStates.sessionUrlClose===t){vsClient.destroy();var n=location.href.split("/");n.pop(),window.open(n.join("/")+"/session_in_use_index.html","_self")}})),"2d"===i.compare)i.file1&&(d=decodeURIComponent(i.file1)),i.file2&&(p=decodeURIComponent(i.file2)),i.open1&&(d=decodeURIComponent(escape(window.atob(i.open1)))),i.open2&&(p=decodeURIComponent(escape(window.atob(i.open2)))),d&&p&&(vsClient.OpenFile(d),vsClient.on("ActivateGraphicalCompare",function(e){"full_ui_2d_compare"==e.CustomId&&"SUCCESS"!=e.Error&&(alert("Error on 2D compare: "+e.Error+" Info: "+e.ErrorInfo),console.log("Error on 2D compare: "+e.Error+" Info: "+e.ErrorInfo))}),vsClient.on("OpenFile",function(){var e='\n                <Call Method="ImportFile">\n                <FileName>'+p+"</FileName>\n              </Call>";vsClient.command.executeXML(e);vsClient.command.executeXML('\n                <Call Method="ActivateGraphicalCompare"><Activate>true</Activate> CustomId="full_ui_2d_compare"</Call>')}));else if("quick"===i.compare)O(i,"full_ui_quick_compare","ActivateGraphicalCompare");else if("exact"===i.compare)O(i,"full_ui_exact_compare","ComputeBrepCompare");else if(void 0!==i.file){var h=i.NativeLoadingModal,u=decodeURIComponent(i.file);h&&"true"===h?R.openNativeLoadingModal(u,vsClient.OpenFile.bind(vsClient)):vsClient.OpenFile(u)}else if(void 0!==i.open){var u=decodeURIComponent(escape(window.atob(i.open))),h=i.NativeLoadingModal;h&&"true"===h?R.openNativeLoadingModal(u,vsClient.OpenFile.bind(vsClient)):vsClient.OpenFile(u)}}function O(e,t,n){var i,o;e.file1&&(i=decodeURIComponent(e.file1)),e.file2&&(o=decodeURIComponent(e.file2)),e.open1&&(i=decodeURIComponent(escape(window.atob(e.open1)))),e.open2&&(o=decodeURIComponent(escape(window.atob(e.open2)))),i&&o&&(vsClient.initOptions.blockOnLoad&&vsClient.blockUI(),vsClient.once(n,function(i){vsClient.unblockUI(),i.CustomId===t&&("SUCCESS"!=i.Error?"ComputeBrepCompare"===n?(console.log("Error on exact compare: "+i.ErrorInfo+" Try quick compare."),O(e,"full_ui_quick_compare","ActivateGraphicalCompare")):console.log("Error on quick compare: "+i.Error+" Info: "+i.ErrorInfo):D(i))}),vsClient.NewScene3D(),vsClient.once("NewScene3D",function(e){L(e,i,o,t,n)}))}function D(e){if("SUCCESS"==e.Error){vsClient.command.executeXML('<Call Method="AlignView"><Alignment>Isometric</Alignment></Call><Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')}vsClient.command.executeXML('<Call Method="ResumeRendering"/>')}function L(e,t,n,i,o){w(e);var a='\n    <Call Method="SetSettings">\n        <Settings>\n            <Import3D>\n                <General>\n                    <ReadMode>PreferGeometry</ReadMode>\n                    <ReadPMIs>false</ReadPMIs>\n                    <ReadSolids>true</ReadSolids>\n                    <ReadConstructionAndReferences>false</ReadConstructionAndReferences>\n                </General>\n                <_3DVS>\n                    <IncrementalLoading>false</IncrementalLoading>\n                    <RemoveBrep>false</RemoveBrep>\n                </_3DVS>\n            </Import3D>\n        </Settings>\n    </Call>\n\n    <Call Method="PauseRendering"/>\n\n    <Call Method="UpdateScene">\n        <VSXML>\n            <Node CustomId="Root1" Name="Compare1" Type="Root">\n                <Node CustomId="V1" Name="V1" Type="ProductOccurrence" FileName="'+t+'" />\n            </Node>\n            <Node CustomId="Root2" Name="Compare2" Type="Root">\n                <Node CustomId="V2" Name="V2" Type="ProductOccurrence" FileName="'+n+'" />\n            </Node>\n        </VSXML>\n    </Call>\n\n    <Call Method="FitAll"/>\n\n    <Call Method="SetSelectedNodes">\n    <NodeId>#V1</NodeId>\n    <NodeId>#V2</NodeId>\n    </Call>\n\n        ';a+="ComputeBrepCompare"===o?'<Call Method="ComputeBrepCompare" CustomId="full_ui_exact_compare"></Call>':'<Call Method="ActivateGraphicalCompare" CustomId="full_ui_quick_compare"><Activate>true</Activate></Call>',vsClient.command.executeXML(a)}var A=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var R=n(0),B=n(16),P=n(5),k=n(11);t.settings={},t.sceneSettings={};var X=!1,F=!1,W=!1,G=!1,V=!1,U=R.init(),H="ws://localhost:8085/ws";try{H=g_sWebSocketAdress}catch(e){console.warn("Please define a WebSocket address!")}var j=localStorage.getItem("WVParkedSession"),z=localStorage.getItem("WVClient"),Y=!1,K={};K.blockOnLoad=!0;var Z=!1,q=!1;z&&null!==z?(K.testForSessions=!0,K.client=z):K.testForSessions=!1,j&&null!==j?(K.sessionToConnect=j,localStorage.removeItem("WVParkedSession"),Y=!0,vsClient.initialize(U,H,K)):vsClient.initialize(U,H,K),$(document.body).addClass("mobile"),vsClient.on("GetSessions",function(e){var t;try{t=_DisableSessionRestore}catch(e){t=!1}for(var n=window.location.search.substr(1),i=n.split("&"),o={},a=0,l=i;a<l.length;a++){var r=l[a],s=r.split("="),c=s[0],d=s[1];o[c]=d}void 0===o.session&&(e&&e.Session&&!Array.isArray(e.Session)&&(e.Session=[e.Session]),e.Session&&e.Session.length>0&&!t?R.showSessionRestoreDialog(e.Session):(vsClient.connect(),P.appStates.backendToken&&vsClient.SessionToken(P.appStates.backendToken)))}),vsClient.on("ConnectionLost",function(){R.blockUI("Connection lost.\n Trying to reconnect..")}),vsClient.on("ConnectionRestored",function(){R.unblockUI()}),vsClient.on("initialized",function(e){R.resizeHandler();vsClient.command.executeXML('<Call Method="GetSettings"></Call>');for(var t=window.location.search.substr(1),n=t.split("&"),o={},r=0,s=n;r<s.length;r++){var c=s[r],d=c.split("="),p=d[0],h=d[1];o[p]=h}vsClient.once("NewScene3D",function(e){var t='<Call Method="AddEventListener">';t+="<Event>ActivateInteraction</Event>",t+="<Event>DeactivateInteraction</Event>",t+="<Event>SelectionChanged</Event>",t+="<Event>SelectionChangedCustomId</Event>",t+="<Event>NodePropertiesChanged</Event></Call>",vsClient.command.executeXMLNoMirror(t),vsClient.AutoResize(),w(e)}),void 0!==o.session&&(vsClient.initOptions.sessionToConnect=o.session,Y=!0,vsClient.connect()),void 0!==o.token?(P.appStates.backendToken=decodeURIComponent(o.token),vsClient.on("UpdateScene",function(e){l(e)}),z?vsClient.sessionInfo.token=P.appStates.backendToken:vsClient.SessionToken(P.appStates.backendToken),vsClient.on("OpenFile",function(e){l(e);var t='<Call Method="AddEventListener">';t+="<Event>ActivateInteraction</Event>",t+="<Event>DeactivateInteraction</Event>",t+="<Event>SelectionChanged</Event>",t+="<Event>SelectionChangedCustomId</Event>",t+="<Event>NodePropertiesChanged</Event></Call>",vsClient.command.executeXMLNoMirror(t),vsClient.AutoResize(),w(e)}),vsClient.on("SessionInitialized",function(e){i(e),a(!0)}),vsClient.on("VisShareSave",function(e){var t={Method:"ShareSave",Token:vsClient.sessionInfo.token};vsClient.command.executeXML(JSON.stringify(t)),R.blockUI(),vsClient.once("SaveAs",function(e){R.unblockUI()})}),vsClient.on("VisShareSaveAs",function(e){var t={Method:"ShareSaveAs",Token:vsClient.sessionInfo.token};vsClient.command.executeXML(JSON.stringify(t)),R.blockUI(),vsClient.once("SaveAs",function(e){R.unblockUI()})})):(R.ribbon.deleteShareRibbon(!0),vsClient.on("SessionInitialized",function(e){i(e),a(!1)}))}),vsClient.on("PreviousPage",function(e){R.pageChange(e.Page)}),vsClient.on("NextPage",function(e){R.pageChange(e.Page)}),vsClient.on("TreeviewUpdated",function(e){"wv-modeltree"===R.paneController.leftDefaultAdapter.openPane&&(R.paneController.leftDefaultAdapter.virtualTree=e,R.paneController.leftDefaultAdapter.treePane.updateTree(R.paneController.leftDefaultAdapter.virtualTree)),"wv-modeltree"===R.paneController.rightDefaultAdapter.openPane&&(R.paneController.rightDefaultAdapter.virtualTree=e,R.paneController.rightDefaultAdapter.treePane.updateTree(R.paneController.rightDefaultAdapter.virtualTree))}),vsClient.on("SplitResultUpdated",function(e,t){-1===R.paneBadgeIdx.indexOf("wv-split")&&R.createPaneBadge("wv-split"),Array.isArray(e.Data)||(e.Data=[e.Data]);var n=e.SplitGeneralData;Array.isArray(e.Data[0].SplitDirectionId)||(e.Data[0].SplitDirectionId=[e.Data[0].SplitDirectionId]),R.paneController.leftDefaultAdapter.clearSplitGroupTable(),R.paneController.rightDefaultAdapter.clearSplitGroupTable();for(var i=0;i<e.Data[0].SplitDirectionId.length;i++){var o=e.Data[0].SplitDirectionId[i],a=A({},n,o);a.SplitDirectionId=o.Id,a.Error="SUCCESS";var l=R.paneController.leftDefaultAdapter,r={id:parseInt(a.SplitSessionId),name:a.SplitSessionName,directionId:parseInt(a.SplitDirectionId),directionName:a.SplitDirectionName,upColor:a.SplitGroupUpColor,upNumPatches:parseInt(a.SplitGroupUpNumPatches),downColor:a.SplitGroupDownColor,downNumPatches:parseInt(a.SplitGroupDownNumPatches),unassignedColor:a.SplitGroupUnassignedColor,unassignedNumPatches:parseInt(a.SplitGroupUnassignedNumPatches),directionEl:void 0,upEl:void 0,downEl:void 0,maxExplodeDistance:parseFloat(a.SplitFullExplodeDistance),sliderPos:a.SplitExplodeSliderPosition?parseFloat(a.SplitExplodeSliderPosition):0};try{_MobileRightMoreBadge&&-1!==_MobileRightMoreBadge.indexOf("wv-split")&&(l=R.paneController.rightDefaultAdapter)}catch(e){}"wv-split"===l.openPane?l.appendSplitSession(r):l.sessions.push(r)}}),vsClient.on("PresetChanged",function(e){-1!==e.Type.indexOf("WallthicknessHeatmap")&&$("#UID_PRESETS").val(""===e.Name?"USERDEF":e.Name)}),vsClient.on("GetConfigurationViewInformation",function(e){if(e.ConfigurationView){Array.isArray(e.ConfigurationView)?e.ConfigurationView:e.ConfigurationView}}),vsClient.on("SelectionChanged",function(e){e.NodeId;"wv-bom"===R.paneController.leftDefaultAdapter.openPane&&R.paneController.leftDefaultAdapter.selectCallouts(),"wv-bom"===R.paneController.rightDefaultAdapter.openPane&&R.paneController.rightDefaultAdapter.selectCallouts()}),vsClient.on("NodePropertiesChanged",function(e){if(e.General){P.appStates.drawRect="Markup_Text"!==e.General.Type;var t=e.General.Color.replace("#","");$(".mobile-filter-color-list-row").each(function(){this.id==="ColorSearchResult_"+t?$(this).css("background-color","rgb(255, 128, 0)"):$(this).css("background-color","white")})}else $(".mobile-filter-color-list-row").each(function(){$(this).css("background-color","white")})}),vsClient.on("ActivateCompare",function(e){-1===R.paneBadgeIdx.indexOf("wv-quickcompare")&&(R.createPaneBadge("wv-quickcompare"),R.paneController.render("wv-quickcompare","left"))}),vsClient.on("CalloutAutoAlignmentChanged",function(e){if(e&&e.State){var t=R.ribbon.adapter.getButton("ID_RIBBON_CALLOUTS_AUTO_ALIGNMENT");t&&t.highlight("1"===e.State)}});var Q=function(e,t){return Object.keys(e).forEach(function(n){return n===t&&delete e[n]||e[n]&&"object"==typeof e[n]&&Q(e[n],t)}),e};window.addEventListener("keyup",function(e){var t="",n="";switch(e.keyCode){case 27:;vsClient.command.executeXML('<Call Method="ActivateInteraction"><Interaction>Deactivate_AllInteractions</Interaction></Call>'),vsClient.once("ActivateInteraction",function(e){});var i=localStorage.getItem("VSWVSettings");null===i&&(i=localStorage.getItem("VSWVDefaultSettings"));var o=k.parseXML(i),a=o.Settings.Scene.Mouse.LeftButtonFunction;try{a=_MobileTouchControl}catch(e){}var l=o.Settings.Scene.Mouse.RightButtonFunction,r=o.Settings.Scene.Mouse.MiddleButtonFunction,s='<Call Method="SetSceneSettings">';s+="<Settings><Scene><Mouse><LeftButtonFunction> "+a+" </LeftButtonFunction>",s+="<RightButtonFunction>"+l+"</RighButtonFunction>",s+="<MiddleButtonFunction>"+r+"</MiddleButtonFunction></Mouse></Scene></Settings></Call>",vsClient.command.executeXML(s),P.appStates.selectionMode="Select",t='<Call Method="SetSelectionMode"><SelectionMode>'+P.appStates.selectionMode+"</SelectionMode></Call>",vsClient.command.executeXML(t),$("#mobile-text-search-panel").hide(),R.hideAll(),-1!==R.paneBadgeIdx.indexOf("wv-quickcompare")&&R.togglePaneBadge("QuickComparePane");var c=R.ribbon.adapter.getButtonByUID("rQuickCompare");c&&c.highlight(!1);break;case 46:n='<Call Method="ModifySelection"><SelectionModifier>Delete</SelectionModifier></Call>',vsClient.command.executeXML(n)}},!1),window.addEventListener("keydown",function(e){var t="";switch(e.keyCode){case e.altKey&&65:t='<Call Method="ShowAll"></Call>';break;case e.altKey&&73:t='<Call Method="ModifySelection"><SelectionModifier>Isolate</SelectionModifier></Call>';break;case e.altKey&&72:t='<Call Method="ModifySelection"><SelectionModifier>Hide</SelectionModifier></Call>';break;case e.altKey&&71:t='<Call Method="ModifySelection"><SelectionModifier>Ghost</SelectionModifier></Call>';break;case e.altKey&&83:t='<Call Method="ModifySelection"><SelectionModifier>UnGhost</SelectionModifier></Call>';break;case e.altKey&&65:t='<Call Method="ShowAll"></Call>';break;case e.ctrlKey&&65:e.preventDefault(),t=e.shiftKey?'<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>':'<Call Method="SelectAllGeometries"></Call>';break;case e.ctrlKey&&e.shiftKey&&65:t='<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>';break;case e.ctrlKey&&73:t='<Call Method="ModifySelection"><SelectionModifier>Invert</SelectionModifier></Call>';break;case e.ctrlKey&&67:t='<Call Method="ModifySelection"><SelectionModifier>Copy</SelectionModifier></Call>';break;case e.ctrlKey&&86:t='<Call Method="ModifySelection"><SelectionModifier>PasteToSelection</SelectionModifier></Call>';break;case e.ctrlKey&&90:t='<Call Method="Undo"><Steps>1</Steps></Call>';break;case e.ctrlKey&&85:return e.preventDefault(),t='<Call Method="GetSceneSettings"></Call>',vsClient.command.executeXMLAsync(t),void vsClient.once("GetSceneSettings",function(e){var n=e.Settings.Scene.Visualization.ShowGrid;n="true"===n?"false":"true",t='<Call Method="SetSceneSettings">',t+="<Settings><Scene><Visualization><ShowGrid>"+n,t+="</ShowGrid></Visualization></Scene></Settings></Call>",vsClient.command.executeXMLAsync(t)});case 112:return e.preventDefault(),void $("#wv-ribbon-about").click();default:return}vsClient.command.executeXML(t)},!1),vsClient.on("Relay",function(e){var t=e.__text__;if("VisShare_SaveAsDone"===t)R.toast(!0);else if(t.startsWith("ShowNativeLoadingModal_")&&!Y){var n=t.split("_");n.shift();var i=n.join("_"),o=R.openNativeLoadingModal(i,N.bind(vsClient));o||N(i)}else if(t.startsWith("VisShareBlockUI")){var a=t.split("_")[1];vsClient.blockUI(),vsClient.once(a,function(e){vsClient.unblockUI()})}})},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a,l=n(6),r=n(41),s=n(4),c=n(10),d="http://www.w3.org/2000/svg",p="http://www.w3.org/1999/xlink",h=[["rgba(0,0,0,1)","rgba(128,0,0,1)","rgba(0,128,0,1)","rgba(128,128,0,1)","rgba(0,0,128,1)"],["rgba(128,0,128,1)","rgba(0,128,128,1)","rgba(192,192,192,1)","rgba(192,220,192,1)","rgba(166,202,240,1)"],["rgba(255,251,240,1)","rgba(160,160,164,1)","rgba(128,128,128,1)","rgba(255,0,0,1)","rgba(0,255,0,1)"],["rgba(255,255,0,1)","rgba(0,0,255,1)","rgba(255,0,255,1)","rgba(0,255,255,1)","rgba(255,255,255,1)"]],u=[["rgb(0,0,0)","rgb(128,0,0)","rgb(0,128,0)","rgb(128,128,0)","rgb(0,0,128)"],["rgb(128,0,128)","rgb(0,128,128)","rgb(192,192,192)","rgb(192,220,192)","rgb(166,202,240)"],["rgb(255,251,240)","rgb(160,160,164)","rgb(128,128,128)","rgb(255,0,0)","rgb(0,255,0)"],["rgb(255,255,0)","rgb(0,0,255)","rgb(255,0,255)","rgb(0,255,255)","rgb(255,255,255)"]];try{o=_ColorPalette}catch(e){o=u}try{a=_ColorPaletteWithAlpha}catch(e){a=h}var m=function(e){function t(t,n){function i(e){var t;return t=c(e._originalInput?e._originalInput:e),"#"+Math.round(255*t.toRgb().a).toString(16).toUpperCase()+t.toHex().toUpperCase()}function l(e){var t;return t=c(e._originalInput?e._originalInput:e),"#"+t.toHex().toUpperCase()}function s(e){var t;return t=e._originalInput?c(e._originalInput).toRgb():c(e).toRgb(),"rgb("+t.r+", "+t.g+", "+t.b+")"}function h(e){var t,n;return e._originalInput?t=c(e._originalInput).toRgb():(n=e.slice(1,3),t=c("#"+e.slice(3)+n).toRgb()),"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")"}var u=e.call(this)||this;u.nodes=[],u.close=function(e){e.target===u.mount&&u.mount.contains(e.target)||(u.mount.style.display="none",$(u.pixelBox).remove(),document.body.removeChild(u.mount),document.removeEventListener("click",u.close))},u.pickPixel=function(e){var t=this.canvas.getContext("2d"),n=e.pageX-this.canvas.getBoundingClientRect().left,i=e.pageY-this.canvas.getBoundingClientRect().top;this.pixelBox.style.top=e.pageY+22+"px",this.pixelBox.style.left=e.pageX+22+"px";var o=t.getImageData(n,i,1,1),a=o.data;this.colorPrevField.style.backgroundColor="rgb("+a[0]+", "+a[1]+", "+a[2]+")",this.colorPrevText.textContent="rgb("+a[0]+", "+a[1]+", "+a[2]+")"},u.selectPixelColor=function(e){e.preventDefault(),e.stopPropagation(),$(this.pixelBox).hide(),this.canvas.removeEventListener("mousemove",this.pickPixel),this.canvas.removeEventListener("mousedown",this.selectPixelColor);var t=this.colorPrevText.textContent.replace("rgb","rgba").replace(")"," ,1)");this.emit("customColorChosen",t),$(this.spectrumEl).spectrum("destroy")},u.mount=document.createElement("div"),u.mount.style.position="absolute",u.activeColor=t,u.showAlpha=n,u.pixelBox=document.createElement("div"),u.pixelBox.className="color-pipette-preview-wrapper",u.colorPrevField=document.createElement("span"),u.colorPrevField.className="color-pipette-preview-field",u.colorPrevText=document.createElement("span"),u.colorPrevText.className="color-pipette-preview-text",u.pixelBox.appendChild(u.colorPrevField),u.pixelBox.appendChild(u.colorPrevText),document.body.appendChild(u.pixelBox),$(u.pixelBox).hide(),document.body.appendChild(u.mount),setTimeout(function(){document.addEventListener("click",u.close)}),u.spectrumEl=document.createElement("div"),u.spectrumEl.id="spectrum-picker-el",u.mount.appendChild(u.spectrumEl);var m=$(u.spectrumEl);m.attr("alpha",u.showAlpha),$(u.spectrumEl).spectrum({flat:!0,color:u.activeColor,showAlpha:u.showAlpha,showInput:!0,showInitial:!0,showPalette:!0,showSelectionPalette:!0,maxSelectionSize:40,preferredFormat:"rgb",localStorageKey:"customColorStorage",palette:u.showAlpha?a:o,show:function(e){$(".sp-alpha-enabled").length>0&&$(".color-palette-pipette-picker-wrapper").css("top","274px"),"false"===$(this).attr("alpha")?($(".sp-input").val(s(e)),$("#sp-hex-input").val(l(e)),$(".sp-input").on("keyup",function(e){13===e.keyCode&&($(this).val(s(this.value)),$("#sp-hex-input").val(l(this.value)))}),$(".sp-input").blur(function(e){$(this).val(s(this.value)),$("#sp-hex-input").val(l(this.value))})):($("#sp-hex-input").val("#"+i(e)),$(".sp-input").on("keyup",function(e){13===e.keyCode&&$("#sp-hex-input").val(i(this.value))}),$(".sp-input").blur(function(e){$("#sp-hex-input").val(i(this.value))}))},move:function(e){"false"===$(this).attr("alpha")?($(".sp-input").val(s(e)),$("#sp-hex-input").val(l(e))):$("#sp-hex-input").val(i(e))},change:function(e){var t;t=u.showAlpha?s(e):h(e),u.chosenColor=t}});var f=Math.min(window.innerWidth,document.documentElement.offsetWidth),v=Math.max(window.innerHeight,document.documentElement.offsetHeight);u.mount.style.top=.5*(v-300)+"px",u.mount.style.left=.5*(f-280)+"px",u.mount.className="wv-color-picker-popup";var g=$(u.mount);u.hexInputEl=document.createElement("input"),u.hexInputEl.id="sp-hex-input",u.hexInputEl.className="sp-input",u.hexInputEl.style.marginTop="5px",$(u.hexInputEl).attr("alpha",u.showAlpha),u.showAlpha?$(u.hexInputEl).val(i(u.activeColor)):$(u.hexInputEl).val(l(u.activeColor));var C=document.createElement("div");C.className="color-palette-pipette-picker-wrapper",u.showAlpha&&(C.style.top="274px");var E=document.createElement("span");E.className="color-palette-pipette-picker-icon";var _=new r.WVTooltip(E);_.setTitle(u.translateTooltip("ID_COLOR_PICKER_PALETTE_CHOOSE_FROM_PART")),_.setOrientation("bottom");var b=document.createElementNS(d,"svg");b.style.width="25px",b.style.height="25px";var I=document.createElementNS(d,"use");I.setAttributeNS(p,"href","#10_auswahl_durch_farbe"),b.appendChild(I),E.appendChild(b);var S=document.createElement("span");S.className="color-palette-pipette-picker-icon",S.style.marginLeft="5px";var y=new r.WVTooltip(S);y.setTitle(u.translateTooltip("ID_COLOR_PICKER_PALETTE_CHOOSE_FROM_PIXEL")),y.setOrientation("bottom");var w=document.createElementNS(d,"svg");w.style.width="25px",w.style.height="25px",w.style.position="relative",w.style.top="2px";var M=document.createElementNS(d,"use");return M.setAttributeNS(p,"href","#palette_pipette"),w.appendChild(M),S.appendChild(w),C.appendChild(E),C.appendChild(S),u.pickPixel=u.pickPixel.bind(u),u.selectPixelColor=u.selectPixelColor.bind(u),w.onclick=function(e){e.preventDefault(),e.stopPropagation(),u.canvas=vsClient.vsCanvas.canvas2D,$(u.pixelBox).show(),$(u.mount).hide(),u.canvas.addEventListener("mousemove",u.pickPixel),u.canvas.addEventListener("mousedown",u.selectPixelColor)},b.onclick=function(e){e.preventDefault(),e.stopPropagation(),$(u.mount).hide();vsClient.command.executeXML('<Call Method="GetSelectedNodes"></Call>'),vsClient.once("GetSelectedNodes",function(e){Array.isArray(e.NodeId)?u.nodes=e.NodeId:u.nodes=[e.NodeId],vsClient.once("NodePropertiesChanged",function(e){if(e.General){for(var t=h(e.General.Color),n='<Call Method="SetSelectedNodes">',i=u.nodes.length,o=0;o<i;o++)n+="<NodeId>"+u.nodes[o]+"</NodeId>";n+="</Call>",vsClient.command.executeXML(n),vsClient.once("SetSelectedNodes",function(){u.emit("customColorChosen",t),$(u.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})}else vsClient.once("NodePropertiesChanged",function(e){if(e.General){var t=h(e.General.Color),n='<Call Method="SetSelectedNodes">'+u.nodes.toString()+"</Call>";vsClient.command.executeXML(n),vsClient.once("SetSelectedNodes",function(){u.emit("customColorChosen",t),$(u.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})}else $(u.spectrumEl).spectrum("destroy"),vsClient.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')})})})},$(".sp-input-container").append(u.hexInputEl),$(".sp-picker-container").append(C),$(u.hexInputEl).blur(function(e){"false"===$(this).attr("alpha")?($(".sp-input").val(s(this.value)),$(this).val(l(this.value))):($(".sp-input").val(h(this.value)),$(this).val(i(this.value)))}),$(u.hexInputEl).on("keyup",function(e){13===e.keyCode&&($("#spectrum-picker-el").spectrum("set",this.value),"false"===$(this).attr("alpha")?($(".sp-input").val(s(this.value)),$(this).val(l(this.value))):($(".sp-input").val(h(this.value)),$(this).val(i(this.value))))}),g.find(".sp-cancel").on("click",function(e){$(u.pixelBox).remove(),m.spectrum("destroy")}),g.find(".sp-choose").on("click",function(e){$(u.pixelBox).remove();var t=c(m.spectrum("get")),n=t.getAlpha();t.setAlpha(1===n?1:n);var i=u.showAlpha?h(t._originalInput):s(t._originalInput);u.emit("customColorChosen",i),m.spectrum("destroy")}),u}return i(t,e),t.prototype.translateTooltip=function(e){var t=s.settings.lang;return _lang_data[e]&&_lang_data[e][t]?_lang_data[e][t]:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e][t]?_custom_lang_data[e][t]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data&&_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e},t}(l.EventEmitter);t.CustomPalette=m},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function o(e,t){var n,o,r,s,c,d,p=!1;t||(t={}),n=t.debug||!1;try{r=a(),s=document.createRange(),c=document.getSelection(),d=document.createElement("span"),d.textContent=e,d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",document.body.appendChild(d),s.selectNode(d),c.addRange(s);if(!document.execCommand("copy"))throw new Error("copy command was unsuccessful");p=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),p=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),o=i("message"in t?t.message:l),window.prompt(o,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(s):c.removeAllRanges()),d&&document.body.removeChild(d),r()}return p}var a=n(39),l="Copy to clipboard: #{key}, Enter";e.exports=o},function(e,t,n){"use strict";function i(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];if(!c.isType(i,"String"))throw new TypeError(i+" should be a string")}return e}function o(e){if(!c.isType(e.include,"Boolean","Undefined"))throw new TypeError("declaration.include should be a string or undefined");return c.isType(e.include,"Boolean")||(e.include=d.declaration.include),e}function a(e){if(!c.isType(e.include,"Boolean","Undefined"))throw new TypeError("dtdOptions.include should be a string or undefined");return c.isType(e.include,"Boolean")||(e.include=d.dtd.include),e}function l(e){for(var t in e)if(e.hasOwnProperty(t)&&!c.isType(e[t],"Function"))throw new TypeError("options.typeHandlers['"+t+"'] should be a Function");return e}function r(e){for(var t in e)if(e.hasOwnProperty(t)&&!c.isType(e[t],"Function"))throw new TypeError("options.wrapHandlers['"+t+"'] should be a Function");return e}function s(e){if(!c.isType(e.aliasString,"String","Undefined"))throw new TypeError("options.aliasString should be a string or undefined");if(c.isType(e.aliasString,"String")||(e.aliasString=d.aliasString),!c.isType(e.attributeString,"String","Undefined"))throw new TypeError("options.attributeString should be a string or undefined");if(c.isType(e.attributeString,"String")||(e.attributeString=d.attributeString),!c.isType(e.cdataInvalidChars,"Boolean","Undefined"))throw new TypeError("options.cdataInvalidChars should be a boolean or undefined");if(c.isType(e.cdataInvalidChars,"Boolean")||(e.cdataInvalidChars=d.cdataInvalidChars),!c.isType(e.cdataKeys,"Array","Undefined"))throw new TypeError("options.cdataKeys should be an Array or undefined");if(c.isType(e.cdataKeys,"Array")||(e.cdataKeys=d.cdataKeys),e.cdataKeys=i(e.cdataKeys),!c.isType(e.declaration,"Object","Undefined"))throw new TypeError("options.declaration should be an Object or undefined");if(c.isType(e.declaration,"Object")||(e.declaration=d.declaration),e.declaration=o(e.declaration),!c.isType(e.dtd,"Object","Undefined"))throw new TypeError("options.dtd should be an Object or undefined");if(c.isType(e.dtd,"Object")||(e.dtd=d.dtd),e.dtd=a(e.dtd),!c.isType(e.format,"Object","Undefined"))throw new TypeError("options.format should be an Object or undefined");if(c.isType(e.format,"Object")||(e.format=d.format),!c.isType(e.typeHandlers,"Object","Undefined"))throw new TypeError("options.typeHandlers should be an Object or undefined");if(c.isType(e.typeHandlers,"Object")||(e.typeHandlers=d.typeHandlers),e.typeHandlers=l(e.typeHandlers),!c.isType(e.valueString,"String","Undefined"))throw new TypeError("options.valueString should be a string or undefined");if(c.isType(e.valueString,"String")||(e.valueString=d.valueString),!c.isType(e.wrapHandlers,"Object","Undefined"))throw new TypeError("options.wrapHandlers should be an Object or undefined");return c.isType(e.wrapHandlers,"Object")||(e.wrapHandlers=d.wrapHandlers),e.wrapHandlers=r(e.wrapHandlers),e}var c=n(17),d={aliasString:"=",attributeString:"@",cdataInvalidChars:!1,cdataKeys:[],declaration:{include:!0},dtd:{include:!1},format:{},typeHandlers:{},valueString:"#",wrapHandlers:{}};Object.freeze(d),t.validateOptions=s},function(e,t,n){"use strict";function i(e){return new c.default(e)}var o=n(19);t.XmlAttribute=o.default;var a=n(20);t.XmlCdata=a.default;var l=n(12);t.XmlCharRef=l.default;var r=n(8);t.XmlComment=r.default;var s=n(21);t.XmlDecl=s.default;var c=n(35);t.XmlDocument=c.default;var d=n(22);t.XmlDtd=d.default;var p=n(23);t.XmlDtdAttlist=p.default;var h=n(24);t.XmlDtdElement=h.default;var u=n(25);t.XmlDtdEntity=u.default;var m=n(26);t.XmlDtdNotation=m.default;var f=n(27);t.XmlDtdParamEntityRef=f.default;var v=n(28);t.XmlElement=v.default;var g=n(13);t.XmlEntityRef=g.default;var C=n(2);t.XmlNode=C.default;var E=n(9);t.XmlProcInst=E.default;var _=n(14);t.XmlText=_.default,t.document=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(7),a=n(1),l=n(8),r=n(21),s=n(22),c=n(28),d=n(2),p=n(9),h=function(e){function t(t){e.call(this),e.prototype.insertChild.call(this,new c.default(t))}return i(t,e),t.prototype.comment=function(e,t){var n=new l.default(e);return this.insertChild(n,t),n},t.prototype.decl=function(e){var t=new r.default(e);return this.insertChild(t,0),t},t.prototype.dtd=function(e,t,n,i){var o=new s.default(e,t,n);return a.isType(i,"Undefined")&&(i=this._children[0]instanceof r.default?1:0),this.insertChild(o,i),o},t.prototype.insertChild=function(t,n){if(!(t instanceof l.default||t instanceof r.default||t instanceof s.default||t instanceof p.default))throw new TypeError("node should be an instance of XmlComment, XmlDecl, XmlDtd, or XmlProcInst");if(t instanceof l.default||t instanceof p.default){if(this._children[0]instanceof r.default&&0===n)throw new Error("XmlComment or XmlProcInst node should be inserted after the XmlDecl node")}else if(t instanceof r.default){if(this._children[0]instanceof r.default)throw new Error("XmlDocument node should only contain one XmlDecl node");if(0!==n)throw new Error("XmlDecl node should be inserted at the beginning of an XmlDocument node")}else if(t instanceof s.default){if(this._children[0]instanceof r.default&&0===n)throw new Error("XmlDtd node should be inserted after the XmlDecl node");for(var i=0;i<n&&i<this._children.length;i++)if(this._children[i]instanceof c.default)throw new Error("XmlDtd node should be inserted before the XmlElement node");for(var o=0,a=this._children;o<a.length;o++){var d=a[o];if(d instanceof s.default)throw new Error("XmlDocument node should only contain one XmlDtd node")}}return e.prototype.insertChild.call(this,t,n)},t.prototype.procInst=function(e,t,n){var i=new p.default(e,t);return this.insertChild(i,n),i},t.prototype.removeChild=function(t){if(t instanceof c.default)throw new Error("XmlElement nodes cannot be removed from XmlDocument nodes");return e.prototype.removeChild.call(this,t)},t.prototype.removeChildAtIndex=function(t){if(this._children[t]instanceof c.default)throw new Error("XmlElement nodes cannot be removed from XmlDocument nodes");return e.prototype.removeChildAtIndex.call(this,t)},t.prototype.root=function(){for(var e=0,t=this._children;e<t.length;e++){var n=t[e];if(n instanceof c.default)return n}throw new Error("XmlDocument does not contain a root node")},t.prototype.toString=function(e){void 0===e&&(e={}),o.validateStringOptions(e);for(var t="",n=0,i=this._children;n<i.length;n++){t+=i[n].toString(e),e.pretty&&(t+=e.newline)}var a=t.length-e.newline.length;return t.substr(a)===e.newline&&(t=t.substr(0,a)),t},t}(d.default);Object.defineProperty(t,"__esModule",{value:!0}),t.default=h},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function l(){f&&u&&(f=!1,u.length?m=u.concat(m):v=-1,m.length&&r())}function r(){if(!f){var e=o(l);f=!0;for(var t=m.length;t;){for(u=m,m=[];++v<t;)u&&u[v].run();v=-1,t=m.length}u=null,f=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var d,p,h=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var u,m=[],f=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||f||o(r)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[s]=i,r(s),s++}function o(e){delete c[e]}function a(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function l(e){if(d)setTimeout(l,0,e);else{var t=c[e];if(t){d=!0;try{a(t)}finally{o(e),d=!1}}}}if(!e.setImmediate){var r,s=1,c={},d=!1,p=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){r=function(e){t.nextTick(function(){l(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;r=function(t){var n=p.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){r=function(e){setTimeout(l,0,e)}}(),h.setImmediate=i,h.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(31),n(36))},function(e,t,n){(function(e){function i(e,t){this._id=e,this._clearFn=t}var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;t.setTimeout=function(){return new i(a.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(37),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(31))},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.Root=1]="Root",e[e.ProductOccurrence=2]="ProductOccurrence",e[e.DoNotUse1=3]="DoNotUse1",e[e.DoNotUse2=4]="DoNotUse2",e[e.Ri_BrepModel=5]="Ri_BrepModel",e[e.Ri_PolyBrepModel=6]="Ri_PolyBrepModel",e[e.Ri_Set=7]="Ri_Set",e[e.Ri_PolyWire=8]="Ri_PolyWire",e[e.Ri_TessMarkup=9]="Ri_TessMarkup",e[e.DoNotUse3=10]="DoNotUse3",e[e.Part=11]="Part",e[e.AxisRoot=12]="AxisRoot",e[e.Axis=13]="Axis",e[e.PMIView=14]="PMIView",e[e.Annotation=15]="Annotation",e[e.PLACEHOLDER_AnnotationItem=16]="PLACEHOLDER_AnnotationItem",e[e.AnnotationReference=17]="AnnotationReference",e[e.AnnotationSet=18]="AnnotationSet",e[e.Curve=19]="Curve",e[e.Line=20]="Line",e[e.Plane=21]="Plane",e[e.Direction=22]="Direction",e[e.Point=23]="Point",e[e.PointSet=24]="PointSet",e[e.CoordinateSystem=25]="CoordinateSystem",e[e.Handle_Root=26]="Handle_Root",e[e.Handle_Arrow=27]="Handle_Arrow",e[e.Handle_Sphere=28]="Handle_Sphere",e[e.Handle_Curlyarrow=29]="Handle_Curlyarrow",e[e.Solid=30]="Solid",e[e.Wire=31]="Wire",e[e.AnnotationItem=32]="AnnotationItem",e[e.Markup_Text=33]="Markup_Text",e[e.Dimensioning=34]="Dimensioning",e[e.PointMarker=35]="PointMarker",e[e.EdgeMarker=36]="EdgeMarker",e[e.CircleMarker=37]="CircleMarker",e[e.AxisMarker=38]="AxisMarker",e[e.ReferenceLine=39]="ReferenceLine",e[e.LineMarker=40]="LineMarker",e[e.TriangleMesh=41]="TriangleMesh",e[e.Scene=42]="Scene",e[e.Markup_Circle=43]="Markup_Circle",e[e.Markup_Rectangle=44]="Markup_Rectangle",e[e.Markup_Freehand=45]="Markup_Freehand",e[e.CutGeometry_Surface=46]="CutGeometry_Surface",e[e.CutGeometry_Wire=47]="CutGeometry_Wire",e[e.PmiMarkup_Unknown=48]="PmiMarkup_Unknown",e[e.PmiMarkup_Text=49]="PmiMarkup_Text",e[e.PmiMarkup_Dimension=50]="PmiMarkup_Dimension",e[e.PmiMarkup_Arrow=51]="PmiMarkup_Arrow",e[e.PmiMarkup_Balloon=52]="PmiMarkup_Balloon",e[e.PmiMarkup_CircleCenter=53]="PmiMarkup_CircleCenter",e[e.PmiMarkup_Coordinate=54]="PmiMarkup_Coordinate",e[e.PmiMarkup_Datum=55]="PmiMarkup_Datum",e[e.PmiMarkup_Fastener=56]="PmiMarkup_Fastener",e[e.PmiMarkup_Gdt=57]="PmiMarkup_Gdt",e[e.PmiMarkup_Locator=58]="PmiMarkup_Locator",e[e.PmiMarkup_MeasurementPoint=59]="PmiMarkup_MeasurementPoint",e[e.PmiMarkup_Roughness=60]="PmiMarkup_Roughness",e[e.PmiMarkup_Welding=61]="PmiMarkup_Welding",e[e.PmiMarkup_Table=62]="PmiMarkup_Table",e[e.PmiMarkup_Other=63]="PmiMarkup_Other",e[e.OffsetLine=64]="OffsetLine",e[e.Drawing=65]="Drawing",e[e.Drawing_Model=66]="Drawing_Model",e[e.Drawing_Sheet=67]="Drawing_Sheet",e[e.Drawing_View=68]="Drawing_View",e[e.Drawing_Entity=69]="Drawing_Entity",e[e.Drawing_Block=70]="Drawing_Block",e[e.Drawing_BlockBasic=71]="Drawing_BlockBasic",e[e.Drawing_BlockOperator=72]="Drawing_BlockOperator",e[e.Drawing_BlockBackground=73]="Drawing_BlockBackground",e[e.Drawing_ClipFrame=74]="Drawing_ClipFrame",e[e.Drawing_Curve=75]="Drawing_Curve",e[e.Drawing_FilledArea=76]="Drawing_FilledArea",e[e.Drawing_Picture=77]="Drawing_Picture",e[e.Drawing_Vertices=78]="Drawing_Vertices",e[e.Dummy=79]="Dummy",e[e.CutGeometry_Set=80]="CutGeometry_Set",e[e.MasterRootNode=81]="MasterRootNode",e[e.MarkupSet=82]="MarkupSet",e[e.DataAnalysisResult=83]="DataAnalysisResult",e[e.Markup=84]="Markup",e[e.UnitTranslation=85]="UnitTranslation",e[e.Document2D=86]="Document2D",e[e.Various=4294967294]="Various",e[e.Unknown=4294967295]="Unknown"}(t.NodeType||(t.NodeType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.attributesRow=[],this.attributes=[],this.orientation="top",this.triggerTime=1e3,this.isActive=!1,this.anchorEl=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="webviewer-tooltip-wrapper",this.titleEl=document.createElement("span"),this.titleEl.className="webviewer-tooltip-title",this.attributeWrapper=document.createElement("ul"),this.attributeWrapper.className="webviewer-tooltip-attributes-wrapper",$(this.attributeWrapper).hide(),this.wrapperEl.appendChild(this.titleEl),this.wrapperEl.appendChild(this.attributeWrapper),this.anchorEl.onmouseenter=function(e){t.isActive=!0,setTimeout(function(){t.isActive&&0===document.getElementsByClassName("webviewer-tooltip-wrapper").length?t.show():t.isActive&&($(".webviewer-tooltip-wrapper").each(function(){$(this).remove()}),t.show())},t.triggerTime)},this.anchorEl.onmouseleave=function(e){t.isActive=!1,t.hide()}}return e.prototype.addAttribute=function(e){if(""!==e&&void 0!==e){0===this.attributes.length&&$(this.attributeWrapper).show();var t=document.createElement("li");t.className="webviewer-tooltip-attribute",t.innerHTML=e.replace(/\\n/g,"\r"),this.attributes.push(e),this.attributesRow.push(t),this.attributeWrapper.appendChild(t)}},e.prototype.show=function(){var e=this.anchorEl.getBoundingClientRect().top;if((this.title&&""!==this.title&&null!==this.title||0!==this.attributesRow.length)&&0!==e){document.body.appendChild(this.wrapperEl),this.wrapperEl.offsetWidth+this.anchorEl.getBoundingClientRect().left>document.body.offsetWidth?this.wrapperEl.style.left=document.body.offsetWidth-this.wrapperEl.offsetWidth+"px":this.wrapperEl.style.left=this.anchorEl.getBoundingClientRect().left+"px";var t=this.wrapperEl.offsetHeight;"top"===this.orientation?this.wrapperEl.style.bottom=e-t<0?document.body.offsetHeight-e-this.anchorEl.offsetHeight-5+"px":document.body.offsetHeight-e+5+"px":e+t>document.body.offsetHeight?this.wrapperEl.style.bottom=document.body.offsetHeight-e+5+"px":this.wrapperEl.style.bottom=document.body.offsetHeight-e-t-this.anchorEl.offsetHeight-5+"px"}},e.prototype.hide=function(){$(this.wrapperEl).remove()},e.prototype.setTitle=function(e){this.title=e,this.titleEl.innerHTML=e?e.replace(/\\n/g,"\r"):""},e.prototype.setOrientation=function(e){this.orientation=e},e.prototype.setTriggerTime=function(e){this.triggerTime=e},e.prototype.removeAttributes=function(){this.attributes=[];for(var e=this.attributesRow.length,t=0;t<e;t++)$(this.attributesRow[t]).remove();this.attributesRow=[],$(this.attributeWrapper).hide()},e.prototype.setKey=function(e){this.key=e},e}();t.WVTooltip=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(50),a=n(49),l=n(48),r=function(){function e(e,t,n){var r=this;this.tooltipsActive=!1,this.client=e,this.file=t,this.callback=n,this.modalWrapper=document.createElement("div"),this.modalWrapper.className="native-loading-modal",this.isOpen=!0,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscPressed=this.detectEscPressed.bind(this),this.setTesselation=this.setTesselation.bind(this),this.setImportMode=this.setImportMode.bind(this),this.setSliderStep=this.setSliderStep.bind(this),this.detectTooltipOusideClick=this.detectTooltipOusideClick.bind(this);var s=document.createElement("span");s.className="native-loading-modal-title",s.textContent=i.translate("ID_IMPORTDIALOG_TITLE_TEXT"),s.id="ID_IMPORTDIALOG_TITLE_TEXT",i.translationObjects.push(s),this.modalWrapper.appendChild(s),this.tooltipCircle=document.createElement("i"),this.tooltipCircle.className="fas fa-question-circle mobile-native-loading-tooltip-toggle",this.modalWrapper.appendChild(this.tooltipCircle);var c=document.createElement("div");c.className="native-loading-modal-content-wrapper",c.style.marginTop="20px",c.style.height="calc(50% - 20px)",this.modalWrapper.appendChild(c),this.slider=new l.MobileLoadingSlider(c,!0,this.setSliderStep),this.preferGeometrySwitch=new a.MobileOptionToggle(c,"ID_IMPORTDIALOG_SWITCH_READMODE_TEXT_BREP","ID_IMPORTDIALOG_SWITCH_READMODE_TEXT_TESSELLATION","ID_IMPORTDIALOG_SWITCH_READMODE_TOOLTIP",this.setTesselation),this.prefer3DSwitch=new a.MobileOptionToggle(c,"ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TEXT_2D","ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TEXT_3D","ID_IMPORTDIALOG_SWITCH_IMPORTMODE_TOOLTIP",this.setImportMode);try{_Hide2DSwitch&&$(this.prefer3DSwitch.wrapperEl).hide()}catch(e){}this.buttonWrapper=document.createElement("div"),this.buttonWrapper.className="native-loading-buttons",this.modalWrapper.appendChild(this.buttonWrapper),this.skipButton=document.createElement("button"),this.skipButton.textContent=i.translate("ID_IMPORTDIALOG_BUTTON_SKIP"),this.skipButton.id="ID_IMPORTDIALOG_BUTTON_SKIP",i.translationObjects.push(this.skipButton),this.skipButton.className="native-loading-skip",this.buttonWrapper.appendChild(this.skipButton),$(this.skipButton).click(function(e){r.skip()}),this.rememberMeSwitch=new o.MobileDefSwitch(this.buttonWrapper,"ID_IMPORTDIALOG_SWITCH_DONOTSHOWAGAIN_TEXT","remember-me-switch",!1),this.submitButton=document.createElement("button"),this.submitButton.className="native-loading-ok",this.submitButton.textContent=i.translate("ID_IMPORTDIALOG_BUTTON_OK"),this.submitButton.id="ID_IMPORTDIALOG_BUTTON_OK",i.translationObjects.push(this.submitButton),this.buttonWrapper.appendChild(this.submitButton),$(this.submitButton).click(function(e){var t=r.slider.getStep(),n={prefer2D:r.prefer3DSwitch.getVal(),preferTesselation:r.preferGeometrySwitch.getVal(),step:t,rememberMe:r.rememberMeSwitch.getVal()};r.initSettings=n,r.submit(n)}),document.body.appendChild(this.modalWrapper);var d=localStorage.getItem("nativeLoadingSettings");if(null!==d){var p=JSON.parse(d);this.initSettings=p}else this.initSettings={step:3,prefer2D:!0,rememberMe:!1,preferTesselation:!0},this.slider.stepTo(3);this.resize(),this.tooltipCircle.onclick=function(e){r.setTooltipMode(!r.tooltipsActive)}}return e.prototype.setCallback=function(e){this.callback=e},e.prototype.setTesselation=function(e){this.preferGeometrySwitch&&(this.slider.setTesselationMode(!e),e?this.preferGeometrySwitch.setHighlightColor("darkgreen"):this.preferGeometrySwitch.setHighlightColor("darkred"))},e.prototype.setImportMode=function(e){},e.prototype.setSliderStep=function(e){if(this.preferGeometrySwitch&&this.prefer3DSwitch){var t=void 0;switch(e){case 0:t=_IncludeHiddenNativeLoading;break;case 1:t=_CompleteNativeLoading;break;case 2:t=_ModerateNativeLoading;break;case 3:t=_FastNativeLoading}-1!==t.indexOf("PreferGeometry")&&this.preferGeometrySwitch.setVal(!1);-1!==t.indexOf("PreferTessellation")&&this.preferGeometrySwitch.setVal(!0);-1!==t.indexOf("Prefer3D")&&this.prefer3DSwitch.setVal(!0);-1!==t.indexOf("Prefer2D")&&this.prefer3DSwitch.setVal(!1)}},e.prototype.resize=function(){this.slider.resize(),this.prefer3DSwitch.resize(),this.preferGeometrySwitch.resize()},e.prototype.skip=function(){var e=this.rememberMeSwitch.getVal();this.initSettings.rememberMe=e,localStorage.setItem("nativeLoadingSettings",JSON.stringify(this.initSettings)),this.hide()},e.prototype.hide=function(e){document.body.removeEventListener("click",this.detectOutsideClick),document.body.removeEventListener("keyup",this.detectEscPressed),this.isOpen=!1,e||(this.callback(this.file),this.client.emit("@NativeLoad",this.file)),this.file=void 0,this.callback=void 0,$(this.modalWrapper).hide()},e.prototype.setFile=function(e){this.file=e},e.prototype.show=function(){this.isOpen=!0,$(this.modalWrapper).show(),this.setTooltipMode(!1),document.body.addEventListener("click",this.detectOutsideClick),document.body.addEventListener("keyup",this.detectEscPressed),null===localStorage.getItem("nativeLoadingSettings")&&(this.initSettings={step:3,prefer2D:!0,preferTesselation:!0}),this.prefer3DSwitch.setVal(this.initSettings.prefer2D),this.preferGeometrySwitch.setVal(this.initSettings.preferTesselation),this.slider.stepTo(this.initSettings.step),this.rememberMeSwitch.setVal(!1);var e=this.submitButton.offsetWidth+this.skipButton.offsetWidth+100;this.rememberMeSwitch.wrapperEl.style.width="calc(100% - "+e+"px)",this.rememberMeSwitch.titleEl.style.overflow="hidden",this.rememberMeSwitch.titleEl.style.textOverflow="ellipsis",this.rememberMeSwitch.titleEl.style.whiteSpace="nowrap",this.rememberMeSwitch.titleEl.style.width="calc(100% - 40px)"},e.prototype.detectOutsideClick=function(e){e.target===this.modalWrapper||this.modalWrapper.contains(e.target)||this.hide(!0)},e.prototype.setTooltipMode=function(e){this.tooltipsActive=e,this.prefer3DSwitch.setTooltipMode(e),this.preferGeometrySwitch.setTooltipMode(e),this.slider.setTooltipMode(e),e?(this.showTooltip(),this.buttonWrapper.style.pointerEvents="none",$(this.tooltipCircle).addClass("mobile-native-loading-tooltip-toggle-active")):(this.buttonWrapper.style.pointerEvents="",$(this.tooltipCircle).removeClass("mobile-native-loading-tooltip-toggle-active"))},e.prototype.showTooltip=function(){this.tooltipWrapper=document.createElement("div"),this.tooltipWrapper.className="mobile-pane-tooltip",this.modalWrapper.appendChild(this.tooltipWrapper);var e=document.createElement("div");e.textContent=i.translate("ID_MOBILE_HELP_TOOLTIP-MESSAGE"),e.className="mobile-pane-tooltip-message",this.tooltipWrapper.appendChild(e),$(this.tooltipWrapper).show(),document.addEventListener("touchstart",this.detectTooltipOusideClick),document.addEventListener("mousedown",this.detectTooltipOusideClick)},e.prototype.detectTooltipOusideClick=function(e){e.target===this.tooltipWrapper||this.tooltipWrapper.contains(e.target)||($(this.tooltipWrapper).remove(),document.removeEventListener("touchstart",this.detectTooltipOusideClick),document.removeEventListener("mousedown",this.detectTooltipOusideClick))},e.prototype.detectEscPressed=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.hide(!0)},e.prototype.submit=function(e){var t=this;localStorage.removeItem("nativeLoadingSettings"),localStorage.setItem("nativeLoadingSettings",JSON.stringify(e));var n='<Call Method="SetSettings">';switch(e.step){case 0:n+=_IncludeHiddenNativeLoading;break;case 1:n+=_CompleteNativeLoading;break;case 2:n+=_ModerateNativeLoading;break;case 3:n+=_FastNativeLoading}n+="</Call>",this.client.command.executeXML(n);var i=e.prefer2D?"Prefer3D":"Prefer2D",o=!1===e.preferTesselation?"PreferGeometry":"PreferTessellation";n='<Call Method="SetSettings"><Settings><Import3D><General><ImportMode>'+i+"</ImportMode>",n+="<ReadMode>"+o+"</ReadMode></General ></Import3D ></Settings ></Call > ",this.client.command.executeXML(n),this.client.once("SetSettings",function(e){t.hide()})},e}();t.MobileLoadingModal=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=n(0),a="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink",r=function(){function e(e,t){var n=this;this.client=e,this.canvas=t,this.pointerWrapper=document.createElement("div"),this.pointerWrapper.className="mobile-pointer",this.pointerWrapper.style.opacity="0",this.pointerWrapper.style.pointerEvents="none",this.resize();var i=document.createElementNS(a,"svg");i.style.width="100px",i.style.height="100px";var o=document.createElementNS(a,"use");o.setAttributeNS(l,"href","#mobile_picker"),i.appendChild(o);var r=document.createElement("div");r.className="mobile-pointer-handle",$(r).kendoTouch({drag:function(e){n.pointerDrag(e,n.pointerWrapper)},tap:function(e){n.pointerTap(e)}}),this.pointerWrapper.appendChild(r),this.pointerWrapper.appendChild(i),document.body.appendChild(this.pointerWrapper)}return e.prototype.pointerTap=function(e){var t=this.pointerWrapper.offsetTop,n=this.pointerWrapper.offsetLeft+100,i=this.canvas.getBoundingClientRect(),a=i.left,l=i.top,r=n-a,s=t-l,c='<Call Method="MouseMove" Response="true"><X>'+r+"</X><Y>"+s+"</Y><MouseButton>Left</MouseButton></Call>";this.client.command.executeXMLMouseMove(c),c='<Call Method="MouseDown"><X>'+r+"</X><Y>"+s+"</Y><MouseButton>Left</MouseButton></Call>",this.client.command.executeXMLMouse(c);var d;o.mockCtrl&&(d="<MouseFlag>Ctrl</MouseFlag>"),c='<Call Method="MouseUp" Response="false"><X>'+r+"</X><Y>"+s+"</Y>",c+=d+"<MouseButton>Left</MouseButton></Call>",this.client.command.executeXMLMouse(c)},e.prototype.pointerDrag=function(e,t){e.event.preventDefault();var n=e.touch.y.location+25,o=e.touch.x.location-25,a=this.canvas.getBoundingClientRect(),l=a.left,r=a.top,s=e.pageX-l,c=e.pageY-r;n-100>=0&&n<=window.innerHeight?(t.style.bottom=window.innerHeight-n+"px",c=n-100):c=this.mousePointerEvent.pageY,o>=0&&o+40<=window.innerWidth?(t.style.left=o+"px",s=o+100):s=this.mousePointerEvent.pageX,this.mousePointerEvent={pageX:s,pageY:c},i.appStates.lastPagePosX=s,i.appStates.lastPagePosY=c,s-=l,c-=r,this.client.mouseX=s,this.client.mouseY=c;var d='<Call Method="MouseMove" Response="true"><X>'+s+"</X><Y>"+c+"</Y><MouseButton>Left</MouseButton></Call>";this.client.command.executeXMLMouseMove(d)},e.prototype.show=function(){this.pointerWrapper.style.opacity="1",this.pointerWrapper.style.pointerEvents=""},e.prototype.hide=function(){this.pointerWrapper.style.pointerEvents="none",this.pointerWrapper.style.opacity="0"},e.prototype.resize=function(){this.pointerWrapper.style.bottom=document.body.clientHeight/2-100+"px",this.pointerWrapper.style.left=document.body.clientWidth/2-100+"px"},e}();t.MobilePointer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),o=n(0),a=n(45),l=n(46),r=n(5),s=function(){function e(e){var t=this;this.textModuleHeader="%file",this.textModuleFooter="%file",this.orientation="Portrait",this.isInit=!1,this.client=e,this.isOpen=!0,this.detectOutsideClick=this.detectOutsideClick.bind(this),this.detectEscPressed=this.detectEscPressed.bind(this),this.submit=this.submit.bind(this),this.resize=this.resize.bind(this),this.setWhiteBackgroundSetting=this.setWhiteBackgroundSetting.bind(this),this.setLineWidthEnabledSetting=this.setLineWidthEnabledSetting.bind(this),this.setTiledSetting=this.setTiledSetting.bind(this),this.setFontColorSetting=this.setFontColorSetting.bind(this);this.client.command.executeXML('<Call Method="GetSettings"></Call>'),this.client.on("GetSettings",function(e){t.isOpen&&(t.printSettings=e.Settings.Print,t.orientation=t.printSettings.Orientation,t.dpi=parseInt(t.printSettings.PageDPI),t.isInit?t.updateUI(t.printSettings):t.init(),t.getPrintPreview())}),this.printFontNameEnum=[],this.printFontStyleEnum=[{langId:"ID_PRINT_MODAL_FONT_REGULAR",value:"0"},{langId:"ID_PRINT_MODAL_FONT_BOLD",value:"1"},{langId:"ID_PRINT_MODAL_FONT_ITALIC",value:"2"},{langId:"ID_PRINT_MODAL_FONT_BOLD_ITALIC",value:"3"},{langId:"ID_PRINT_MODAL_FONT_UNDERLINE",value:"4"},{langId:"ID_PRINT_MODAL_FONT_STRIKEOUT",value:"8"}];try{this.printPaperSizeEnum=_PrintPaperSizes}catch(e){this.printPaperSizeEnum=[{langId:"-",width:-1,height:-1,dpi:600},{langId:"A0",width:841,height:1189,dpi:200},{langId:"A1",width:594,height:841,dpi:300},{langId:"A2",width:420,height:594,dpi:400},{langId:"A3",width:297,height:420,dpi:500},{langId:"A4",width:210,height:297,dpi:600},{langId:"A5",width:148,height:210,dpi:600},{langId:"Letter",width:216,height:279,dpi:600},{langId:"Legal",width:216,height:256,dpi:600},{langId:"Ledger",width:279,height:432,dpi:500}]}document.body.addEventListener("mousedown",this.detectOutsideClick),document.body.addEventListener("keyup",this.detectEscPressed)}return e.prototype.init=function(){var e=this,t=window.innerHeight<window.innerWidth;this.modalWrapper=document.createElement("div"),this.modalWrapper.className="mobile-print-modal";var n=document.createElement("div");n.className="mobile-print-modal-site-wrapper",this.modalWrapper.appendChild(n),n.style.textAlign="center";var i=document.createElement("div");n.appendChild(i);var a=document.createElement("div");a.className="mobile-print-modal-size-wrapper",this.widthEl=document.createElement("span"),this.widthEl.textContent=this.ppiToMM(this.printSettings.PageWidth)+" mm",a.appendChild(this.widthEl);var l=document.createElement("span");l.textContent=" x ",a.appendChild(l),this.heightEl=document.createElement("span"),this.heightEl.textContent=this.ppiToMM(this.printSettings.PageHeight)+" mm",a.appendChild(this.heightEl),i.appendChild(a),this.paperSizeSelect=document.createElement("select"),this.paperSizeSelect.style.marginRight="15px",this.paperSizeSelect.style.cssFloat="right",this.paperSizeSelect.className="print-modal-select";for(var r=this.printPaperSizeEnum.length,s=0;s<r;s++){var c=document.createElement("option");c.value=s.toString(),c.text=o.translate(this.printPaperSizeEnum[s].langId),c.selected=this.isSelectedPaperSize(this.printPaperSizeEnum[s].width,this.printPaperSizeEnum[s].height),this.paperSizeSelect.appendChild(c)}this.paperSizeSelect.onchange=function(t){var n=parseInt(e.paperSizeSelect.value);e.dpi=e.printPaperSizeEnum[n].dpi;var i=e.mmToPPI(e.printPaperSizeEnum[n].width.toString()),o=e.mmToPPI(e.printPaperSizeEnum[n].height.toString()),a='<Call Method="SetSettings"><Settings><Print>';a+="<PageWidth>",a+="Portrait"===e.orientation?i:o,a+="</PageWidth>",a+="<PageHeight>",a+="Portrait"===e.orientation?o:i,a+="</PageHeight>",a+="<PageDPI>"+e.dpi+"</PageDPI>",a+="</Print></Settings></Call>",e.client.command.executeXML(a)},i.appendChild(this.paperSizeSelect);var d=document.createElement("div");d.className="mobile-print-image-canvas",n.appendChild(d),this.previewImage=document.createElement("img"),this.previewImage.className="mobile-print-modal-preview-image",d.appendChild(this.previewImage);var p=document.createElement("div");p.className="mobile-print-modal-option-group-title",n.appendChild(p);var h=document.createElement("i");h.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",p.appendChild(h);var u=document.createElement("span");u.textContent=o.translate("ID_PRINT_MODAL_DOCUMENT_SIZE"),p.appendChild(u);var m=document.createElement("div");m.className="print-modal-option-group",m.style.textAlign="left",n.appendChild(m),p.onclick=function(e){$(h).hasClass("fa-chevron-circle-right")?($(h).addClass("fa-chevron-circle-down"),$(h).removeClass("fa-chevron-circle-right"),$(m).show()):($(h).removeClass("fa-chevron-circle-down"),$(h).addClass("fa-chevron-circle-right"),$(m).hide())},$(m).hide();var f=document.createElement("div");f.className="print-modal-long-input-wrapper",m.appendChild(f);var v=document.createElement("span");v.textContent=o.translate("ID_TEXT_PAPERWIDTH"),v.className="print-modal-long-input-title",f.appendChild(v),this.widthInput=document.createElement("input"),this.widthInput.className="print-modal-long-input",this.widthInput.value=this.ppiToMM(this.printSettings.PageWidth).toString(),this.widthInput.onchange=function(t){var n=e.mmToPPI(e.widthInput.value),i=e.printSettings.PageHeight,o='<Call Method="SetSettings"><Settings><Print><PageWidth>'+n+"</PageWidth>";o+=n>i?"<Orientation>Landscape</Orientation>":"<Orientation>Portrait</Orientation>",o+="</Print></Settings></Call>",e.client.command.executeXML(o)},f.appendChild(this.widthInput);var g=document.createElement("div");g.className="print-modal-long-input-wrapper",m.appendChild(g);var C=document.createElement("span");C.textContent=o.translate("ID_TEXT_PAPERHEIGHT"),C.className="print-modal-long-input-title",g.appendChild(C),this.heightInput=document.createElement("input"),this.heightInput.className="print-modal-long-input",this.heightInput.value=this.ppiToMM(this.printSettings.PageHeight).toString(),this.heightInput.onchange=function(t){var n=e.mmToPPI(e.heightInput.value),i=e.printSettings.PageWidth,o='<Call Method="SetSettings"><Settings><Print><PageHeight>'+n+"</PageHeight>";o+=n>i?"<Orientation>Portrait</Orientation>":"<Orientation>Landscape</Orientation>",o+="</Print></Settings></Call>",e.client.command.executeXML(o)},g.appendChild(this.heightInput);var E=document.createElement("div");E.className="print-modal-long-input-wrapper",m.appendChild(E);var _=document.createElement("span");_.textContent=o.translate("ID_DPI"),_.className="print-modal-long-input-title",E.appendChild(_),this.dpiInput=document.createElement("input"),this.dpiInput.className="print-modal-long-input",this.dpiInput.value=this.printSettings.PageDPI,this.dpiInput.onchange=function(t){e.dpi=parseInt(e.dpiInput.value);var n='<Call Method="SetSettings"><Settings><Print>';n+="<PageHeight>"+e.mmToPPI(e.heightInput.value)+"</PageHeight>",n+="<PageWidth>"+e.mmToPPI(e.widthInput.value)+"</PageWidth><PageDPI>"+e.dpiInput.value+"</PageDPI></Print></Settings></Call>",e.client.command.executeXML(n)},E.appendChild(this.dpiInput),this.getPrintPreview(),this.client.on("CreatePrintPreview",function(t){var n="data:image/png;base64, "+t.Image;e.previewImage.src=n});var b=document.createElement("hr");this.modalWrapper.appendChild(b);var I=document.createElement("div");I.className="mobile-print-modal-site-wrapper",this.modalWrapper.appendChild(I),this.defaultOptionWrapper=document.createElement("div"),this.defaultOptionWrapper.className="mobile-print-modal-options-wrapper",I.appendChild(this.defaultOptionWrapper),this.textOptionWrapper=document.createElement("div"),this.textOptionWrapper.className="mobile-print-modal-options-wrapper",I.appendChild(this.textOptionWrapper);this.client.command.executeXML('<Call Method="GetTemplate"><Type>PrintTemplate</Type></Call>'),this.client.on("GetTemplate.PrintTemplate",function(t){e.fillOptions(t),e.buildTextOptions(),e.buildDefaultOptions()}),this.buttonRow=document.createElement("div"),this.buttonRow.className="mobile-print-modal-button-row",this.modalWrapper.appendChild(this.buttonRow);var S=!1;try{S=_BrowserPrintButtonDeactivated}catch(e){}if(!S){var y=document.createElement("i");y.className="print-modal-icon fas fa-print",y.style.marginRight="15px",this.buttonRow.appendChild(y),y.onclick=function(t){e.createPDF(!0)}}var w=document.createElement("i");w.className="print-modal-icon fas fa-download",w.style.marginRight="15px",this.buttonRow.appendChild(w),w.onclick=function(t){e.createPDF(!1)};var M=document.createElement("button");M.className="print-modal-button",M.textContent=o.translate("ID_PRINT_MODAL_PRINT");var x=document.createElement("button");x.className="print-modal-button",x.style.cssFloat="right",x.textContent="OK",this.buttonRow.appendChild(x),x.onclick=this.submit,document.body.appendChild(this.modalWrapper),window.addEventListener("resize",this.resize),t?($(b).hide(),$(n).addClass("mobile-print-modal-image-landscape"),$(n).removeClass("mobile-print-modal-image-portrait"),$(I).addClass("mobile-print-modal-options-landscape"),$(I).removeClass("mobile-print-modal-options-portrait")):($(b).show(),$(n).removeClass("mobile-print-modal-image-landscape"),$(n).addClass("mobile-print-modal-image-portrait"),$(I).removeClass("mobile-print-modal-options-landscape"),$(I).addClass("mobile-print-modal-options-portrait")),window.onorientationchange=function(e){setTimeout(function(){t=window.innerHeight<window.innerWidth,t?($(b).hide(),$(n).addClass("mobile-print-modal-image-landscape"),$(n).removeClass("mobile-print-modal-image-portrait"),$(I).addClass("mobile-print-modal-options-landscape"),$(I).removeClass("mobile-print-modal-options-portrait")):($(b).show(),$(n).removeClass("mobile-print-modal-image-landscape"),$(n).addClass("mobile-print-modal-image-portrait"),$(I).removeClass("mobile-print-modal-options-landscape"),$(I).addClass("mobile-print-modal-options-portrait"))},1e3)},this.isInit=!0},e.prototype.updateUI=function(e){for(var t=this.printScaleEnum.length,n=0;n<t;n++)e.ScaleMode===this.printScaleEnum[n].value&&this.scalingGroup.setStateByIndex(n,!0);this.scaleDynamicValue.value=e.Scale;var i=this.printOrientationEnum.length;this.orientation=e.Orientation;for(var n=0;n<i;n++)e.Orientation===this.printOrientationEnum[n].value&&this.orientationGroup.setStateByIndex(n,!0);this.whiteBackgroundSwitch.setVal("true"===e.WhiteBackground),this.lineWidthSwitch.setVal("true"===e.LineWidthEnabled);for(var o=this.printLineWidthUnit.length,n=0;n<o;n++)e.LineWidthUnit===this.printLineWidthUnit[n].value&&(this.unitSelect.selectedIndex=n);for(var a=this.printRangeEnum.length,n=0;n<a;n++)e.PageRange===this.printRangeEnum[n].value&&this.rangeGroup.setStateByIndex(n,!0);this.fromInput.value=e.PageRangeFirst,this.toInput.value=e.PageRangeLast,this.widthInput.value=this.ppiToMM(e.PageWidth).toString(),this.widthEl.textContent=this.ppiToMM(e.PageWidth).toString()+" mm",this.heightInput.value=this.ppiToMM(e.PageHeight).toString(),this.heightEl.textContent=this.ppiToMM(e.PageHeight).toString()+" mm";for(var l=this.printPaperSizeEnum.length,r=!1,n=0;n<l;n++)this.isSelectedPaperSize(this.printPaperSizeEnum[n].width,this.printPaperSizeEnum[n].height)&&(r=!0,this.paperSizeSelect.selectedIndex=n);r||(this.paperSizeSelect.selectedIndex=0);var s=e.PageDPI;this.dpiInput.value=s},e.prototype.ppiToMM=function(e){return Math.round(parseInt(e)/this.dpi*25.4)},e.prototype.mmToPPI=function(e){return Math.round(parseInt(e)/25.4*this.dpi)},e.prototype.isSelectedPaperSize=function(e,t){e=this.mmToPPI(e.toString()),t=this.mmToPPI(t.toString());var n=parseInt(this.printSettings.PageWidth),i=parseInt(this.printSettings.PageHeight);switch(this.orientation){case"Portrait":return e===n&&t===i;case"Landscape":return e===i&&t===n;default:return!1}},e.prototype.getPrintPreview=function(){var e='<Call Method="CreatePrintPreview">';e+="<Width>200</Width>",e+="<Height>200</Height>",e+="</Call>",this.client.command.executeXML(e)},e.prototype.buildDefaultOptions=function(){var e=this;$(this.defaultOptionWrapper).empty(),this.scalingGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_SCALING");for(var t=this.printScaleEnum.length,n=this,a=0;a<t;a++)!function(t){var i={value:n.printScaleEnum[t].value,langId:n.printScaleEnum[t].langId,initialState:n.printSettings.ScaleMode===n.printScaleEnum[t].value},o=function(){var t='<Call Method="SetSettings"><Settings><Print><ScaleMode>'+i.value+"</ScaleMode></Print></Settings></Call>";e.client.command.executeXML(t)};if(n.scalingGroup.addButton(i,o),"Scale"===i.value){var a=document.createElement("div");a.textContent="1:",a.className="print-modal-static-text";var l=n.scalingGroup.buttons[n.scalingGroup.buttons.length-1].wrapperEl;l.appendChild(a),n.scaleDynamicValue=document.createElement("input"),n.scaleDynamicValue.className="print-modal-input",n.scaleDynamicValue.value=n.printSettings.Scale,n.scaleDynamicValue.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><Scale>'+e.scaleDynamicValue.value+"</Scale>";n+="</Print></Settings></Call>",e.client.command.executeXML(n)},l.appendChild(n.scaleDynamicValue)}}(a);this.orientationGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_ORIENTATION");for(var r=this.printOrientationEnum.length,s=this,a=0;a<r;a++)!function(t){var n={value:s.printOrientationEnum[t].value,langId:s.printOrientationEnum[t].langId,initialState:s.printSettings.Orientation===s.printOrientationEnum[t].value},i=function(){var t='<Call Method="SetSettings"><Settings><Print><Orientation>'+n.value+"</Orientation>",i=e.printSettings.PageWidth,o=e.printSettings.PageHeight;switch(n.value){case"Landscape":case"Portrait":t+="<PageWidth>"+o+"</PageWidth>",t+="<PageHeight>"+i+"</PageHeight>"}t+="</Print></Settings></Call>",e.client.command.executeXML(t)};s.orientationGroup.addButton(n,i)}(a);var c=document.createElement("div");c.className="mobile-print-modal-option-group-title",this.defaultOptionWrapper.appendChild(c);var d=document.createElement("span");d.textContent=o.translate("ID_PRINT_MISC"),c.appendChild(d);var p=document.createElement("i");p.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",c.appendChild(p);var h=document.createElement("div");h.className="print-modal-option-group",this.defaultOptionWrapper.appendChild(h),c.onclick=function(e){$(p).hasClass("fa-chevron-circle-right")?($(p).addClass("fa-chevron-circle-down"),$(p).removeClass("fa-chevron-circle-right"),$(h).show()):($(p).removeClass("fa-chevron-circle-down"),$(p).addClass("fa-chevron-circle-right"),$(h).hide())},$(h).hide(),this.whiteBackgroundSwitch=new l.MobileCallbackSwitch(h,"ID_WHITE_BACKGROUND",this.setWhiteBackgroundSetting,"print",!0),this.lineWidthSwitch=new l.MobileCallbackSwitch(h,"ID_CUSTOM_LINEWIDTH",this.setLineWidthEnabledSetting,"print",!0);var u=document.createElement("input");u.className="print-modal-input",u.style.marginLeft="15px",u.value=this.printSettings.LineWidth,u.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><LineWidth>'+u.value+"</LineWidth></Print></Settings></Call>";e.client.command.executeXML(n)},this.lineWidthSwitch.wrapperEl.appendChild(u),this.unitSelect=document.createElement("select"),this.unitSelect.className="print-modal-select";for(var m=this.printLineWidthUnit.length,a=0;a<m;a++){var f=document.createElement("option");f.value=this.printLineWidthUnit[a].value,f.text=o.translate(this.printLineWidthUnit[a].langId),f.selected=this.printSettings.LineWidthUnit===this.printLineWidthUnit[a].value,this.unitSelect.appendChild(f)}this.unitSelect.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><LineWidthUnit>'+e.unitSelect.value+"</LineWidthUnit></Print></Settings></Call>";e.client.command.executeXML(n)},this.lineWidthSwitch.wrapperEl.appendChild(this.unitSelect),this.tiledSwitch=new l.MobileCallbackSwitch(h,"ID_PRINT_TILED",this.setTiledSetting,"print",!1),this.rangeGroup=new i.RadioButtonGroup(this.defaultOptionWrapper,"ID_PRINT_RANGE");for(var v=this.printRangeEnum.length,g=this,a=0;a<v;a++)!function(t){var n={value:g.printRangeEnum[t].value,langId:g.printRangeEnum[t].langId,initialState:g.printSettings.PageRange===g.printRangeEnum[t].value},i=function(){var t='<Call Method="SetSettings"><Settings><Print><PageRange>'+n.value+"</PageRange></Print></Settings></Call>";e.client.command.executeXML(t)};if(g.rangeGroup.addButton(n,i),"Range"===n.value){var a=document.createElement("div");a.textContent=o.translate("ID_PRINT_RANGE_FROM")+":",a.className="print-modal-static-text";var l=g.rangeGroup.buttons[g.rangeGroup.buttons.length-1].wrapperEl;l.appendChild(a),g.fromInput=document.createElement("input"),g.fromInput.className="print-modal-input",g.fromInput.value=g.printSettings.PageRangeFirst,g.fromInput.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><PageRangeFirst>'+e.fromInput.value+"</PageRangeFirst></Print></Settings></Call>";e.client.command.executeXML(n)},l.appendChild(g.fromInput);var r=document.createElement("div");r.textContent=o.translate("ID_PRINT_RANGE_TO")+":",r.className="print-modal-static-text",l.appendChild(r),g.toInput=document.createElement("input"),g.toInput.className="print-modal-input",g.toInput.value=g.printSettings.PageRangeLast,g.toInput.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><PageRangeLast>'+e.toInput.value+"</PageRangeLast></Print></Settings></Call>";e.client.command.executeXML(n)},l.appendChild(g.toInput)}}(a)},e.prototype.buildTextOptions=function(){var e=this;$(this.textOptionWrapper).empty();var t=document.createElement("div");t.className="mobile-print-modal-option-group-title",this.textOptionWrapper.appendChild(t);var n=document.createElement("span");n.textContent=o.translate("ID_PRINT_HEADER"),t.appendChild(n);var i=document.createElement("i");i.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",t.appendChild(i);var l=document.createElement("div");l.className="print-modal-option-group",this.textOptionWrapper.appendChild(l),t.onclick=function(e){$(i).hasClass("fa-chevron-circle-right")?($(i).addClass("fa-chevron-circle-down"),$(i).removeClass("fa-chevron-circle-right"),$(l).show()):($(i).removeClass("fa-chevron-circle-down"),$(i).addClass("fa-chevron-circle-right"),$(l).hide())},$(l).hide();var r=document.createElement("div");r.className="print-modal-long-input-wrapper",l.appendChild(r);var s=document.createElement("span");s.className="print-modal-long-input-title",s.textContent=o.translate("ID_PRINT_HEADER_LEFT"),r.appendChild(s);var c=document.createElement("input");c.className="print-modal-long-input",c.value=this.printSettings.HeaderLeft,this.activeTextInputHeader=c,c.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderLeft>'+c.value+"</HeaderLeft></Print></Settings></Call>";e.client.command.executeXML(n)},c.onfocus=function(t){e.activeTextInputHeader=c},r.appendChild(c);var d=document.createElement("div");d.className="print-modal-long-input-wrapper",l.appendChild(d);var p=document.createElement("span");p.textContent=o.translate("ID_PRINT_HEADER_CENTER"),p.className="print-modal-long-input-title",d.appendChild(p);var h=document.createElement("input");h.className="print-modal-long-input",h.value=this.printSettings.HeaderCenter,h.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderCenter>'+h.value+"</HeaderCenter></Print></Settings></Call>";e.client.command.executeXML(n)},h.onfocus=function(t){e.activeTextInputHeader=h},d.appendChild(h);var u=document.createElement("div");u.className="print-modal-long-input-wrapper",l.appendChild(u);var m=document.createElement("span");m.textContent=o.translate("ID_PRINT_HEADER_RIGHT"),m.className="print-modal-long-input-title",u.appendChild(m);var f=document.createElement("input");f.className="print-modal-long-input",f.value=this.printSettings.HeaderRight,f.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><HeaderRight>'+f.value+"</HeaderRight></Print></Settings></Call>";e.client.command.executeXML(n)},f.onfocus=function(t){e.activeTextInputHeader=f},u.appendChild(f);var v=document.createElement("button");v.className="print-modal-button",v.textContent=o.translate("ID_PRINT_INSERT_VARIABLE"),l.appendChild(v);var g=document.createElement("select");g.className="print-modal-select",l.appendChild(g);var C=document.createElement("option");C.value="%file",C.selected=!0,C.text=o.translate("ID_PRINT_INSERT_VARIABLE_FILE_NAME"),g.appendChild(C);var E=document.createElement("option");E.value="%date",E.text=o.translate("ID_PRINT_INSERT_VARIABLE_DATE"),g.appendChild(E);var _=document.createElement("option");_.value="%time",_.text=o.translate("ID_PRINT_INSERT_VARIABLE_TIME"),g.appendChild(_);var b=document.createElement("option");b.value="%user",b.text=o.translate("ID_PRINT_INSERT_VARIABLE_USER_NAME"),g.appendChild(b),g.onchange=function(t){e.textModuleHeader=g.value},v.onclick=function(t){var n=e.activeTextInputHeader.value;n+=e.textModuleHeader,$(e.activeTextInputHeader).val(n),$(e.activeTextInputHeader).trigger("change")};var I=document.createElement("div");I.className="mobile-print-modal-option-group-title",this.textOptionWrapper.appendChild(I);var S=document.createElement("span");S.textContent=o.translate("ID_PRINT_FOOTER"),I.appendChild(S);var y=document.createElement("i");y.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",I.appendChild(y);var w=document.createElement("div");w.className="print-modal-option-group",this.textOptionWrapper.appendChild(w),I.onclick=function(e){$(y).hasClass("fa-chevron-circle-right")?($(y).addClass("fa-chevron-circle-down"),$(y).removeClass("fa-chevron-circle-right"),$(w).show()):($(y).removeClass("fa-chevron-circle-down"),$(y).addClass("fa-chevron-circle-right"),$(w).hide())},$(w).hide();var M=document.createElement("div");M.className="print-modal-long-input-wrapper",w.appendChild(M);var x=document.createElement("span");x.textContent=o.translate("ID_PRINT_FOOTER_LEFT"),x.className="print-modal-long-input-title",M.appendChild(x);var N=document.createElement("input");N.className="print-modal-long-input",N.value=this.printSettings.FooterLeft,N.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterLeft>'+N.value+"</FooterLeft></Print></Settings></Call>";e.client.command.executeXML(n)},N.onfocus=function(t){e.activeTextInputFooter=N},u.appendChild(f),M.appendChild(N);var T=document.createElement("div");T.className="print-modal-long-input-wrapper",w.appendChild(T);var O=document.createElement("span");O.textContent=o.translate("ID_PRINT_FOOTER_CENTER"),O.className="print-modal-long-input-title",T.appendChild(O);var D=document.createElement("input");D.className="print-modal-long-input",D.value=this.printSettings.FooterCenter,D.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterCenter>'+D.value+"</FooterCenter></Print></Settings></Call>";e.client.command.executeXML(n)},D.onfocus=function(t){e.activeTextInputFooter=D},T.appendChild(D);var L=document.createElement("div");L.className="print-modal-long-input-wrapper",w.appendChild(L);var A=document.createElement("span");A.textContent=o.translate("ID_PRINT_FOOTER_RIGHT"),A.className="print-modal-long-input-title",L.appendChild(A);var R=document.createElement("input");R.className="print-modal-long-input",R.value=this.printSettings.FooterRight,R.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><FooterRight>'+R.value+"</FooterRight></Print></Settings></Call>";e.client.command.executeXML(n)},R.onfocus=function(t){e.activeTextInputFooter=R},L.appendChild(R);var B=document.createElement("button");B.className="print-modal-button",B.textContent=o.translate("ID_PRINT_INSERT_VARIABLE"),w.appendChild(B);var P=document.createElement("select");P.className="print-modal-select",w.appendChild(P);var k=document.createElement("option");k.value="%file",k.selected=!0,k.text=o.translate("ID_PRINT_INSERT_VARIABLE_FILE_NAME"),P.appendChild(k);var X=document.createElement("option");X.value="%date",X.text=o.translate("ID_PRINT_INSERT_VARIABLE_DATE"),P.appendChild(X);var F=document.createElement("option");F.value="%time",F.text=o.translate("ID_PRINT_INSERT_VARIABLE_TIME"),P.appendChild(F);var W=document.createElement("option");W.value="%user",W.text=o.translate("ID_PRINT_INSERT_VARIABLE_USER_NAME"),P.appendChild(W),P.onchange=function(t){e.textModuleFooter=P.value},B.onclick=function(t){var n=e.activeTextInputFooter.value;n+=e.textModuleFooter,$(e.activeTextInputFooter).val(n),$(e.activeTextInputFooter).trigger("change")};var G=document.createElement("div");G.className="mobile-print-modal-option-group-title",this.textOptionWrapper.appendChild(G);var V=document.createElement("span");V.textContent=o.translate("ID_PRINT_MODAL_FONT"),G.appendChild(V);var U=document.createElement("i");U.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",G.appendChild(U);var H=document.createElement("div");H.className="print-modal-option-group",this.textOptionWrapper.appendChild(H),G.onclick=function(e){$(U).hasClass("fa-chevron-circle-right")?($(U).addClass("fa-chevron-circle-down"),$(U).removeClass("fa-chevron-circle-right"),$(H).show()):($(U).removeClass("fa-chevron-circle-down"),$(U).addClass("fa-chevron-circle-right"),$(H).hide())},$(H).hide();var j=document.createElement("div");j.className="print-modal-long-input-wrapper",H.appendChild(j);var z=document.createElement("div");z.className="print-modal-long-input-title",z.textContent=o.translate("ID_PRINT_SET_FONT"),j.appendChild(z);var Y=document.createElement("select");Y.className="print-modal-select";this.client.command.executeXML('<Call Method="GetFonts"></Call>'),Y.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontName>'+Y.value+"</BannerFontName></Print></Settings></Call>";e.client.command.executeXML(n)},j.appendChild(Y),this.client.on("GetFonts",function(t){e.printFontNameEnum=t.Font;for(var n=e.printFontNameEnum.length,i=0;i<n;i++){var o=e.printFontNameEnum[i],a=document.createElement("option");a.text=o,a.value=o,e.printSettings.BannerFontName===o&&(a.selected=!0),Y.appendChild(a)}});var K=document.createElement("div");K.className="print-modal-long-input-wrapper",H.appendChild(K);var Z=document.createElement("div");Z.className="print-modal-long-input-title",Z.textContent=o.translate("ID_FONT_SIZE"),K.appendChild(Z);var q=document.createElement("input");q.className="print-modal-input",q.value=this.printSettings.BannerFontSize,q.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontSize>'+q.value+"</BannerFontSize></Print></Settings></Call>";e.client.command.executeXML(n)},K.appendChild(q);var Q=document.createElement("div");Q.className="print-modal-long-input-wrapper",H.appendChild(Q);var J=document.createElement("div");J.className="print-modal-long-input-title",J.textContent=o.translate("ID_PRINT_MODAL_FONT_STYLE"),Q.appendChild(J);var ee=document.createElement("select");ee.className="print-modal-select";for(var te=this.printFontStyleEnum.length,ne=0;ne<te;ne++){var ie=this.printFontStyleEnum[ne],oe=document.createElement("option");oe.text=o.translate(ie.langId),oe.value=ie.value,this.printSettings.BannerFontStyle===ie.value&&(oe.selected=!0),ee.appendChild(oe)}ee.onchange=function(t){var n='<Call Method="SetSettings"><Settings><Print><BannerFontStyle>'+ee.value+"</BannerFontStyle></Print></Settings></Call>";e.client.command.executeXML(n)},Q.appendChild(ee);var ae=document.createElement("div");ae.className="print-modal-long-input-wrapper",H.appendChild(ae);var le=document.createElement("div");le.className="print-modal-long-input-title",le.textContent=o.translate("ID_TEXT_COLOR"),ae.appendChild(le),this.fontColor=new a.ModalColorPicker(ae,this.setFontColorSetting),this.fontColor.setColor(this.printSettings.BannerFontColor)},e.prototype.createPDF=function(e){this.client.command.executeXML('<Call Method="GetPrintImageAsPDF"></Call>'),o.blockUI();var t=r.appStates.fileName?r.appStates.fileName+".pdf":"print.pdf";this.client.once("GetPrintImageAsPDF",function(n){o.unblockUI();for(var i=atob(n.Image),a=new Array(i.length),l=0;l<i.length;l++)a[l]=i.charCodeAt(l);var r=new Uint8Array(a),s=new Blob([r],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)e?window.navigator.msSaveOrOpenBlob(s):window.navigator.msSaveOrOpenBlob(s,t);else{var c=URL.createObjectURL(s);if(e)window.open(c);else{var d=document.createElement("a");d.href=URL.createObjectURL(s),d.download=t,document.body.appendChild(d),d.click(),d.remove()}}})},e.prototype.setFontColorSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><BannerFontColor>'+e+"</BannerFontColor></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setWhiteBackgroundSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><WhiteBackground>'+e+"</WhiteBackground></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setLineWidthEnabledSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><LineWidthEnabled>'+e+"</LineWidthEnabled></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.setTiledSetting=function(e){var t='<Call Method="SetSettings"><Settings><Print><Tiled>'+e+"</Tiled></Print></Settings></Call>";this.client.command.executeXML(t)},e.prototype.fillOptions=function(e){this.printRangeEnum=[],this.printScaleEnum=[],this.printOrientationEnum=[],this.printLineWidthUnit=[];for(var t=e.Source.Template.Enum,n=t[0].Options.Option,i=n.length,o=0;o<i;o++){var a={value:n[o].Value,langId:n[o].DisplayName};this.printRangeEnum.push(a)}for(var l=t[1].Options.Option,r=l.length,s=0;s<r;s++){var c={value:l[s].Value,langId:l[s].DisplayName};this.printScaleEnum.push(c)}for(var d=t[2].Options.Option,p=d.length,h=0;h<p;h++){var u={value:d[h].Value,langId:d[h].DisplayName};this.printOrientationEnum.push(u)}for(var m=t[3].Options.Option,f=m.length,v=0;v<f;v++){var g={value:m[v].Value,langId:m[v].DisplayName};this.printLineWidthUnit.push(g)}},e.prototype.resize=function(){},e.prototype.hide=function(){window.removeEventListener("resize",this.resize),document.body.removeEventListener("mousedown",this.detectOutsideClick),document.body.removeEventListener("keyup",this.detectEscPressed),this.isOpen=!1,$(this.modalWrapper).remove()},e.prototype.detectOutsideClick=function(e){e.target===this.modalWrapper||this.modalWrapper.contains(e.target)||$(".wv-color-picker-popup").find(e.target).length>0||this.submit()},e.prototype.detectEscPressed=function(e){e.preventDefault(),e.stopPropagation(),27===e.keyCode&&this.submit()},e.prototype.submit=function(){this.hide()},e}();t.MobilePrintModal=s},function(e,t,n){"use strict";function i(e){var t,n,i,o,a,l;l="#"==e[0]?e.substr(1):e.substr(2),t=parseInt(l,16),n=t>>16&255,i=t>>8&255,o=255&t;return a=(t>>24&255)/255,{a:a,r:n,g:i,b:o}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30),a=n(10),l=function(){function e(e,t){var n=this;this.isDefaultSet=!1,this.parentEl=e,this.callback=t,this.colorpicker=document.createElement("span"),this.colorpicker.classList.add("modal-colorpicker"),this.parentEl.appendChild(this.colorpicker),this.colorpicker.addEventListener("click",function(e){n.openPalette()},!1)}return e.prototype.openPalette=function(){var e=this,t=this.colorpicker.dataset.lastPickedColor;this.palette=new o.CustomPalette(t,this.showAlpha),this.palette.on("customColorChosen",function(t){return e.updateElementState(t)})},e.prototype.updateElementState=function(e){this.colorpicker.dataset.lastPickedColor=e,this.colorpicker.style.backgroundColor=e;var t=a(e).toHexString();this.color=t,this.callback(this.color)},e.prototype.setColor=function(e){var t=i(e);this.alpha=t.a;var n;n=this.showAlpha?"rgba("+t.r+", "+t.g+", "+t.b+", "+this.alpha+")":"rgb("+t.r+", "+t.g+", "+t.b+")",this.isDefaultSet||(this.colorpicker.dataset.defaultColor=n,this.isDefaultSet=!0),this.colorpicker.dataset.lastPickedColor=n,this.colorpicker.style.backgroundColor=n},e}();t.ModalColorPicker=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(e,t,n,o,a){var l=this;this.val=!1,this.parent=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className=o+"-browser-switch-wrapper",this.parent.appendChild(this.wrapperEl),this.callBack=n,a&&(this.val=a),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val+"",this.hiddenCheckbox.style.display="none",this.wrapperEl.appendChild(this.hiddenCheckbox),this.titleEl=document.createElement("div"),this.titleEl.className=o+"-browser-switch-title",this.titleEl.id=t,this.titleEl.textContent=i.translate(t),this.wrapperEl.appendChild(this.titleEl),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper switch";var r=this.val?"switch-on":"switch-off";$(this.boxEl).addClass(r),this.wrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),$(this.boxEl).click(function(e){l.val=!l.val;var t=l.val?"true":"false";$(l.hiddenCheckbox).val(t),$(l.hiddenCheckbox).trigger("change"),l.val?$(l.boxEl).removeClass("switch-off").addClass("switch-on"):$(l.boxEl).removeClass("switch-on").addClass("switch-off"),l.callBack&&l.callBack(l.val)}),this.setVal(this.val)}return e.prototype.getTitleEl=function(){return this.titleEl},e.prototype.getClickEl=function(){return this.hiddenCheckbox},e.prototype.getVal=function(){return this.val},e.prototype.setVal=function(e){var t=e?"true":"false";this.val=e,$(this.hiddenCheckbox).val(t),$(this.hiddenCheckbox).trigger("change"),this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e}();t.MobileCallbackSwitch=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(e,t,n){var o=this;this.buttons=[],this.newButtonIndex=0,this.isCollapsed=!0,this.parentEl=e,this.titleId=t,n&&(this.isCollapsed=n),this.groupWrapper=document.createElement("div"),this.groupWrapper.className="radio-button-group",this.parentEl.appendChild(this.groupWrapper),this.titleEl=document.createElement("div"),this.titleEl.className="mobile-radio-button-group-title",this.groupWrapper.appendChild(this.titleEl);var a=document.createElement("span");a.textContent=i.translate(t),this.titleEl.appendChild(a);var l=document.createElement("i");l.className="fas fa-chevron-circle-right mobile-pane-group-toggle-icon",this.titleEl.appendChild(l),this.titleEl.onclick=function(e){o.isCollapsed?($(l).addClass("fa-chevron-circle-down"),$(l).removeClass("fa-chevron-circle-right"),$(o.buttonGroup).show()):($(l).removeClass("fa-chevron-circle-down"),$(l).addClass("fa-chevron-circle-right"),$(o.buttonGroup).hide()),o.isCollapsed=!o.isCollapsed},this.buttonGroup=document.createElement("div"),this.buttonGroup.className="radio-button-group-content",this.groupWrapper.appendChild(this.buttonGroup),$(this.buttonGroup).hide()}return e.prototype.toggleStates=function(e){for(var t=this.buttons.length,n=0;n<t;n++)n!==e&&this.buttons[n].setState(!1)},e.prototype.setStateByIndex=function(e,t){e<this.buttons.length&&this.buttons[e].setState(t)},e.prototype.addButton=function(e,t){var n=new a(this.buttonGroup,e,this,this.newButtonIndex,t);this.buttons.push(n),n.setState(e.initialState),this.newButtonIndex++},e.prototype.setTitle=function(){for(var e=this.buttons.length,t=0;t<e;t++)this.buttons[t].setTitle();this.titleEl.textContent=i.translate(this.titleId)},e}();t.RadioButtonGroup=o;var a=function(){function e(e,t,n,o,a){var l=this;this.parentEl=e,this.item=t,this.group=n,this.titleId=t.langId,this.index=o,this.callback=a,this.wrapperEl=document.createElement("div"),this.wrapperEl.className="radio-button-wrapper",this.parentEl.appendChild(this.wrapperEl);var r=document.createElement("div");r.className="radio-button-container",this.wrapperEl.appendChild(r),this.innerCircle=document.createElement("div"),this.innerCircle.className="radio-button-fill",r.appendChild(this.innerCircle),this.titleEl=document.createElement("div"),this.titleEl.className="radio-button-title",this.titleEl.textContent=i.translate(this.titleId),this.wrapperEl.appendChild(this.titleEl),r.onclick=function(e){l.state||(l.callback&&l.callback(),l.setState(!0))},r.onmouseenter=function(e){l.innerCircle.style.backgroundColor="rgb(214, 124, 28)"},r.onmouseleave=function(e){l.state||(l.innerCircle.style.backgroundColor="white")}}return e.prototype.setState=function(e){this.state=e,e?(this.innerCircle.style.backgroundColor="rgb(214, 124, 28)",this.group.toggleStates(this.index)):this.innerCircle.style.backgroundColor="white"},e.prototype.setTitle=function(){this.titleEl.textContent=i.translate(this.titleId)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(4),a=["ID_IMPORTDIALOG_SLIDER_TEXT_0","ID_IMPORTDIALOG_SLIDER_TEXT_1","ID_IMPORTDIALOG_SLIDER_TEXT_2","ID_IMPORTDIALOG_SLIDER_TEXT_3"],l=["ID_IMPORTDIALOG_SLIDER_TOOLTIP_0","ID_IMPORTDIALOG_SLIDER_TOOLTIP_1","ID_IMPORTDIALOG_SLIDER_TOOLTIP_2","ID_IMPORTDIALOG_SLIDER_TOOLTIP_3"],r=function(){function e(e,t,n){var l=this;this.activeTooltips=!1,this.callback=n,this.parent=e,this.detectTooltipOusideClick=this.detectTooltipOusideClick.bind(this),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="stepped-slider-wrapper",this.parent.appendChild(this.wrapperEl),this.sliderWrapper=document.createElement("div"),this.sliderWrapper.className="stepped-slider-bar",this.wrapperEl.appendChild(this.sliderWrapper),this.handle=document.createElement("span"),this.handle.className="stepped-slider-handle draggable",this.handle.id="mobile-native-loading-handle",this.sliderWrapper.appendChild(this.handle),this.bar=document.createElement("span"),this.bar.className="stepped-slider-bar-filled",this.bar.id="mobile-native-loading-bar",this.sliderWrapper.appendChild(this.bar);for(var r=this,s=0;s<a.length;s++)!function(e){var t=document.createElement("span");t.id="Step_"+e,t.className="slider-step",$(t).css("left",133*e);var n=document.createElement("span");t.appendChild(n);var s=document.createElement("span");s.className="slider-step-title";var c=a[e];s.id=c,s.textContent=i.translate(c,o.settings.lang),i.translationObjects.push(s),t.appendChild(s),r.sliderWrapper.appendChild(t),s.onclick=function(t){l.activeTooltips&&(t.preventDefault(),t.stopPropagation(),l.showTooltip(e))},t.onclick=function(t){l.activeTooltips?(t.preventDefault(),t.stopPropagation(),l.showTooltip(e)):l.stepTo(e)}}(s);var c=document.createElement("span");c.className="stepped-slider-bar-empty",$(c).click(function(e){var t=e.pageX-$(e.target).parent().offset().left,n=Math.floor(t/133),i=Math.ceil(t/133);l.activeTooltips?i>l.step?l.showTooltip(i):l.showTooltip(n):i>l.step?l.stepTo(i):l.stepTo(n)}),this.sliderWrapper.appendChild(c),this.setTesselationMode(t),this.shrink=0,$(this.handle).kendoTouch({dragstart:function(e){l.activeTooltips||(l.offset=$(l.parent).offset().left)},drag:function(e){if(!l.activeTooltips){var t=500-document.body.clientWidth;e.touch.x.location-l.offset<=404-t&&e.touch.x.location-l.offset>=0&&(l.handle.style.left=e.touch.x.location-l.offset+"px",l.bar.style.width=e.touch.x.location-l.offset+"px")}},dragend:function(e){if(!l.activeTooltips){var t=parseInt($(l.handle).css("left"));l.stepTo(Math.round(t/(133-l.shrink)))}}})}return e.prototype.setTooltipMode=function(e){this.activeTooltips=e,this.handle.style.pointerEvents=e?"none":""},e.prototype.showTooltip=function(e){this.tooltipWrapper=document.createElement("div"),this.tooltipWrapper.className="mobile-pane-tooltip",this.wrapperEl.appendChild(this.tooltipWrapper);var t=document.createElement("div");t.innerHTML=i.translate(l[e]).replace(/\\n/g,"\r"),t.className="mobile-pane-tooltip-message",this.tooltipWrapper.appendChild(t),$(this.tooltipWrapper).show(),document.addEventListener("touchstart",this.detectTooltipOusideClick),document.addEventListener("mousedown",this.detectTooltipOusideClick)},e.prototype.detectTooltipOusideClick=function(e){e.target===this.tooltipWrapper||this.tooltipWrapper.contains(e.target)||($(this.tooltipWrapper).remove(),document.removeEventListener("touchstart",this.detectTooltipOusideClick),document.removeEventListener("mousedown",this.detectTooltipOusideClick))},e.prototype.stepTo=function(e){this.callback(e),this.step=e,$("#mobile-native-loading-bar").css("width",133*e-e*this.shrink),$("#mobile-native-loading-handle").css("left",133*e-e*this.shrink+4);var t=this.loadTesselation;$(".slider-step").each(function(n){var i=parseInt(this.id.split("_")[1]);t?($(this).removeClass("slider-step-green-hover").addClass("slider-step-orange-hover"),i===e?$(this).children(".slider-step-title").css("color","darkred"):$(this).children(".slider-step-title").css("color","black")):($(this).removeClass("slider-step-orange-hover").addClass("slider-step-green-hover"),i===e?$(this).children(".slider-step-title").css("color","darkgreen"):$(this).children(".slider-step-title").css("color","black")),i<e?$(this).children().first().addClass("slider-step-highlighted"):$(this).children().first().removeClass("slider-step-highlighted")}),t?($("#mobile-native-loading-handle").css("background-color","darkred"),$(".stepped-slider-bar-filled").css("background-color","darkred"),$(".slider-step-highlighted").css("background-color","darkred")):($("#mobile-native-loading-handle").css("background-color","darkgreen"),$(".stepped-slider-bar-filled").css("background-color","darkgreen"),$(".slider-step-highlighted").css("background-color","darkgreen"))},e.prototype.setTesselationMode=function(e){if(this.loadTesselation=e,e){$("#mobile-native-loading-handle").css("background-color","darkred"),$(".stepped-slider-bar-filled").css("background-color","darkred"),$(".slider-step-highlighted").css("background-color","darkred");var t=this.step;$(".slider-step").each(function(e){var n=parseInt(this.id.split("_")[1]);$(this).removeClass("slider-step-green-hover").addClass("slider-step-orange-hover"),n===t?$(this).children(".slider-step-title").css("color","darkred"):$(this).children(".slider-step-title").css("color","black")})}else{$("#mobile-native-loading-handle").css("background-color","darkgreen"),$(".stepped-slider-bar-filled").css("background-color","darkgreen"),$(".slider-step-highlighted").css("background-color","darkgreen");var n=this.step;$(".slider-step").each(function(e){var t=parseInt(this.id.split("_")[1]);$(this).removeClass("slider-step-orange-hover").addClass("slider-step-green-hover"),t===n?$(this).children(".slider-step-title").css("color","darkgreen"):$(this).children(".slider-step-title").css("color","black")})}},e.prototype.resize=function(){var e=500-document.body.clientWidth;if(e>0){this.sliderWrapper.style.width=418-e+"px";var t=e/3;this.shrink=t,this.bar.style.width=133*this.step-this.step*this.shrink+"px",this.handle.style.left=133*this.step-this.step*this.shrink+4+"px",$(".slider-step").each(function(e){this.style.left=133*e-e*t+"px"})}else{this.sliderWrapper.style.width="418px",this.shrink=0;this.bar.style.width=133*this.step-this.step*this.shrink+"px",this.handle.style.left=133*this.step-this.step*this.shrink+4+"px",$(".slider-step").each(function(e){this.style.left=133*e-0*e+"px"})}},e.prototype.getStep=function(){return this.step},e}();t.MobileLoadingSlider=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(e,t,n,o,a,l){var r=this;this.val=!1,this.activeTooltips=!1,this.parent=e,this.clickCallback=a,this.titleIdLeft=t,this.titleIdRight=n,this.tooltipId=o,this.detectTooltipOusideClick=this.detectTooltipOusideClick.bind(this),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="option-toggle",this.parent.appendChild(this.wrapperEl),this.wrapperEl.onclick=function(e){r.activeTooltips&&(e.preventDefault(),e.stopPropagation(),r.showTooltip(r.tooltipId))},l&&(this.val="right"===l),this.titleElLeft=document.createElement("div"),this.titleElLeft.className="option-toggle-title",this.titleElLeft.id=t,this.titleElLeft.textContent=i.translate(t),i.translationObjects.push(this.titleElLeft),this.wrapperEl.appendChild(this.titleElLeft),this.boxEl=document.createElement("div"),this.boxEl.className="option-toggle-wrapper option-toggle-wrapper";var s=this.val?"toggle-on":"toggle-off";$(this.boxEl).addClass(s),this.wrapperEl.appendChild(this.boxEl),this.handleEl=document.createElement("div"),this.handleEl.className="toggle-handle",this.boxEl.appendChild(this.handleEl),this.titleElRight=document.createElement("div"),this.titleElRight.className="option-toggle-title",this.titleElRight.id=n,this.titleElRight.textContent=i.translate(n),i.translationObjects.push(this.titleElRight),this.wrapperEl.appendChild(this.titleElRight),this.titleElLeft.style.left="calc(50% - "+(this.titleElLeft.offsetWidth+15)+"px)",$(this.boxEl).click(function(e){r.activeTooltips||r.setVal(!r.val)}),this.setVal(this.val)}return e.prototype.setTooltipMode=function(e){this.activeTooltips=e},e.prototype.showTooltip=function(e){this.tooltipWrapper=document.createElement("div"),this.tooltipWrapper.className="mobile-pane-tooltip",this.wrapperEl.appendChild(this.tooltipWrapper);var t=document.createElement("div");t.innerHTML=i.translate(e).replace(/\\n/g,"\r"),t.className="mobile-pane-tooltip-message",this.tooltipWrapper.appendChild(t),$(this.tooltipWrapper).show(),document.addEventListener("touchstart",this.detectTooltipOusideClick),document.addEventListener("mousedown",this.detectTooltipOusideClick)},e.prototype.detectTooltipOusideClick=function(e){e.target===this.tooltipWrapper||this.tooltipWrapper.contains(e.target)||($(this.tooltipWrapper).remove(),document.removeEventListener("touchstart",this.detectTooltipOusideClick),document.removeEventListener("mousedown",this.detectTooltipOusideClick))},e.prototype.resize=function(){this.titleElLeft.style.left="calc(50% - "+(this.titleElLeft.offsetWidth+15)+"px)"},e.prototype.getVal=function(){return this.val},e.prototype.setVal=function(e){this.val=e,this.clickCallback(this.val),this.val?($(this.boxEl).removeClass("toggle-off").addClass("toggle-on"),$(this.titleElLeft).removeClass("option-toggle-title-active"),$(this.titleElRight).addClass("option-toggle-title-active")):($(this.boxEl).removeClass("toggle-on").addClass("toggle-off"),$(this.titleElLeft).addClass("option-toggle-title-active"),$(this.titleElRight).removeClass("option-toggle-title-active"))},e.prototype.changeLang=function(){this.titleElLeft.textContent=i.translate(this.titleIdLeft),this.titleElRight.textContent=i.translate(this.titleIdRight)},e.prototype.setHighlightColor=function(e){this.val?(this.titleElRight.style.color=e,this.titleElLeft.style.color="black"):(this.titleElLeft.style.color=e,this.titleElRight.style.color="black")},e}();t.MobileOptionToggle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(4),a=function(){function e(e,t,n,a){var l=this;this.val=!1,this.parent=e,this.wrapperEl=document.createElement("div"),this.wrapperEl.className=n,this.parent.appendChild(this.wrapperEl),a&&(this.val=a),this.hiddenCheckbox=document.createElement("input"),this.hiddenCheckbox.type="checkbox",this.hiddenCheckbox.value=this.val+"",this.hiddenCheckbox.style.display="none",this.wrapperEl.appendChild(this.hiddenCheckbox),this.boxEl=document.createElement("div"),this.boxEl.className="switch-wrapper",this.boxEl.style.display="inline-block";var r=this.val?"switch-on":"switch-off";$(this.boxEl).addClass(r),this.wrapperEl.appendChild(this.boxEl),this.titleEl=document.createElement("div"),this.titleEl.className="switch-title",this.titleEl.id=t,this.titleEl.textContent=i.translate(t,o.settings.lang),i.translationObjects.push(this.titleEl),this.wrapperEl.appendChild(this.titleEl),this.handleEl=document.createElement("div"),this.handleEl.className="switch-handle",this.boxEl.appendChild(this.handleEl),$(this.boxEl).click(function(e){l.val=!l.val;var t=l.val?"true":"false";$(l.hiddenCheckbox).val(t),$(l.hiddenCheckbox).trigger("change"),l.val?$(l.boxEl).removeClass("switch-off").addClass("switch-on"):$(l.boxEl).removeClass("switch-on").addClass("switch-off")}),this.setVal(this.val)}return e.prototype.getTitleEl=function(){return this.titleEl},e.prototype.getClickEl=function(){return this.hiddenCheckbox},e.prototype.getVal=function(){return this.val},e.prototype.setVal=function(e){var t=e?"true":"false";this.val=e,$(this.hiddenCheckbox).val(t),$(this.hiddenCheckbox).trigger("change"),this.val?$(this.boxEl).removeClass("switch-off").addClass("switch-on"):$(this.boxEl).removeClass("switch-on").addClass("switch-off")},e}();t.MobileDefSwitch=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(15),l=n(54),r=n(57),s=n(0),c=n(55),d=n(56),p=n(4),h=n(53),u=n(16),m=n(5),f=n(32),v="http://www.w3.org/2000/svg",g="http://www.w3.org/1999/xlink",C=n(10),E=function(e){function t(t,n,i){var o=e.call(this)||this;return o.currentSizeLevel=1,o.activeOverlays=[],o.flags=[],o.registeredEvents=[],o.sessions=[],o.resultInitialized=!1,o.multiselect=!1,o.headerKeys=[],o.headerNames=[],o.selection=[],o.calloutInputs=[],o.rows=[],o.defaultCols=["Number","Name","Quantity","CalloutId"],o.sum=0,o.startIndex=1,o.filterList=[],o.explodeInit=!1,o.explodeDistance=0,o.explodeStep=0,o.maxExplodeSteps=0,o.explodeType="AxisAligned",o.nodeLevel=0,o.isHierarchically=!1,o.paneEl=t,o.settingsMap=[],o.groups=[],o.client=n,o.buttons=[],o.eventData=[],o.position=i,o.client.on("NodePropertiesChanged",function(e){o.registerEvent(e)}),o.client.on("DraftAngleChanged",function(e){o.registerEvent(e)}),o.client.on("MeasurementChanged",function(e){o.registerEvent(e)}),o.client.on("TransformChanged",function(e){o.registerEvent(e)}),o.client.on("SectionChanged",function(e){o.registerEvent(e)}),o.client.on("SearchText",function(e){o.registerEvent(e)}),o.client.on("TextSearchChanged",function(e){o.registerEvent(e)}),o.client.on("NeighbourhoodSearchChanged",function(e){o.registerEvent(e),$("#mobile-neighbourhood-search-input").val(e.Radius)}),o.client.once("ActivateTransform",function(e){o.checkTransformEvent(e)}),o.client.on("Resize",function(){o.resizeTextSearchPanel(),o.resizeTransformPanel()}),o.client.on("GetBillOfMaterial",function(e){e.BillOfMaterial&&"wv-bom"===o.openPane&&(o.buildHeader(e.BillOfMaterial.Template.Column,"BOM"),o.buildBody(Array.isArray(e.BillOfMaterial.Data.Item)?e.BillOfMaterial.Data.Item:[e.BillOfMaterial.Data.Item],"BOM"))}),o.client.on("ClashResultUpdated",function(e){if(e.ClashDetection&&"wv-clash"===o.openPane){o.selectedIndex=void 0,o.buildHeader(e.ClashDetection.Template.Column,"clash");var t=e.ClashDetection.Data.Item;Array.isArray(t)||(t=[t]),o.buildBody(t,"clash")}}),o.client.on("ClashVisualizationChanged",function(e){if(o.selectedIndex){var t='<Call Method="SelectClashIndex">';t+="<Index>"+o.selectedIndex+"</Index>",t+="</Call>",o.client.command.executeXML(t)}}),o}return i(t,e),t.prototype.checkTransformEvent=function(e){var t=this;if(0!==$("#mobile-transformation-panel").length||-1===e.indexOf("Rotate")&&-1===e.indexOf("Scale")&&-1===e.indexOf("Move"))this.client.once("ActivateTransform",function(e){t.checkTransformEvent(e)});else{-1===this.activeOverlays.indexOf("transformation")&&this.activeOverlays.push("transformation"),this.buildTransformationPanel(e)}},t.prototype.registerEvent=function(e){for(var t=e.Type,n=!0,i=0;i<this.eventData.length;i++)this.eventData[i].Type===t&&(this.eventData[i]=e,n=!1);n&&this.eventData.push(e),-1===this.registeredEvents.indexOf(t)&&this.registeredEvents.push(t),this.updateFromEvent(e)},t.prototype.setOpenPane=function(e){this.openPane=e},t.prototype.showHelpTooltip=function(){$(this.tooltipWrapper).empty();var e=document.createElement("div");e.textContent=s.translate("ID_MOBILE_HELP_TOOLTIP-TITLE",p.settings.lang),e.className="mobile-pane-tooltip-title";var t=document.createElement("div");t.textContent=s.translate("ID_MOBILE_HELP_TOOLTIP-MESSAGE",p.settings.lang),t.className="mobile-pane-tooltip-message";var n=document.createElement("a");n.textContent=s.translate("ID_MOBILE_TUT_LINK"),n.style.display="block",n.style.color="rgb(214, 124, 28)";var i=!1;try{i=_UseOfflineHelp}catch(e){}var o=i?m.appStates.paneHelpLinks[this.openPane].replace("php","html"):m.appStates.paneHelpLinks[this.openPane],a=i?"/Help/webviewer/"+s.mapCountry(p.settings.lang)+"/"+o:"https://viewer.kisters.de/help/webviewer/"+m.appStates.version+"/"+s.mapCountry(p.settings.lang)+"/"+o;n.target="_blank",n.href=a,this.tooltipWrapper.appendChild(e),this.tooltipWrapper.appendChild(t),this.tooltipWrapper.appendChild(n),$(this.tooltipWrapper).show(),document.addEventListener("touchstart",this.detectTooltipOusideClick.bind(this))},t.prototype.detectTooltipOusideClick=function(e){e.target===this.tooltipWrapper||this.tooltipWrapper.contains(e.target)||(e.preventDefault(),e.stopPropagation(),$(this.tooltipWrapper).hide(),document.removeEventListener("touchstart",this.detectTooltipOusideClick.bind(this)))},t.prototype.load=function(e,t){var n=this;$(this.wrapperEl).off("contextmenu"),$(this.paneEl).empty(),$(this.paneEl).removeAttr("data-role"),$("#mobile-text-search-panel").hide(),this.titleEl=document.createElement("div"),this.titleEl.className="mobile-pane-title";var i=document.createElement("span");if(i.className="mobile-pane-icon-wrapper","left"===this.position?i.style.right="10px":i.style.left="10px",this.paneEl.appendChild(i),this.helpIcon=document.createElement("i"),this.helpIcon.className="fas fa-question-circle mobile-pane-icon-"+this.position,this.helpIcon.onclick=function(e){s.toggleTooltipClick(),$(n.helpIcon).toggleClass("mobile-toggle-tooltip-icon-active"),s.showTooltips&&n.showHelpTooltip()},this.resizeIcon=document.createElement("i"),this.resizeIcon.className="fas fa-sort fa-rotate-90 mobile-pane-icon-"+this.position,this.resizeIcon.onclick=function(e){0===n.currentSizeLevel?($(n.paneEl).width(document.body.clientWidth/2),n.currentSizeLevel=1):1===n.currentSizeLevel?($(n.paneEl).width(document.body.clientWidth),n.currentSizeLevel=2):($(n.paneEl).width(document.body.clientWidth/4),n.currentSizeLevel=0),n.client.emit("Resize")},this.closeIcon=document.createElement("i"),this.closeIcon.className="fas fa-chevron-"+this.position+" mobile-pane-icon-"+this.position,this.closeIcon.onclick=function(e){n.paneEl.style[n.position]="calc(-90%)"},"left"===this.position?(i.appendChild(this.helpIcon),i.appendChild(this.resizeIcon),i.appendChild(this.closeIcon),this.titleEl.style.textAlign="left",this.titleEl.style.paddingRight="90px"):(i.appendChild(this.closeIcon),i.appendChild(this.resizeIcon),i.appendChild(this.helpIcon),this.titleEl.style.textAlign="right",this.titleEl.style.paddingRight="5px"),document.body.clientWidth/2>300?$(this.paneEl).width(document.body.clientWidth/2):$(this.paneEl).width(300),this.openPane=t,"custom"===e){switch(t){case"wv-views":this.paneEl.appendChild(this.titleEl),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.titleEl.textContent=s.translate("ID_VIEWS",p.settings.lang),this.titleEl.style.marginBottom="0",this.titleEl.style.position="absolute",this.titleEl.style.width="100%",this.titleEl.id="ID_VIEWS";new r.MobileViewPane(this.paneEl,this.client);this.paneEl.style.overflow="hidden";break;case"wv-selections":this.paneEl.appendChild(this.titleEl),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.titleEl.textContent=s.translate("ID_SELECTIONS_WND",p.settings.lang),this.titleEl.id="ID_SELECTIONS_WND";new d.MobileSelectionPane(this.paneEl,this.client);this.paneEl.style.overflow="hidden";this.client.command.executeXML('<Call Method="GetSavedSelections"></Call>');break;case"wv-modeltree":this.openModelTree();break;case"wv-appsettings":this.paneEl.appendChild(this.titleEl),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.titleEl.textContent=s.translate("ID_APPSETTINGS_WND",p.settings.lang),this.titleEl.id="ID_APPSETTINGS_WND";new h.MobileAppSettingsPane(this.paneEl,this.client);this.paneEl.style.overflow="hidden"}s.translationObjects.push(this.titleEl)}else{if(this.paneEl.style.overflow="hidden",this.paneEl.appendChild(this.titleEl),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.tooltipWrapper=document.createElement("div"),this.tooltipWrapper.className="mobile-pane-tooltip",this.tooltipWrapper.id="mobile-pane-tooltip",$(this.tooltipWrapper).hide(),this.paneEl.appendChild(this.tooltipWrapper),"wv-settings"===t){var o=document.createElement("div");o.className="mobile-pane-settings-toggle-wrapper";var l=document.createElement("input");l.type="checkbox",l.value="true",l.style.display="none",l.id="mobile-settings-pane-default-toggle",o.appendChild(l);var c=document.createElement("span");c.textContent="Default",o.appendChild(c);var m=document.createElement("div");m.className="switch-wrapper switch-on mobile-switch",m.style.borderColor="white";var v=document.createElement("div");v.className="switch-handle",m.appendChild(v),o.appendChild(m),$(m).click(function(e){l.value="true"===l.value?"false":"true","true"===l.value?$(m).removeClass("switch-off").addClass("switch-on"):$(m).removeClass("switch-on").addClass("switch-off"),n.updateValues()}),this.paneEl.appendChild(o);var E=document.createElement("div");E.classList.add("mobile-pane-buttons-tab"),E.style.position="relative";var b=this.createButton("mobile-expand-all-settings","button_plus_double");b.addEventListener("click",function(e){n.expandAll()});var I=this.createButton("mobile-collapse-all-settings","button_minus_double");I.addEventListener("click",function(e){n.collapseAll()});var S=this.createButton("mobile-save-settings","scene_settings_save");S.addEventListener("click",function(e){var t=n.sceneSettings.Scene,i=n.settings;i.Scene=t,i=_(i,"__text__"),i=_(i,"__ordinal__"),delete i.Renderer.General.Language;var o=u.parse("Settings",i).replace("<?xml version='1.0'?>",""),a='<Call Method="SetSettings">'+o+"</Call>";n.client.command.executeXML(a)});var y=this.createButton("mobile-refresh-settings","view_button_refresh");y.addEventListener("click",function(e){localStorage.setItem("VSWVSettings",localStorage.getItem("VSWVDefaultSettings"));var t='<Call Method="SetSettings">'+localStorage.getItem("VSWVDefaultSettings")+"</Call>";n.client.command.executeXMLAsync(t),t='<Call Method="GetSettings"></Call>',n.client.command.executeXMLAsync(t),localStorage.removeItem("nativeLoadingSettings")}),E.appendChild(b),E.appendChild(I),E.appendChild(S),E.appendChild(y),this.paneEl.appendChild(E);var w=document.createElement("div");w.className="mobile-pane-search-field-wrapper";var M=document.createElement("input");M.className="mobile-pane-search-field",M.id="mobile-settings-search-input";var x=document.createElement("div");x.className="mobile-pane-search-field-icon-wrapper";var N=document.createElement("i");$(N).addClass("fa fa-search mobile-pane-search-field-icon"),x.appendChild(N),$(M).keyup(function(e){for(var t=n.groups.length,i=0;i<t;i++){var o=n.groups[i];n.showAll(o)}n.searchedGroups=[],n.foundChildren=[];var a=M.value.toLowerCase();if(""!==a){for(var i=0;i<t;i++){var o=n.groups[i];n.handleGroupSearch(o,a)}for(var l=0;l<n.searchedGroups.length;l++){var r=n.searchedGroups[l];n.enableGroupVisibility(r,a)}n.cleanGroups(),n.collapseAll(),n.expandAll()}else{for(var i=0;i<t;i++){var o=n.groups[i];n.showAll(o)}n.expandAll(),n.collapseAll()}}),w.appendChild(M),w.appendChild(x),this.paneEl.appendChild(w)}else if("wv-bom"===t||"wv-clash"===t){var E=document.createElement("div");E.classList.add("mobile-pane-buttons-tab"),E.style.top="-10px",E.style.position="relative",E.style.height="26px";var T=this.createButton("viewpane-multi","mobile_UI_check_light"),O=$(T).find("use");T.addEventListener("click",function(){n.multiselect=!n.multiselect,n.multiselect?O[0].setAttributeNS(g,"href","#mobile_UI_check_full"):O[0].setAttributeNS(g,"href","#mobile_UI_check_light")},!1),E.appendChild(T);var D=document.createElement("span");D.className="mobile-bom-pane-copy-icon-wrapper";var L=document.createElement("i");L.className="far fa-copy mobile-bom-pane-copy-icon",D.onclick=function(e){var i=n.headerNames,o=!1;"wv-bom"===t&&(n.rows.map(function(e){e.CalloutId&&""!==e.CalloutId&&null!==e.CalloutId&&(o=!0)}),i=n.headerNames.filter(function(e){return"ID"!==e||o}));var a=i.join(";");a+="\n";for(var l=0;l<n.rows.length;l++)for(var r=0;r<n.headerKeys.length;r++)if("wv-bom"!==t||"CalloutId"!==n.headerKeys[r]||o){var s=n.rows[l][n.headerKeys[r]];if("wv-bom"===t&&void 0===s)for(var c=0;c<n.rows[l].Attribute.length;c++)n.rows[l].Attribute[c].Name===n.headerKeys[r]&&(s=n.rows[l].Attribute[c].__text__);a+=s,a+=r===n.headerKeys.length-1?"\n":";"}if("wv-bom"===t){var d=o?";;":";";a=a.replace("ID","CalloutId"),a+=d+n.sum.toString()}f(a)},D.appendChild(L),E.appendChild(D),this.paneEl.appendChild(E);var A=document.createElement("div");A.className="bom-pane-table-wrapper",this.wrapperEl.appendChild(A),this.tableEl=document.createElement("table"),this.tableEl.className="mobile-pane-table",this.tableEl.width="100%",A.appendChild(this.tableEl);var R=document.createElement("thead");this.tableEl.appendChild(R),this.tableHeaderRowEl=document.createElement("tr"),this.tableHeaderRowEl.className="pane-item",R.appendChild(this.tableHeaderRowEl),this.tableBodyEl=document.createElement("tbody"),this.tableEl.appendChild(this.tableBodyEl),"wv-bom"===t?this.buildDefaultBOMHeader():this.buildDefaultClashHeader();var B=document.createElement("tr");this.tableBodyEl.appendChild(B),"wv-bom"===t&&this.buildSumRow();var P=document.createElement("div");P.className="mobile-pane-button-wrapper",P.onclick=function(e){var i;i="wv-bom"===t?'<Call Method="Compute"><Mode>BillOfMaterial</Mode></Call>':'<Call Method="Compute"><Mode>ClashAsync</Mode></Call>',n.client.command.executeXML(i),n.client.once("Compute",function(e){e.BillOfMaterial&&(n.buildHeader(e.BillOfMaterial.Template.Column,"BOM"),n.buildBody(Array.isArray(e.BillOfMaterial.Data.Item)?e.BillOfMaterial.Data.Item:[e.BillOfMaterial.Data.Item],"BOM"))})},this.wrapperEl.appendChild(P);var k=document.createElement("div");k.className="mobile-pane-button-title",k.textContent="Update",P.appendChild(k)}else if("wv-split"===t){var X=document.createElement("div");X.className="mobile-pane-button-wrapper";new a.MobileButton(X,s.translate("ID_SPLIT_RESTART_SESSION_BUTTON"),void 0,0,!1,this.client,this.restartSession.bind(this));this.wrapperEl.appendChild(X)}else if("wv-explode"===t){var F=document.createElement("table");F.className="pane-content",this.wrapperEl.appendChild(F),this.tableBodyEl=document.createElement("tbody"),F.appendChild(this.tableBodyEl);var B=document.createElement("tr");this.tableBodyEl.appendChild(B),this.wrapperEl.appendChild(F),this.explodeGroupEl=new a.MobileGroup(this.wrapperEl,s.translate("ID_TRANSFORM_PANE_EXPLODE"),!1,void 0,0,this.client),this.explodeSliderEl=new a.MobileSlider(this.wrapperEl,void 0,s.translate("ID_TRANSFORM_PANE_EXPLODE_LEVEL"),void 0,this.explodeGroupEl,0,!1,this.client,this.explode.bind(this)),this.explodeSteppedSliderEl=new a.MobileSteppedSlider(this.wrapperEl,s.translate("ID_TRANSFORM_PANE_EXPLODE_LEVEL"),this.explodeGroupEl,0,!1,this.client,this.explodeStepped.bind(this)),this.explodeSliderEl.setValue(0),this.isHierarchicallyEl=new a.MobileSwitch(this.wrapperEl,void 0,void 0,s.translate("ID_TRANSFORM_PANE_EXPLODE_HIERARCHY"),this.explodeGroupEl,0,!1,this.client,this.setHierarchically.bind(this)),this.explodeTypeEl=new a.MobileSelect(this.wrapperEl,void 0,void 0,s.translate("ID_EXPLOSION_TYPE"),this.explodeGroupEl,0,!1,[],this.client,this.setExplodeType.bind(this)),this.setTypeOptions(),this.explodeLevelEl=new a.MobileInput(this.wrapperEl,void 0,void 0,s.translate("ID_EXPLOSION_NODE_LEVEL"),this.explodeGroupEl,0,!0,this.client,this.setLevel.bind(this)),this.nextLevelButtonEl=new a.MobileButton(this.wrapperEl,s.translate("ID_EXPLOSION_NEXT_LEVEL"),this.explodeGroupEl,0,!1,this.client,this.nextLevel.bind(this)),this.prevLevelButtonEl=new a.MobileButton(this.wrapperEl,s.translate("ID_EXPLOSION_PREVIOUS_LEVEL"),this.explodeGroupEl,0,!1,this.client,this.prevLevel.bind(this)),this.resetExplosionButtonEl=new a.MobileButton(this.wrapperEl,s.translate("ID_EXPLOSION_RESET"),this.explodeGroupEl,0,!1,this.client,this.resetExplosion.bind(this)),this.explodeInit||(this.client.on("GetSelectionNodeLevel",function(e){n.nodeLevel=e.Level,n.explodeLevelEl.setValue(n.nodeLevel)}),this.client.on("SelectionChanged",function(e){var t='<Call Method="GetSelectionExplosionValue"></Call>';t+='<Call Method="GetSelectionNodeLevel"></Call>',n.client.command.executeXML(t)}),this.client.on("GetSelectionExplosionValue",function(e){n.explodeSliderEl.setValue(e.Result/100)})),this.explodeInit=!0}this.paneEl.appendChild(this.wrapperEl),this.settingsMap=[],this.groups=[],this.buttons=[],this.template=e;var W={},G=e.__ordinal__,V=void 0;this.titleEl.textContent=s.translate("ID_"+t);for(var U=0;U<G.length;U++){var H=G[U];void 0===W[H]?(W[H]=0,Array.isArray(e[H])||(e[H]=[e[H]]),"object"==typeof(V=e[H][0])&&this.buildItem(V,H,void 0,-1)):(W[H]++,"object"==typeof(V=e[H][W[H]])&&this.buildItem(V,H,void 0,-1))}if(e.Event&&-1===this.registeredEvents.indexOf(e.Event)&&(this.client.on(e.Event,function(e){for(var t=e.Type,i=!0,o=0;o<n.eventData.length;o++)n.eventData[o].Type===t&&(n.eventData[o]=e,i=!1);i&&n.eventData.push(e),n.updateFromEvent(e),n.cleanGroups()}),this.registeredEvents.push(e.Event)),this.updateValues(),this.cleanGroups(),this.applyButtonMethods(t),"wv-filter"===t){this.filterTable=document.createElement("table"),this.filterTable.style.marginLeft="20px",this.filterTable.style.width="calc(100% - 40px)",this.wrapperEl.appendChild(this.filterTable),this.client.on("@OpenedFile",function(){n.removeOldResults()});var j=document.createElement("thead");this.filterTable.appendChild(j);var z=document.createElement("tr");z.className="pane-item",j.appendChild(z);var Y=document.createElement("th");Y.className="filter-pane-table-header",z.appendChild(Y),this.colorHeaderTextEl=document.createElement("span"),this.colorHeaderTextEl.textContent=s.translate("ID_COLOR"),Y.appendChild(this.colorHeaderTextEl);var K=document.createElement("i");K.className="far fa-sort filter-pane-sort-icon",Y.appendChild(K);var Z=!1;Y.onclick=function(e){Z?(Z=!1,K.className="fa fa-sort-up filter-pane-sort-icon"):(Z=!0,K.className="fa fa-sort-down filter-pane-sort-icon"),n.filterList.sort(function(e,t){var i=C(e.Color).toHsv().h,o=C(t.Color).toHsv().h;return n.sort(i,o,!Z)}),n.buildColorTable()};var q=document.createElement("th");q.className="filter-pane-table-header",z.appendChild(q),this.countHeaderTextEl=document.createElement("span"),this.countHeaderTextEl.textContent=s.translate("ID_BOM_QUANTITY"),q.appendChild(this.countHeaderTextEl);var Q=document.createElement("i");Q.className="far fa-sort filter-pane-sort-icon",q.appendChild(Q);var J=!0;q.onclick=function(e){J?(J=!1,Q.className="fa fa-sort-up filter-pane-sort-icon"):(J=!0,Q.className="fa fa-sort-down filter-pane-sort-icon"),n.filterList.sort(function(e,t){var i=e.Quantity,o=t.Quantity;return n.sort(i,o,!J)}),n.buildColorTable()},this.filterTableBodyEl=document.createElement("tbody"),this.filterTableBodyEl.className="mobile-pane-color-list-wrapper",this.filterTable.appendChild(this.filterTableBodyEl),$(this.filterTable).hide(),this.client.on("ComputeColorList",function(){var e='<Call Method="GetAllGeometryColors">';e+="<IncludeHiddenGeometries>"+n.sceneSettings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",e+="</Call>",n.client.command.executeXMLAsync(e),n.client.once("GetAllGeometryColors",function(e){n.filterList=e.Result,n.buildColorTable()})}),$(this.wrapperEl).off("contextmenu").on("contextmenu",function(e){n.handleContextMenu(e)})}if("wv-textsearch"===t&&0===$("#mobile-text-search-panel").length?this.buildTextSearch():"wv-textsearch"===t&&0!==$("#mobile-text-search-panel").length&&$("#mobile-text-search-panel").show(),$("#mobile-2D-extra-layer").length>0&&!$($("#mobile-2D-extra-layer")[0]).hasClass("mobile-badge-highlighted")&&$("#mobile-text-search-panel").hide(),"wv-split"===t&&this.sessions.length>0){this.resultInitialized=!1;for(var U=0;U<this.sessions.length;U++)this.sessions[U].Error="SUCCESS",this.appendSplitSession(this.sessions[U],!0);this.activateSession(this.activeSession)}this.wrapperEl.style.height="calc(100% - "+this.wrapperEl.offsetTop+"px)"}},t.prototype.handleContextMenu=function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",this.client.vsCanvas.closeContextMenu),$(document).off("keyup",this.client.vsCanvas.closeContextMenu),this.client.vsCanvas.createContextMenu(e)},t.prototype.enableGroupVisibility=function(e,t){for(var n=this.foundChildren.length,i=e.children.length,o=0;o<n;o++){var l=this.foundChildren[o];if(e.hasChild(l)&&(e.visible=!0,-1===e.key.toLowerCase().indexOf(t)||1===e.level))return}for(var r=0;r<i;r++){var s=e.children[r],c=this.sceneSettings;"wv-settings"===this.openPane&&"true"===$("#mobile-settings-pane-default-toggle").val()&&(c=this.settings),s.visible=void 0!==this.getSettingForKey(s.path,c),s instanceof a.MobileGroup&&this.enableGroupVisibility(s,t)}},t.prototype.collapseAll=function(){for(var e=0;e<this.groups.length-1;e++)this.groups[e].collapse()},t.prototype.expandAll=function(){for(var e=0;e<this.groups.length;e++)this.groups[e].expand()},t.prototype.showAll=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t];n.visible=!0,n.highlightSearchString(void 0),n instanceof a.MobileGroup&&this.showAll(n)}},t.prototype.handleGroupSearch=function(e,t){for(var n=e.children.length,i=0;i<n;i++){var o=e.children[i];if(o.highlightSearchString(t),o instanceof a.MobileGroup)this.handleGroupSearch(o,t);else{var l=o.key.toString().toLowerCase(),r=this.sceneSettings;"wv-settings"===this.openPane&&"true"===$("#mobile-settings-pane-default-toggle").val()&&(r=this.settings),-1===l.search(t)||void 0===this.getSettingForKey(o.path,r)?o.visible=!1:(o.visible=!0,this.foundChildren.push(o))}}-1!==e.key.toString().toLowerCase().search(t)||e.hasVisibleChildren(e)?(this.searchedGroups.push(e),e.visible=!0):e.visible=!1},t.prototype.buildTransformationPanel=function(e){var t=this,n=document.body.clientWidth-100,i=document.createElement("div");i.className="mobile-transformation-panel",i.id="mobile-transformation-panel",document.body.appendChild(i);var o=document.createElement("div");o.className="mobile-transformation-input-wrapper",i.appendChild(o);var a=document.createElement("div");a.className="mobile-transformation-triple-wrapper";var l=document.createElement("div");l.className="mobile-transformation-triple-input-wrapper";var r=document.createElement("span");r.className="mobile-transformation-input-title",r.textContent="X",l.appendChild(r);var c=document.createElement("input");c.className="mobile-transformation-input-triple",c.id="mobile-transformation-input-x",c.onkeyup=function(e){e.preventDefault(),e.stopPropagation()},l.appendChild(c),a.appendChild(l);var d=document.createElement("div");d.className="mobile-transformation-triple-input-wrapper";var h=document.createElement("span");h.className="mobile-transformation-input-title",h.textContent="Y",d.appendChild(h);var u=document.createElement("input");u.className="mobile-transformation-input-triple",u.id="mobile-transformation-input-y",u.onkeyup=function(e){e.preventDefault(),e.stopPropagation()},d.appendChild(u),a.appendChild(d);var m=document.createElement("div");m.className="mobile-transformation-triple-input-wrapper";var f=document.createElement("span");f.className="mobile-transformation-input-title",f.textContent="Z",m.appendChild(f);var v=document.createElement("input");v.className="mobile-transformation-input-triple",v.id="mobile-transformation-input-x",v.onkeyup=function(e){e.preventDefault(),e.stopPropagation()},m.appendChild(v),a.appendChild(m);var g=document.createElement("div");g.className="mobile-transformation-scale-wrapper";var C=document.createElement("span");C.className="mobile-transformation-input-title",C.textContent=s.translate("ID_TRANSFORM_SCALING",p.settings.lang),C.id="ID_TRANSFORM_SCALING",s.translationObjects.push(C),g.appendChild(C);var E=document.createElement("input");E.className="mobile-transformation-scale-input",E.id="mobile-transformation-scale-input",E.onkeyup=function(e){e.preventDefault(),e.stopPropagation()},g.appendChild(E),o.appendChild(a),o.appendChild(g);var _=document.createElement("select");_.className="mobile-transformation-type",_.id="mobile-transformation-type",i.appendChild(_);var b=document.createElement("option");b.value="Translation",b.id="ID_TRANSLATION",b.textContent=s.translate("ID_TRANSLATION",p.settings.lang),s.translationObjects.push(b),_.appendChild(b);var I=document.createElement("option");I.value="Rotation",I.id="ID_GRP_ROTATION",I.textContent=s.translate("ID_GRP_ROTATION",p.settings.lang),s.translationObjects.push(I),_.appendChild(I);var S=document.createElement("option");switch(S.value="Scaling",S.id="ID_TRANSFORM_SCALING",S.textContent=s.translate("ID_TRANSFORM_SCALING",p.settings.lang),s.translationObjects.push(S),_.appendChild(S),e.replace("Transformation_","")){case"Move":$(g).hide(),$(a).show(),$(_).val("Translation");break;case"Rotate":$(g).hide(),$(a).show(),$(_).val("Rotation");break;case"Scale":$(g).show(),$(a).hide(),$(_).val("Scaling")}$(i).outerWidth()>n?($(i).addClass("mobile-vertical-transformation-panel"),$(".mobile-transformation-input-title").addClass("mobile-vertical-transformation-panel-input")):($(i).removeClass("mobile-vertical-transformation-panel"),$(".mobile-transformation-input-title").removeClass("mobile-vertical-transformation-panel-input")),_.addEventListener("change",function(e){var n,i=_.value;switch(i){case"Translation":n='<Call Method="ActivateInteraction"><Interaction>Transformation_Move</Interaction></Call>',$(g).hide(),$(a).show();break;case"Rotation":n='<Call Method="ActivateInteraction"><Interaction>Transformation_Rotate</Interaction></Call>',$(g).hide(),$(a).show();break;case"Scaling":n='<Call Method="ActivateInteraction"><Interaction>Transformation_Scale</Interaction></Call>',$(g).show(),$(a).hide()}t.client.command.executeXML(n)}),this.client.on("TransformChanged",function(e){switch(_.value){case"Translation":$(c).val(e.Translation.X.__text__),$(u).val(e.Translation.Y.__text__),$(v).val(e.Translation.Z.__text__);break;case"Rotation":$(c).val(e.Rotation.X.__text__),$(u).val(e.Rotation.Y.__text__),$(v).val(e.Rotation.Z.__text__);break;case"Scaling":$(E).val(e.Scaling.Scale.__text__)}}),$(c).change(function(e){var n='<Event Type="TransformChanged"><'+_.value+"><X>"+c.value+"</X></"+_.value+"></Event>";t.client.command.executeXML(n)}),$(u).change(function(e){var n='<Event Type="TransformChanged"><'+_.value+"><Y>"+u.value+"</Y></"+_.value+"></Event>";t.client.command.executeXML(n)}),$(v).change(function(e){var n='<Event Type="TransformChanged"><'+_.value+"><Z>"+v.value+"</Z></"+_.value+"></Event>";t.client.command.executeXML(n)}),$(E).change(function(e){var n='<Event Type="TransformChanged"><Scaling><Scale>'+E.value+"</Scale></Scaling></Event>";t.client.command.executeXML(n)}),this.client.on("ActivateTransform",function(e){var n=e.replace("Transformation_","");if("Rotate"===n||"Move"===n||"Scale"===n){if(0!==$("#mobile-transformation-panel").length){-1===t.activeOverlays.indexOf("transformation")&&t.activeOverlays.push("transformation"),$("#mobile-transformation-panel").show()}switch(n){case"Move":$(g).hide(),$(a).show(),$(_).val("Translation");break;case"Rotate":$(g).hide(),$(a).show(),$(_).val("Rotation");break;case"Scale":$(g).show(),$(a).hide(),$(_).val("Scaling")}}}),this.client.on("DeactivateTransform",function(e){if(0!==$("#mobile-transformation-panel").length){$("#mobile-transformation-panel").hide();var n=t.activeOverlays.indexOf("transformation");-1!==n&&t.activeOverlays.splice(n,1)}})},t.prototype.resizeTransformPanel=function(){if(this.activeOverlays.indexOf("transformation"),0!==$("#mobile-transformation-panel").length&&-1!==this.activeOverlays.indexOf("transformation")){var e=$("#mobile-transformation-panel")[0],t=document.body.clientWidth-100;$(e).outerWidth()>t?($(e).addClass("mobile-vertical-transformation-panel"),$(".mobile-transformation-input-title").addClass("mobile-vertical-transformation-panel-input")):($(e).removeClass("mobile-vertical-transformation-panel"),$(".mobile-transformation-input-title").removeClass("mobile-vertical-transformation-panel-input"))}},t.prototype.buildTextSearch=function(){var e=this,t=0,n=document.createElement("div");n.className="mobile-text-search-panel",n.id="mobile-text-search-panel",document.body.appendChild(n);var i=document.createElement("div");i.className="mobile-text-search-action-wrapper",i.id="mobile-text-search-action-wrapper",n.appendChild(i);var o=document.createElement("i");$(o).addClass("fa fa-chevron-left mobile-text-search-icon");var a=document.createElement("input");a.className="mobile-text-search-input",a.id="mobile-text-search-input";var l=document.createElement("i");$(l).addClass("fa fa-chevron-right mobile-text-search-icon");var r=document.createElement("span");r.className="mobile-text-search-result",r.textContent="0/0",this.client.on("TextSearchChangeIndex",function(e){var n=parseInt(e)+1;r.textContent=n+"/"+t}),this.client.on("TextSearch",function(e){$(a).val($("#UID_TEXT_SEARCH_TEXT").val()),r.textContent="1/"+e}),this.client.on("SearchText",function(n){t=n.Results,r.textContent="1/"+n.Results,"SUCCESS"===n.Error&&e.client.emit("TextSearch",n.Results)}),$(a).on("change",function(t){var n=a.value;if($("#UID_TEXT_SEARCH_TEXT").val(a.value),""!==n){var i='<Call Method="SearchText"><SearchString>'+n+"</SearchString></Call>";e.client.command.executeXML(i)}}),$(o).click(function(n){e.client.command.executeXML('<Call Method="HighlightPreviousTextSearchResult"></Call>'),e.client.once("HighlightPreviousTextSearchResult",function(n){if("SUCCESS"===n.Error){e.client.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),e.client.once("GetHighlightedTextSearchResultIndex",function(e){var n=parseInt(e.Index)+1;r.textContent=n+"/"+t})}})}),$(l).click(function(n){e.client.command.executeXML('<Call Method="HighlightNextTextSearchResult"></Call>'),e.client.once("HighlightNextTextSearchResult",function(n){if("SUCCESS"===n.Error){e.client.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),e.client.once("GetHighlightedTextSearchResultIndex",function(e){var n=parseInt(e.Index)+1;r.textContent=n+"/"+t})}})}),i.appendChild(o),i.appendChild(a),i.appendChild(l),i.appendChild(r),i.clientWidth<340&&(a.style.width=n.clientWidth-80+"px")},t.prototype.resizeTextSearchPanel=function(){if(0!==$("mobile-text-search-panel").length){var e=$("mobile-text-search-input")[0],t=$("mobile-text-search-action-wrapper")[0],n=$("mobile-text-search-panel")[0];t.clientWidth<340?e.style.width=n.clientWidth-80+"px":e.style.width="auto"}},t.prototype.cleanGroups=function(){for(var e=0;e<this.groups.length;e++){var t=this.groups[e];if(t.hasVisibleChildren(t)||!t.parent||t.flag)t.parent||t.expand();else{t.hide();for(var n=0;n<t.children.length;n++)t.children[n].hide()}}if("wv-measurement"===this.openPane){for(var i=void 0,o=void 0,a=void 0,l=void 0,r=void 0,e=0;e<this.groups.length;e++)if(this.groups[e].id)switch(this.groups[e].id){case"UID_MEASUREMENT_PANE_DISTANCE":a=this.groups[e];break;case"UID_MEASUREMENT_PANE_POINT":o=this.groups[e];break;case"UID_MEASUREMENT_PANE_WALLTHICKNESS":i=this.groups[e];break;case"UID_MEASUREMENT_PANE_PLANE_TO_AXIS":l=this.groups[e];break;case"UID_MEASUREMENT_PANE_PLANE_PROJECTED_LINE":r=this.groups[e]}if(-1!==m.appStates.interactionMode.indexOf("Measurement_WallThickness_RayBased")||-1!==m.appStates.interactionMode.indexOf("Measurement_WallThickness_RollingBall"))i.expand(!0),a.collapse(!0),o.collapse(!0),l.collapse(!0),r.collapse(!0);else if(-1!==m.appStates.interactionMode.indexOf("Measurement_PointCoordinate"))i.collapse(!0),a.collapse(!0),o.expand(!0),l.collapse(!0),r.collapse(!0);else if(-1!==m.appStates.interactionMode.indexOf("Measurement_AngleBetweenPlaneDirection"))i.collapse(!0),a.collapse(!0),o.collapse(!0),l.expand(!0),r.collapse(!0);else if(-1!==m.appStates.interactionMode.indexOf("Measurement_AngleBetweenTwoProjectedLines"))i.collapse(!0),a.collapse(!0),o.collapse(!0),l.collapse(!0),r.expand(!0);else{for(var s=!1,e=0;e<m.appStates.interactionMode.length;e++)if(-1!==m.appStates.interactionMode[e].indexOf("Measurement")&&-1!==m.appStates.interactionMode[e].indexOf("Distance")){s=!0;break}i.collapse(!0),o.collapse(!0),l.collapse(!0),r.collapse(!0),s?a.expand(!0):a.collapse(!0)}}},t.prototype.cleanGroup=function(e){e.hasVisibleChildren(e)||!e.parent||e.flag||e.hide()},t.prototype.createElement=function(e,t,n){if(!e.IsHidden||"true"!==e.IsHidden)for(var i,o={},a=e.__ordinal__,l=0;l<a.length;l++){var r=a[l];void 0===o[r]?(o[r]=0,Array.isArray(e[r])||(e[r]=[e[r]]),"object"==typeof(i=e[r][0])&&this.buildItem(i,r,t,n)):(o[r]++,"object"==typeof(i=e[r][o[r]])&&this.buildItem(i,r,t,n))}},t.prototype.buildItem=function(e,t,n,i){var o=this;if(!e.IsHidden||"true"!==e.IsHidden){var l,r,c,d,p=e,h=this.settingsMap.length;switch(t){case"Group":i++;var u=new a.MobileGroup(this.wrapperEl,e.DisplayName,!0,n,i,this.client);p.UId&&(u.id=Array.isArray(p.UId)?p.UId[0]:p.UId),this.createElement(e,u,i),this.groups.push(u),u.setToolTip(p.Tooltip);break;case"Text":case"Float":if(p.DisplayType&&"Slider"===p.DisplayType){p.Setting?(l="setting",r=p.Setting.split(".")):p.EventPath&&(l=this.template.Event,r=p.EventPath.split("."));var m=p.DisplayName;d="true"===p.IsReadOnly;var f=new a.MobileSlider(this.wrapperEl,l,m,r,n,i,d,this.client);p.UId&&(f.inputEl.id=p.UId),c={el:f,setting:r},this.settingsMap.push(c);break}case"Integer":p.Setting?(l="setting",r=p.Setting.split(".")):p.EventPath?(l=this.template.Event,r=p.EventPath.split(".")):(l="none",r=void 0);var v=p.DisplayName;d="true"===p.IsReadOnly;var g=new a.MobileInput(this.wrapperEl,l,r,v,n,i,d,this.client);"Float"!==t&&"Integer"!==t||(g.isNumber=!0),p.UId&&(g.valueEl.id=p.UId),p.Suffix&&(g.suffix=p.Suffix),"none"===l?(g.val="show",g.visible=!0):(c={el:g,setting:r},this.settingsMap.push(c));break;case"Bool":p.Setting?(l="setting",r=p.Setting.split(".")):p.EventPath?(l=this.template.Event,r=p.EventPath.split(".")):(l="none",r=void 0),v=p.DisplayName,d="true"===p.IsReadOnly;var C=new a.MobileSwitch(this.wrapperEl,l,r,v,n,i,d,this.client);p.UId&&(C.hiddenCheckbox.id=p.UId),"none"===l?(C.setValue("false"),C.visible=!0):(c={el:C,setting:r},this.settingsMap.push(c));break;case"EnumFlag":if(p.Setting){l="setting";r=(Array.isArray(p.Setting)?p.Setting[0]:p.Setting).split("."),d="true"===p.IsReadOnly;var E=new a.MobileFlag(r,this.client,this.wrapperEl);i++;var _=new a.MobileGroup(this.wrapperEl,e.DisplayName,!0,n,i,this.client,E);_.visible=!0,p.UId&&(u.id=p.UId),this.createElement(e,_,i),this.groups.push(_),_.setToolTip(p.Tooltip);p.Options[0].Option.forEach(function(e){var t=new a.MobileFlagOption(o.wrapperEl,e.Value,e.DisplayName,_,i,d,o.client,E);t.visible=!0,E.addOption(t)}),c={el:_,setting:r},this.settingsMap.push(c)}break;case"Enum":p.Setting?(l="setting",r=p.Setting.split(".")):p.EventPath&&(l=this.template.Event,r=p.EventPath.split(".")),v=p.DisplayName;for(var b=[],I=0;I<p.Options.Option.length;I++){var S={display:p.Options.Option[I].DisplayName,value:p.Options.Option[I].Value};b.push(S)}"UID_PRESETS"===p.UId&&b.push({display:s.translate("ID_WALLTHICKNESS_PRESET_USERDEFINED"),value:"USERDEF"}),d="true"===p.IsReadOnly;var y=new a.MobileSelect(this.wrapperEl,l,r,v,n,i,d,b,this.client);p.UId&&(y.valueEl.id=p.UId),"none"===l||p.EventPath&&"Preset"===r[1]?(y.setValue(b[0].value),y.visible=!0):(c={el:y,setting:r},this.settingsMap.push(c));break;case"Button":v=p.DisplayName,d="true"===p.IsReadOnly;var w=new a.MobileButton(this.wrapperEl,v,n,i,d,this.client);p.UId&&(w.titleEl.id=p.UId),this.buttons.push(w);break;case"KeyValue":v=p.Name,l="keyVal";for(var M=[],x=0;x<p.__ordinal__.length;x++){var N=p.__ordinal__[x];if("Name"!==N){var T=p[N];switch(N){case"Float":var O={type:N,addition:T.Prefix,setting:T.Setting,name:T.Name};M.push(O);break;case"Color":var D={type:N,addition:T.Mode,setting:T.Setting,name:T.Name};M.push(D)}}}d="true"===p.IsReadOnly;c={el:new a.MobileKeyValue(this.wrapperEl,v,l,M,n,i,d,this.client),setting:["Setting"]},this.settingsMap.push(c);break;case"Color":p.Setting?(l="setting",r=p.Setting.split(".")):p.EventPath&&(l=this.template.Event,r=p.EventPath.split("."));var L=void 0;L="RGB"!==p.Mode,v=p.DisplayName,d="true"===p.IsReadOnly;c={el:new a.MobileColorPicker(this.wrapperEl,l,r,v,L,n,i,d,this.client),setting:r},this.settingsMap.push(c)}h<this.settingsMap.length&&this.settingsMap[h].el.setToolTip(p.Tooltip)}},t.prototype.sort=function(e,t,n){return n?e>=t?1:-1:t>=e?1:-1},t.prototype.buildColorTable=function(){var e=this;this.removeOldResults(),$(this.filterTable).show();var t=this.filterList;document.createElement("span").textContent="";for(var n=0;n<t.length;n++){var i=document.createElement("tr");i.className="mobile-filter-color-list-row",i.id="ColorSearchResult_"+t[n].Color.replace("#","");var o=document.createElement("td");o.className="";var a=document.createElement("div");a.className="mobile-filter-color-list-color",a.style.listStyle="none";var l="#"+t[n].Color.slice(3);a.textContent=l,a.style.backgroundColor=l,a.style.textAlign="center";for(var r=l.substr(1),s=parseInt(r,16),c=(s>>16&255)/255,d=(s>>8&255)/255,p=(255&s)/255,h=[c,d,p],u=0;u<h.length;u++)h[u]<=.03928?h[u]=h[u]/12.92:h[u]=Math.pow((h[u]+.055)/1.055,2.4);var m=.2126*h[0]+.7152*h[1]+.0722*h[2],f=m>.179?"black":"white";a.style.color=f,$(a).mousedown(function(t){var n='<Call Method="SearchNodes">';n+="<Color>"+t.target.textContent+"</Color>",n+="<SelectionMode>Select</SelectionMode>",n+="<IncludeHiddenGeometries>"+e.sceneSettings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",n+="</Call>",e.client.command.executeXML(n)}),o.appendChild(a),i.appendChild(o);var v=document.createElement("td");v.className="";var g=document.createElement("div");g.className="mobile-filter-color-list-count",g.textContent=t[n].Quantity,v.appendChild(g),i.appendChild(v),this.filterTableBodyEl.appendChild(i)}},t.prototype.removeOldResults=function(){$(".mobile-filter-color-list-row").each(function(){$(this).remove()})},t.prototype.openFileBrowser=function(e){var t=this,n=50;try{_MobileFilesPerPage&&(n=_MobileFilesPerPage)}catch(e){}var i="";if(s.mobileSettings.activePath!==[])for(var o=s.mobileSettings.activePath.length,a=0;a<o;a++)i+=s.mobileSettings.activePath[a]+"\\";var r=this.client.command.makeBinaryPath(i,!0,0,n-1);this.client.sendBinaryPackage(1,210,r),$(this.paneEl).empty(),document.body.clientWidth/2>300?$(this.paneEl).width(document.body.clientWidth/2):$(this.paneEl).width(300),this.titleEl=document.createElement("div"),this.titleEl.className="mobile-pane-title",this.titleEl.id="mobile-breadcrumb",this.paneEl.appendChild(this.titleEl),this.openPane="wv-file",this.settingsMap=[],this.titleEl.textContent="File browser",this.titleEl.style.position="absolute",this.titleEl.style.width="100%",this.paneEl.style.overflow="hidden",this.titleEl.style.paddingLeft="35px",this.client.once("GetFolderContent",function(n){new l.MobileFileBrowser(t.paneEl,t.client,n,e).setInitPath(s.mobileSettings.activePath)}),this.client.once("@OpenedFile",function(e){t.clearFileBrowser()})},t.prototype.clearFileBrowser=function(){"wv-file"===this.openPane&&($(this.paneEl).empty(),this.paneEl.style.left="calc(-90%)",this.paneEl.style.overflow="auto",$("#wv_mobile_multi_file_submit").remove())},t.prototype.openModelTree=function(){this.titleEl=document.createElement("div"),this.titleEl.className="mobile-pane-title",this.paneEl.appendChild(this.titleEl),this.openPane="wv-modeltree",this.settingsMap=[],this.titleEl.textContent=s.translate("ID_"+this.openPane),this.paneEl.style.overflow="hidden",this.treePane=new c.MobileModeltree(this.paneEl,this.client),this.virtualTree&&this.treePane.updateTree(this.virtualTree)},t.prototype.appendSplitSession=function(e,t){var n=this;if(void 0===t&&(t=!1),!this.resultInitialized){this.resultGroup=new a.MobileGroup(this.wrapperEl,s.translate("ID_SPLIT_RESULTS"),!1,void 0,0,this.client),this.resultSessionIdEl=new a.MobileInput(this.wrapperEl,void 0,void 0,s.translate("ID_SPLIT_SESSION_ID"),this.resultGroup,0,!1,this.client),this.resultSessionNameEl=new a.MobileInput(this.wrapperEl,void 0,void 0,s.translate("ID_SPLIT_SESSION_NAME"),this.resultGroup,0,!1,this.client,this.setSessionName.bind(this)),this.resultExplodeDistanceEl=new a.MobileInput(this.wrapperEl,void 0,void 0,s.translate("ID_SPLIT_EXPLODE_DISTANCE"),this.resultGroup,0,!1,this.client,this.setMaxExplodeDistance.bind(this)),this.resultSliderEl=new a.MobileSlider(this.wrapperEl,void 0,s.translate("ID_SPLIT_EXPLODE_LEVEL"),void 0,this.resultGroup,0,!1,this.client,this.setDistance.bind(this)),this.resultSliderEl.setValue(0);var i=new a.MobileGroup(this.wrapperEl,s.translate("ID_SPLIT_RESULT_GROUP_UNASSIGNED"),!1,this.resultGroup,1,this.client);this.unassignedPatches=new a.MobileInput(this.wrapperEl,void 0,void 0,s.translate("ID_SPLIT_NUMBER_OF_UNASSIGNED_PATCHES"),i,1,!0,this.client),this.unassignedColor=new a.MobileColorPicker(this.wrapperEl,void 0,void 0,s.translate("ID_COLOR"),!1,i,1,!1,this.client,this.setUnassignedColor.bind(this));var o=(new a.MobileButton(this.wrapperEl,s.translate("ID_SPLIT_REGROUP_PATCH"),i,1,!1,this.client,this.moveUnassigned.bind(this)),new a.MobileGroup(this.wrapperEl,s.translate("ID_SPLIT_RESULT_GROUP_UP"),!1,this.resultGroup,1,this.client));this.upColor=new a.MobileColorPicker(this.wrapperEl,void 0,void 0,s.translate("ID_COLOR"),!1,o,1,!1,this.client,this.setUpColor.bind(this));var l=(new a.MobileButton(this.wrapperEl,s.translate("ID_SPLIT_REGROUP_PATCH"),o,1,!1,this.client,this.moveUp.bind(this)),new a.MobileGroup(this.wrapperEl,s.translate("ID_SPLIT_RESULT_GROUP_DOWN"),!1,this.resultGroup,1,this.client));this.downColor=new a.MobileColorPicker(this.wrapperEl,void 0,void 0,s.translate("ID_COLOR"),!1,l,1,!1,this.client,this.setDownColor.bind(this));new a.MobileButton(this.wrapperEl,s.translate("ID_SPLIT_REGROUP_PATCH"),l,1,!1,this.client,this.moveDown.bind(this));this.resultInitialized=!0,this.splitGroupTable=document.createElement("table"),this.splitGroupTable.className="mobile-pane-table",this.wrapperEl.appendChild(this.splitGroupTable);var r=document.createElement("thead");this.splitGroupTable.appendChild(r);var c=document.createElement("tr");r.appendChild(c),this.directionCol=document.createElement("th"),this.directionCol.textContent=s.translate("ID_SPLIT_DIRECTION_VECTOR"),c.appendChild(this.directionCol),this.upCol=document.createElement("th"),this.upCol.textContent=s.translate("ID_SPLIT_RESULT_GROUP_UP"),c.appendChild(this.upCol),this.downCol=document.createElement("th"),this.downCol.textContent=s.translate("ID_SPLIT_RESULT_GROUP_DOWN"),c.appendChild(this.downCol),this.splitGroupTableBody=document.createElement("tbody"),this.splitGroupTable.appendChild(this.splitGroupTableBody);var d=document.createElement("tr");this.splitGroupTableBody.appendChild(d)}var p=document.createElement("tr");p.className="pane-item",p.onclick=function(t){n.activateSession(e)},this.splitGroupTableBody.appendChild(p),e.directionEl=document.createElement("td"),e.directionEl.textContent=e.directionName,p.appendChild(e.directionEl),e.upEl=document.createElement("td"),e.upEl.textContent=e.upNumPatches.toString(),e.upEl.style.backgroundColor="#"+e.upColor.slice(3),e.upEl.style.color=s.calculateFontColor("#"+e.downColor.slice(3)),p.appendChild(e.upEl),e.downEl=document.createElement("td"),e.downEl.textContent=e.downNumPatches.toString(),e.downEl.style.backgroundColor="#"+e.downColor.slice(3),e.downEl.style.color=s.calculateFontColor("#"+e.downColor.slice(3)),p.appendChild(e.downEl),t||this.sessions.push(e),this.activateSession(e)},t.prototype.setSessionName=function(e){},t.prototype.setMaxExplodeDistance=function(e){var t='<Call Method="SetSplitFullExplodeDistance">';t+="<SplitFullExplodeDistance>"+parseFloat(e)+"</SplitFullExplodeDistance>",t+="</Call>",this.client.command.executeXML(t)},t.prototype.setSplitDirection=function(){var e='<Call Method="SetSplitDirection">';e+="<X>"+$("#SplitXDirection").text()+"</X>",e+="<Y>"+$("#SplitYDirection").text()+"</Y>",e+="<Z>"+$("#SplitZDirection").text()+"</Z>",e+="</Call>",this.client.command.executeXML(e)},t.prototype.clearSplitGroupTable=function(){$(this.splitGroupTableBody).empty(),this.sessions=[]},t.prototype.restartSession=function(){if(this.resultGroup){this.client.command.executeXML('<Call Method="StartNewSplitSession"></Call>'),$(this.splitGroupTable).hide(),this.sessions=[],this.resultGroup.collapse(),this.clearSplitGroupTable(),$(this.resultGroup.wrapperEl).hide()}},t.prototype.activateSession=function(e){this.resultExplodeDistanceEl.setValue(e.maxExplodeDistance),this.resultSliderEl.setValue(e.sliderPos/100),this.resultSessionIdEl.setValue(e.id),this.resultSessionNameEl.setValue(e.name),this.unassignedPatches.setValue(e.unassignedNumPatches),this.unassignedColor.setValue(e.unassignedColor),this.upColor.setValue(e.upColor),this.downColor.setValue(e.downColor),this.activeSession=e,$(".split-group-active").removeClass("split-group-active"),$(e.directionEl).addClass("split-group-active")},t.prototype.setDistance=function(e){var t='<Call Method="ExplodeSplitGroups">';t+="<Position>"+parseInt((100*e).toString())+"</Position>",t+="</Call>",this.client.command.executeXML(t)},t.prototype.setUnassignedColor=function(e){var t='<Call Method="SetSplitUnassignedColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupUnassignedColor>"+e+"</SplitGroupUnassignedColor>",t+="</Call>",this.client.command.executeXML(t),this.activeSession.unassignedColor=e},t.prototype.setUpColor=function(e){var t='<Call Method="SetSplitGroupUpColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupUpColor>"+e+"</SplitGroupUpColor>",t+="</Call>",this.client.command.executeXML(t),this.activeSession.upColor=e,this.activeSession.upEl.style.backgroundColor=e},t.prototype.setDownColor=function(e){var t='<Call Method="SetSplitGroupDownColor">';t+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",t+="<SplitGroupDownColor>"+e+"</SplitGroupDownColor>",t+="</Call>",this.client.command.executeXML(t),this.activeSession.downColor=e,this.activeSession.downEl.style.backgroundColor=e},t.prototype.moveUnassigned=function(){this.client.command.executeXML('<Call Method="UnassignSplitSelectedPatches"></Call>')},t.prototype.moveUp=function(){var e='<Call Method="AssignSplitSelectedPatchesToGroupUp">';e+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",e+="</Call>",this.client.command.executeXML(e)},t.prototype.moveDown=function(){var e='<Call Method="AssignSplitSelectedPatchesToGroupDown">';e+="<SplitDirectionId>"+this.activeSession.directionId+"</SplitDirectionId>",e+="</Call>",this.client.command.executeXML(e)},t.prototype.buildHeader=function(e,t){var n=this;$(this.tableHeaderRowEl).empty(),this.headerKeys=[];for(var i=this,o=0;o<e.length;o++)!function(o){var a=document.createElement("th");a.textContent=e[o].DisplayName,a.className="pane-item-entry-name",i.headerKeys.push(e[o].Id),i.headerNames.push(e[o].DisplayName);var l=document.createElement("span");a.appendChild(l);var r=document.createElement("i");r.className="fas fa-sort bom-pane-sort-icon",l.appendChild(r),a.onclick=function(i){-1!==r.className.indexOf("fa-sort-up")?(r.className="fas fa-sort-down bom-pane-sort-icon",n.sortTable(!1,e[o].Id,t)):(r.className="fas fa-sort-up bom-pane-sort-icon",n.sortTable(!1,e[o].Id,t))},i.tableHeaderRowEl.appendChild(a)}(o)},t.prototype.buildBody=function(e,t){if(e){this.calloutInputs=[],this.rows=[],this.sum=0,$(this.tableBodyEl).empty();var n=document.createElement("tr");this.tableBodyEl.appendChild(n);for(var i=0;i<e.length;i++)this.buildRow(e[i],t);"BOM"===t&&this.buildSumRow()}},t.prototype.buildRow=function(e,t){var n=this;this.rows.push(e);var i=document.createElement("tr");i.className="pane-item",i.id=t+"_ROW_ID"+e.Id,i.onclick=function(i){"BOM"===t?n.BOMRowClicked(e,i):"clash"===t&&n.clashRowClicked(e)},this.tableBodyEl.appendChild(i);for(var o=this,a=0;a<this.headerKeys.length;a++)!function(a){var l=document.createElement("td");l.className="pane-item-entry-name","BOM"===t?("CalloutId"===o.headerKeys[a]&&(o.calloutInputs.push(l),l.contentEditable="true",l.onblur=function(t){if(l.textContent&&""!==l.textContent){var i='<Call Method="UpdateBillOfMaterialRowCalloutId">';i+="<RowId>"+e.Id+"</RowId>",i+="<CalloutId>"+l.textContent+"</CalloutId></Call>",e.CalloutId=l.textContent,n.client.command.executeXML(i)}else{var i='<Call Method="ClearBillOfMaterialCalloutId">';i+="<RowId>"+e.Id+"</RowId></Call>",e.CalloutId=l.textContent,n.client.command.executeXML(i)}},l.onkeydown=function(e){13===e.keyCode&&l.blur()}),l.textContent=-1===o.defaultCols.indexOf(o.headerKeys[a])?o.searchAttribute(e,o.headerKeys[a]):e[o.headerKeys[a]],"Quantity"===o.headerKeys[a]&&(o.sum+=parseInt(e[o.headerKeys[a]]))):"clash"===t&&(l.textContent=e[o.headerKeys[a]]),i.appendChild(l)}(a)},t.prototype.BOMRowClicked=function(e,t){var n='<Call Method="SelectBillOfMaterialRows">';n+="<RowId>"+e.Id+"</RowId>",n+="<AddToSelection>"+(t.ctrlKey||this.multiselect)+"</AddToSelection>",n+="</Call>",this.client.command.executeXML(n)},t.prototype.clashRowClicked=function(e){var t='<Call Method="SelectClashIndex">';t+="<Index>"+e.Id+"</Index>",t+="</Call>",this.selectedIndex=e.Id,this.client.command.executeXML(t)},t.prototype.sortTable=function(e,t,n){var i=this.rows.sort(function(i,o){var a,l,r=i[t],s=o[t];if("BOM"===n&&void 0===i[t])for(var c=0;c<i.Attribute.length;c++)i.Attribute[c].Name===t&&(r=i.Attribute[c].__text__,s=o.Attribute[c].__text__);return l=isNaN(parseFloat(r))?r.toUpperCase():parseFloat(s),a=isNaN(parseFloat(r))?s.toUpperCase():parseFloat(r),a>l?e?1:-1:e?-1:1});this.buildBody(i,n)},t.prototype.searchAttribute=function(e,t){if(e.Attribute){for(var n=Array.isArray(e.Attribute)?e.Attribute:[e.Attribute],i=0;i<n.length;i++)if(n[i].Name===t)return n[i].__text__;return""}},t.prototype.buildSumRow=function(){var e=document.createElement("tr");this.tableBodyEl.appendChild(e);var t=document.createElement("td");t.className="pane-item",e.appendChild(t);var n=document.createElement("td");n.className="pane-item",e.appendChild(n);var i=document.createElement("td");i.className="bom-pane-sum-cell pane-item",i.textContent=this.sum.toString(),e.appendChild(i);var o=document.createElement("td");o.className="pane-item",e.appendChild(o)},t.prototype.buildDefaultBOMHeader=function(){$(this.tableHeaderRowEl).empty();var e=document.createElement("th");e.textContent=s.translate("ID_BOM_COLUMN_CALLOUT_ID"),e.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(e);var t=document.createElement("th");t.textContent=s.translate("ID_BOM_PARTNAME"),t.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(t);var n=document.createElement("th");n.textContent=s.translate("ID_BOM_QUANTITY"),n.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(n)},t.prototype.buildDefaultClashHeader=function(){$(this.tableHeaderRowEl).empty();var e=document.createElement("th");e.textContent=s.translate("ID_NUM"),e.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(e);var t=document.createElement("th");t.textContent=s.translate("ID_CLASH_NODE_NAME"),t.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(t);var n=document.createElement("th");n.textContent=s.translate("ID_CLASH_NODE_NAME"),n.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(n);var i=document.createElement("th");i.textContent=s.translate("ID_CLASH_STATUS"),i.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(i);var o=document.createElement("th");o.textContent=s.translate("ID_CLASH_DEPTH"),o.className="pane-item-entry-name",this.tableHeaderRowEl.appendChild(o)},t.prototype.selectCallouts=function(){var e=this;this.client.command.executeXML('<Call Method="GetSelectedBillOfMaterialRows"></Call>'),this.client.once("GetSelectedBillOfMaterialRows",function(t){for(var n=0;n<e.rows.length;n++)$("#BOM_ROW_ID"+e.rows[n].Id).removeClass("bom-pane-row-selected");if(t.RowId)for(var i=Array.isArray(t.RowId)?t.RowId:[t.RowId],n=0;n<i.length;n++)$("#BOM_ROW_ID"+i[n]).addClass("bom-pane-row-selected")})},t.prototype.setExplodeType=function(e){this.explodeType=e,this.isHierarchically?this.explodeStepped(this.explodeStep):this.explode(this.explodeDistance)},t.prototype.setHierarchically=function(e){this.isHierarchically=e,this.explodeGroupEl.children.pop(),e?(this.explodeSliderEl.hide(),this.explodeSteppedSliderEl.show()):(this.explodeSliderEl.show(),this.explodeSteppedSliderEl.hide()),this.explodeSliderEl.setValue(0),this.explodeSteppedSliderEl.setValue(0)},t.prototype.setLevel=function(){},t.prototype.nextLevel=function(){this.client.command.executeXML('<Call Method="SelectNextExplosionLevel"></Call>');this.client.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.prevLevel=function(){this.client.command.executeXML('<Call Method="SelectPreviousExplosionLevel"></Call>');this.client.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.resetExplosion=function(){this.client.command.executeXML('<Call Method="ResetExplosion"></Call>');this.client.command.executeXML('<Call Method="GetSelectionNodeLevel"></Call>')},t.prototype.setTypeOptions=function(){this.explodeTypeEl.clearOptions();var e={display:s.translate("ID_EXPLOSION_TYPE_AXES_ALIGNED"),value:"AxisAligned"},t={display:s.translate("ID_EXPLOSION_TYPE_SPHERICAL"),value:"Spherical"},n={display:s.translate("ID_EXPLOSION_TYPE_X_AXIS"),value:"AxisX"},i={display:s.translate("ID_EXPLOSION_TYPE_Y_AXIS"),value:"AxisY"},o={display:s.translate("ID_EXPLOSION_TYPE_Z_AXIS"),value:"AxisZ"},a={display:s.translate("ID_EXPLOSION_TYPE_RADIAL_XY"),value:"RadialXY"},l={display:s.translate("ID_EXPLOSION_TYPE_RADIAL_YZ"),value:"RadialYZ"},r={display:s.translate("ID_EXPLOSION_TYPE_RADIAL_ZX"),value:"RadialZX"};this.explodeTypeEl.addOptions([e,t,n,i,o,a,l,r])},t.prototype.explode=function(e){var t='<Call Method="ExplodeByDistance"><Position>'+Math.round(100*e)+"</Position>";t+="<ExplosionType>"+this.explodeType+"</ExplosionType></Call>",this.client.command.executeXML(t),this.explodeDistance=e,this.explodeStep=0,this.explodeSteppedSliderEl.setValue(0)},t.prototype.explodeStepped=function(e){var t=this;this.client.command.executeXML('<Call Method="GetMaxTreeDepth"></Call>'),this.client.once("GetMaxTreeDepth",function(n){if(n&&n.MaxDepth){t.explodeSteppedSliderEl.setMaxSteps(n.MaxDepth),t.maxExplodeSteps=parseInt(n.MaxDepth);var i='<Call Method="ExplodeHierarchically"><Level>'+e+"</Level>";i+="<ExplosionType>"+t.explodeType+"</ExplosionType></Call>",t.client.command.executeXML(i),t.explodeSliderEl.setValue(1),t.explodeDistance=1,t.explodeStep=e}})},t.prototype.updateValues=function(){for(var e=0,t=this.settingsMap;e<t.length;e++){t[e].el.hide()}var n=this.sceneSettings;"wv-settings"===this.openPane&&"true"===$("#mobile-settings-pane-default-toggle").val()&&(n=this.settings);for(var i=0;i<this.settingsMap.length;i++){var o=this.settingsMap[i].el,l=void 0;if(o instanceof a.MobileKeyValue){var r=void 0;o.keyValuePair[0].setting&&(r=this.getSettingForKey(o.keyValuePair[0].setting.split("."),n));var s=this.getSettingForKey(o.keyValuePair[1].setting.split("."),n);void 0===r||void 0===s?l=void 0:(l=[],l.push(r),l.push(s))}else{if(o instanceof a.MobileGroup&&o.flag){l=this.getSettingForKey(this.settingsMap[i].setting,n),o.flag.setOptions(l);continue}l=this.getSettingForKey(this.settingsMap[i].setting,n)}l||o.path&&-1!==o.path.indexOf("AttributesToDisplay")||o instanceof a.MobileSelect&&("UID_PRESET"===o.valueEl.id||"UID_DENSITY_PRESET"===o.valueEl.id)?(o.visible=!0,o.path&&-1!==o.path.indexOf("AttributesToDisplay")&&!l&&(l=""),o.setValue(l),o.show(),o.parent&&!o.parent.isCollapsed&&o.parent.show()):(o.visible=!1,o.hide())}for(var c=0;c<this.eventData.length;c++)this.updateFromEvent(this.eventData[c]);this.cleanGroups(),"wv-settings"===this.openPane&&""!==$("#mobile-settings-search-input").val()&&$("#mobile-settings-search-input").keyup()},t.prototype.updateFromEvent=function(e){for(var t=this,n=0;n<this.settingsMap.length;n++){var i=this.settingsMap[n].el;if((!this.settingsMap[n].setting||"Event"===this.settingsMap[n].setting[0])&&this.template.Event[0]===e.Type){var o=void 0;if(i instanceof a.MobileKeyValue){var l=this.getSettingForKey(i.keyValuePair[0].setting.split("."),e),r=this.getSettingForKey(i.keyValuePair[1].setting.split("."),e);void 0===l||void 0===r?o=void 0:(o=[],o.push(l),o.push(r))}else o=this.getSettingForKey(this.settingsMap[n].setting,e);o||i.path&&-1!==i.path.indexOf("AttributesToDisplay")||i instanceof a.MobileSelect&&("UID_PRESET"===i.valueEl.id||"UID_DENSITY_PRESET"===i.valueEl.id)?(i.visible=!0,i.setValue(o),this.unit&&i instanceof a.MobileInput&&i.setUnit(this.unit),i.show(),i.parent&&(i.parent.expand(),i.parent.show()),this.settingsMap[n].setting&&this.settingsMap[n].setting.length>1&&"AccumulatedLength"!==this.settingsMap[n].setting[1]&&"MeasurementChanged"===e.Type?(this.buttons[0].visible=!1,this.buttons[0].hide(),this.buttons[1].visible=!1,this.buttons[1].hide()):this.settingsMap[n].setting&&this.settingsMap[n].setting.length>1&&"AccumulatedLength"===this.settingsMap[n].setting[1]&&"MeasurementChanged"===e.Type&&(this.buttons[0].visible=!0,this.buttons[0].show(),this.buttons[1].visible=!0,this.buttons[1].show())):"event"!==i.source&&this.template.Event[0]!==e.Type||(i.visible=!1,i.hide())}}if(e&&"NodePropertiesChanged"===e.Type&&"wv-properties"===this.openPane){if(e.PhysicalProperties?(this.buttons[0].visible=!0,this.buttons[0].show()):(this.buttons[0].visible=!1,this.buttons[0].hide()),e.Attributes){var s;this.groups.forEach(function(n){if("UID_PROPERTIES_PANE_ATTRIBUTES"===n.id){n.visible=!0,s=n,s.clear();var i=e.Attributes.Attribute;Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++){var l=i[o],r=new a.MobileInput(t.wrapperEl,void 0,void 0,l.Key,s,2,!0,t.client);r.visible=!0,r.setValue(l.Value),r.show(),s.expand(!0)}}})}else{var c;this.groups.forEach(function(e){"UID_PROPERTIES_PANE_ATTRIBUTES"===e.id&&(e.visible=!1,c=e,c.clear(),c.hide())})}e.Type&&"NodePropertiesChanged"===e.Type&&e.PhysicalProperties&&$("#UID_PRESET").val(parseFloat(e.PhysicalProperties.Density.__text__).toFixed(6))}},t.prototype.getSettingForKey=function(e,t){if(this.unit=void 0,e){for(var n=t,i=e.shift(),o=0;o<e.length;o++){if(!n[e[o]])return void e.unshift(i);n=n[e[o]]}if(e.unshift(i),n instanceof Object){var a=n.__text__;return n.Unit&&(this.unit=n.Unit,a+=" "+n.Unit),a}return n}},t.prototype.applyButtonMethods=function(e){var t=this;switch(e){case"wv-textsearch":$(this.buttons[0].titleEl).off("click").click(function(e){var n=$("#UID_TEXT_SEARCH_TEXT").val();if(""!==n){t.client.once("SearchText",function(e){"SUCCESS"===e.Error&&t.client.emit("TextSearch",e.Results)});var i='<Call Method="SearchText"><SearchString>'+n+"</SearchString></Call>";t.client.command.executeXML(i)}}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="HighlightNextTextSearchResult"></Call>'),t.client.once("HighlightNextTextSearchResult",function(e){if("SUCCESS"===e.Error){t.client.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),t.client.once("GetHighlightedTextSearchResultIndex",function(e){t.client.emit("TextSearchChangeIndex",e.Index)})}})}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="HighlightPreviousTextSearchResult"></Call>'),t.client.once("HighlightPreviousTextSearchResult",function(e){if("SUCCESS"===e.Error){t.client.command.executeXML('<Call Method="GetHighlightedTextSearchResultIndex" />'),t.client.once("GetHighlightedTextSearchResultIndex",function(e){t.client.emit("TextSearchChangeIndex",e.Index)})}})});break;case"wv-flythrough":$(this.buttons[0].titleEl).off("click").click(function(e){s.ribbon.adapter.handleActivateInteraction("Flythrough_SelectStartPositionAndDirection")});break;case"wv-measurement":this.buttons.length>0&&($(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="MeasureSelectedWireLength"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="FinishCurrentAction"></Call>')}));break;case"wv-section":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SectionCenterHandles"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SectionAlignAxis"><Axis>X</Axis></Call>')}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SectionAlignAxis"><Axis>Y</Axis></Call>')}),$(this.buttons[3].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SectionAlignAxis"><Axis>Z</Axis></Call>')}),$(this.buttons[4].titleEl).off("click").click(function(e){var n='<Call Method="SectionSetNormal">';n+="<X>"+t.getSettingForKey(["Movement","Normal","X"],t.settings),n+="<Y>"+t.getSettingForKey(["Movement","Normal","Y"],t.settings),n+="<Z>"+t.getSettingForKey(["Movement","Normal","Z"],t.settings),n+="</Call>",t.client.command.executeXML(n)}),$(this.buttons[5].titleEl).click(function(e){var n='<Call Method="Compute"><Mode>SectionGeometry</Mode>';n+="<Type>Filled</Type>","true"===$("#UID_SECTION_PANE_CREATE_MULTIPLE").val()&&(n+="<Step>"+$("#UID_SECTION_PANE_STEP_WIDTH").text()+"</Step>"),n+="</Call>",t.client.command.executeXML(n)}),$(this.buttons[6].titleEl).click(function(e){var n='<Call Method="Compute"><Mode>SectionGeometry</Mode>';n+="<Type>Wire</Type>","true"===$("#UID_SECTION_PANE_CREATE_MULTIPLE").val()&&(n+="<Step>"+$("#UID_SECTION_PANE_STEP_WIDTH").val()+"</Step>"),n+="</Call>",t.client.command.executeXML(n)}),$(this.buttons[7].titleEl).click(function(e){t.client.command.executeXML('<Call Method="ExportSectionGeometry"><ExportFormat2D>SVG</ExportFormat2D></Call>'),t.client.on("ExportSectionGeometry",function(e){console.log(e)})});break;case"wv-draftangle":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetDraftVector"><Direction>X</Direction></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetDraftVector"><Direction>Y</Direction></Call>')}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetDraftVector"><Direction>Z</Direction></Call>')}),$(this.buttons[3].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RevertDraftVector" />')});break;case"wv-projectedarea":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>ProjectedArea</Mode></Call>')});break;case"wv-wallthickness":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>Wallthickness</Mode></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="StopComputation"></Call>')});break;case"wv-drillhole":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>Drillhole</Mode></Call>')});break;case"wv-mirror":$(this.buttons[0].titleEl).off("click").click(function(e){var n=$("#UID_MIRROR_CREATE_COPY").val(),i=$("#UID_MIRROR_AT_PLANE").val(),o=$("#UID_MIRROR_AT").val(),a='<Call Method="MirrorSelectedNodes">';a+="<Copy>"+n+"</Copy>",a+="<Axis>"+i+"</Axis>",a+="<Location>"+o+"</Location>",a+="</Call>",t.client.command.executeXML(a)});break;case"wv-filter":$(this.buttons[0].titleEl).off("click").click(function(e){var n=$("#UID_SEARCH_BY_NAME_TEXT").text();n&&""!==n&&null!==n&&t.searchNodesByName(n)}),$(this.buttons[1].titleEl).off("click").click(function(e){var n=$("#UID_SEARCH_BY_NAME_TEXT").text();if(n&&""!==n&&null!==n){var i=$("#UID_SEARCH_BY_ATTRIBUTE_NAME").text(),o=$("#UID_SEARCH_BY_ATTRIBUTE_VALUE").text();t.searchNodesByAttribute(i,o)}}),$(this.buttons[2].titleEl).off("click").click(function(e){var n=$("#UID_SEARCH_BY_STRING_TEXT").text();n&&""!==n&&null!==n&&t.searchNodes(n)}),$(this.buttons[3].titleEl).off("click").click(function(e){t.client.emit("ComputeColorList")});break;case"wv-distortion":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>Distortion</Mode></Call>')});break;case"wv-visibilitytest":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>VisibilityTest</Mode></Call>')});break;case"wv-neutralaxis":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>NeutralAxis</Mode></Call>')});break;case"wv-neighbourhoodsearch":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="ApplyNeighbourhoodSearchSettings"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="ExecuteNeighbourhoodSearch"></Call>'),t.client.once("ExecuteNeighbourhoodSearch",function(e){"SUCCESS"===e.Error&&"true"===$("#UID_NEIGHBOURHOOD_SEARCH_CLOSE_SELECTION_MODE_FLAG").val()&&(t.client.command.executeXML('<Call Method="SetSelectionMode"><SelectionMode>Select</SelectionMode></Call>'),t.client.emit("Select","Select"))})});break;case"wv-properties":$(this.buttons[0].titleEl).off("click").on("click",function(e){var n='<Call Method="VisualizeGravityCenter">';n+="</Call>",t.client.command.executeXML(n)});break;case"wv-split":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="ActivateSplitDirectionPick"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetSplitDirectionXAxis"></Call>')}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetSplitDirectionYAxis"></Call>')}),$(this.buttons[3].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="SetSplitDirectionZAxis"></Call>')}),$(this.buttons[4].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="Compute"><Mode>Split</Mode></Call>'),t.client.once("Compute",function(e){})}),$("#SplitXDirection").text(0),$("#SplitYDirection").text(0),$("#SplitZDirection").text(0),$("#SplitXDirection").off("blur").blur(function(e){t.setSplitDirection()}),$("#SplitYDirection").off("blur").blur(function(e){t.setSplitDirection()}),$("#SplitZDirection").off("blur").blur(function(e){t.setSplitDirection()});break;case"wv-bom":$(this.buttons[0].titleEl).off("click").click(function(e){var n='<Call Method="GenerateBOMCalloutIds">';n+="<StartId>"+t.startIndex+"</StartId></Call>",t.client.command.executeXML(n),t.client.once("GenerateBOMCalloutIds",function(e){t.startIndex=parseFloat(e.StartId),t.startIndexEl.textContent=e.StartId;t.client.command.executeXML('<Call Method="GetBillOfMaterial"></Call>')})}),$(this.buttons[1].titleEl).off("click").click(function(e){var n='<Call Method="ClearBillOfMaterialCalloutIds"></Call>';t.client.command.executeXML(n),n='<Call Method="GetBillOfMaterial"></Call>',t.client.command.executeXML(n)}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="GenerateBOMCallouts"></Call>')}),this.startIndexEl=document.getElementById("BOMTechDocStartId"),this.startIndexEl&&(""===this.startIndexEl.textContent&&(this.startIndexEl.textContent="1",this.startIndex=1),this.startIndexEl.onblur=function(e){isNaN(parseInt(t.startIndexEl.textContent))?t.startIndexEl.textContent=t.startIndex.toString():(t.startIndex=parseInt(t.startIndexEl.textContent),t.startIndexEl.textContent=t.startIndex.toString())}),this.client.on("@OpenedFile",function(e){$(t.tableBodyEl).empty(),t.buildDefaultBOMHeader(),t.buildSumRow()});break;case"wv-animation":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="ActivateInteraction"><Interaction>Animation_AssignCoordinateToNode</Interaction></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){var n='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>true';n+="</Animation></General></Scene></Settings></Call>",s.ribbon.adapter.buttons.map(function(e){"ID_RIBBON_ANIMATE"===e.id&&e.highlight(!0)}),t.client.command.executeXML(n)}),$(this.buttons[2].titleEl).off("click").click(function(e){var n='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>false';n+="</Animation></General></Scene></Settings></Call>",s.ribbon.adapter.buttons.map(function(e){"ID_RIBBON_ANIMATE"===e.id&&e.highlight(!1)}),t.client.command.executeXML(n)});break;case"wv-geometry-tools":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="OptimizeIdenticalInstances"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="GenerateFaces"></Call>')}),$(this.buttons[2].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RemoveFaces"></Call>')}),$(this.buttons[3].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="GenerateNormals"></Call>')}),$(this.buttons[4].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RemoveNormals"></Call>')}),$(this.buttons[5].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="GenerateWires"></Call>')}),$(this.buttons[6].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RemoveWires"></Call>')}),$(this.buttons[7].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="GenerateLODGeometry"></Call>')}),$(this.buttons[8].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="DetectGeometryCopies"></Call>')}),$(this.buttons[9].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RecenterGeometriesToBoundingboxCenter"></Call>')}),$(this.buttons[10].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="RecenterGeometriesToBoundingboxMinimum"></Call>')}),$(this.buttons[11].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="DetectTinyGeometries"></Call>')});break;case"wv-bandanalysis":$(this.buttons[0].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="BandAnalysisComputeMinimalDistance"></Call>')}),$(this.buttons[1].titleEl).off("click").click(function(e){t.client.command.executeXML('<Call Method="BandAnalysisCompute"></Call>')})}},t.prototype.searchNodesByAttribute=function(e,t){var n='"'+e+'"="'+t+'"';this.searchNodes(n)},t.prototype.searchNodesByName=function(e){var t='Name="'+e+'"';this.searchNodes(t)},t.prototype.searchNodes=function(e){var t='<Call Method="SearchNodes">';t+="<SearchString>"+e+"</SearchString>",t+="<SelectionMode>Select</SelectionMode>",t+="<IncludeHiddenGeometries>"+this.sceneSettings.Scene.Tools.Search.IncludeHiddenGeometries+"</IncludeHiddenGeometries>",t+="</Call>",this.client.command.executeXML(t)},t.prototype.createButton=function(e,t){var n=document.createElement("span");n.id=e;var i=document.createElementNS(v,"svg");i.style.width="19px",i.style.height="19px";var o=document.createElementNS(v,"use");return o.setAttributeNS(g,"href","#"+t),i.appendChild(o),n.appendChild(i),n},t}(o.EventEmitter);t.PaneAdapter=E;var _=function(e,t){return Object.keys(e).forEach(function(n){return n===t&&delete e[n]||e[n]&&"object"==typeof e[n]&&_(e[n],t)}),e}},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(0),l=n(51),r=function(e){function t(t,n){var i=e.call(this)||this;return i.loadedTemplates=[],i.langChanged=!1,i.leftDefaultAdapter=new l.PaneAdapter(t,vsClient,"left"),i.rightDefaultAdapter=new l.PaneAdapter(n,vsClient,"right"),vsClient.on("GetSettings",function(e){i.settings=e.Settings,i.updateSettings()}),vsClient.on("GetSceneSettings",function(e){i.sceneSettings=e.Settings,i.updateSettings()}),vsClient.on("SetSceneSettings",function(e){vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')}),vsClient.on("openFileDialog",function(e){$(a.leftPaneWrapper).css("left",0),i.leftDefaultAdapter.openFileBrowser("open")}),vsClient.on("importFileDialog",function(e){$(a.leftPaneWrapper).css("left",0),i.leftDefaultAdapter.openFileBrowser("import")}),vsClient.on("@changeLang",function(e){i.langChanged=!0;for(var t=0;t<i.loadedTemplates.length;t++)!function(e){var t=i.loadedTemplates[e].paneId,n=i.mapPaneIdToTemplate(t),o='<Call Method="GetTemplate"><Type>'+n+"</Type></Call>";vsClient.command.executeXML(o),vsClient.once("GetTemplate."+n,function(n){if("SUCCESS"===n.Error){var o=n.Source.Template;i.loadedTemplates[e].template=o,i.leftDefaultAdapter.openPane&&i.leftDefaultAdapter.openPane===t?i.leftDefaultAdapter.load(o,t):i.rightDefaultAdapter.openPane&&i.rightDefaultAdapter.openPane===t&&i.rightDefaultAdapter.load(o,t)}})}(t)}),i}return i(t,e),t.prototype.updateSettings=function(){this.leftDefaultAdapter.settings=this.settings,this.leftDefaultAdapter.sceneSettings=this.sceneSettings,this.leftDefaultAdapter.updateValues(),this.rightDefaultAdapter.settings=this.settings,this.rightDefaultAdapter.sceneSettings=this.sceneSettings,this.rightDefaultAdapter.updateValues()},t.prototype.render=function(e,t){var n=this;!0===a.showTooltips&&a.toggleTooltipClick();try{if(-1!==_DisabledPanes.indexOf(e))return}catch(e){}var i,o=e;if(0===e.indexOf("wv-")?o=this.mapPaneIdToTemplate(e):e=this.mapPaneTemplateToId(e),"left"===t?(i=this.leftDefaultAdapter,i.paneEl.style.left="0",this.rightDefaultAdapter.paneEl.style.right="calc(-90%)"):(i=this.rightDefaultAdapter,i.paneEl.style.right="0",this.leftDefaultAdapter.paneEl.style.left="calc(-90%)","wv-file"===this.leftDefaultAdapter.openPane&&this.leftDefaultAdapter.clearFileBrowser()),$(i.helpIcon).removeClass("mobile-toggle-tooltip-icon-active"),i.openPane===e&&!this.langChanged)return void("wv-measurement"===e&&i.cleanGroups());this.langChanged=!1;var l=!0;switch(e){case"wv-views":case"wv-modeltree":case"wv-selections":case"wv-appsettings":return void i.load("custom",e)}for(var r=0;r<this.loadedTemplates.length;r++)this.loadedTemplates[r].paneId===e&&(i.load(this.loadedTemplates[r].template,e),l=!1);if(l){var s='<Call Method="GetTemplate"><Type>'+o+"</Type></Call>";vsClient.command.executeXML(s),vsClient.once("GetTemplate."+o,function(t){if("SUCCESS"===t.Error){var o={template:t.Source.Template,paneId:e};n.loadedTemplates.push(o),i.load(o.template,e)}})}},t.prototype.mapPaneIdToTemplate=function(e){switch(e){case"wv-settings":return"SettingsPane";case"wv-modeltree":return"Custom_ModelTree";case"wv-views":return"Custom_Views";case"wv-distortion":return"DistortionPane";case"wv-draftangle":return"DraftAnglePane";case"wv-exactcompare":return"ExactComparePane";case"wv-filter":return"FilterPane";case"wv-flythrough":return"FlyThroughPane";case"wv-markup":return"MarkupPane";case"wv-markup-reduced":return"MarkupPane_Reduced";case"wv-measurement":return"MeasurementPane";case"wv-mirror":return"MirrorPane";case"wv-projectedarea":return"ProjectedAreaPane";case"wv-properties":return"PropertiesPane";case"wv-quickcompare":return"QuickComparePane";case"wv-section":return"SectionPane";case"wv-textsearch":return"TextSearchPane";case"wv-transform":return"TransformPane";case"wv-visibilitytest":return"VisibilityTest";case"wv-wallthickness":return"WallThicknessPane";case"wv-drillhole":return"DrillholePane";case"wv-neutralaxis":return"NeutralAxisPane";case"wv-neighbourhoodsearch":return"NeighbourhoodSearchPane";case"wv-split":return"SplitPane";case"wv-bom":return"BOMPane";case"wv-clash":return"ClashPane";case"wv-callout":return"CalloutPane";case"wv-appsettings":return"Custom_AppSettings";case"wv-explode":return"ExplodePane";case"wv-animation":return"AnimationPane";case"wv-geometry-tools":return"GeometryToolsPane";case"wv-bandanalysis":return"BandAnalysisPane"}},t.prototype.mapPaneTemplateToId=function(e){switch(e){case"SettingsPane":return"wv-settings";case"Custom_ModelTree":return"wv-modeltree";case"Custom_Views":return"wv-views";case"DistortionPane":return"wv-distortion";case"DraftAnglePane":return"wv-draftangle";case"ExactComparePane":return"wv-exactcompare";case"FilterPane":return"wv-filter";case"FlyThroughPane":return"wv-flythrough";case"MarkupPane":return"wv-markup";case"MarkupPane_Reduced":return"wv-markup-reduced";case"MeasurementPane":return"wv-measurement";case"MirrorPane":return"wv-mirror";case"ProjectedAreaPane":return"wv-projectedarea";case"PropertiesPane":return"wv-properties";case"QuickComparePane":return"wv-quickcompare";case"SectionPane":return"wv-section";case"TextSearchPane":return"wv-textsearch";case"TransformPane":return"wv-transform";case"VisibilityTestPane":return"wv-visibilitytest";case"WallThicknessPane":return"wv-wallthickness";case"DrillholePane":return"wv-drillhole";case"NeutralAxisPane":return"wv-neutralaxis";case"NeighbourhoodSearchPane":return"wv-neighbourhoodsearch";case"SplitPane":return"wv-split";case"ExplodePane":return"wv-explode";case"BOMPane":return"wv-bom";case"ClashPane":return"wv-clash";case"CalloutPane":return"wv-callout";case"Custom_AppSettings":return"wv-appsettings";case"DrillholePane":case"AnimationPane":return"wv-animation";case"GeometryToolsPane":return"wv-geometry-tools";case"BandAnalysisPane":return"wv-bandanalysis"}},t}(o.EventEmitter);t.MobilePanes=r},function(e,t,n){"use strict";function i(e,t){var n=document.createElement("span");n.id=e,n.style.verticalAlign="middle";var i=document.createElementNS(l,"svg");i.style.width="19px",i.style.height="19px";var o=document.createElementNS(l,"use");return o.setAttributeNS(r,"href","#"+t),i.appendChild(o),n.appendChild(i),n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(4),l="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",s=function(){function e(e,t){var n=this;this.paneEl=e,this.client=t;$("#ID_APPSETTINGS_WND").outerHeight();this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.buttons=document.createElement("div"),this.buttons.classList.add("mobile-pane-buttons-tab"),this.buttons.style.position="relative",this.paneEl.appendChild(this.buttons);var l=document.createElement("div");l.className="mobile-pane-group",l.textContent=o.translate("ID_APPSETTINGS_WND",a.settings.lang),l.id="ID_APPSETTINGS_WND",o.translationObjects.push(l),this.wrapperEl.appendChild(l);var r=document.createElement("div");r.style.marginBottom="5px",this.wrapperEl.appendChild(r);var s=document.createElement("div");s.className="mobile-pane-select-wrapper",r.appendChild(s);var c=document.createElement("div");c.className="mobile-pane-select-title",c.id="ID_APPSETTINGS_CONTEXT_MENU_STYLE",c.textContent=o.translate("ID_APPSETTINGS_CONTEXT_MENU_STYLE",a.settings.lang),o.translationObjects.push(c),s.appendChild(c),this.contextMenuVal=document.createElement("select"),this.contextMenuVal.className="mobile-pane-select-val";var d=document.createElement("option");d.value="radial-menu",d.id="ID_APPSETTINGS_CONTEXT_MENU_RADIAL",d.textContent=o.translate("ID_APPSETTINGS_CONTEXT_MENU_RADIAL",a.settings.lang),o.translationObjects.push(d),this.contextMenuVal.appendChild(d);var p=document.createElement("option");p.value="list-menu",p.id="ID_APPSETTINGS_CONTEXT_MENU_LIST",p.textContent=o.translate("ID_APPSETTINGS_CONTEXT_MENU_LIST",a.settings.lang),o.translationObjects.push(p),this.contextMenuVal.appendChild(p),this.contextMenuVal.addEventListener("change",function(e){var t=n.contextMenuVal.value;localStorage.setItem("MobileWVContextMenuStyle",t),o.mobileSettings.contextMenuStyle=t});var h=localStorage.getItem("MobileWVContextMenuStyle");null!==h&&(this.contextMenuVal.value=h),s.appendChild(this.contextMenuVal);var u=i("selectionspane-update","view_button_refresh");u.addEventListener("click",function(e){n.reset()}),this.buttons.appendChild(u),this.paneEl.appendChild(this.wrapperEl)}return e.prototype.reset=function(){this.contextMenuVal.value="radial-menu",localStorage.removeItem("MobileWVContextMenuStyle"),o.mobileSettings.contextMenuStyle="radial-menu"},e}();t.MobileAppSettingsPane=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=n(0),a=n(4),l="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",s=function(){function e(e,t,n,s){var c=this;this.scrollTimeOut=0,this.scrollSpeed=1,this.filesPerPage=50,this.multiselectActive=!1,this.fileList=[],this.page=1,this.paneEl=e,this.client=t,this.folder=n,this.path="",this.pathChanged=!1,this.scrollStart=0,this.mode=s,this.getFileNumber();try{this.filesPerPage=_MobileFilesPerPage}catch(e){}this.browserActionBar=document.createElement("div"),this.browserActionBar.className="mobile-file-browser-action-bar",this.paneEl.appendChild(this.browserActionBar);var d=document.createElement("i");$(d).addClass("far fa-check-square mobile-filebrowser-icon"),this.browserActionBar.appendChild(d);var p=document.createElement("div");p.id="wv_mobile_multi_file_submit",p.className="mobile-file-browser-multi-submit-button",p.style.display="none";var h=document.createElement("i");h.className="fas fa-check mobile-file-browser-multi-submit-icon",p.appendChild(h),document.body.appendChild(p),p.onclick=function(e){e.preventDefault(),e.stopPropagation(),c.fileList.length>0&&o.serializedLoad(c.fileList,!0),c.fileList=[]},d.addEventListener("click",function(){c.multiselectActive=!c.multiselectActive,c.multiselectActive?(p.style.left=c.paneEl.clientWidth-30+"px",$(p).show()):$(p).hide(),$(d).toggleClass("mobile-modeltree-multiselect-enabled"),$(d).hasClass("fa")?$(d).removeClass("fa").addClass("far"):$(d).removeClass("far").addClass("fa")},!1);var u=document.createElement("span");u.className="mobile-filebrowser-icon-wrapper";var m=document.createElementNS(l,"svg");m.style.width="21px",m.style.height="21px";var f=document.createElementNS(l,"use");f.setAttributeNS(r,"href","#view_button_home"),m.appendChild(f),u.appendChild(m),u.onclick=function(e){c.breadcrumbBar.removeBreadcrumbByPath("")},this.browserActionBar.appendChild(u);var v=document.createElement("i");$(v).addClass("fas fa-arrow-alt-circle-left mobile-filebrowser-icon"),$(v).click(function(e){c.breadcrumbBar.popCrumb()}),this.browserActionBar.appendChild(v);var g=document.createElement("div");g.className="mobile-filebrowser-search-field-wrapper";var C=document.createElement("input");C.className="mobile-filebrowser-search-field",g.appendChild(C),C.onchange=function(e){console.log(C.value)};var E=document.createElement("i");E.className="fas fa-times-circle mobile-filebrowser-icon",g.appendChild(E),E.onclick=function(e){C.value=""},this.breadcrumbBar=new i.MobileBreadcrumbBar(this.browserActionBar,this.client,this),this.outerWrapper=document.createElement("div"),this.paneEl.appendChild(this.outerWrapper),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-file-browser",this.offset=$("#mobile-breadcrumb").outerHeight(!0),this.wrapperEl.style.top="0px",this.loadingWrapper=document.createElement("div"),this.loadingWrapper.className="fullscreen-loading-wrapper",this.loadingWrapper.style.left="0";var _=document.createElement("i");_.className="fullscreen-loading-icon fal fa-spinner-third fa-spin",this.loadingWrapper.appendChild(_),this.outerWrapper.appendChild(this.wrapperEl),this.outerWrapper.className="mobile-browser-outer-wrapper",this.outerWrapper.style.top="30px",this.outerWrapper.id="mobile-browser-outer-wrapper",hasTouch?this.outerWrapper.style.overflowY="overlay":($(this.wrapperEl).kendoTouch({drag:function(e){c.drag(e)},dragstart:function(e){c.dragStart(e)}}),$(this.wrapperEl).off("wheel").on("wheel",function(e){var t=0,n=parseFloat($(c.wrapperEl).css("top"));if(c.wrapperHeight=$(c.wrapperEl).outerHeight()-$(c.wrapperEl).parent().outerHeight()+c.offset+31,e.originalEvent instanceof WheelEvent){if(e.originalEvent.deltaY>0){var i=0;n+c.wrapperHeight<50&&(i=50-(n+c.wrapperHeight)),t=-50+i}else if(e.originalEvent.deltaY<0){var o=0;n>-50&&(o=50+n),t=50-o}c.wrapperEl.style.top=n+t+"px"}}));var b=document.createElement("div");b.className="mobile-browser-footer",this.paneEl.appendChild(b),this.paginationRow=document.createElement("div"),this.paginationRow.className="mobile-browser-pagination-wrapper";var I=document.createElement("div");I.className="mobile-browser-pagination-icon";var S=document.createElement("i");S.className="far fa-chevron-double-left",$(I).off("click").on("click",function(e){c.page=1,c.actualPageInput.value=c.page.toString(),$(c.actualPageInput).trigger("change")}),I.appendChild(S),this.paginationRow.appendChild(I);var y=document.createElement("div");y.className="mobile-browser-pagination-icon";var w=document.createElement("i");w.className="far fa-chevron-left",$(y).off("click").on("click",function(e){c.page>1&&c.page--,c.actualPageInput.value=c.page.toString(),$(c.actualPageInput).trigger("change")}),y.appendChild(w),this.paginationRow.appendChild(y),this.actualPageInput=document.createElement("input"),this.actualPageInput.className="mobile-browser-actual-page-input",this.actualPageInput.value=this.page.toString(),$(this.actualPageInput).change(function(e){c.page=parseInt(c.actualPageInput.value);var t=c.client.command.makeBinaryPath(c.path,!0,(c.page-1)*c.filesPerPage,c.page*c.filesPerPage-1);c.startLoadingBlocker(),c.client.sendBinaryPackage(1,210,t)});var M=document.createElement("span");M.className="mobile-browser-max-page",M.textContent=" /"+Math.ceil(this.size/this.filesPerPage),this.paginationRow.appendChild(this.actualPageInput),this.paginationRow.appendChild(M);var x=document.createElement("div");x.className="mobile-browser-pagination-icon";var N=document.createElement("i");N.className="far fa-chevron-right",$(x).off("click").on("click",function(e){c.page<c.size/c.filesPerPage&&(c.page++,c.actualPageInput.value=c.page.toString(),$(c.actualPageInput).trigger("change"))}),x.appendChild(N),this.paginationRow.appendChild(x);var T=document.createElement("div");T.className="mobile-browser-pagination-icon";var O=document.createElement("i");O.className="far fa-chevron-double-right",$(T).off("click").on("click",function(e){c.page=Math.ceil(c.size/c.filesPerPage),c.actualPageInput.value=c.page.toString(),$(c.actualPageInput).trigger("change")}),T.appendChild(O),this.paginationRow.appendChild(T),b.appendChild(this.paginationRow);var D=document.createElement("div");D.style.display="inline-block",D.style.cssFloat="right",this.sizeEl=document.createElement("div"),this.sizeEl.className="mobile-file-browser-folder-size";var L=document.createElement("div");L.className="mobile-file-browser-folder-size",L.id="ID_MOBILE_FILE_BROWSER_SIZE_LABEL",L.textContent=o.translate("ID_MOBILE_FILE_BROWSER_SIZE_LABEL",a.settings.lang),o.translationObjects.push(L),D.appendChild(L),D.appendChild(this.sizeEl),b.appendChild(D),this.client.removeAllListeners("@FolderClicked"),this.client.on("@FolderClicked",function(e){var t=c.client.command.makeBinaryPath(e,!0,0,c.filesPerPage-1);c.client.sendBinaryPackage(1,210,t),c.startLoadingBlocker(),c.breadcrumbBar.hideFullbar(),c.path=e,c.pathChanged=!0;var n=c.path.split("\\");-1!==n.indexOf("")&&n.splice(n.indexOf(""),1),o.mobileSettings.activePath=n}),this.client.removeAllListeners("@FileClicked"),this.client.on("@FileClicked",function(e){if(c.multiselectActive){var t=c.fileList.indexOf(e);-1===t?c.fileList.push(e):c.fileList.splice(t,1)}else"open"===s?o.openFile(e):"import"===s&&o.importFile(e)}),this.client.removeAllListeners("@GetFolderContent"),this.client.on("GetFolderContent",function(e){c.folder=e,c.getFileNumber(),c.build(),c.stopLoadingBlocker(),c.pathChanged=!1}),this.client.removeAllListeners("@GetFolderFileCount"),this.client.on("GetFolderFileCount",function(e){c.sizeEl.textContent=e,c.size=e,c.wrapperEl.style.top="0",e<=c.filesPerPage?$(c.paginationRow).hide():$(c.paginationRow).show(),M.textContent=" /"+Math.ceil(e/c.filesPerPage)}),this.build(),this.outerWrapper.style.height="calc(100% - "+(75+this.browserActionBar.offsetHeight)+"px)"}return e.prototype.resize=function(){this.outerWrapper.style.height="calc(100% - "+(75+this.browserActionBar.offsetHeight)+"px)"},e.prototype.setInitPath=function(e){for(var t=e.length,n="",i=0;i<t;i++){n+=e[i]+"\\";var o={key:e[i],path:n,date:""};this.breadcrumbBar.addBreadcrumb(o)}this.path=n},e.prototype.getFileNumber=function(){var e=this.client.command.makeBinaryPath(this.path,!1,0,100);this.client.sendBinaryPackage(1,211,e)},e.prototype.build=function(){$(this.wrapperEl).empty();for(var e=0;e<this.folder.length;e++)if(this.folder[e].size){var t=void 0;t={key:this.folder[e].key,date:this.folder[e].modified,path:this.folder[e].path,size:this.folder[e].size};new i.MobileFile(this.wrapperEl,this.client,t,this.mode)}else{var n=void 0;n={key:this.folder[e].key,date:this.folder[e].modified,path:this.folder[e].path};new i.MobileFolder(this.wrapperEl,this.client,n,this.breadcrumbBar)}},e.prototype.startLoadingBlocker=function(){this.wrapperEl.appendChild(this.loadingWrapper)},e.prototype.stopLoadingBlocker=function(){this.wrapperEl.contains(this.loadingWrapper)&&this.wrapperEl.removeChild(this.loadingWrapper)},e.prototype.drag=function(e){var t=(e.touch.y.location-this.scrollStart)*this.scrollSpeed,n=parseFloat($(this.wrapperEl).css("top"));(t>40||t<-40)&&(this.scrollStart=e.touch.y.location,t<0&&n+t>=-this.wrapperHeight?this.wrapperEl.style.top=n+t+"px":t<0?(this.wrapperEl.style.top=-this.wrapperHeight+"px",this.scrollSpeed=1,this.scrollTimeOut=0):t>0&&n+t<=0?this.wrapperEl.style.top=n+t+"px":t>0&&(this.wrapperEl.style.top="0px",this.scrollSpeed=1,this.scrollTimeOut=0))},e.prototype.dragStart=function(e){var t=(new Date).getTime();t-this.scrollTimeOut>500?this.scrollSpeed=1:this.scrollSpeed*=1,this.scrollTimeOut=t,this.scrollStart=e.touch.y.location,this.wrapperHeight=$(this.wrapperEl).outerHeight()-$(this.wrapperEl).parent().outerHeight()+this.offset+31},e}();t.MobileFileBrowser=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=n(38),a="http://www.w3.org/2000/svg",l="http://www.w3.org/1999/xlink",r=function(){function e(e,t){var n=this;this.rowElementArray=[],this.firstScrollHit=0,this.scrollPosition=0,this.scrollTravelled=0,this.mouseScrollActive=!1,this.barOntouchstart=function(e){n.lastPageY=e.touches[0].pageY},this.barOntouchmove=function(e){var t=e.touches[0].pageY-n.lastPageY;n.lastPageY=e.touches[0].pageY,n.scrollPosition+=t,n.scrollTravelled+=t,n.scrollPosition<0&&(n.scrollPosition=0),n.scrollPosition>n.treeWrapper.offsetHeight-n.bar.offsetHeight&&(n.scrollPosition=n.treeWrapper.offsetHeight-n.bar.offsetHeight),n.bar.style.top=n.scrollPosition+"px"},this.barOnclick=function(e){n.lastPageY=e.pageY,document.addEventListener("mousemove",n.barOndrag,!1),document.addEventListener("mouseup",n.barOnstop,!1)},this.barOndrag=function(e){var t=e.pageY-n.lastPageY;n.lastPageY=e.pageY,n.scrollPosition+=t,n.scrollTravelled+=t,n.scrollPosition<0&&(n.scrollPosition=0),n.scrollPosition>n.treeWrapper.offsetHeight-n.bar.offsetHeight&&(n.scrollPosition=n.treeWrapper.offsetHeight-n.bar.offsetHeight),n.bar.style.top=n.scrollPosition+"px"},this.barOnstop=function(e){var t,i=Math.ceil(Math.abs(n.scrollTravelled/(20*n.maxVisible))*n.expandedNodesSize);n.scrollTravelled>0?(t='<Call Method="VirtualTreeViewScrollDown"><Steps>'+i+"</Steps></Call>",n.client.command.executeXML(t)):n.scrollTravelled<0&&(t='<Call Method="VirtualTreeViewScrollUp"><Steps>'+i+"</Steps></Call>",n.client.command.executeXML(t)),document.removeEventListener("mousemove",n.barOndrag),document.removeEventListener("mouseup",n.barOnstop),n.scrollTravelled=0},this.paneEl=e,this.client=t,this.dragAccelerator=4,this.dragTick=0,this.isScrolling=!1,this.multiselect=!1,this.selectedRows=[],this.lastDragEndTimeStamp=(new Date).getTime(),this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-modeltree",this.bar=document.createElement("div"),this.bar.className="mobile-modeltree-bar";var i=document.createElement("div");i.className="mobile-modeltree-action-row",this.paneEl.appendChild(i);var o=document.createElement("span");o.className="mobile-modeltree-delete";var r=document.createElement("i");$(r).addClass("fa fa-trash mobile-modeltree-delete-icon"),o.appendChild(r),r.addEventListener("click",function(){b='<Call Method="ModifySelection"><SelectionModifier>Delete</SelectionModifier></Call>',n.client.command.executeXML(b)},!1),i.appendChild(o);var s=document.createElement("span");s.className="mobile-modeltree-multiselect",this.multiselectIcon=document.createElement("i"),$(this.multiselectIcon).addClass("far fa-check-square mobile-modeltree-multiselect-icon"),s.appendChild(this.multiselectIcon),this.multiselectIcon.addEventListener("click",function(){$(n.multiselectIcon).toggleClass("mobile-modeltree-multiselect-enabled"),$(n.multiselectIcon).hasClass("fa")?$(n.multiselectIcon).removeClass("fa").addClass("far"):$(n.multiselectIcon).removeClass("far").addClass("fa")},!1),i.appendChild(s),this.expandAllEl=document.createElement("span"),this.expandAllEl.style.marginLeft="66px";var c=document.createElementNS(a,"svg");c.style.width="20px",c.style.height="20px",c.style.marginTop="5px";var d=document.createElementNS(a,"use");d.setAttributeNS(l,"href","#button_plus_double"),c.appendChild(d),this.expandAllEl.appendChild(c),this.expandAllEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewExpandAll"></Call>')},!1),i.appendChild(this.expandAllEl),this.collapseAllEl=document.createElement("span");var p=document.createElementNS(a,"svg");p.style.width="20px",p.style.height="20px",p.style.marginTop="5px";var h=document.createElementNS(a,"use");h.setAttributeNS(l,"href","#button_minus_double"),p.appendChild(h),this.collapseAllEl.appendChild(p),this.collapseAllEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewCollapseAll"></Call>')},!1),i.appendChild(this.collapseAllEl),this.expandEl=document.createElement("span");var u=document.createElementNS(a,"svg");u.style.width="19px",u.style.height="19px",u.style.marginTop="5px";var m=document.createElementNS(a,"use");m.setAttributeNS(l,"href","#button_plus"),u.appendChild(m),this.expandEl.appendChild(u),this.expandEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewExpandSelected"></Call>')},!1),i.appendChild(this.expandEl),this.collapseEl=document.createElement("span");var f=document.createElementNS(a,"svg");f.style.width="19px",f.style.height="19px",f.style.marginTop="5px";var v=document.createElementNS(a,"use");v.setAttributeNS(l,"href","#button_minus"),f.appendChild(v),this.collapseEl.appendChild(f),this.collapseEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewCollapseSelected"></Call>')},!1),i.appendChild(this.collapseEl),this.toggleLevelEl=document.createElement("span");var g=document.createElementNS(a,"svg");g.style.width="19px",g.style.height="19px",g.style.marginTop="5px";var C=document.createElementNS(a,"use");C.setAttributeNS(l,"href","#button_divide"),g.appendChild(C),this.toggleLevelEl.appendChild(g),this.toggleLevelEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewExpandToSelectedLevel"></Call>')},!1),i.appendChild(this.toggleLevelEl),this.selectSameLevelEl=document.createElement("span");var E=document.createElementNS(a,"svg");E.style.width="19px",E.style.height="19px",E.style.marginTop="5px";var _=document.createElementNS(a,"use");_.setAttributeNS(l,"href","#button_divide"),E.appendChild(_),this.selectSameLevelEl.appendChild(E),this.selectSameLevelEl.addEventListener("click",function(){n.client.command.executeXML('<Call Method="VirtualTreeViewSelectSameLevelNodes"></Call>')},!1),i.appendChild(this.selectSameLevelEl),this.treeWrapper=document.createElement("div"),this.treeWrapper.className="mobile-modeltree-tree-wrapper",this.wrapperEl.appendChild(this.treeWrapper),this.paneEl.appendChild(this.wrapperEl),this.maxVisible=(this.wrapperEl.clientHeight-i.clientHeight-32)/20;var b='<Call Method="VirtualTreeViewSetSize"><Size>'+Math.floor(this.maxVisible)+"</Size></Call>";this.client.command.executeXML(b),this.scrollOnKey=this.scrollOnKey.bind(this),this.wrapperEl.addEventListener("mouseenter",function(e){n.toggleScrollEvents(!0)}),this.wrapperEl.addEventListener("mouseleave",function(e){n.toggleScrollEvents(!1)}),this.wrapperEl.addEventListener("wheel",function(e){if(n.bar.style.width="15px",n.bar.style.right=-n.wrapperEl.scrollLeft+"px",n.activateScrollBarForMouse(),e.deltaY>0){n.client.command.executeXML('<Call Method="VirtualTreeViewScrollDown"><Steps>1</Steps></Call>'),n.client.once("VirtualTreeViewScrollDown",function(e){n.calculateBar()})}else{n.client.command.executeXML('<Call Method="VirtualTreeViewScrollUp"><Steps>1</Steps></Call>'),n.client.once("VirtualTreeViewScrollUp",function(e){n.calculateBar()})}}),this.wrapperEl.appendChild(this.bar),$(this.wrapperEl).off("contextmenu").on("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",n.client.vsCanvas.closeContextMenu),$(document).off("keyup",n.client.vsCanvas.closeContextMenu),n.client.vsCanvas.createContextMenu(e)})}return e.prototype.activateScrollBarForMouse=function(){var e=this;this.mouseScrollActive||(this.scrollBarRail=document.createElement("div"),this.scrollBarRail.className="modeltree-bar-rail",this.wrapperEl.appendChild(this.scrollBarRail),this.scrollBarRail.addEventListener("click",function(t){var n=parseInt(e.bar.style.top.replace("px",""))-t.offsetY,i=e.maxVisible;if(n>0){var o='<Call Method="VirtualTreeViewScrollUp"><Steps>'+i+"</Steps></Call>";e.client.command.executeXMLAsync(o)}else{var o='<Call Method="VirtualTreeViewScrollDown"><Steps>'+i+"</Steps></Call>";e.client.command.executeXMLAsync(o)}}),this.bar.addEventListener("mousedown",this.barOnclick,!1),this.bar.addEventListener("touchstart",this.barOntouchstart),this.bar.addEventListener("touchmove",this.barOntouchmove),this.bar.addEventListener("touchend",this.barOnstop),this.mouseScrollActive=!0)},e.prototype.toggleScrollEvents=function(e){e?$(document).off("keydown",this.scrollOnKey).on("keydown",this.scrollOnKey):$(document).off("keydown",this.scrollOnKey)},e.prototype.drag=function(e){var t,n=e.touch.y.location,i=this.touchStart-n;this.dragTick++,i>30&&this.dragTick%2==0?(this.touchStart=e.touch.y.location,t='<Call Method="VirtualTreeViewScrollDown"><Steps>'+this.dragAccelerator+"</Steps></Call>",this.client.command.executeXML(t)):i<-30&&this.dragTick%2==0&&(this.touchStart=e.touch.y.location,t='<Call Method="VirtualTreeViewScrollUp"><Steps>'+this.dragAccelerator+"</Steps></Call>",this.client.command.executeXML(t))},e.prototype.dragStart=function(e){this.bar.style.width="5px",this.bar.style.right=-this.wrapperEl.scrollLeft+"px",this.isScrolling=!0,this.touchStart=e.touch.y.location,(new Date).getTime()-this.lastDragEndTimeStamp<500?this.dragAccelerator<32&&(this.dragAccelerator*=2):this.dragAccelerator=4},e.prototype.dragEnd=function(e){var t=this;this.isScrolling=!1,this.dragTick=0,this.lastDragEndTimeStamp=(new Date).getTime(),o.setTimeout(function(){t.isScrolling||(t.bar.style.width="0px")},500)},e.prototype.build=function(){var e=this;$(this.treeWrapper).detach(),this.treeWrapper=document.createElement("div"),this.treeWrapper.className="mobile-modeltree-tree-wrapper",this.wrapperEl.appendChild(this.treeWrapper);for(var t=this.rows.length-1;t>=0;t--){for(var n=-1,o=t-1;o>=0;o--)if(this.rows[o].Level+1===this.rows[t].Level){n=o;break}this.rows[t].Parent=n}this.rowElementArray=[];for(var a=[],l=this,r=0;r<this.rows.length;r++)!function(t){if(81===l.rows[t].NodeType){var n=l.rows[t].NodeName;try{n=_SceneNameOverride}catch(e){}l.rows[t].NodeName=n}var o=new i.MobileTreeRow(l.treeWrapper,l.client,l.rows[t],t);l.rowElementArray.push(o),$(o.itemEl).click(function(t){var n=t.target;if(!$(n).hasClass("modeltree-item-visibility")&&!$(n).hasClass("mobile-modeltree-expander"))if($(e.multiselectIcon).hasClass("mobile-modeltree-multiselect-enabled")){e.selectedRow&&(e.selectedRows.push(e.selectedRow),e.selectedRow=void 0);for(var i=-1,a="",l=0;l<e.selectedRows.length;l++)if(e.selectedRows[l].options.NodeId!==o.options.NodeId){var r="<NodeId>"+e.selectedRows[l].options.NodeId+"</NodeId>";a+=r}else i=l;if(-1===i){e.selectedRows.push(o);var r="<NodeId>"+o.options.NodeId+"</NodeId>";a+=r}else e.selectedRows.splice(i,1);var s='<Call Method="SetSelectedNodes">'+a+"</Call>";e.client.command.executeXML(s)}else{e.selectedRows=[],e.selectedRow=o;var s='<Call Method="SetSelectedNodes"><NodeId>'+o.options.NodeId+"</NodeId></Call>";e.client.command.executeXML(s)}}),1===o.selected&&a.push(o)}(r);var s=a.length;if(a.length>1){this.selectedRows=[],this.selectedRow=void 0;for(var c=0;c<s;c++)this.selectedRows.push(a[c])}else 1===s&&(this.selectedRows=[],this.selectedRow=a[0]);$(this.treeWrapper).kendoTouch({drag:function(t){e.drag(t)},dragstart:function(t){e.dragStart(t)},dragend:function(t){e.dragEnd(t)}})},e.prototype.scrollOnKey=function(e){var t=this;if(37!==e.keyCode&&39!==e.keyCode){if(!(40!==e.keyCode&&38!==e.keyCode||Date.now()-this.firstScrollHit<200))if(this.firstScrollHit=Date.now(),0!==this.selectedRows.length||this.selectedRow){for(var n=this.rows.length,i=void 0,o=0;o<n;o++)if(this.selectedRows.length>0){if(this.rows[o].NodeId===this.selectedRows[this.selectedRows.length-1].options.NodeId){i=o;break}}else if(this.rows[o].NodeId===this.selectedRow.options.NodeId){i=o;break}if(0===i&&38===e.keyCode){var a='<Call Method="VirtualTreeViewScrollUp"><Steps>1</Steps></Call>';this.client.command.executeXML(a),this.client.once("TreeviewUpdated",function(){t.rowElementArray[0].itemEl.click()})}else if(i===n-1&&40===e.keyCode){var a='<Call Method="VirtualTreeViewScrollDown"><Steps>1</Steps></Call>';this.client.command.executeXML(a),this.client.once("TreeviewUpdated",function(){t.rowElementArray[t.rowElementArray.length-1].itemEl.click()})}else if(38===e.keyCode)for(var l=this.rows[i-1],r=this.rows.length,o=0;o<r;o++)this.rowElementArray[o].options.NodeId===l.NodeId&&this.rowElementArray[o].itemEl.click();else if(40===e.keyCode)for(var l=this.rows[i+1],s=this.rows.length,o=0;o<s;o++)this.rowElementArray[o].options.NodeId===l.NodeId&&this.rowElementArray[o].itemEl.click()}else if(40===e.keyCode){var a='<Call Method="VirtualTreeViewScrollDown"><Steps>1</Steps></Call>';this.client.command.executeXML(a)}else if(38===e.keyCode){var a='<Call Method="VirtualTreeViewScrollUp"><Steps>1</Steps></Call>';this.client.command.executeXML(a)}}else if(37===e.keyCode){var c='<Call Method="VirtualTreeViewCollapseSelected"></Call>';this.client.command.executeXML(c)}else{var c='<Call Method="VirtualTreeViewExpandSelected"></Call>';this.client.command.executeXML(c)}},e.prototype.updateTree=function(e){this.rows=e.Items,this.expandedNodesSize=e.ExpandedNodes,this.virtualScrollPos=e.VirtualScrollPosition,this.calculateBar(),this.build()},e.prototype.calculateBar=function(){if(this.expandedNodesSize>this.maxVisible){var e=20*this.maxVisible,t=this.maxVisible/this.expandedNodesSize,n=t*e;this.bar.style.height=n<20?"20px":100*t+"%";var i=this.virtualScrollPos/this.expandedNodesSize,o=i*e;o>e-20&&(o=e-20),this.bar.style.top=o+"px"}else this.bar.style.height="0px"},e}();t.MobileModeltree=r},function(e,t,n){"use strict";function i(e,t){var n=document.createElement("span");n.id=e,n.style.verticalAlign="middle";var i=document.createElementNS(l,"svg");i.style.width="19px",i.style.height="19px";var o=document.createElementNS(l,"use");return o.setAttributeNS(r,"href","#"+t),i.appendChild(o),n.appendChild(i),n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(4),l="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",s=function(){function e(e,t){var n=this;this.rows=[],this.multiSelect=!1,this.lastIndex=0,this.selections=[],this.multiSelections=[],this.multiRows=[],this.paneEl=e,this.client=t;$("#ID_SELECTIONS_WND").outerHeight();this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-pane-wrapper",this.buttons=document.createElement("div"),this.buttons.classList.add("mobile-pane-buttons-tab"),this.buttons.style.position="relative",this.paneEl.appendChild(this.buttons),this.selectionsWrapper=document.createElement("div"),this.selectionsWrapper.className="mobile-pane-group",this.wrapperEl.appendChild(this.selectionsWrapper),this.wrapperEl.addEventListener("contextmenu",function(e){e.preventDefault(),$("#contextMenu").remove(),$(document).off("mousedown",n.client.vsCanvas.closeContextMenu),$(document).off("keyup",n.client.vsCanvas.closeContextMenu),n.client.vsCanvas.createContextMenu(e)});var l=document.createElement("span");l.style.paddingLeft="5px",l.id="ID_SELECTIONS_COLUMN_NAME",l.textContent=o.translate("ID_SELECTIONS_COLUMN_NAME",a.settings.lang),o.translationObjects.push(l),this.selectionsWrapper.appendChild(l),this.client.on("OpenFile",function(e){n.reset()}),this.client.on("NewScene3D",function(e){n.reset()}),this.client.on("GetSavedSelections",function(e){n.buildSelectionTable(e)}),this.client.on("SavedSelectionsChanged",function(e){n.buildSelectionTable(e,!1)}),this.rowWrapper=document.createElement("div"),this.wrapperEl.appendChild(this.rowWrapper);var r=document.createElement("span");r.style.verticalAlign="super";var s=document.createElement("i");$(s).addClass("far fa-check-square mobile-selections-multiselect-icon"),r.appendChild(s),s.addEventListener("click",function(){$(s).toggleClass("mobile-modeltree-multiselect-enabled"),$(s).hasClass("fa")?(n.multiSelect=!1,$(s).removeClass("fa").addClass("far")):(n.multiSelect=!0,$(s).removeClass("far").addClass("fa"))},!1);var c=i("selectionspane-add","view_button_plus");c.addEventListener("click",function(e){n.client.command.executeXML('<Call Method="SaveCurrentSelection"></Call>')});var d=i("selectionspane-update","view_button_refresh");d.addEventListener("click",function(e){var t=n.selectedRow,i='<Call Method="UpdateSavedSelection"><Index>'+t.id.split("_")[1]+"</Index></Call>";n.client.command.executeXML(i)});var p=i("selectionspane-remove","view_button_cross");p.addEventListener("click",function(e){for(var t='<Call Method="DeleteSavedSelections">',i=0;i<n.multiRows.length;i++){t+="<Index>"+n.multiRows[i].id.split("_")[1]+"</Index>"}t+="</Call>",n.client.command.executeXML(t),n.multiRows=[]}),this.buttons.appendChild(r),this.buttons.appendChild(c),this.buttons.appendChild(d),this.buttons.appendChild(p),this.paneEl.appendChild(this.wrapperEl)}return e.prototype.reset=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);for(var n=0;n<this.rows.length;n++)$(this.rows[n]).remove();if(this.rows=[],t&&(this.multiRows=[],this.multiSelections=[],this.selectedRow=void 0),this.selections=[],e){this.client.command.executeXML('<Call Method="GetSavedSelections"></Call>')}},e.prototype.buildSelectionTable=function(e,t){if(void 0===t&&(t=!0),this.reset(!1,t),e.Selection){e.Selection&&!Array.isArray(e.Selection)&&(e.Selection=[e.Selection]);for(var n=0;n<e.Selection.length;n++)this.addRow(e.Selection[n].Index,e.Selection[n].Name,!t)}},e.prototype.enableTextChange=function(e){var t=this,n=$(e);n.attr("contenteditable","true");var i=document.createRange();i.selectNodeContents(e);var o=window.getSelection();o.removeAllRanges(),o.addRange(i),n.focus(),n.blur(function(e){$(e.target).off("blur"),$(e.target).attr("contenteditable","false");var n=e.target.textContent,i=e.target.parentElement.parentElement.id.split("_")[1],o='<Call Method="RenameSavedSelection"><Index>'+i+"</Index>";o+="<Name>"+n+"</Name></Call>",t.client.command.executeXML(o)}),n.on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),$(e.target).off("keyup"),$(e.target).attr("contenteditable","false"))})},e.prototype.addRow=function(e,t,n){var i=this;void 0===n&&(n=!1);var o=document.createElement("div");o.className="mobile-selection-row",o.id="Selection_"+e;var a=document.createElement("i");a.style.fontSize="16px",a.className="fas fa-edit selection-pane-row-icon",a.onclick=function(e){i.enableTextChange(l)};var l=document.createElement("span");l.textContent=t,l.addEventListener("keyup",function(e){e.preventDefault(),e.stopPropagation()});var r=document.createElement("div");r.className="selection-pane-row-badge",r.style.marginTop="3px",r.id="Selection_"+e+"_Number",r.textContent="-";var s=!1;$(l).mousedown(function(e){s=!0,setTimeout(function(){s&&i.enableTextChange(l)},500)}),$(l).mouseup(function(e){s=!1}),o.onclick=function(e){var t=o.id.split("_")[1];if(e.ctrlKey||i.multiSelect)if($(o).toggleClass("selection-pane-row-active"),-1===i.multiRows.indexOf(o)){i.multiRows.push(o),-1===i.multiSelections.indexOf(t)&&i.multiSelections.push(t);for(var n='<Call Method="ActivateSavedSelections">',a=0;a<i.multiSelections.length;a++)n+="<Index>"+i.multiSelections[a]+"</Index>";n+="</Call>",i.client.command.executeXML(n)}else{var l=i.multiRows.indexOf(o);i.multiRows.splice(l,1);for(var r=0;r<t.length;r++)-1!==i.multiSelections.indexOf(t)&&i.multiSelections.splice(i.multiSelections.indexOf(t),1);for(var n='<Call Method="ActivateSavedSelections">',a=0;a<i.multiSelections.length;a++)n+="<Index>"+i.multiSelections[a]+"</Index>";n+="</Call>",i.client.command.executeXML(n)}else{$(".selection-pane-row-active").each(function(e){$(this).removeClass("selection-pane-row-active")}),$(o).addClass("selection-pane-row-active"),i.selectedRow=o,i.multiRows=[],i.multiSelections=[],i.multiRows.push(o),i.multiSelections.push(t);var n='<Call Method="ActivateSavedSelections">';n+="<Index>"+t+"</Index>",n+="</Call>",i.client.command.executeXML(n)}},o.appendChild(a),o.appendChild(l),this.rowWrapper.appendChild(o),this.rows.push(o);var c={id:"Selection_"+e,count:"-"};this.selections.push(c),n&&this.selectedRow&&this.selectedRow.id.split("_")[1]===e&&$(o).addClass("selection-pane-row-active")},e}();t.MobileSelectionPane=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink",l=function(){function e(e,t){var n=this;this.currentPosition=0,this.positionArray=[],this.hasMultiSelect=!1,this.inDragPos=-1,this.paneEl=e,this.client=t,this.scrollStart=0;var i=$("#ID_VIEWS").outerHeight();this.wrapperEl=document.createElement("div"),this.wrapperEl.className="mobile-view-browser",this.buttons=document.createElement("div"),this.buttons.classList.add("mobile-pane-buttons-tab"),this.buttons.style.top=i+"px";var o=this.createButton("viewpane-add","view_button_plus");o.addEventListener("click",function(e){n.client.command.executeXML('<Call Method="CreateConfigurationView"></Call>');n.client.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')});var l=this.createButton("viewpane-delete","view_button_cross");l.addEventListener("click",function(e){var t=n.positionArray.length;if(t>0)for(var i=n.positionArray.sort(function(e,t){return e-t}),o=0;o<t;o++){var a="<Position>"+(i[o]-o)+"</Position>",l='<Call Method="DeleteConfigurationView">'+a+"</Call>";n.client.command.executeXML(l)}else{var a="<Position>"+n.currentPosition+"</Position>",l='<Call Method="DeleteConfigurationView">'+a+"</Call>";n.client.command.executeXML(l)}n.client.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')});var r=this.createButton("viewpane-update","view_button_refresh");r.addEventListener("click",function(e){var t=n.positionArray.length;if(t>0)for(var i=0;i<t;i++){var o="<Position>"+n.positionArray[i]+"</Position>",a='<Call Method="UpdateConfigurationView">'+o+"</Call>";n.client.command.executeXML(a)}else{var o="<Position>"+n.currentPosition+"</Position>",a='<Call Method="UpdateConfigurationView">'+o+"</Call>";n.client.command.executeXML(a)}n.client.command.executeXML('<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>')});var s=this.createButton("viewpane-last-activated","view_button_home");s.addEventListener("click",function(e){n.client.command.executeXML('<Call Method="ActivateOnSaveConfigurationView"></Call>')});var c=this.createButton("viewpane-reverse-play","view_button_left");c.addEventListener("click",function(e){var t='<Call Method="StartPlayConfigurationViews"><Reverse>true</Reverse><ConfigurationView>'+n.currentPosition+"</ConfigurationView></Call>";n.client.command.executeXML(t)});var d=this.createButton("viewpane-stop","view_button_stop");d.addEventListener("click",function(e){h()}),this.client.on("OpenFile",function(e){h()}),this.client.on("NewScene3D",function(e){h()}),this.client.on("ImportFile",function(e){h()}),this.client.on("GetSceneSettings",function(e){"SUCCESS"===e.Error&&(n.duration=parseInt(e.Settings.Scene.ConfigurationView.ViewPlay.DurationTime))});this.client.command.executeXML('<Call Method="GetSceneSettings"></Call>');var p=this.createButton("viewpane-play","view_button_right");p.addEventListener("click",function(e){var t='<Call Method="StartPlayConfigurationViews"><Reverse>false</Reverse><ConfigurationView>'+n.currentPosition+"</ConfigurationView></Call>";n.client.command.executeXML(t)}),this.client.on("ConfigurationViewPlaySelectionChange",function(e){var t=parseInt(e.Selection),i={pos:t,view:n.client.getConfigurationViews()[t]};n.client.emit("ConfigurationViewChanged",i)}),this.client.on("ConfigurationViewChanged",function(e){if(n.currentPosition=e.pos,n.positionArray=[e.pos],n.setHighlight(),!($(n.viewsWrapper).outerHeight()<=$(n.wrapperEl).outerHeight()-n.offset)){var t=$(".viewpane-item").height();if($(n.viewElements[n.currentPosition]).offset().top+t>$(n.wrapperEl).outerHeight()){var i=n.calculateMinMaxScroll(-1,parseInt($(n.viewsWrapper).css("top"))-t);n.viewsWrapper.style.top=i}}});var h=function(){n.client.command.executeXML('<Call Method="StopPlayConfigurationViews"></Call>')},u=this.createButton("viewpane-multi","mobile_UI_check_light"),m=$(u).find("use");u.addEventListener("click",function(){n.hasMultiSelect=!n.hasMultiSelect,n.hasMultiSelect?m[0].setAttributeNS(a,"href","#mobile_UI_check_full"):m[0].setAttributeNS(a,"href","#mobile_UI_check_light")},!1);var f=document.createElement("i");f.className="fas fa-check-double view-pane-icon",f.style.bottom="5px",f.style.fontSize="12px",f.onclick=function(e){n.selectAll()};var v=document.createElement("i");v.className="fas fa-file-pdf view-pane-icon",v.style.bottom="5px",v.style.fontSize="12px",v.onclick=function(e){n.createPDF()},this.buttons.appendChild(u),this.buttons.appendChild(f),this.buttons.appendChild(s),this.buttons.appendChild(o),this.buttons.appendChild(r),this.buttons.appendChild(l),this.buttons.appendChild(c),this.buttons.appendChild(d),this.buttons.appendChild(p),this.buttons.appendChild(v),this.paneEl.appendChild(this.buttons),this.paneEl.appendChild(this.wrapperEl),this.offset=$(this.buttons).outerHeight()+i+10,this.client.on("GetConfigurationViewInformation",function(e){if(e.ConfigurationView){n.views=[];var t=Array.isArray(e.ConfigurationView)?e.ConfigurationView:[e.ConfigurationView];n.client.setConfigurationViews(t);for(var i=0;i<t.length;i++){var o=t[i],a={position:o.Position,name:o.Name,image:o.Image};n.views.push(a)}n.positionArray=[],n.build(),!n.viewElements.length||n.currentPosition&&0!==n.currentPosition||n.client.setDefaultConfigurationView(t[0]);var l=Math.floor($(n.paneEl).width()/170),r=$(n.paneEl).width()-170*l-20,s=160+r/l,c=.5625*s;n.wrapperEl.style.width=l*(s+10)+"px";for(var i=0;i<n.viewElements.length;i++)$(n.viewElements[i]).children("img").width(s-40),$(n.viewElements[i]).children("img").height(c-40)}}),this.client.command.executeXML('<Call Method="GetConfigurationViewInformation"></Call>'),$(this.paneEl).kendoTouch({drag:function(e){n.drag(e)},dragstart:function(e){n.dragStart(e)}}),this.client.on("Resize",function(){setTimeout(function(){var e=Math.floor($(n.paneEl).width()/170),t=$(n.paneEl).width()-170*e-20,i=160+t/e,o=.5625*i;n.wrapperEl.style.width=e*(i+10)+"px";for(var a=0;a<n.viewElements.length;a++)$(n.viewElements[a]).children("img").width(i-40),$(n.viewElements[a]).children("img").height(o-40)},500)})}return e.prototype.drag=function(e){if(!($(this.viewsWrapper).outerHeight()<=$(this.wrapperEl).outerHeight()-this.offset)){var t=e.touch.y.location-this.scrollStart,n=parseInt($(this.viewsWrapper).css("top"));(t>15||t<-15)&&(this.scrollStart=e.touch.y.location),t<0?this.viewsWrapper.style.top=this.calculateMinMaxScroll(-1,t+n):t>0&&(this.viewsWrapper.style.top=this.calculateMinMaxScroll(1,t+n))}},e.prototype.calculateMinMaxScroll=function(e,t){return this.wrapperHeight=$(this.viewsWrapper).outerHeight()-$(this.wrapperEl).outerHeight(),e<0&&t<-this.wrapperHeight?-this.wrapperHeight+"px":e>0&&t>this.offset?this.offset+"px":t+"px"},e.prototype.dragStart=function(e){this.scrollStart=e.touch.y.location},e.prototype.build=function(){$(this.wrapperEl).empty(),this.viewsWrapper=document.createElement("div"),this.viewsWrapper.style.position="absolute",this.viewsWrapper.style.zIndex="10",this.viewsWrapper.style.top=this.offset+"px",this.wrapperEl.appendChild(this.viewsWrapper),this.update()},e.prototype.selectAll=function(){var e=this;this.positionArray=[],this.viewElements.forEach(function(t,n){e.positionArray.push(n)}),this.setHighlight()},e.prototype.createPDF=function(){var e='<Call Method="GetViewsAsPDF" CustomId="WVViewPDF">';if(this.positionArray.length>0){this.positionArray.sort(function(e,t){return e-t}).forEach(function(t){e+="<Id>"+t+"</Id>"})}else e+="<Id>"+this.currentPosition+"</Id>";e+="</Call>",this.client.command.executeXML(e),this.client.once("GetViewsAsPDF",function(e){if(e.CustomId&&-1!==e.CustomId.indexOf("WVViewPDF")){for(var t=i.appStates.fileName?"ViewExport_"+i.appStates.fileName+".pdf":"ViewExport.pdf",n=atob(e.Image),o=new Array(n.length),a=0;a<n.length;a++)o[a]=n.charCodeAt(a);var l=new Uint8Array(o),r=new Blob([l],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t);else{var s=document.createElement("a");s.href=URL.createObjectURL(r),s.download=t,document.body.appendChild(s),s.click(),s.remove()}}})},e.prototype.createButton=function(e,t){var n=document.createElement("span");n.id=e;var i=document.createElementNS(o,"svg");i.style.width="19px",i.style.height="19px";var l=document.createElementNS(o,"use");return l.setAttributeNS(a,"href","#"+t),i.appendChild(l),n.appendChild(i),n},e.prototype.update=function(){var e=this,t=1e3;this.viewElements=[];for(var n=this,o=0,a=this.views;o<a.length;o++){var l=a[o];!function(o){var a=document.createElement("div");a.classList.add("viewpane-item"),a.tabIndex=t++;var l=document.createElement("img");l.width=160,l.height=90,l.style.border="1px solid #000",l.src="data:image/jpeg;base64,"+o.image,l.draggable=!1,l.style.pointerEvents="none",a.draggable=!0;var r=document.createElement("div");r.className="viewpane-item-action-bar";var s=document.createElement("i");s.className="fas fa-play view-action-icon",r.appendChild(s),s.onclick=function(t){e.client.setConfigurationViewPosition(parseInt(o.position))};var c=document.createElement("i");c.className="fas fa-video view-action-icon",r.appendChild(c),c.onclick=function(t){e.client.setConfigurationViewPosition(parseInt(o.position),!0,!1)};var d=document.createElement("i");d.className="fas fa-video-slash view-action-icon",r.appendChild(d),d.onclick=function(t){e.client.setConfigurationViewPosition(parseInt(o.position),!1,!0)};var p=document.createElement("p");p.appendChild(document.createTextNode(o.name)),a.appendChild(l),a.appendChild(r),a.appendChild(p),a.addEventListener("contextmenu",function(e){e.preventDefault()}),a.ondragstart=function(t){e.inDragPos=parseInt(o.position)},a.ondragenter=function(e){e.preventDefault(),l.style.borderLeft="5px solid "+i.appStates.mainColor},a.ondragleave=function(e){e.preventDefault(),l.style.borderLeft="1px solid rgb(0, 0, 0)"},a.ondragover=function(e){e.preventDefault(),l.style.borderLeft="5px solid "+i.appStates.mainColor},a.ondrop=function(t){if(-1!==e.inDragPos){var n='<Call Method="MoveConfigurationView">';n+="<ConfigurationView>"+e.inDragPos+"</ConfigurationView>",n+="<Position>"+parseInt(o.position)+"</Position></Call>",e.inDragPos=-1,n+='<Call Method="GetConfigurationViewInformation"><Image>true</Image></Call>',e.client.command.executeXML(n)}},a.addEventListener("click",function(t){var n=parseInt(o.position)||0;e.hasMultiSelect?(-1===e.positionArray.indexOf(n)?e.positionArray.push(n):e.positionArray.splice(e.positionArray.indexOf(n),1),-1===e.positionArray.indexOf(e.currentPosition)&&void 0!==e.currentPosition&&e.positionArray.push(e.currentPosition),e.setHighlight(),e.currentPosition=void 0):(e.currentPosition=n,e.positionArray=[n],e.setHighlight())}),a.addEventListener("dblclick",function(t){e.activateView(o)}),$(a).kendoTouch({doubletap:function(t){e.activateView(o)},hold:function(t){t.preventDefault();var n=$(p);n.attr("contenteditable","true"),n.focus(),n.blur(function(t){t.stopPropagation(),e.setName(t,o.position),$(t.target).off("blur"),$(t.target).attr("contenteditable","false")}),n.on("keydown",function(e){e.stopPropagation(),13===e.keyCode&&(e.preventDefault(),$(e.target).off("keydown"),$(e.target).attr("contenteditable","false"))}),n.on("keyup",function(e){e.stopPropagation()})}}),n.viewsWrapper.appendChild(a),n.viewElements.push(a),n.currentPosition=0,n.positionArray=[0],n.setHighlight()}(l)}},e.prototype.setName=function(e,t){var n='<Call Method="UpdateConfigurationView"><Position>'+t+"</Position>";n+="<Name>"+e.target.textContent+"</Name></Call>",this.client.command.executeXML(n)},e.prototype.activateView=function(e){this.client.setConfigurationViewPosition(parseInt(e.position))},e.prototype.setHighlight=function(){for(var e=0;e<this.viewElements.length;e++)this.positionArray.length>0?-1!==this.positionArray.indexOf(e)?$(this.viewElements[e]).addClass("mobile-active-view"):$(this.viewElements[e]).removeClass("mobile-active-view"):e===this.currentPosition?$(this.viewElements[e]).addClass("mobile-active-view"):$(this.viewElements[e]).removeClass("mobile-active-view")},e}();t.MobileViewPane=l},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(6),l=n(60),r=n(5),s=n(4),c=n(0),d={iconId:"",langId:"App",id:"rApp",children:[{iconId:"mobile_UI_question_circle",langId:"ID_RIBBON_ABOUT",id:"rAbout",method:function(e){e.emit("openAbout")}},{iconId:"mobile_UI_language",langId:"ID_LANGUAGE",id:"rLangs",children:function(){for(var e=[{key:"ENU",value:"English"},{key:"DEU",value:"Deutsch"},{key:"ITA",value:"Italiano"},{key:"ESP",value:"Espaol"},{key:"FRA",value:"Franais"},{key:"KOR",value:""},{key:"CHS",value:""},{key:"JPN",value:""}],t=[],n=0;n<e.length;n++)!function(n){var i={iconId:"",langId:e[n].value,id:e[n].key,method:function(t){var i='<Call Method="SetSettings"><Settings><Renderer><General><Language>'+e[n].key+"</Language></General></Renderer></Settings></Call>";t.command.executeXML(i),t.emit("@changeLang",e[n].key),localStorage.setItem("WVLang",e[n].key)}};t.push(i)}(n);return t}()},{iconId:"mobile_UI_gears",langId:"ID_RIBBON_APP_SETTINGS",id:"rAppSettings",paneId:"Custom_AppSettings",method:function(e){}}]},p=function(e){function t(t,n){var i=e.call(this)||this;i.backendMode=!1,i.urlOpenMode=!1,i.visShareState=2;for(var o=window.location.search.substr(1),a=o.split("&"),l={},p=0,h=a;p<h.length;p++){var u=h[p],m=u.split("="),f=m[0],v=m[1];l[f]=v}if(void 0!==l.token&&(i.backendMode=!0),void 0!==l.file||void 0!==l.open)try{_ShowFileRibbonOnUrlOpen?i.urlOpenMode=!1:i.urlOpenMode=!0}catch(e){i.urlOpenMode=!0}i.firstLevel=[],i.el=t,i.ribbon=n,i.levelArr=[],i.selectionButtons=[],i.LMBButtons=[],i.interactionButtons=[],i.renderModeButtons=[],i.buttons=[];var g=!0;try{!0===_KISTERSWebViewerHideFullClient&&(g=!1)}catch(e){}if(g){var C={iconId:"mobile_UI_desktop",langId:"ID_RIBBON_DESKTOP_UI",id:"rSwitchDesktopUI",method:function(e,t,n){localStorage.setItem("WVParkedSession",r.appStates.session),localStorage.setItem("WVFileType",r.appStates.fileType),localStorage.setItem("WVVisShareSpec",r.appStates.VisShareSpec),localStorage.setItem("WVFileName",r.appStates.fileName),localStorage.setItem("WVUseMobile","false");e.sessionInfo.socket.send('<Request Type="Park"><Timeout>0</Timeout></Request>'),setTimeout(function(){window.location.reload()},100)}};d.children.push(C)}return i.ribbon.on("button-clicked",function(e){"SplitPane"!==e.context.paneId||e.state.active||(c.paneController.leftDefaultAdapter.sessions.length>0?(c.paneController.leftDefaultAdapter.sessions=[],c.paneController.leftDefaultAdapter.activeSession=void 0,c.paneController.leftDefaultAdapter.resultInitialized=!1,$(c.paneController.leftDefaultAdapter.resultGroup.wrapperEl).remove(),$(c.paneController.leftDefaultAdapter.resultGroup.panelContainer).remove(),$(c.paneController.leftDefaultAdapter.splitGroupTable).remove()):c.paneController.rightDefaultAdapter.sessions.length>0&&(c.paneController.rightDefaultAdapter.sessions=[],c.paneController.rightDefaultAdapter.activeSession=void 0,c.paneController.rightDefaultAdapter.resultInitialized=!1,$(c.paneController.rightDefaultAdapter.resultGroup.wrapperEl).remove(),$(c.paneController.rightDefaultAdapter.resultGroup.panelContainer).remove(),$(c.paneController.rightDefaultAdapter.splitGroupTable).remove()));for(var t=e.state.level-1,n=0;n<i.levelArr[t].length;n++)!function(n){i.levelArr[t][n].UID===e.UID?i.levelArr[t][n].state.settingsDependent||i.levelArr[t][n].context.paneId?i.ribbon.vsClient.once("GetSceneSettings",function(e){i.levelArr[t]&&i.levelArr[t][n]&&i.levelArr[t][n].checkSettings(!0)}):i.levelArr[t][n].highlight(!0):void 0!==i.levelArr[t][n].context.interaction||i.levelArr[t][n].state.settingsDependent||i.levelArr[t][n].context.paneId?i.levelArr[t][n].state.settingsDependent&&i.ribbon.vsClient.once("GetSceneSettings",function(e){i.levelArr[t]&&i.levelArr[t][n].checkSettings(!0)}):i.levelArr[t][n].highlight(!1)}(n);if(e.context.interactionClass)switch(e.context.interactionClass){case"LMB":i.ribbon.vsClient.emit("LMB",e.context.interaction);break;case"Select":i.ribbon.vsClient.emit("Select",e.context.interaction);break;case"RenderMode":i.ribbon.vsClient.emit("RenderMode",e.context.interaction)}}),i.ribbon.vsClient.on("@changeLang",function(e){for(var t=0;t<i.buttons.length;t++)s.settings.lang=e,i.buttons[t].update()}),i}return i(t,e),t.prototype.load=function(e,t){this.ribbonConf=e,e.push(d);try{if(Array.isArray(_CustomRibbon))for(var n in _CustomRibbon)_CustomRibbon.hasOwnProperty(n)&&e.push(_CustomRibbon[n]);else e.push(_CustomRibbon)}catch(e){}this.firstLevel=[];var i=this.createRow(e,this.firstLevel,void 0);i&&this.registerRow(this.firstLevel,i)},t.prototype.createRow=function(e,t,n){var i=this,o=0;if(!n||!0!==n.state.active){var a,s=document.createElement("div");s.className="mobile-ribbon-row-wrapper",n&&(o=n.state.level)<this.levelArr.length&&this.closeHigherLevel(o),0===o?(s.style.bottom="0",s.style.top="0",s.style.border="none"):(s.style.borderRadius="8px",s.style.bottom=49*o+15*(o-1)+"px");for(var d=0;d<e.length;d++){var p=e[d];if((!this.backendMode&&!this.urlOpenMode||"ID_RIBBON_FILE"!==p.langId&&"ID_RIBBON_IMPORT"!==p.langId)&&!("ID_RIBBON_VISSHARE_SAVE"===p.langId&&2!==this.visShareState||"ID_RIBBON_VISSHARE_FILE"===p.langId&&0===this.visShareState)){try{if(p.langId in _functions&&!1===_functions[p.langId])continue}catch(e){}try{if(p.langId in _RibbonGroups&&!1===_RibbonGroups[p.langId])continue}catch(e){}try{if(p.langId in _Tabs&&!1===_Tabs[p.langId])continue}catch(e){}try{var h=r.appStates.fileType;if(h)if("3D"===h){if(-1!==_3DReducedSet.indexOf(p.langId))continue}else if("2D"===h&&-1!==_2DReducedSet.indexOf(p.langId))continue}catch(e){}var u=this.getButtonByUID(p.id);if(!u){if(a={iconId:p.iconId,langId:p.langId,children:void 0,childrenIdx:[],ribbon:this.ribbon,method:void 0,paneId:p.paneId},p.children){a.children=p.children,a.childrenIdx=[];for(var m=0;m<p.children.length;m++)a.childrenIdx.push(p.children[m].langId)}else p.method&&(a.method=p.method);if(p.interaction&&(a.interaction=p.interaction,a.interactionClass=p.interactionClass),u=new l.RibbonButton(p.id,p.langId,s,a,this),p.interactionClass)switch(p.interactionClass){case"Select":this.selectionButtons.push(u);break;case"LMB":this.LMBButtons.push(u);break;case"Interaction":this.interactionButtons.push(u);break;case"RenderMode":this.renderModeButtons.push(u)}"ID_RIBBON_COMPARE_MODEL"===u.id&&-1!==c.paneBadgeIdx.indexOf("wv-quickcompare")&&(u.state.active=!0,u.highlight(!0)),this.buttons.push(u)}t.push(u)}}var f=[],v=document.createElement("i");$(v).addClass("fa fa-angle-left mobile-ribbon-caret-left"),f.push(v),s.appendChild(v);var g=document.createElement("i");return $(g).addClass("fa fa-angle-right mobile-ribbon-caret-right"),f.push(g),s.appendChild(g),$(s).kendoTouch({drag:function(e){i.dragRow(e,$(s),f)},dragstart:function(e){i.startRowDrag(e,$(s))}}),this.el.appendChild(s),[s,v,g]}if((o=n.state.level)<this.levelArr.length)for(var C=this.levelArr.length-1,E=C;E>=o;E--)this.deleteRow(E)},t.prototype.resize=function(){this.closeRibbons();var e=$(".mobile-ribbon-row-wrapper").first(),t=document.body.clientWidth-e.outerWidth();$(".mobile-ribbon-caret-left").css("display","none"),t>=0?$(".mobile-ribbon-caret-right").css("display","none"):($(".mobile-ribbon-caret-right").css("display","block"),$(".mobile-ribbon-caret-right").css("left",window.innerWidth-15)),e.css("left","0")},t.prototype.getButton=function(e){for(var t=0;t<this.buttons.length;t++)if(this.buttons[t].id===e)return this.buttons[t]},t.prototype.getButtonByUID=function(e){for(var t=0;t<this.buttons.length;t++)if(this.buttons[t].UID===e)return this.buttons[t]},t.prototype.registerRow=function(e,t){$("#mobile-floating-deactivate-button").css("bottom","+=63"),$("#mobile-floating-action-button").css("bottom","+=63");var n=$(window).width();if(this.levelArr.length>1){for(var i=this.levelArr[this.levelArr.length-1],o=0;o<i.length;o++)i[o].hideText();var a=$(i[0].target).width(),l=n-a;l>0&&(i[0].target.style.left=l/2+"px")}this.levelArr.push(e);for(var r=0;r<e.length;r++)e[r].render(t[0]),e[r].showText();t&&$(t[0]).width()>window.innerWidth&&(t[2].style.left=window.innerWidth-15+"px",t[2].style.display="block");var s=$(t[0]).width(),c=n-s;c>0&&(t[0].style.left=c/2+"px")},t.prototype.deleteRow=function(e){for(var t,n=0;n<this.levelArr[e].length;n++){var i=void 0;i=this.levelArr[e][n],i.target&&!t&&(t=i.target),i.destroy()}t&&$(t).remove(),this.levelArr.splice(e,1),$("#mobile-floating-deactivate-button").css("bottom","-=63"),$("#mobile-floating-action-button").css("bottom","-=63")},t.prototype.closeRibbons=function(){for(var e=this.levelArr.length;e>1;e--)this.deleteRow(e-1);var t=new l.RibbonButton("mockButtonToClose","mockButtonToClose",void 0,{},this);t.state.level=1,this.ribbon.emit("button-clicked",t)},t.prototype.closeHigherLevel=function(e){for(var t=this.levelArr.length-1,n=t;n>=e;n--)this.deleteRow(n);for(var i=this.levelArr[e-1],o=0;o<i.length;o++)i[o].showText()},t.prototype.startRowDrag=function(e,t){o=e.touch.x.location-parseInt(t.css("left"))},t.prototype.dragRow=function(e,t,n){if(!(t.width()<=window.innerWidth)){n[0].style.display="block",n[1].style.display="block";var i=o-e.touch.x.location;i<0&&(n[0].style.display="none",i=0),i>t.width()-window.innerWidth+2&&(n[1].style.display="none",i=t.width()-window.innerWidth+2),n[0].style.left=i+"px",n[1].style.left=i+window.innerWidth-15+"px",t.css("left",-1*i)}},t.prototype.handleActivateInteraction=function(e){-1===r.appStates.interactionMode.indexOf(e)?this.ribbon.activateInteraction(e):this.ribbon.deactivateInteraction(e)},t}(a.EventEmitter);t.RibbonAdapter=p},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),a=n(4),l=n(6),r=n(0),s=n(61),c=n(58),d=function(e){function t(t){var n=e.call(this)||this;return n.closeAboutDialog=function(e){if(!$(e.target).hasClass("mobile-ribbon-about-button")&&"ID_RIBBON_ABOUT"!==$(e.target).parent().parent().parent().attr("id")&&"ID_RIBBON_ABOUT"!==$(e.target).parent().attr("id")&&"ID_RIBBON_ABOUT"!==$(e.target).attr("id")&&"svg"!==e.target.nodeName&&"path"!==e.target.nodeName){var t=document.getElementById("aboutDialog");(!document.getElementsByClassName("mobile-ribbon-about-version-wrapper")[0].contains(e.target)&&"click"===e.type||"keyup"===e.type&&27===e.keyCode)&&(n.aboutOpen=!1,t.style.display="none",$(document).off("click",n.closeAboutDialog),$(document).off("keyup",n.closeAboutDialog))}},n.vsClient=vsClient,n.aboutOpen=!1,document.getElementById("wv-canvas").onclick=function(){n.adapter.closeRibbons()},n.aboutDialog=n._buildAboutDialog(),document.body.appendChild(n.aboutDialog),n.adapter=new c.RibbonAdapter(t,n),n}return i(t,e),t.prototype.initialize=function(){var e=this;this.render(),vsClient.on("ActivateInteraction",function(t){var n;if((!(n=t.Interaction)||0!==n.indexOf("Split"))&&n&&"Flythrough_SelectStartPositionAndDirection"!==n){switch(n){case"CuttingPlane_FromPointNormal":n="Section_FromPointNormal";break;case"CuttingPlane":n="Section"}var i=e.getPaneIdForInteraction(n);-1===o.appStates.interactionMode.indexOf(n)&&o.appStates.interactionMode.push(n),i||(i="no_pane_"+n);for(var a=0;a<e.adapter.interactionButtons.length;a++){var l=e.adapter.interactionButtons[a];-1!==o.appStates.interactionMode.indexOf(l.context.interaction)&&l.highlight(!0)}for(var a=0;a<r.interactionBadges.length;a++)r.interactionBadges[a].id===i&&$(r.interactionBadges[a]).addClass("mobile-badge-highlighted");if(r.createInteractionBadge(i),"Flythrough"===n&&(r.createFlyControls(),vsClient.command.executeXML('<Call Method="GetSceneSettings"></Call>')),0===n.indexOf("Transformation")?vsClient.emit("ActivateTransform",n):vsClient.emit("DeactivateTransform",n),0===n.indexOf("Measurement")){var s={Mock:!0,Type:"MeasurementChanged"};"Measurement_EdgeLengthAccumulated"===n&&(s.AccumulatedLength=0),vsClient.emit("MeasurementChanged",s)}}}),vsClient.on("DeactivateInteraction",function(t){var n;if(!(n=t.Interaction)||0!==n.indexOf("Split")){switch(n){case"CuttingPlane_FromPointNormal":n="Section_FromPointNormal";break;case"CuttingPlane":n="Section"}var i=e.getPaneIdForInteraction(n);-1!==o.appStates.interactionMode.indexOf(n)&&o.appStates.interactionMode.splice(o.appStates.interactionMode.indexOf(n),1),i||(i="no_pane_"+n);for(var a=0;a<e.adapter.interactionButtons.length;a++){var l=e.adapter.interactionButtons[a];-1===o.appStates.interactionMode.indexOf(l.context.interaction)&&l.highlight(!1)}for(var a=0;a<r.interactionBadges.length;a++)r.interactionBadges[a].id===i&&$(r.interactionBadges[a]).removeClass("mobile-badge-highlighted");"Flythrough_SelectStartPositionAndDirection"!==n&&r.deleteInteractionBadge(i),"Flythrough"===n&&r.removeFlyControls(),0===n.indexOf("Transformation")&&vsClient.emit("DeactivateTransform",n)}}),vsClient.on("LMB",function(t){o.appStates.mouseLeftButtonMode=t;for(var n=0;n<e.adapter.LMBButtons.length;n++){var i=e.adapter.LMBButtons[n];o.appStates.mouseLeftButtonMode===i.context.interaction?i.highlight(!0):i.highlight(!1)}}),vsClient.on("Select",function(t){var n=o.appStates.selectionMode;o.appStates.selectionMode=t,"Neighbourhood"===t?(0===$("#mobile-neighbourhood-search-panel").length&&r.buildNeighbourhoodSearchPanel(),r.togglePaneBadge("NeighbourhoodSearchPane"),$("#mobile-neighbourhood-search-panel").show()):(r.deletePaneBadge("wv-neighbourhoodsearch"),$("#mobile-neighbourhood-search-panel").hide());for(var i=0;i<e.adapter.selectionButtons.length;i++){var a=e.adapter.selectionButtons[i];o.appStates.selectionMode===a.context.interaction?a.highlight(!0):a.highlight(!1)}"Ghost"===t?r.toggleGhostBadges(!0,n):r.toggleGhostBadges(!1,n)}),vsClient.on("RenderMode",function(t){var n=o.appStates.renderingModes;if(Array.isArray(t)){var i=t;o.appStates.renderingModes=i}else{-1!==n.indexOf(t)?n.splice(n.indexOf(t),1):(n.push(t),1===n.length&&"Perspective"===n[0]&&n.push("Solid"));for(var a='<Call Method="SetSceneSettings"><Settings><Scene><Visualization><RenderMode>',l=0;l<n.length;l++)a=a+n[l]+" ";a+="</RenderMode></Visualization></Scene></Settings></Call>",vsClient.command.executeXML(a)}for(var l=0;l<e.adapter.renderModeButtons.length;l++){var r=e.adapter.renderModeButtons[l];-1!==n.indexOf(r.context.interaction)?r.highlight(!0):r.highlight(!1)}})},t.prototype.getPaneIdForInteraction=function(e){switch(e){case"CuttingPlane_FromPointNormal":e="Section_FromPointNormal";break;case"CuttingPlane":e="Section"}var t,n=e.split("_")[0];switch(n){case"Measurement":t="wv-measurement";break;case"Section":t="wv-section";break;case"Transformation":t="wv-transform";break;case"DraftAngle":t="wv-draftangle";break;case"Markup":t="Markup_Circle"===e||"Markup_Freehand"===e||"Markup_Rectangle"===e?"wv-markup-reduced":"wv-markup";break;case"Flythrough":t="wv-flythrough";break;case"BoundaryCondition_Axis":t="no_pane_BoundaryCondition_Axis";break;case"BoundaryCondition_AxisByCircle":t="no_pane_BoundaryCondition_AxisByCircle";break;case"BoundaryCondition_AxisByLine":t="no_pane_BoundaryCondition_AxisByLine";break;case"Callout":t="no_pane_"+e;break;default:t=void 0}return t},t.prototype.render=function(){this.adapter.load(s.ribbonConf.ribbonConf,void 0)},t.prototype.resize=function(){this._buildAboutDialog(),this.adapter.resize()},t.prototype.reset=function(){},t.prototype.openPage=function(e){var t=!1;try{t=_UseOfflineHelp}catch(e){}"https://viewer.kisters.de/help/webviewer"===e&&(e=t?"/Help/webviewer/"+r.mapCountry(a.settings.lang)+"/index.html":e+"/"+o.appStates.version+"/"+r.mapCountry(a.settings.lang)+"/index.php"),window.open(e,"_blank")},t.prototype._buildAboutDialog=function(){for(var e=this,t=document.body.clientHeight,n=document.body.clientWidth,i=.9,l=.54*n*i;l+50>t;)i-=.05,l=.54*n*i;var r=0;t-l>50&&(r=(t-l-50)/2);var s;try{s=_AboutLinks}catch(e){s=o.appStates.aboutLinks}var c=.11*l,d=.265*c;if($("#aboutDialog").length>0){$("#aboutDialogImage").css("marginTop",r),$("#aboutDialogImage").attr("width",100*i+"%");var p=n-n*i-.05*n,h=(s.length-1)*c+(s.length-1)*d+p;return $(".mobile-ribbon-about-button").each(function(e){$(this).css({width:c+"px",height:.95*c+"px",bottom:r+52+.05*c+"px",right:h-e*c-e*d+"px"})}),$(".mobile-ribbon-about-default-text-wrapper").css({bottom:r+50+1.2*c+"px",left:.05*n+n*i*.13+"px",width:n*i-.16*n,"font-size":.04*l+"px",height:.05*l+"px"}),$(".mobile-ribbon-about-default-copyright").css({"font-size":.03*l+"px"}),void $(".mobile-ribbon-about-version-wrapper").css({bottom:r+50+2.8*c+"px",left:.05*n+n*i*.56+"px",width:n*i-n*i*.56,"font-size":.04*l+"px"})}var u=document.createElement("div");u.classList.add("ribbon-about-wrapper"),u.id="aboutDialog",u.style.display="none",u.style.width="100%",u.style.height="100%";var m=document.createElement("img");m.src="3D-VS_About-Screen.png",m.id="aboutDialogImage",m.setAttribute("width",100*i+"%"),m.style.marginTop=r+"px",m.style.marginLeft="5%";var f=document.createElement("div");f.classList.add("mobile-ribbon-about-default-text-wrapper");var v=document.createElement("span");v.classList.add("mobile-ribbon-about-default-text"),v.textContent="WebViewer-Edition";var g=document.createElement("span");g.classList.add("mobile-ribbon-about-default-copyright"),g.textContent="2020 by KISTERS All rights reserved";var C=document.createElement("div");C.classList.add("mobile-ribbon-about-version-wrapper");var E=document.createElement("div"),_=document.createElement("span");_.textContent=_lang_data.ID_ABOUT_PROGRAMVERSION[a.settings.lang]+" ";var b=document.createElement("span");b.id="program_version_text",E.appendChild(_),E.appendChild(b);var I=document.createElement("div"),S=document.createElement("span");S.textContent="Importer: ";var y=document.createElement("span");y.id="version_importer_text",I.appendChild(S),I.appendChild(y),vsClient.on("@changeLang",function(e){_.textContent=_lang_data.ID_ABOUT_PROGRAMVERSION[a.settings.lang]+" ",S.textContent="Importer: "}),C.appendChild(E),C.appendChild(I),u.appendChild(C),f.appendChild(v),f.appendChild(g),u.appendChild(f),u.appendChild(m);for(var w=n-n*i-.05*n,M=(s.length-1)*c+(s.length-1)*d+w,x=0;x<s.length;x++)!function(t){var n=document.createElement("div");n.classList.add("mobile-ribbon-about-button"),n.style.right=M-t*c+"px",n.style.width=c+"px",n.style.height=c+"px",$(n).click(function(n){n.preventDefault(),e.openPage(s[t])}),u.appendChild(n)}(x);return vsClient.on("openAbout",function(){if(!1===e.aboutOpen){vsClient.command.executeXML('<Call Method="GetVersionInfo"></Call>'),vsClient.once("GetVersionInfo",function(e){var t=e.Version.split(".");t.pop(),o.appStates.version=t.join("."),$("#program_version_text").text(e.LongVersion),$("#version_importer_text").text(e.ImporterVersion)}),$(u).show(),$(document).on("click",e.closeAboutDialog),$(document).on("keyup",e.closeAboutDialog),e.aboutOpen=!0}else $(u).hide(),$(document).off("click",e.closeAboutDialog),$(document).off("keyup",e.closeAboutDialog),e.aboutOpen=!1}),u},t.prototype.activateInteraction=function(e){var t='<Call Method="ActivateInteraction"><Interaction>'+e+"</Interaction></Call>";vsClient.command.executeXML(t)},t.prototype.deactivateInteraction=function(e){void 0===e&&(e="Deactivate_AllInteractions");var t=e.split("_")[0],n="Deactivate_"+t,i='<Call Method="ActivateInteraction"><Interaction>'+n+"</Interaction></Call>";vsClient.command.executeXML(i)},t.prototype.deleteShareRibbon=function(e){this.adapter.visShareState=e?0:1},t}(l.EventEmitter);t.MobileRibbon=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(5),a=n(0),l="http://www.w3.org/2000/svg",r="http://www.w3.org/1999/xlink",s=function(){function e(e,t,n,i,o){this.el=document.createElement("div"),this.el.id=t,this.el.classList.add("mobile-ribbon-button"),this.context=i,this.target=n,this.id=t,this.UID=e,this.adapter=o,this.state={active:!1,level:o.levelArr.length+1},this.shown=!1,this.interaction=i.interaction;var a=document.createElement("div");if(a.classList.add("mobile-ribbon-button-wrapper"),this.label=document.createElement("div"),this.label.classList.add("mobile-ribbon-button-text"),""!==this.context.iconId){if(this.el.style.padding="6px",this.context.children){var s=document.createElement("i");s.className="fas fa-chevron-up",this.el.appendChild(s),this.el.style.paddingTop="4px"}else this.label.style.paddingTop="10px",a.style.paddingTop="2px";this.icon=document.createElementNS(l,"svg"),this.icon.setAttribute("class","mobile-ribbon-button-icon");var c=document.createElementNS(l,"use");c.setAttributeNS(r,"href","#"+this.context.iconId),this.icon.appendChild(c),this.label.style.display="none",a.appendChild(this.icon)}this.el.appendChild(this.label),this.el.appendChild(a),this.addClick(this.state,i.method),this.target&&this.target.appendChild(this.el)}return e.prototype.showText=function(){""!==this.context.iconId&&(this.label.style.display="",this.icon.style.height="20px",this.el.style.paddingBottom="6px",this.context.children||(this.el.style.paddingTop="6px"))},e.prototype.hideText=function(){""!==this.context.iconId&&(this.label.style.display="none",this.icon.style.height="30px",this.el.style.paddingBottom="9px",this.context.children||(this.el.style.paddingTop="12px"))},e.prototype.setText=function(){var e=this.context.langId.replace("__N","");return _lang_data[e]&&_lang_data[e][i.settings.lang]?_lang_data[e][i.settings.lang]:_custom_lang_data[e]&&_custom_lang_data[e][i.settings.lang]?_custom_lang_data[e][i.settings.lang]:_lang_data[e]&&_lang_data[e].ENU?_lang_data[e].ENU:_custom_lang_data[e]&&_custom_lang_data[e].ENU?_custom_lang_data[e].ENU:e},e.prototype.render=function(e){if(this.label.textContent=this.setText(),this.context.interactionClass)switch(this.context.interactionClass){case"Interaction":-1!==o.appStates.interactionMode.indexOf(this.context.interaction)&&this.highlight(!0);break;case"Select":o.appStates.selectionMode===this.context.interaction?this.highlight(!0):this.shown&&this.highlight(!1);break;case"LMB":o.appStates.mouseLeftButtonMode===this.context.interaction?this.highlight(!0):this.shown&&this.highlight(!1);break;case"RenderMode":-1!==o.appStates.renderingModes.indexOf(this.context.interaction)?this.highlight(!0):this.highlight(!1)}this.checkSettings(!0),this.shown=!0,e.appendChild(this.el),this.target=e},e.prototype.checkSettings=function(e){if(a.paneController&&a.paneController.sceneSettings){var t="true"===a.paneController.sceneSettings.Scene.Tools.Dimensioning.Dimensioning,n="true"===a.paneController.sceneSettings.Scene.Visualization.ShowGrid,i="false"===a.paneController.sceneSettings.Scene.Tools.CircleSelection.SelectCircleWith3Points,o="true"===a.paneController.sceneSettings.Scene.Tools.Callout.SelectAssociatedNodes,l="true"===a.paneController.sceneSettings.Scene.Tools.Callout.MultiAnchorGroups,r="true"===a.paneController.sceneSettings.Scene.Mouse.UseFreeRotate,s="true"===a.paneController.sceneSettings.Scene.General.Animation;"ID_RIBBON_MEASUREMENT__N"===this.id?this.setSettingDependentState(!t,e):"ID_RIBBON_DIMENSION"===this.id?this.setSettingDependentState(t,e):"rGrid"===this.id?this.setSettingDependentState(n,e):"ID_RIBBON_ARC"===this.id?this.setSettingDependentState(i,e):"ID_RIBBON_3_POINTS"===this.id?this.setSettingDependentState(!i,e):"ID_RIBBON_CALLOUTS_SELECT_ASSOCIATED_NODES"===this.id?this.setSettingDependentState(o,e):"ID_RIBBON_CALLOUTS_MULTIPLE_CONNECTIONS"===this.id?this.setSettingDependentState(l,e):"ID_MOUSE_USE_FREE_ROTATE"===this.id?this.setSettingDependentState(r,e):"ID_RIBBON_ANIMATE"===this.id&&"rAnimationStart"===this.UID&&this.setSettingDependentState(s,e)}},e.prototype.setSettingDependentState=function(e,t){this.state.active=e,this.state.settingsDependent=!0,t&&this.highlight(e)},e.prototype.destroy=function(){this.shown=!1,$(this.el).remove()},e.prototype.update=function(){this.label.textContent=this.setText()},e.prototype.addClick=function(e,t){var n=this;this.el.addEventListener("click",function(i){if(t)t(vsClient,e,n.adapter),n.adapter.closeHigherLevel(n.state.level);else if(n.context.children){var o=[],l=n.adapter.createRow(n.context.children,o,n);n.adapter.registerRow(o,l)}if(n.interaction&&"Interaction"===n.context.interactionClass)n.adapter.handleActivateInteraction(n.interaction);else if(n.interaction&&"LMB"===n.context.interactionClass){var r='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><LeftButtonFunction>';r+=n.interaction,r+="</LeftButtonFunction></Mouse></Scene></Settings></Call>",vsClient.command.executeXML(r)}else if(n.interaction&&"Select"===n.context.interactionClass){var s='<Call Method="SetSelectionMode"><SelectionMode>'+n.interaction+"</SelectionMode></Call>";vsClient.command.executeXML(s)}if(n.context.paneId){var c=a.paneController.mapPaneTemplateToId(n.context.paneId),d=!1;try{-1!==_DisabledPanes.indexOf(c)&&(d=!0)}catch(e){}var p=!1;if(d||(p=a.togglePaneBadge(n.context.paneId)),p)try{-1!==_MobileRightMoreBadge.indexOf(c)?a.paneController.render(c,"right"):a.paneController.render(c,"left")}catch(e){a.paneController.render(c,"left")}if("Custom_AppSettings"!==n.context.paneId){if("ClashPane"===n.context.paneId&&!p){vsClient.command.executeXML('<Call Method="DeactivateClash"></Call>')}n.highlight(p)}else $(n.el).addClass("ribbon-active"),setTimeout(function(){$(n.el).removeClass("ribbon-active")},200)}n.context.ribbon.emit("button-clicked",n)})},e.prototype.highlight=function(e){var t=this;(this.context.interaction||this.context.paneId)&&(this.state.active=e),!0===e?this.context.children?$(this.el).addClass("ribbon-parent-active"):($(this.el).addClass("ribbon-active"),this.context.interaction||this.state.active||setTimeout(function(){t.state.active||$(t.el).removeClass("ribbon-active")},200)):this.context.children?$(this.el).removeClass("ribbon-parent-active"):$(this.el).removeClass("ribbon-active")},e}();t.RibbonButton=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.ribbonConf=[{iconId:"",langId:"ID_RIBBON_START",id:"rStart",children:[{iconId:"2_oeffnen",langId:"ID_RIBBON_FILE",id:"rOpen",method:function(e){e.emit("openFileDialog")}},{iconId:"3_importieren",langId:"ID_RIBBON_IMPORT",id:"rImport",method:function(e){e.emit("importFileDialog")}},{iconId:"4_speichern",langId:"ID_RIBBON_VISSHARE_FILE",id:"rVisShare",children:[{iconId:"4_speichern",langId:"ID_RIBBON_VISSHARE_SAVE",id:"rVisShareSave",method:function(e){e.emit("VisShareSave")}},{iconId:"4_speichern",langId:"ID_RIBBON_VISSHARE_SAVE_AS",id:"rVisShareSaveAs",method:function(e){e.emit("VisShareSaveAs")}}]},{iconId:"6_drucken",langId:"ID_RIBBON_PRINT",id:"rPrint",method:function(e){e.emit("openPrintDialog")}},{iconId:"1_letzte_aktionen",langId:"ID_RIBBON_LAST_ACTIONS",id:"rUndo",method:function(e){e.command.executeXML('<Call Method="Undo"></Call>')}},{iconId:"1_freies_verschieben",langId:"ID_RIBBON_CONTROLS",id:"rControls",children:[{iconId:"1_zoom_rahmen",langId:"ID_RIBBON_ZOOM_RECTANGLE",id:"rZoomRect",interactionClass:"LMB",interaction:"RectZoom",method:function(e){}},{iconId:"2_drehen",langId:"ID_RIBBON_ROTATE",id:"rRotate",interactionClass:"LMB",interaction:"Rotate",method:function(e){}},{iconId:"3_pan",langId:"ID_RIBBON_PAN",id:"rPan",interactionClass:"LMB",interaction:"Pan",method:function(e){}},{iconId:"3_drehen",langId:"ID_RIBBON_TURNTABLE",id:"rTurntable",interactionClass:"LMB",interaction:"Turntable",method:function(e){}},{iconId:"4_auswahl_rahmen",langId:"ID_RIBBON_SELECTION_FRAME",id:"rSelectionFrame",interactionClass:"LMB",interaction:"RectSelect",method:function(e){}},{iconId:"5_zoom",langId:"ID_RIBBON_ZOOM",id:"rZoom",interactionClass:"LMB",interaction:"Zoom",method:function(e){}},{iconId:"bim_mode",langId:"ID_MOUSE_USE_FREE_ROTATE",id:"rFreeRotateMouseMode",interactionClass:"FreeRotateMouseMode",method:function(e,t){var n='<Call Method="SetSceneSettings"><Settings><Scene><Mouse><UseFreeRotate>';n+=!t.active,n+="</UseFreeRotate></Mouse></Scene></Settings></Call>",e.command.executeXML(n),t.active=!t.active}}]},{iconId:"1_selektieren",langId:"ID_RIBBON_SELECTION_MODE",id:"rSelectionMode",children:[{iconId:"1_selektieren",langId:"ID_RIBBON_SELECT",id:"rSelecetMode",interactionClass:"Select",interaction:"Select",method:function(e){}},{iconId:"3_verbergen",langId:"ID_RIBBON_HIDE",id:"rHideMode",interactionClass:"Select",interaction:"Hide",method:function(e){}},{iconId:"4_loeschen",langId:"ID_RIBBON_DELETE",id:"rDeleteMode",interactionClass:"Select",interaction:"Delete",method:function(e){}},{iconId:"5_ghost",langId:"ID_RIBBON_GHOST",id:"rGhostMode",interactionClass:"Select",interaction:"Ghost",method:function(e){}},{iconId:"2_nachbarschaft",langId:"ID_RIBBON_NEIGHBOURHOOD_SEARCH",id:"rNeighbourHood",interactionClass:"Select",interaction:"Neighbourhood",method:function(e){}},{iconId:"10_auswahl_durch_farbe",langId:"ID_RIBBON_COLOR",id:"rColorMode",interactionClass:"Select",interaction:"Color",method:function(e){}},{iconId:"selection_mode_instance",langId:"ID_RIBBON_INSTANCE",id:"rInstanceMode",interactionClass:"Select",interaction:"Instance",method:function(e){}}]},{iconId:"3_isolieren",langId:"ID_RIBBON_SELECTION",id:"rSelection",children:[{iconId:"1_alles_selektieren",langId:"ID_RIBBON_SELECT_ALL",id:"rSelectAll",method:function(e){e.command.executeXML('<Call Method="SelectAllGeometries"></Call>')}},{iconId:"2_auswahl_umkehren",langId:"ID_RIBBON_INVERT_SELECTION",id:"rInvertSelection",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Invert</SelectionModifier></Call>')}},{iconId:"3_isolieren",langId:"ID_RIBBON_ISOLATE",id:"rIsolate",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Isolate</SelectionModifier></Call>')}},{iconId:"4_anzeigen",langId:"ID_SHOW_SELECTION",id:"rShow",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Show</SelectionModifier></Call>')}},{iconId:"5_verbergen",langId:"ID_HIDE_SELECTION",id:"rHide",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Hide</SelectionModifier></Call>')}},{iconId:"6_loeschen",langId:"ID_DELETE_SELECTION",id:"rDelete",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Delete</SelectionModifier></Call>')}},{iconId:"7_ghost",langId:"ID_GHOST_SELECTION",id:"rGhost",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Ghost</SelectionModifier></Call>')}},{iconId:"8_ghost_ausschalten",langId:"ID_RIBBON_UNGHOST",id:"rUnGhost",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>UnGhost</SelectionModifier></Call>')}},{iconId:"9_auswahl_aufheben",langId:"ID_RIBBON_DESELECT",id:"rDeselect",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Deselect</SelectionModifier></Call>')}},{iconId:"10_auswahl_durch_farbe",langId:"ID_RIBBON_COLOR",id:"rColor",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>SearchByColor</SelectionModifier></Call>')}}]},{iconId:"5_sichtbarkeit_umkehren",langId:"ID_RIBBON_SHOW/HIDE",id:"rShowHide",children:[{iconId:"1_alles_anzeigen",langId:"ID_RIBBON_SHOW_ALL",id:"rShowAll",method:function(e){e.command.executeXML('<Call Method="ShowAll"></Call>')}},{iconId:"2_ghost_ausschalten",langId:"ID_RIBBON_UNGHOST_ALL",id:"rUnGhostAll",method:function(e){e.command.executeXML('<Call Method="UnGhostAll"></Call>')}},{iconId:"3_markups_verbergen",langId:"ID_RIBBON_HIDE_ALL_MARKUPS",id:"rHideAllMarkups",method:function(e){e.command.executeXML('<Call Method="HideAllMarkups"></Call>')}},{iconId:"4_pmis_verbergen",langId:"ID_RIBBON_HIDE_ALL_PMIS",id:"rHideAllPMIS",method:function(e){e.command.executeXML('<Call Method="HideAllPMIs"></Call>')}},{iconId:"5_sichtbarkeit_umkehren",langId:"ID_RIBBON_INVERT_VISIBILITY",id:"rInvertVis",method:function(e){e.command.executeXML('<Call Method="InvertVisibility"></Call>')}}]},{iconId:"1_anpassen",langId:"ID_RIBBON_ZOOM",id:"rZoomS",children:[{iconId:"1_anpassen",langId:"ID_RIBBON_FIT_ALL",id:"rFitAllS",method:function(e){e.command.executeXML('<Call Method="FitAll"></Call>')}},{iconId:"2_vergroessern",langId:"ID_RIBBON_ZOOM_IN",id:"rZoomInS",method:function(e){e.command.executeXML('<Call Method="ZoomIn"></Call>')}},{iconId:"3_verkleinern",langId:"ID_RIBBON_ZOOM_OUT",id:"rZoomOutS",method:function(e){e.command.executeXML('<Call Method="ZoomOut"></Call>')}}]}]},{iconId:"",langId:"ID_RIBBON_DOCUMENT",id:"rDocument",children:[{iconId:"3_pan",langId:"ID_RIBBON_PAN",id:"rPanD",method:function(e){e.command.executeXML('<Call Method="SetSceneSettings">\n                        <Settings>\n                            <Scene>\n                            <Mouse>\n                            <LeftButtonFunction>\n                               Pan\n                            </LeftButtonFunction>\n                            </Mouse>\n                            </Scene>\n                        </Settings>\n                     </Call>')}},{iconId:"1_zoom_rahmen",langId:"ID_RIBBON_ZOOM_RECTANGLE",id:"rZoomRectD",interactionClass:"LMB",interaction:"RectZoom",method:function(e){}},{iconId:"1_vorherige",langId:"ID_RIBBON_PREVIOUS",id:"rPrev",method:function(e){e.command.executeXML('<Call Method="PreviousPage"></Call>')}},{iconId:"2_naechtse",langId:"ID_RIBBON_NEXT",id:"rNext",method:function(e){e.command.executeXML('<Call Method="NextPage"></Call>')}},{iconId:"3_270_Grad",langId:"ID_RIBBON_ROTATE",id:"rRotateS",children:[{iconId:"1_90_Grad",langId:"ID_RIBBON_90",id:"r90",method:function(e){e.command.executeXML('<Call Method="RotatePage"></Call>')}},{iconId:"2_180_Grad",langId:"ID_RIBBON_180",id:"r180",method:function(e){var t='<Call Method="RotatePage"></Call>';e.command.executeXML(t),e.command.executeXML(t)}},{iconId:"3_270_Grad",langId:"ID_RIBBON_270",id:"r270",method:function(e){var t='<Call Method="RotatePage"></Call>';e.command.executeXML(t),e.command.executeXML(t),e.command.executeXML(t)}}]},{iconId:"1_anpassen",langId:"ID_RIBBON_ZOOM",id:"rZoomD",children:[{iconId:"1_anpassen",langId:"ID_RIBBON_FIT_ALL",id:"rFittAllD",method:function(e){e.command.executeXML('<Call Method="FitAll"></Call>')}},{iconId:"2_an_fensterbreite_anpassen",langId:"ID_RIBBON_FIT_WIDTH",id:"rFitWidth",method:function(e){e.command.executeXML('<Call Method="FitWidth"></Call>')}},{iconId:"3_an_fensterhoehe_anpassen",langId:"ID_RIBBON_FIT_HEIGHT",id:"rFitHeight",method:function(e){e.command.executeXML('<Call Method="FitHeight"></Call>')}},{iconId:"4_vergroessern",langId:"ID_RIBBON_ZOOM_IN",id:"rZoomInD",method:function(e){e.command.executeXML('<Call Method="ZoomIn"></Call>')}},{iconId:"5_verkleinern",langId:"ID_RIBBON_ZOOM_OUT",id:"rZoomOutD",method:function(e){e.command.executeXML('<Call Method="ZoomOut"></Call>')}}]},{iconId:"1_text_search",langId:"ID_TEXT_SEARCH",id:"rTextSearch",paneId:"TextSearchPane",method:function(e){}},{iconId:"3_illustration",langId:"ID_RIBBON_ILLUSTRATION",id:"rIllustration",interactionClass:"RenderMode",interaction:"Illustration",method:function(e){}},{iconId:"1_invertieren",langId:"ID_RIBBON_INVERT",id:"rInvertD",interactionClass:"RenderMode",interaction:"Invert",method:function(e){}},{iconId:"2_exakt",langId:"ID_RIBBON_COMPARE",id:"rDocCompare",paneId:"QuickComparePane",method:function(e,t){var n;n=t.active?'<Call Method="ActivateGraphicalCompare"><Activate>false</Activate></Call>':'<Call Method="ActivateGraphicalCompare"><Activate>true</Activate></Call>',e.command.executeXML(n)}},{iconId:"1_text",langId:"ID_RIBBON_3D_MARKUP",id:"rMarkup2D",interactionClass:"Interaction",children:[{iconId:"1_text",langId:"ID_RIBBON_TEXT",id:"rMarkupText2D",interactionClass:"Interaction",interaction:"Markup_Text",method:function(e){}},{iconId:"2_kreis",langId:"ID_RIBBON_CIRCLE__N",id:"rMarkupCircle2D",interactionClass:"Interaction",interaction:"Markup_Circle",method:function(e){}},{iconId:"fixed_markup",langId:"ID_RIBBON_FIXED_TEXT",id:"rMarkupFixed2D",interactionClass:"Interaction",interaction:"Markup_Text_Fixed",method:function(e){}},{iconId:"3_rechteck",langId:"ID_RIBBON_RECTANGLE",id:"rMarkupRect2D",interactionClass:"Interaction",interaction:"Markup_Rectangle",method:function(e){}},{iconId:"4_freihand",langId:"ID_RIBBON_FREEHAND",id:"rMarkupFree2D",interactionClass:"Interaction",interaction:"Markup_Freehand",method:function(e){}}]}]},{iconId:"",langId:"ID_RIBBON_VIEW",id:"rView",children:[{iconId:"3_links",langId:"ID_RIBBON_ALIGNMENT",id:"rAlignment",children:[{iconId:"1_isometrisch",langId:"ID_RIBBON_ISOMETRIC",id:"rIsometric",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Isometric</Alignment></Call>')}},{iconId:"2_oben",langId:"ID_RIBBON_TOP",id:"rTop",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Top</Alignment></Call>')}},{iconId:"3_links",langId:"ID_RIBBON_LEFT",id:"rLeft",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Left</Alignment></Call>')}},{iconId:"4_vorne",langId:"ID_RIBBON_FRONT",id:"rFront",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Front</Alignment></Call>')}},{iconId:"5_unten",langId:"ID_RIBBON_BOTTOM",id:"rBottom",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Bottom</Alignment></Call>')}},{iconId:"6_rechts",langId:"ID_RIBBON_RIGHT",id:"rRight",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Right</Alignment></Call>')}},{iconId:"7_hinten",langId:"ID_RIBBON_BACK",id:"rBack",method:function(e){e.command.executeXML('<Call Method="AlignView"><Alignment>Back</Alignment></Call>')}}]},{iconId:"3_270_Grad",langId:"ID_RIBBON_ROTATE",id:"rViewRotateS",children:[{iconId:"1_90_Grad",langId:"ID_RIBBON_90",id:"rView90",method:function(e){e.command.executeXML('<Call Method="RotatePage"></Call>')}},{iconId:"2_180_Grad",langId:"ID_RIBBON_180",id:"rView180",method:function(e){var t='<Call Method="RotatePage"></Call>';e.command.executeXML(t),e.command.executeXML(t)}},{iconId:"3_270_Grad",langId:"ID_RIBBON_270",id:"rView270",method:function(e){var t='<Call Method="RotatePage"></Call>';e.command.executeXML(t),e.command.executeXML(t),e.command.executeXML(t)}}]},{iconId:"1_anpassen",langId:"ID_RIBBON_ZOOM",id:"rZoomV",children:[{iconId:"1_anpassen",langId:"ID_RIBBON_FIT_ALL",id:"rFittAllV",method:function(e){e.command.executeXML('<Call Method="FitAll"></Call>')}},{iconId:"2_vergroessern",langId:"ID_RIBBON_ZOOM_IN",id:"rZoomInV",method:function(e){e.command.executeXML('<Call Method="ZoomIn"></Call>')}},{iconId:"3_verkleinern",langId:"ID_RIBBON_ZOOM_OUT",id:"rZoomOutV",method:function(e){e.command.executeXML('<Call Method="ZoomOut"></Call>')}},{iconId:"4_focus",langId:"ID_RIBBON_FOCUS",id:"rFocusV",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>Focus</SelectionModifier></Call>')}},{iconId:"focus_and_transition",langId:"ID_RIBBON_FOCUS_TRANSITION",id:"rFocusTransition",method:function(e){e.command.executeXML('<Call Method="Focus">\n                                <Ghost>true</Ghost>\n                                <FadeTime>\n                                  <ZoomOut>500</ZoomOut>\n                                  <Translation>500</Translation>\n                                  <Rotation>1000</Rotation>\n                                  <ZoomIn>1000</ZoomIn>\n                                </FadeTime></Call>')}},{iconId:"set_origin",langId:"ID_RIBBON_SET_ORIGIN",id:"rValidateCoord",method:function(e){e.command.executeXML('<Call Method="SetOrigin"></Call>')}}]},{iconId:"1_koerper",langId:"ID_RIBBON_RENDERING_MODE",id:"rRenderingMode",children:[{iconId:"1_koerper",langId:"ID_RIBBON_SOLID",id:"rSolid",interactionClass:"RenderMode",interaction:"Solid",method:function(e){}},{iconId:"2_drahtmodell",langId:"ID_RIBBON_WIRES",id:"rWires",interactionClass:"RenderMode",interaction:"Wires",method:function(e){}},{iconId:"3_illustration",langId:"ID_RIBBON_ILLUSTRATION",id:"rIllustrationRM",interactionClass:"RenderMode",interaction:"Illustration",method:function(e){}},{iconId:"4_perspektive",langId:"ID_RIBBON_PERSPECTIVE",id:"rPrespectiveRM",interactionClass:"RenderMode",interaction:"Perspective",method:function(e){}}]},{iconId:"3_schatten",langId:"ID_RIBBON_GRAPHIC_EFFECTS",id:"rGraphicEffects",children:[{iconId:"1_kontur",langId:"ID_RIBBON_SILHOUETTE",id:"rSilhouette",interactionClass:"RenderMode",interaction:"Silhouette",method:function(e){}},{iconId:"5_undurchsichtig",langId:"ID_RIBBON_OPAQUE",id:"rOpaque",interactionClass:"RenderMode",interaction:"Opaque",method:function(e){}},{iconId:"3_schatten",langId:"ID_RIBBON_SHADOW",id:"rShadow",interactionClass:"RenderMode",interaction:"Shadow",method:function(e){}},{iconId:"4_material",langId:"ID_RIBBON_MATERIAL",id:"rMaterial",interactionClass:"RenderMode",interaction:"Material",method:function(e){}}]},{iconId:"1_fly_through",langId:"ID_RIBBON_FLYTHROUGH",id:"rFlythrough",interactionClass:"Interaction",interaction:"Flythrough",method:function(e){}},{iconId:"1_raster_darstellen",langId:"ID_RIBBON_SHOW_GRID",id:"rGrid",interactionClass:"Grid",method:function(e,t){t.active=!t.active;var n="<Settings><Scene><Visualization><ShowGrid>"+t.active+"</ShowGrid></Visualization></Scene></Settings>";e.command.executeXML('<Call Method="SetSceneSettings">'+n+"</Call>")}},{iconId:"animation_start",langId:"ID_RIBBON_ANIMATE",id:"rAnimationCat",children:[{iconId:"1_drehen",langId:"ID_RIBBON_SPIN",id:"rRotation",method:function(e,t){var n='<Call Method="ActivateRotation"><Activate>'+!t.active+"</Activate></Call>";t.active=!t.active,e.command.executeXML(n)}},{iconId:"animation_start",langId:"ID_RIBBON_ANIMATE",id:"rAnimationStart",method:function(e,t){var n='<Call Method="SetSceneSettings"><Settings><Scene><General><Animation>'+!t.active;n+="</Animation></General></Scene></Settings></Call>",e.command.executeXML(n)}},{iconId:"animation_settings",langId:"ID_CREATE_ANIMATION",id:"rAnimationSettings",paneId:"AnimationPane",method:function(){}}]}]},{iconId:"",langId:"ID_RIBBON_MEASUREMENT",id:"rMeasurement",children:[{iconId:"1_measurement",langId:"ID_RIBBON_DIMENSION_MODE",id:"rMeasurementModeCat",children:[{iconId:"1_measurement",langId:"ID_RIBBON_MEASUREMENT__N",id:"rMeasurementMode",method:function(e){e.command.executeXML('<Call Method="SetSceneSettings">\n                                    <Settings>\n                                        <Scene><Tools>\n                                        <Dimensioning>\n                                        <Dimensioning Type="bool">false</Dimensioning>\n                                        </Dimensioning>\n                                        </Tools></Scene>\n                                    </Settings>\n                                </Call>')}},{iconId:"2_dimensioning",langId:"ID_RIBBON_DIMENSION",id:"rDimensionMode",method:function(e){e.command.executeXML('<Call Method="SetSceneSettings">\n                                    <Settings>\n                                        <Scene><Tools>\n                                        <Dimensioning>\n                                        <Dimensioning Type="bool">true</Dimensioning>\n                                        </Dimensioning>\n                                        </Tools></Scene>\n                                    </Settings>\n                                </Call>')}}]},{iconId:"1_kreisbogen",langId:"ID_RIBBON_CIRCLE_MODE",id:"rCircleMode",children:[{iconId:"1_kreisbogen",langId:"ID_RIBBON_ARC",id:"rArc",interactionClass:"CircleSelection",method:function(e){var t='<Call Method="SetSceneSettings"><Settings><Scene><Tools><CircleSelection><SelectCircleWith3Points>';t+="false",t+="</SelectCircleWith3Points></CircleSelection></Tools></Scene></Settings></Call>",e.command.executeXML(t)}},{iconId:"2_3_punkte",langId:"ID_RIBBON_3_POINTS",id:"rThreePoint",interactionClass:"CircleSelection",method:function(e){var t='<Call Method="SetSceneSettings"><Settings><Scene><Tools><CircleSelection><SelectCircleWith3Points>';t+="true",t+="</SelectCircleWith3Points></CircleSelection></Tools></Scene></Settings></Call>",e.command.executeXML(t)}}]},{iconId:"1_punkt",langId:"ID_RIBBON_COORDINATE",id:"rCoordinate",interactionClass:"Interaction",interaction:"Measurement_PointCoordinate",method:function(e){}},{iconId:"1_laenge",langId:"ID_RIBBON_LENGTH",id:"rLengthGroup",children:[{iconId:"1_laenge",langId:"ID_RIBBON_LENGTH",id:"rLength",interactionClass:"Interaction",interaction:"Measurement_EdgeLength",method:function(e){}},{iconId:"2_kumulierte_laenge",langId:"ID_RIBBON_ACCUMULATED_LENGTH",id:"rAccLength",interactionClass:"Interaction",interaction:"Measurement_EdgeLengthAccumulated",method:function(e){}}]},{iconId:"1_1_radius",langId:"ID_RIBBON_CIRCLE",id:"rMeasurementCircle",interactionClass:"Interaction",children:[{iconId:"1_1_radius",langId:"ID_RIBBON_RADIUS",id:"rRadius",interactionClass:"Interaction",interaction:"Measurement_CircleRadius",method:function(e){}},{iconId:"1_2_durchmesser",langId:"ID_RIBBON_DIAMETER",id:"rDiameter",interactionClass:"Interaction",interaction:"Measurement_CircleDiameter",method:function(e){}},{iconId:"1_3_umfang",langId:"ID_RIBBON_PERIMETER",id:"rPerimeter",interactionClass:"Interaction",interaction:"Measurement_CirclePerimeter",method:function(e){}},{iconId:"1_4_mittelpunkt",langId:"ID_RIBBON_CENTER",id:"rMeasureCircleCenter",interactionClass:"Interaction",interaction:"Measurement_CircleCenter",method:function(e){}},{iconId:"1_5_flaeche",langId:"ID_RIBBON_AREA",id:"rMeasureCircleArea",interactionClass:"Interaction",interaction:"Measurement_CircleArea",method:function(e){}}]},{iconId:"1_1_punkt_zu_punkt",langId:"ID_RIBBON_DISTANCE",id:"rMeasureDist",interactionClass:"Interaction",children:[{iconId:"1_1_punkt_zu_punkt",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_POINTS",id:"rMeasurePtoP",interactionClass:"Interaction",interaction:"Measurement_DistancePointToPoint",method:function(e){}},{iconId:"1_2_punkt_zu_kante",langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_EDGE",id:"rMeasurePtoE",interactionClass:"Interaction",interaction:"Measurement_DistancePointToEdge",method:function(e){}},{iconId:"1_3_punkt_zu_kreisachse",langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_CIRCLE_AXIS",id:"rMeasurePtoA",interactionClass:"Interaction",interaction:"Measurement_DistancePointToAxis",method:function(e){}},{iconId:"1_4_punkt_zu_koerper",langId:"ID_RIBBON_DISTANCE_BETWEEN_POINT_AND_SOLID",id:"rMeasurePtoS",interactionClass:"Interaction",interaction:"Measurement_DistancePointToSolid",method:function(e){}},{iconId:"1_5_kante_zu_kante",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_EDGES",id:"rMeasureEtoE",interactionClass:"Interaction",interaction:"Measurement_DistanceEdgeToEdge",method:function(e){}},{iconId:"1_6_kante_zu_oberflaeche",langId:"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_FACE",id:"rMeasureEtoF",interactionClass:"Interaction",interaction:"Measurement_DistanceEdgeToFace",method:function(e){}},{iconId:"1_7_kante_zu_koerper",langId:"ID_RIBBON_DISTANCE_BETWEEN_EDGE_AND_SOLID",id:"rMeasureEtoS",interactionClass:"Interaction",interaction:"Measurement_DistanceEdgeToSolid",method:function(e){}},{iconId:"1_8_kreisachse_zu_kreisachse",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_AXES",id:"rMeasureAtoA",interactionClass:"Interaction",interaction:"Measurement_DistanceAxisToAxis",method:function(e){}},{iconId:"1_8_kreisachse_zu_kreisachse",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_CIRCLE_CENTERS",id:"rMeasureCCtoCC",interactionClass:"Interaction",interaction:"Measurement_DistanceCenterToCenter",method:function(e){}},{iconId:"1_9_kreismittelpunkt_zu_kante",langId:"ID_RIBBON_DISTANCE_BETWEEN_CIRCLE_AXIS_AND_EDGE",id:"rMeasureAtoE",interactionClass:"Interaction",interaction:"Measurement_DistanceAxisToEdge",method:function(e){}},{iconId:"1_10_oberflaeche_zu_oberflaeche",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_FACES",id:"rMeasureFtoF",interactionClass:"Interaction",interaction:"Measurement_DistanceFaceToFace",method:function(e){}},{iconId:"1_11_oberflaeche_zu_mittelpunkt",langId:"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_CENTER",id:"rMeasureFtoC",interactionClass:"Interaction",interaction:"Measurement_DistanceFaceToCenter",method:function(e){}},{iconId:"1_12_oberflaeche_zu_koerper",langId:"ID_RIBBON_DISTANCE_BETWEEN_FACE_AND_SOLID",id:"rMeasureFtoC",interactionClass:"Interaction",interaction:"Measurement_DistanceFaceToSolid",method:function(e){}},{iconId:"1_13_koerper_zu_koerper",langId:"ID_RIBBON_DISTANCE_BETWEEN_TWO_SOLIDS",id:"rMeasureStoS",interactionClass:"Interaction",interaction:"Measurement_DistanceSolidToSolid",method:function(e){}},{iconId:"1_14_cylinder_center_to_face",langId:"ID_RIBBON_DISTANCE_BETWEEN_PIPE_CENTER_AND_FACE",id:"rMeasureCCtoF",interactionClass:"Interaction",interaction:"Measurement_DistanceCylinderCenterToFace",method:function(e){}}]},{iconId:"1_1_kreisachse_zu_kreisachse",langId:"ID_RIBBON_ANGLE",id:"rMeasurementAngle",interactionClass:"Interaction",children:[{iconId:"1_1_kreisachse_zu_kreisachse",langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_AXES",id:"rMeasureAngleAtoA",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenTwoAxes",method:function(e){}},{iconId:"1_2_kreisachse_zu_kante",langId:"ID_RIBBON_ANGLE_BETWEEN_AXIS_AND_EDGE",id:"rMeasureAngleAtoE",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenAxisEdge",method:function(e){}},{iconId:"1_3_linie_zu_linie",langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_LINES",id:"rMeasureAngleLtoL",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenTwoLines",method:function(e){}},{iconId:"1_3_linie_zu_linie",langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_PROJECTED_LINES",id:"rMeasureAngleProjLineToLine",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenTwoProjectedLines",method:function(e){}},{iconId:"1_4_ebene_zu_ebene",langId:"ID_RIBBON_ANGLE_BETWEEN_TWO_PLANES",id:"rMeasureAnglePtP",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenTwoPlanes",method:function(e){}},{iconId:"1_5_ebene_zu_richtung",langId:"ID_RIBBON_ANGLE_BETWEEN_PLANE_AND_DIRECTION",id:"rMeasureAnglePtoD",interactionClass:"Interaction",interaction:"Measurement_AngleBetweenPlaneDirection",method:function(e){}},{iconId:"1_6_winkel_aus_drei_punkten",langId:"ID_RIBBON_ANGLE_DEFINED_BY_THREE_POINTS",id:"rMeasureAngleThreePoint",interactionClass:"Interaction",interaction:"Measurement_AngleFromThreePoints",method:function(e){}}]},{iconId:"measure_face",langId:"ID_RIBBON_FACE",id:"rMeasureFaceArea",interactionClass:"Interaction",interaction:"Measurement_FaceArea",method:function(e){}},{iconId:"1_wandstaerke",langId:"ID_RIBBON_WALL_THICKNESS",id:"rMeasureWallthickness",children:[{iconId:"ray_based",langId:"ID_WALLTHICKNESS_COMPUTATION_MODE_RAY",id:"rMeasureWallthicknessRay",interactionClass:"Interaction",interaction:"Measurement_WallThickness_RayBased",method:function(e){}},{iconId:"rolling_ball",langId:"ID_WALLTHICKNESS_COMPUTATION_MODE_ROLLING_BALL",id:"rMeasureWallthicknessRollingBall",interactionClass:"Interaction",interaction:"Measurement_WallThickness_RollingBall",method:function(e){}}]},{iconId:"1_1_welt",langId:"ID_RIBBON_BOUNDING_BOX",id:"rMeasureBB",children:[{iconId:"1_1_welt",langId:"ID_RIBBON_WORLD",id:"rMeasureBBWorld",interactionClass:"Interaction",interaction:"Measurement_BoundingBoxWorld",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeWorldBoundingBox</SelectionModifier></Call>')}},{iconId:"1_2_bauteil",langId:"ID_RIBBON_INDIVIDUAL",id:"rMeasureBBPart",interactionClass:"Interaction",interaction:"Measurement_BoundingBoxPart",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputePartBoundingBox</SelectionModifier></Call>')}},{iconId:"bbox_min",langId:"ID_RIBBON_PRECISE",id:"rMeasureMin",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeMinimalBoundingBoxPrecise</SelectionModifier></Call>')}},{iconId:"bbox_min_quick",langId:"ID_RIBBON_QUICK",id:"rMeasureMinQuick",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeMinimalBoundingBoxFast</SelectionModifier></Call>')}}]},{iconId:"2_bohrung",langId:"ID_RIBBON_DRILLHOLE",id:"rMeasureDrillhole",interactionClass:"Interaction",interaction:"Measurement_CircleForDrillhole",method:function(e){}}]},{iconId:"",langId:"ID_RIBBON_ANALYZE",id:"rAnalyze",children:[{iconId:"section_category",langId:"ID_RIBBON_SECTION",id:"rCut",children:[{iconId:"1_1_schnittebene_aus_punkt",langId:"ID_RIBBON_CUTTING_PLANE_FROM_POINT_NORMAL",id:"rCutPoint",interactionClass:"Interaction",interaction:"Section_FromPointNormal",method:function(e){}},{iconId:"1_2_schnittebene",langId:"ID_RIBBON_CUTTING_PLANE",id:"rCutPlane",interactionClass:"Interaction",interaction:"Section",method:function(e){}},{iconId:"section_three_points",langId:"ID_RIBBON_CUTTING_PLANE_FROM_3_POINTS",id:"rCutThreePoints",interactionClass:"Interaction",interaction:"Section_From3Points",method:function(e){}},{iconId:"section_three_circle_centers",langId:"ID_RIBBON_CUTTING_PLANE_FROM_3_CIRCLE_CENTERS",id:"rCutThreeCircleCenter",interactionClass:"Interaction",interaction:"Section_From3CircleCenters",method:function(e){}}]},{iconId:"1_schnell",langId:"ID_RIBBON_COMPARE_MODEL",id:"rQuickCompare",paneId:"QuickComparePane",method:function(e,t){var n;n=t.active?'<Call Method="ActivateGraphicalCompare"><Activate>false</Activate></Call>':'<Call Method="ActivateGraphicalCompare"><Activate>true</Activate></Call>',e.command.executeXML(n)}},{iconId:"2_exakt",langId:"ID_RIBBON_BREP_PART",id:"rExactCompare",paneId:"ExactComparePane",method:function(e){e.command.executeXML('<Call Method="ComputeBrepCompare"></Call>')}},{iconId:"1_entformungsschraegen_analyse",langId:"ID_RIBBON_DRAFT_ANGLE",id:"rDraftAngle",interactionClass:"Interaction",interaction:"DraftAngle",method:function(e){}},{iconId:"1_projizierte_flaeche",langId:"ID_RIBBON_PROJECTED_AREA",id:"rProjectedArea",paneId:"ProjectedAreaPane",method:function(e){}},{iconId:"clash",langId:"ID_RIBBON_CLASH",id:"rClash",paneId:"ClashPane",method:function(e){}},{iconId:"clearance",langId:"ID_BAND_ANALYSIS_WND",id:"rBandAnalysis",paneId:"BandAnalysisPane",method:function(e){}},{iconId:"1_wandstaerke",langId:"ID_RIBBON_WALL_THICKNESS",id:"rHeatMap",paneId:"WallThicknessPane",method:function(e){}},{iconId:"1_physikalische_eigenschaften",langId:"ID_PHYSICAL_PROPERTIES",id:"rPhysProps",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputePhysicalProperties</SelectionModifier></Call>')}},{iconId:"3_neutrale_faser",langId:"ID_RIBBON_NEUTRAL_AXIS",id:"rNeutralAxis",paneId:"NeutralAxisPane",method:function(e){}},{iconId:"2_bohrung",langId:"ID_DRILLHOLE",id:"rDrillhole",paneId:"DrillholePane",method:function(e){}},{iconId:"split",langId:"ID_RIBBON_SPLIT",id:"rSplit",paneId:"SplitPane",method:function(e,t){var n;n=t.active?'<Call Method="ActivateInteraction"><Interaction>Deactivate_Split</Interaction></Call>':'<Call Method="ActivateInteraction"><Interaction>Split_SelectDirection</Interaction></Call>',e.command.executeXML(n)}}]},{iconId:"",langId:"ID_RIBBON_TRANSFORMATION",id:"rTransformation",children:[{iconId:"1_freies_verschieben",langId:"ID_RIBBON_FREE_DRAG",id:"rFreeDrag",interactionClass:"Interaction",interaction:"Transformation_FreeDrag",method:function(e){}},{iconId:"2_verschieben",langId:"ID_RIBBON_MOVE",id:"rTransMove",interactionClass:"Interaction",interaction:"Transformation_Move",method:function(e){}},{iconId:"3_drehen",langId:"ID_RIBBON_ROTATE",id:"rTransRotate",interactionClass:"Interaction",interaction:"Transformation_Rotate",method:function(e){}},{iconId:"scale",langId:"ID_RIBBON_SCALE",id:"rTransScale",interactionClass:"Interaction",interaction:"Transformation_Scale",method:function(e){}},{iconId:"6_position_zuruecksetzen",langId:"ID_RIBBON_RESET_TRANSFORMATION",id:"rTransReset",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ResetTransformation</SelectionModifier></Call>')}},{iconId:"4_spiegeln",langId:"ID_RIBBON_MIRROR",id:"rMirror",paneId:"MirrorPane",method:function(e){}},{iconId:"5_explodieren",langId:"ID_RIBBON_EXPLODE",id:"rExplode",paneId:"ExplodePane",method:function(e){}},{iconId:"activate_axis",langId:"ID_RIBBON_BOUNDARY_CONDITION",id:"rBoundCond",children:[{iconId:"activate_axis",langId:"ID_RIBBON_ACTIVATE",id:"rBoundCondAxis",interactionClass:"Interaction",interaction:"BoundaryCondition_Axis",method:function(e){}},{iconId:"condition_axis_by_circle",langId:"ID_RIBBON_BOUNDARY_CONDITION_BY_CIRCLE",id:"rBoundCondCircle",interactionClass:"Interaction",interaction:"BoundaryCondition_AxisByCircle",method:function(e){}},{iconId:"condition_axis_by_line",langId:"ID_RIBBON_BOUNDARY_CONDITION_BY_LINE",id:"rBoundCondLine",interactionClass:"Interaction",interaction:"BoundaryCondition_AxisByLine",method:function(e){}}]},{iconId:"3_pan",langId:"ID_RIBBON_ALIGNING_MOVE",id:"rAlignMove",children:[{iconId:"align_move_point_point",langId:"ID_RIBBON_POINT_TO_POINT",id:"rAlignMovePoint",interactionClass:"Interaction",interaction:"Transformation_Align_Move_PointToPoint",method:function(e){}},{iconId:"align_move_plane_plane",langId:"ID_RIBBON_PLANE_TO_PLANE",id:"rAlignMovePlane",interactionClass:"Interaction",interaction:"Transformation_Align_Move_PlaneToPlane",method:function(e){}},{iconId:"align_move_center_center",langId:"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER",id:"rAlignMoveCenter",interactionClass:"Interaction",interaction:"Transformation_Align_Move_CircleCenterToCircleCenter",method:function(e){}}]},{iconId:"3_270_Grad",langId:"ID_RIBBON_ALIGNING_ROTATE",id:"rAlignRotate",children:[{iconId:"1_normal_zu_normal",langId:"ID_RIBBON_NORMAL_TO_NORMAL",id:"rAlignRotateNormal",interactionClass:"Interaction",interaction:"Transformation_Align_Rotate_NormalToNormal",method:function(e){}},{iconId:"2_punkt_zu_punkt",langId:"ID_RIBBON_POINT_TO_POINT",id:"rAlignRotatePoint",interactionClass:"Interaction",interaction:"Transformation_Align_Rotate_PointToPoint",method:function(e){}},{iconId:"3_kreisachse_zu_kreisachse",langId:"ID_RIBBON_CIRCLE_CENTER_TO_CIRCLE_CENTER",id:"rAlignRotateCirecleCenter",interactionClass:"Interaction",interaction:"Transformation_Align_Rotate_CircleCenterToCircleCenter",method:function(e){}}]},{iconId:"4_move_and_rotate",langId:"ID_RIBBON_ALIGNING_MOVE_ROTATE",id:"rAlignmoveRotate",children:[{iconId:"1_koordinatensystem_zu_koordinatensystem",langId:"ID_RIBBON_COORDINATE_SYSTEM_TO_COORDINATE_SYSTEM",id:"rAlignmoveRotateCoord",interactionClass:"Interaction",interaction:"Transformation_Align_CoordinateSystemToCoordinateSystem",method:function(e){}},{iconId:"2_kreisachse_zu_kreisachse",langId:"ID_RIBBON_CIRCLE_AXIS_TO_CIRCLE_AXIS",id:"rAlignmoveRotateCircleAxis",interactionClass:"Interaction",interaction:"Transformation_Align_CircleAxisToCircleAxis",method:function(e){}},{iconId:"3_oberflaeche_zu_oberflaeche",langId:"ID_RIBBON_PLANE_TO_PLANE",id:"rAlignmoveRotatePlane",interactionClass:"Interaction",interaction:"Transformation_Align_PlaneToPlane",method:function(e){}}]}]},{iconId:"",langId:"ID_RIBBON_TOOLS",id:"rTools",children:[{iconId:"1_filter",langId:"ID_RIBBON_SEARCH",id:"rFilter",paneId:"FilterPane",method:function(e){}},{iconId:"number_of_triangles",langId:"ID_RIBBON_GEOMETRY_TOOLS",id:"rGeomTools",paneId:"GeometryToolsPane",method:function(e){}},{iconId:"distortion",langId:"ID_RIBBON_DISTORT",id:"rDistortion",paneId:"DistortionPane",method:function(e){}},{iconId:"visibility_test",langId:"ID_VISIBILITY_TEST",id:"rVisTest",paneId:"VisibilityTestPane",method:function(e){}}]},{iconId:"",langId:"ID_RIBBON_MODEL",id:"rModel",children:[{iconId:"1_retessellieren",langId:"ID_RIBBON_RETESSELATE",id:"rRetesselate",children:[{iconId:"extra_low_tesselation",langId:"ID_RIBBON_EXTRALOW",id:"rRetessExLow",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>ExtraLow</Level></Call>')}},{iconId:"low_tesselation",langId:"ID_RIBBON_LOW",id:"rRetessLow",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>Low</Level></Call>')}},{iconId:"medium_tesselation",langId:"ID_RIBBON_MEDIUM",id:"rRetessMedium",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>Medium</Level></Call>')}},{iconId:"high_tesselation",langId:"ID_RIBBON_HIGH",id:"rRetessHigh",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>High</Level></Call>')}},{iconId:"extra_high_tesselation",langId:"ID_RIBBON_EXTRAHIGH",id:"rRetessExHigh",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>ExtraHigh</Level></Call>')}},{iconId:"custom_tesselation",langId:"ID_RIBBON_USER_DEFINED",id:"rRetessUserDef",method:function(e){e.command.executeXML('<Call Method="Retesselate"><Level>Userdefined</Level></Call>')}}]},{iconId:"coordinate_system",langId:"ID_RIBBON_COORDINATE_SYSTEM",id:"rCoordSys",children:[{iconId:"1_kreismittelpunkt",langId:"ID_RIBBON_BY_CIRCLE_CENTER",id:"rCoordSysCC",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByCircleCenter",method:function(e){}},{iconId:"1_kreisachse",langId:"ID_RIBBON_BY_CYLINDER_AXIS",id:"rCoordSysCylAx",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByCylinderAxis",method:function(e){}},{iconId:"2_3_ebenen_im_rechten_winkel",langId:"ID_RIBBON_BY_3_PLANES",id:"rCoordSysThreePlanes",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemBy3Planes",method:function(e){}},{iconId:"3_3_punkte_im_rechten_winkel",langId:"ID_RIBBON_BY_3_POINTS",id:"rCoordSysThreepoints",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemBy3Points",method:function(e){}},{iconId:"4_senkrechte_linien",langId:"ID_RIBBON_BY_EDGES",id:"rCoordSysEdges",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByLines",method:function(e){}},{iconId:"5_normale",langId:"ID_RIBBON_BY_NORMAL",id:"rCoordSysNormal",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByNormal",method:function(e){}},{iconId:"6_linie_und_punkt",langId:"ID_RIBBON_BY_EDGE_AND_POINT",id:"rCoordSysEandP",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByLineAndPoint",method:function(e){}},{iconId:"7_begrenzungsrahmen",langId:"ID_RIBBON_BY_BOUNDING_BOX",id:"rCoordSysBB",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemByBoundingBox",method:function(e){}},{iconId:"coordinate_system_world",langId:"ID_RIBBON_BY_CURRENT_GLOBAL",id:"rCoordSysCurrGlobal",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemGlobal",method:function(e){}},{iconId:"coordinate_system_part",langId:"ID_RIBBON_BY_SELECTED_PART",id:"rCoordSysSelectedPart",interactionClass:"Interaction",interaction:"EntityCreation_CoordinateSystemPart",method:function(e){}},{iconId:"8_aktivieren",langId:"ID_RIBBON_ACTIVATE_COORDINATESYSTEM",id:"rCoordSysActivate",method:function(e){e.commant.executeXML('<Call Method="ActivateSelectedCoordinateSystem"></Call>')}},{iconId:"9_zuruecksetzen",langId:"ID_RESET_COORDINATESYSTEM",id:"rCoordSysReset",method:function(e){e.commant.executeXML('<Call Method="ResetCoordinateSystem"></Call>')}}]},{iconId:"1_kreismittelpunkt",langId:"ID_RIBBON_CIRCLE_CENTER",id:"rCreatePointCC",interactionClass:"Interaction",interaction:"EntityCreation_PointByCircleCenter",method:function(e){}},{iconId:"2_punkt",langId:"ID_RIBBON_POINT",id:"rCreatePointPos",interactionClass:"Interaction",interaction:"EntityCreation_PointByPickPosition",method:function(e){}},{iconId:"1_kreisachse",langId:"ID_RIBBON_CIRCLE_AXIS",id:"rCreateWireCC",interactionClass:"Interaction",interaction:"EntityCreation_WireByCircleCenter",method:function(e){}},{iconId:"2_punkt_zu_punkt",langId:"ID_RIBBON_POINT_TO_POINT",id:"rCreateWirePtoP",interactionClass:"Interaction",interaction:"EntityCreation_WirePointToPoint",method:function(e){}},{iconId:"1_flaeche_extrahieren",langId:"ID_RIBBON_EXTRACT_FACES",id:"rExtractFaces",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ExtractFaces</SelectionModifier></Call>')}},{iconId:"merge_objects",langId:"ID_RIBBON_MERGE_OBJECTS",id:"rMergeObjects",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>MergeObjects</SelectionModifier></Call>')}},{iconId:"merge_objects_rec",langId:"ID_RIBBON_MERGE_OBJECTS_HIERARCHICAL",id:"rMergeObjectsRec",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>MergeObjectsHierarchically</SelectionModifier></Call>')}},{iconId:"2_huellgeometrie",langId:"ID_RIBBON_CONVEX_HULL",id:"rConvexHull",method:function(e){e.command.executeXML('<Call Method="ModifySelection"><SelectionModifier>ComputeHullGeometry</SelectionModifier></Call>')}}]},{iconId:"",langId:"ID_RIBBON_TECH_DOC",id:"rTechDoc",children:[{iconId:"1_text",langId:"ID_RIBBON_3D_MARKUP",id:"rMarkup",interactionClass:"Interaction",children:[{iconId:"1_text",langId:"ID_RIBBON_TEXT",id:"rMarkupText",interactionClass:"Interaction",interaction:"Markup_Text",method:function(e){}},{iconId:"2_kreis",langId:"ID_RIBBON_CIRCLE__N",id:"rMarkupCircle",interactionClass:"Interaction",interaction:"Markup_Circle",method:function(e){}},{iconId:"fixed_markup",langId:"ID_RIBBON_FIXED_TEXT",id:"rMarkupFixed",interactionClass:"Interaction",interaction:"Markup_Text_Fixed",method:function(e){}},{iconId:"3_rechteck",langId:"ID_RIBBON_RECTANGLE",id:"rMarkupRect",interactionClass:"Interaction",interaction:"Markup_Rectangle",method:function(e){}},{iconId:"4_freihand",langId:"ID_RIBBON_FREEHAND",id:"rMarkupFree",interactionClass:"Interaction",interaction:"Markup_Freehand",method:function(e){}}]},{iconId:"1_BOM",langId:"ID_RIBBON_BOM",id:"rBomPane",paneId:"BOMPane",method:function(e){}},{iconId:"callout_mode_square",langId:"ID_RIBBON_CALLOUTS_ALIGNMENT_PANEL",id:"rCalloutsAlignment",children:[{iconId:"callout_mode_square",langId:"ID_RIBBON_CALLOUTS_ALIGN_RECTANGLE",id:"rCalloutAlignRect",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Rectangle</Alignment></Call>')}},{iconId:"callout_mode_circle",langId:"ID_RIBBON_CALLOUTS_ALIGN_CIRCLE",id:"rCalloutAlignCircle",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Circle</Alignment></Call>')}},{iconId:"callout_mode_top_bottom",langId:"ID_RIBBON_CALLOUTS_ALIGN_TOP_AND_BOTTOM",id:"rCalloutAlignTopBottom",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>TopBottom</Alignment></Call>')}},{iconId:"callout_mode_left_right",langId:"ID_RIBBON_CALLOUTS_ALIGN_LEFT_AND_RIGHT",id:"rCalloutLeftRight",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>LeftRight</Alignment></Call>')}},{iconId:"callout_mode_align_bottom",langId:"ID_RIBBON_CALLOUTS_ALIGN_BOTTOM",id:"rCalloutBottom",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Bottom</Alignment></Call>')}},{iconId:"callout_mode_align_top",langId:"ID_RIBBON_CALLOUTS_ALIGN_TOP",id:"rCalloutTop",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Top</Alignment></Call>')}},{iconId:"callout_mode_align_left",langId:"ID_RIBBON_CALLOUTS_ALIGN_LEFT",id:"rCalloutLeft",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Left</Alignment></Call>')}},{iconId:"callout_mode_align_right",langId:"ID_RIBBON_CALLOUTS_ALIGN_RIGHT",id:"rCalloutRight",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>Right</Alignment></Call>')}},{iconId:"callout_mode_near_to_solid",langId:"ID_RIBBON_CALLOUTS_ALIGN_NEAR_TO_SOLID",id:"rCalloutNearToSolid",method:function(e){e.command.executeXML('<Call Method="SetCalloutAlignment"><Alignment>NearToSolid</Alignment></Call>')}}]},{iconId:"callout_auto_alignment",langId:"ID_RIBBON_CALLOUTS_AUTO_ALIGNMENT",id:"rCalloutAutoAlign",method:function(e,t){var n;t.active?(n='<Call Method="DisableAutoCalloutAlignment"></Call>',e.command.executeXML(n)):(n='<Call Method="EnableAutoCalloutAlignment"></Call>',e.command.executeXML(n),n='<Call Method="AlignCallouts"></Call>',e.command.executeXML(n)),t.active=!t.active}},{iconId:"create_callouts",langId:"ID_RIBBON_CREATE",id:"rCalloutCreate",interactionClass:"Interaction",interaction:"Callout_Creation",method:function(e,t){}},{iconId:"callout_group",langId:"ID_RIBBON_CALLOUTS_FOR_SELECTION",id:"rCalloutGroup",method:function(e,t){e.command.executeXML('<Call Method="CreateCalloutGroup"></Call>')}},{iconId:"callout",langId:"ID_RIBBON_SETTINGS",id:"rCalloutPane",paneId:"CalloutPane",method:function(e){}},{iconId:"callout_show_all",langId:"ID_RIBBON_CALLOUTS_SHOW_ALL",id:"rCalloutShowAll",method:function(e){e.command.executeXML('<Call Method="ShowAllCallouts"></Call>')}},{iconId:"callout_lock",langId:"ID_RIBBON_LOCK_CALLOUTS",id:"rCalloutLock",method:function(e,t){e.command.executeXML('<Call Method="LockCallouts"></Call>')}},{iconId:"callout_unlock",langId:"ID_RIBBON_UNLOCK_CALLOUTS",id:"rCalloutUnlock",method:function(e,t){e.command.executeXML('<Call Method="UnlockCallouts"></Call>')}},{iconId:"select_associated_solid",langId:"ID_RIBBON_CALLOUTS_SELECT_ASSOCIATED_NODES",interactionClass:"SelectAssociatedNodes",id:"rCalloutSelectWithNodes",method:function(e,t){var n='<Call Method="SetSceneSettings"><Settings><Scene><Tools><Callout><SelectAssociatedNodes>';n+=!t.active,n+="</SelectAssociatedNodes></Callout></Tools></Scene></Settings></Call>",e.command.executeXML(n),t.active=!t.active}},{iconId:"callout_multiple_anchor",langId:"ID_RIBBON_CALLOUTS_MULTIPLE_CONNECTIONS",id:"rCalloutMultiAnchor",interactionClass:"MultiAnchorGroups",method:function(e,t){var n='<Call Method="SetSceneSettings"><Settings><Scene><Tools><Callout><MultiAnchorGroups>';n+=!t.active,n+="</MultiAnchorGroups></Callout></Tools></Scene></Settings></Call>",e.command.executeXML(n),t.active=!t.active}},{iconId:"move_anchor",langId:"ID_RIBBON_EDIT",id:"rCalloutMove",interactionClass:"Interaction",interaction:"Callout_Modification",method:function(e,t){}},{iconId:"delete_anchor",langId:"ID_RIBBON_DELETE",id:"rCalloutDelete",interactionClass:"Interaction",interaction:"Callout_Deletion",method:function(e,t){}},{iconId:"5_sichtbarkeit_umkehren",langId:"ID_RIBBON_INVERT_VISIBILITY",id:"rCalloutAnchorInvertVis",interactionClass:"Interaction",interaction:"Callout_Visibility",method:function(e,t){}},{iconId:"callout_select_visible",langId:"ID_RIBBON_CALLOUTS_SELECT_VISIBLE",id:"rCalloutSelectVis",method:function(e){e.command.executeXML('<Call Method="SelectVisibleCallouts"></Call>')}},{iconId:"callout_delete",langId:"ID_RIBBON_CALLOUTS_DELETE_VISIBLE",id:"rCalloutDelVis",method:function(e){e.command.executeXML('<Call Method="DeleteVisibleCallouts"></Call>')}},{iconId:"callout_hide",langId:"ID_RIBBON_CALLOUTS_HIDE_VISIBLE",id:"rCalloutHideVis",method:function(e){e.command.executeXML('<Call Method="HideVisibleCallouts"></Call>')}}]}]}return e}();t.ribbonConf=new i}]);
//# sourceMappingURL=webviewer-mobile-bundle.js.map